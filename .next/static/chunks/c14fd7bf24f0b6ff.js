(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,187253,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(618566),l=e.i(846932),r=e.i(88653),o=e.i(343432),n=e.i(475254);let i=(0,n.default)("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),c=(0,n.default)("phone-outgoing",[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var d=e.i(503116),m=e.i(595468),x=e.i(87316),h=e.i(16715);let g=(0,n.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),p=(0,n.default)("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var u=e.i(686311),b=e.i(63209),y=e.i(373375),f=e.i(463059),j=e.i(37727),w=e.i(284614),N=e.i(607486),v=e.i(263488),S=e.i(356909),_=e.i(531278);let C=[{value:"outgoing",label:"à¹‚à¸—à¸£à¸­à¸­à¸",color:"bg-red-500"},{value:"received",label:"à¸£à¸±à¸šà¸ªà¸²à¸¢",color:"bg-yellow-500"},{value:"waiting",label:"à¸£à¸­à¸ªà¸²à¸¢",color:"bg-cyan-500"},{value:"sale",label:"SALE à¸•à¸´à¸”à¸•à¹ˆà¸­",color:"bg-green-500"}],k=({isOpen:e,onClose:s,onSubmit:n,initialData:i,mode:c})=>{let[d,m]=(0,a.useState)(i||{name:"",company:"",phone:"",email:"",status:"waiting",notes:""}),[x,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)({}),b=e=>{let{name:t,value:a}=e.target;m(e=>({...e,[t]:a})),g[t]&&p(e=>({...e,[t]:void 0}))},y=async e=>{let t;if(e.preventDefault(),t={},d.name.trim()||(t.name="à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"),d.phone.trim()||(t.phone="à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(t.email="à¸£à¸¹à¸›à¹à¸šà¸šà¸­à¸µà¹€à¸¡à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡"):t.email="à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸­à¸µà¹€à¸¡à¸¥",p(t),0===Object.keys(t).length){h(!0);try{await n(d),s()}catch(e){console.error("Error submitting form:",e)}finally{h(!1)}}};return(0,t.jsx)(r.AnimatePresence,{children:e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex items-center justify-between rounded-t-2xl",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"create"===c?"à¹€à¸žà¸´à¹ˆà¸¡à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸«à¸¡à¹ˆ":"à¹à¸à¹‰à¹„à¸‚à¸£à¸²à¸¢à¸à¸²à¸£"}),(0,t.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,t.jsx)(j.X,{className:"w-6 h-6"})})]}),(0,t.jsxs)("form",{onSubmit:y,className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(w.User,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:b,className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${g.name?"border-red-500":"border-gray-300"}`,placeholder:"à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"})]}),g.name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"company",className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸šà¸£à¸´à¸©à¸±à¸—/à¸­à¸‡à¸„à¹Œà¸à¸£"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(N.Building2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",id:"company",name:"company",value:d.company,onChange:b,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none",placeholder:"à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸šà¸£à¸´à¸©à¸±à¸—"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:b,className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${g.phone?"border-red-500":"border-gray-300"}`,placeholder:"08X-XXX-XXXX"})]}),g.phone&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.phone})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¸­à¸µà¹€à¸¡à¸¥ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:d.email,onChange:b,className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${g.email?"border-red-500":"border-gray-300"}`,placeholder:"example@email.com"})]}),g.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:g.email})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["à¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:C.map(e=>(0,t.jsx)(l.motion.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>m(t=>({...t,status:e.value})),className:`p-4 rounded-xl border-2 transition-all ${d.status===e.value?`${e.color} text-white border-transparent shadow-lg`:"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:(0,t.jsx)("span",{className:"font-semibold",children:e.label})},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"notes",className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.MessageSquare,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),(0,t.jsx)("textarea",{id:"notes",name:"notes",value:d.notes,onChange:b,rows:4,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none resize-none",placeholder:"à¹€à¸žà¸´à¹ˆà¸¡à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸«à¸£à¸·à¸­à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡..."})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(l.motion.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:s,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,t.jsx)(l.motion.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:x,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Loader2,{className:"w-5 h-5 animate-spin"}),"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Save,{className:"w-5 h-5"}),"à¸šà¸±à¸™à¸—à¸¶à¸"]})})]})]})]})})]})})};var $=e.i(247167);let I=$.default.env.NEXT_PUBLIC_PYTHON_API_URL||"https://believable-ambition-production.up.railway.app";async function A(e){try{let t=e?`${I}/api/call-matrix?date=${e}`:`${I}/api/call-matrix`,a=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(e){throw e}}async function P(e){try{let t=await fetch(`${I}/api/call-matrix/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(e){throw e}}let T=$.default.env.NEXT_PUBLIC_PYTHON_API_URL||"https://believable-ambition-production.up.railway.app";async function L(e,t=!0,a=!1){try{let s=new URLSearchParams;e&&s.append("date",e),t&&s.append("count","true"),a&&s.append("today","true");let l=`${T}/api/film-data-contacts?${s.toString()}`,r=await fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(e){throw console.error("Error fetching film data contacts:",e),e}}function E(e){let t={},a={},s={à¸ªà¸²:"101",à¸žà¸±à¸”à¸Šà¸²:"102",à¸•à¸±à¹‰à¸‡à¹‚à¸­à¹‹:"103",Test:"104",à¹‚à¸­à¹‹:"105",à¹€à¸•à¹‰:"106",à¹€à¸­à¹‰:"107",à¸­à¹‰à¸­à¸¡:"108"};return e.data.forEach(e=>{let l=e.contact_person||e["à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"]||"",r=e.consult_date||e["à¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸™à¸±à¸” consult"]||"",o=e.surgery_appointment_date||e["à¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸™à¸±à¸”à¸œà¹ˆà¸²à¸•à¸±à¸”"]||"",n=l.trim(),i=s[n];if(!i){let e=n.match(/^(\d{3})/);if(!e)return;let s=e[1];r&&""!==r.trim()&&(t[s]=(t[s]||0)+1),o&&""!==o.trim()&&(a[s]=(a[s]||0)+1);return}r&&""!==r.trim()&&(t[i]=(t[i]||0)+1),o&&""!==o.trim()&&(a[i]=(a[i]||0)+1)}),{consultCounts:t,surgeryCounts:a}}let O={outgoing:{label:"à¹‚à¸—à¸£à¸­à¸­à¸",color:"bg-red-500",lightColor:"bg-red-100",textColor:"text-red-600",borderColor:"border-red-500",icon:c,gradient:"from-red-500 to-red-600"},received:{label:"à¸£à¸±à¸šà¸ªà¸²à¸¢",color:"bg-yellow-500",lightColor:"bg-yellow-100",textColor:"text-yellow-600",borderColor:"border-yellow-500",icon:i,gradient:"from-yellow-500 to-yellow-600"},waiting:{label:"à¸£à¸­à¸ªà¸²à¸¢",color:"bg-cyan-500",lightColor:"bg-cyan-100",textColor:"text-cyan-600",borderColor:"border-cyan-500",icon:d.Clock,gradient:"from-cyan-500 to-cyan-600"},sale:{label:"SALE à¸•à¸´à¸”à¸•à¹ˆà¸­",color:"bg-green-500",lightColor:"bg-green-100",textColor:"text-green-600",borderColor:"border-green-500",icon:m.CheckCircle2,gradient:"from-green-500 to-green-600"}},D={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};e.s(["default",0,()=>{let e=(0,s.useRouter)(),[n,i]=(0,a.useState)([]),[c,j]=(0,a.useState)([]),[w,N]=(0,a.useState)("all"),[v,S]=(0,a.useState)(""),[_,C]=(0,a.useState)(!1),[$,I]=(0,a.useState)(!1),[T,F]=(0,a.useState)(null),[M,R]=(0,a.useState)("create"),[H,U]=(0,a.useState)(null),[G,X]=(0,a.useState)([]),[B,z]=(0,a.useState)([]),[J,Q]=(0,a.useState)([]),[Y,W]=(0,a.useState)([]),[K,V]=(0,a.useState)([]),[Z,ee]=(0,a.useState)([]),[et,ea]=(0,a.useState)({customerName:"",phoneNumber:"",product:"",remarks:""}),[es,el]=(0,a.useState)(null),[er,eo]=(0,a.useState)(!1),[en,ei]=(0,a.useState)(""),[ec,ed]=(0,a.useState)(""),[em,ex]=(0,a.useState)(!1),[eh,eg]=(0,a.useState)(!1),[ep,eu]=(0,a.useState)(""),[eb,ey]=(0,a.useState)("success"),[ef,ej]=(0,a.useState)([]),[ew,eN]=(0,a.useState)([]),[ev,eS]=(0,a.useState)(!1),[e_,eC]=(0,a.useState)(1),[ek,e$]=(0,a.useState)({}),[eI,eA]=(0,a.useState)({}),[eP,eT]=(0,a.useState)({}),[eL,eE]=(0,a.useState)({}),[eO,eD]=(0,a.useState)(new Date().toISOString().split("T")[0]),[eq,eF]=(0,a.useState)({isOpen:!1,agentId:"",hourSlot:""}),[eM,eR]=(0,a.useState)({outgoing:"",successful:""}),[eH,eU]=(0,a.useState)({}),[eG,eX]=(0,a.useState)({}),eB=[{id:"101",label:"101-à¸ªà¸²"},{id:"102",label:"102-à¸žà¸±à¸”à¸Šà¸²"},{id:"103",label:"103-à¸•à¸±à¹‰à¸‡à¹‚à¸­à¹‹"},{id:"104",label:"104-Test"},{id:"105",label:"105-à¸ˆà¸µà¸™"},{id:"106",label:"106-à¸¡à¸¸à¸"},{id:"107",label:"107-à¹€à¸ˆ"},{id:"108",label:"108-à¸§à¹ˆà¸²à¸™"}],ez=G.length>0?G:n,eJ=B.length>0?B:ez,eQ={outgoing:ez.filter(e=>"outgoing"===e.status).length,received:ez.filter(e=>"received"===e.status).length,waiting:ez.filter(e=>"waiting"===e.status).length,sale:ez.filter(e=>"sale"===e.status).length,total:ez.length},eY=Array.isArray(K)?K:[],eW={total:eY.length,incoming:eY.filter(e=>"incoming"===e.status).length,outgoing:eY.filter(e=>"outgoing"===e.status).length,pending:eY.filter(e=>"pending"===e.status).length,completed:eY.filter(e=>"completed"===e.status).length};Object.values(eL).reduce((e,t)=>e+t,0),(0,a.useEffect)(()=>{e2(),e6(),eV(),eZ(),e4(),e5(),e3();let e=setInterval(()=>{e0(void 0,"900"),eV(),eZ(),e1()},5e3),t=setInterval(()=>{e4(),e5(),e3(),e6()},3e4);return()=>{clearInterval(e),clearInterval(t)}},[eO]),(0,a.useEffect)(()=>{let e=G.length>0?G:n;"all"!==w&&(e=e.filter(e=>e.status===w)),v&&(e=e.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.company.toLowerCase().includes(v.toLowerCase())||e.phone.includes(v)||e.email.toLowerCase().includes(v.toLowerCase()))),j(e)},[w,v,n,G]),(0,a.useEffect)(()=>{let e=[...Array.isArray(K)?K:[]];et.customerName&&(e=e.filter(e=>e.customerName.toLowerCase().includes(et.customerName.toLowerCase()))),et.phoneNumber&&(e=e.filter(e=>e.phoneNumber.includes(et.phoneNumber))),et.product&&(e=e.filter(e=>(e.product||"").toLowerCase().includes(et.product.toLowerCase()))),et.remarks&&(e=e.filter(e=>(e.remarks||"").toLowerCase().includes(et.remarks.toLowerCase()))),ee(e)},[et,K]);let eK=e=>{let t=new Date(e);return new Intl.DateTimeFormat("th-TH",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},eV=async()=>{try{let e=await fetch("/api/robocall"),t=await e.json();if(t.success&&Array.isArray(t.data)){let e=t.data.filter(e=>"à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"===e.status);Q(e)}}catch(e){console.error("Error fetching Robocall data:",e)}},eZ=async()=>{try{let e=await fetch("/api/google-sheets-log-call-ai"),t=await e.json();t.success&&Array.isArray(t.data)?(W(t.data),console.log("âœ… Log_call_ai data loaded:",t.data.length,"rows"),console.log("ðŸ“‹ Log_call_ai sample data:",t.data[0]),console.log("ðŸ“‹ Headers:",t.headers)):console.error("âŒ Failed to load Log_call_ai:",t.error)}catch(e){console.error("âŒ Error fetching Log_call_ai data:",e)}},e0=async(e,t)=>{try{let a=await fetch("/api/google-sheets-log-call-ai"),s=await a.json(),l=[];s.success&&Array.isArray(s.data)&&(l=s.data,W(l),console.log("ðŸ”„ à¹‚à¸«à¸¥à¸” Log_call_ai à¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",l.length,"rows"),console.log("ðŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:",l[0]));let r=await fetch("/api/robocall"),o=await r.json(),n=[];o.success&&Array.isArray(o.data)&&(n=o.data.filter(e=>"à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"===e.status),Q(n),console.log("ðŸ”„ à¹‚à¸«à¸¥à¸” Robocall à¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",n.length,"calls"));let i=new URLSearchParams;e?i.append("queue_uuid",e):t&&i.append("queue_extension",t);let c=await fetch(`/api/yalecom/queue-status?${i.toString()}`),d=await c.json();if(!d.success)throw console.error("âŒ API Error:",d.error),Error(d.error||"Failed to fetch queue status");let m=d.data;U(m);let x={101:"à¸ªà¸²",102:"à¸žà¸±à¸”à¸Šà¸²",103:"à¸•à¸±à¹‰à¸‡à¹‚à¸­à¹‹",104:"Test",105:"à¸ˆà¸µà¸™",106:"à¸¡à¸¸à¸",107:"à¹€à¸ˆ",108:"à¸§à¹ˆà¸²à¸™"},h=m.agents.map(e=>{let t=x[e.agent_id],a=t?`${e.agent_id} - ${t}`:e.agent_name,s="waiting",l="-";return"Dialing"===e.agent_queue_status?(s="outgoing",l=e.agent_outbound_callee_number||"-"):"Ringing"===e.agent_queue_status?(s="waiting",l=e.agent_queue_caller_number||"-"):"InCall"===e.agent_queue_status||"Busy"===e.agent_queue_status||"Inbound"===e.agent_queue_status||"Outbound"===e.agent_queue_status?(s="sale",l=e.agent_queue_caller_number||e.agent_outbound_callee_number||"-"):"Waiting"===e.agent_queue_status&&(s="waiting",l="-"),{id:e.agent_id,name:a,company:m.queue_name,phone:l,email:"",status:s,lastContact:new Date().toISOString(),notes:`à¸ªà¸–à¸²à¸™à¸°: ${e.agent_queue_status}`,createdAt:new Date().toISOString()}});z(h);let g=n.map(e=>{let t=e.effective_caller_id_number,a=e.caller_destination,s=a.replace(/\D/g,""),r=s.replace(/^0/,""),o=l.some(e=>{let t=e.phone||e.Phone||e.à¹€à¸šà¸­à¸£à¹Œ||e["à¹€à¸šà¸­à¸£à¹Œ"]||"",l=String(t).replace(/\D/g,""),o=l.replace(/^0/,""),n=String(e.status||e.Status||e.à¸ªà¸–à¸²à¸™à¸°||"");return(s===l||r===o||a===t)&&"2"===n}),n=l.some(e=>{let t=e.phone||e.Phone||e.à¹€à¸šà¸­à¸£à¹Œ||e["à¹€à¸šà¸­à¸£à¹Œ"]||"",l=String(t).replace(/\D/g,""),o=l.replace(/^0/,""),n=String(e.status||e.Status||e.à¸ªà¸–à¸²à¸™à¸°||"");return(s===l||r===o||a===t)&&"3"===n}),i=l.find(e=>{let t=e.phone||e.Phone||e.à¹€à¸šà¸­à¸£à¹Œ||e["à¹€à¸šà¸­à¸£à¹Œ"]||"",l=String(t).replace(/\D/g,""),o=l.replace(/^0/,"");return s===l||r===o||a===t});if(i){let e=String(i.status||i.Status||i.à¸ªà¸–à¸²à¸™à¸°||"");console.log("ðŸ“ž à¹€à¸ˆà¸­à¹€à¸šà¸­à¸£à¹Œà¸•à¸£à¸‡à¸à¸±à¸™:",{robocallPhone:a,logPhone:i.phone||i.à¹€à¸šà¸­à¸£à¹Œ,logStatus:e,result:"2"===e?"âœ… à¸¢à¹‰à¸²à¸¢à¹„à¸› à¸£à¸±à¸šà¸ªà¸²à¸¢":"3"===e?"â³ à¸¢à¹‰à¸²à¸¢à¹„à¸› à¸£à¸­à¸ªà¸²à¸¢":"ðŸ”´ à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆ à¹‚à¸—à¸£à¸­à¸­à¸"})}else l.length>0?console.log("ðŸ” à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸šà¸­à¸£à¹Œ:",{robocallPhone:a,cleanPhone:s,withoutZero:r,logDataCount:l.length,availableLogPhones:l.map(e=>({phone:e.phone||e.à¹€à¸šà¸­à¸£à¹Œ,status:e.status})),status:"à¹„à¸¡à¹ˆà¹€à¸ˆà¸­à¹€à¸šà¸­à¸£à¹Œà¸•à¸£à¸‡à¸à¸±à¸™ - à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆ à¹‚à¸—à¸£à¸­à¸­à¸"}):0===l.length&&console.warn("âš ï¸ Log_call_ai à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ - à¸£à¸­à¹‚à¸«à¸¥à¸”...");let c="outgoing",d=`Robocall - ${t}`,m="Robocall (à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£)";return o?(c="received",d=a,m="Robocall (à¸£à¸±à¸šà¸ªà¸²à¸¢à¹à¸¥à¹‰à¸§)"):n&&(c="waiting",d=a,m="Robocall (à¸£à¸­à¸ªà¸²à¸¢)"),{id:`robocall-${e.id}`,name:d,company:m,phone:e.caller_destination,email:"",status:c,lastContact:e.created_at,notes:`Robocall ID: ${e.id}, Transfer to: ${e.transfer_to}, Duration: ${e.call_duration}`,createdAt:e.created_at}}),p=m.agents.map(e=>{let t=null,a="-",s=x[e.agent_id],l=s?`${e.agent_id} - ${s}`:e.agent_name;if("Dialing"===e.agent_queue_status)t="outgoing",a=e.agent_outbound_callee_number||"-";else{if("InCall"!==e.agent_queue_status&&"Busy"!==e.agent_queue_status&&"Inbound"!==e.agent_queue_status&&"Outbound"!==e.agent_queue_status)return null;t="sale",a=e.agent_queue_caller_number||e.agent_outbound_callee_number||"-"}return{id:e.agent_id,name:l,company:m.queue_name,phone:a,email:"",status:t,lastContact:new Date().toISOString(),notes:`à¸ªà¸–à¸²à¸™à¸°: ${e.agent_queue_status}`,createdAt:new Date().toISOString()}}).filter(e=>null!==e),u=[...g,...p];return X(u),m}catch(e){return console.error("Error fetching Yalecom queue status:",e),null}},e1=async()=>{try{let e=await fetch("/api/film-contacts");if(e.ok){let t=await e.json(),a=Array.isArray(t)?t:t.data||[];V(a),ee(a),console.log("âœ… Film contacts loaded:",a.length)}}catch(e){console.error("Error fetching film contacts:",e)}},e2=async()=>{try{C(!0);try{let e=await fetch("/api/customer-contacts"),t=await e.json();t.success?(i(t.data),console.log("âœ… Contacts loaded from Supabase:",t.data.length)):t.error&&"Supabase is not configured"!==t.error&&console.warn("âš ï¸ Supabase API warning:",t.error)}catch(e){console.warn("âš ï¸ Supabase not available, skipping...")}await e0(void 0,"900"),await e1()}catch(e){console.error("Error fetching contacts:",e)}finally{C(!1)}},e6=async()=>{try{eS(!0);let e=await fetch("/api/google-sheets-call-ai"),t=await e.json();if(t.success){ej(t.data),console.log("ðŸ“‹ All available headers:",t.headers);let e=["à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²","à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡","status","à¹€à¸šà¸­à¸£à¹Œ","start"],a=t.headers.find(e=>"end"===e.toLowerCase());a&&e.push(a);let s=t.headers.filter(t=>e.includes(t));console.log("âœ… Filtered headers:",s),eN(s.length>0?s:e),eC(1),console.log("âœ… Google Sheets Data loaded:",t.data.length,"rows")}else console.error("âŒ Failed to fetch Google Sheets:",t.error)}catch(e){console.error("Error fetching Google Sheets data:",e)}finally{eS(!1)}},e4=async()=>{try{console.log("ðŸ”„ Fetching user_log_robocall data for date:",eO);let e=new URLSearchParams;e.append("report_date",eO),e.append("limit","1000");let t=await fetch(`/api/user-log-robocall?${e.toString()}`),a=await t.json();if(a.success&&Array.isArray(a.data)){let e={},t={};a.data.forEach(a=>{let s=a.caller_id_name||a.user_id||"Unknown";for(let t=9;t<=19;t++){let l=`${t.toString().padStart(2,"0")}:00-${(t+1).toString().padStart(2,"0")}:00`,r=parseInt(a[l])||0;r>0&&(e[l]||(e[l]={}),e[l][s]=r)}a.total_day&&(t[s]=parseInt(a.total_day)||0)}),eT(e),eE(t),console.log("âœ… User log robocall data loaded:",e),console.log("ðŸ“Š Totals:",t),console.log("ðŸ“‹ Sample data:",a.data[0])}else console.error("âŒ Failed to load user_log_robocall:",a.error)}catch(e){console.error("âŒ Error fetching user_log_robocall data:",e)}},e5=async()=>{try{console.log("ðŸ”„ Fetching call matrix from Python API for date:",eO);let e=await A(eO);if(e.success){let t,a,{callMatrixYaleCounts:s,callMatrixYaleTotals:l}=(t={},a={},e.time_slots.forEach(a=>{let s=a.split("-")[0];t[s]={},Object.entries(e.matrix_data).forEach(([e,l])=>{let r=l[a]||0;t[s][e]=r})}),e.totals_by_agent&&Object.keys(e.totals_by_agent).length>0?Object.entries(e.totals_by_agent).forEach(([e,t])=>{a[e]=t}):Object.entries(e.matrix_data).forEach(([e,t])=>{let s=Object.values(t).reduce((e,t)=>e+t,0);a[e]=s}),{callMatrixYaleCounts:t,callMatrixYaleTotals:a});e$(s),eA(l),console.log("âœ… Call matrix loaded from Python API:",{date:e.date,grand_total:e.grand_total,agents:Object.keys(e.matrix_data).length,time_slots:e.time_slots.length})}else console.error("âŒ Failed to fetch call matrix from Python API:",e)}catch(e){console.error("âŒ Error fetching call matrix from Python API:",e),console.log("âš ï¸ Trying fallback to Google Sheets API...");try{let e=await fetch(`/api/google-sheets-call-ai-summary?date=${eO}`),t=await e.json();if(t.success){let e={};Array.isArray(t.timeSlots)&&t.timeSlots.forEach(t=>{if(!t||"object"!=typeof t)return;let a=String(t.hourStart??t.key??"");a&&(e[a]={...t.agentCounts||{}})}),e$(e),eA(t.totals||{}),console.log("âœ… Call matrix loaded from Google Sheets API (fallback):",t)}}catch(e){console.error("âŒ Fallback to Google Sheets API also failed:",e)}}},e3=async()=>{try{let e=new URLSearchParams;e.append("date",eO),e.append("today","true");let t=await fetch(`/api/film-booking-count?${e.toString()}`),a=await t.json();if(a.success)eU(a.consultCounts||{}),eX(a.surgeryCounts||{}),console.log("âœ… Film data loaded from SQL API (ORDER BY booking_count DESC):",a),console.log("  - Consult counts by agent:",a.consultCounts),console.log("  - Surgery counts by agent:",a.surgeryCounts),console.log("  - Summary:",a.summary);else{console.warn("âš ï¸ Film data SQL API returned error:",a.error||a),console.log("âš ï¸ Trying fallback to Python API...");try{let e=await L(eO,!0,!0);if(e.success){let{consultCounts:t,surgeryCounts:a}=E(e);eU(t),eX(a),console.log("âœ… Film data loaded from Python API (fallback):",e)}else{console.log("âš ï¸ Trying fallback to Google Sheets API...");let e=await fetch(`/api/google-sheets-film-data?date=${eO}`),t=await e.json();t.success?(eU(t.agentCounts||{}),eX(t.surgeryCounts||{}),console.log("âœ… Film data loaded from Google Sheets (fallback 2):",t)):(eU({}),eX({}))}}catch(e){console.error("âŒ All fallbacks failed:",e),eU({}),eX({})}}}catch(e){console.error("âŒ Error fetching Film data from SQL API:",e);try{let e=await L(eO,!0,!0);if(e.success){let{consultCounts:t,surgeryCounts:a}=E(e);eU(t),eX(a),console.log("âœ… Film data loaded from Python API (error fallback):",e)}else eU({}),eX({})}catch(e){console.error("âŒ Error fallback also failed:",e),eU({}),eX({})}}},e8=async()=>{if(!eM.outgoing&&!eM.successful)return void alert("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 1 à¸„à¹ˆà¸²");try{let e=parseInt(eM.outgoing)||0,t=parseInt(eM.successful)||0,a=parseInt(eq.hourSlot),s=`${a}-${a+1}`;if(console.log("ðŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:",{agent_id:eq.agentId,time_slot:s,outgoing:e,successful:t}),t>0){let e=await P({agent_id:eq.agentId,time_slot:s,value:t});e.success?(console.log("âœ… à¸šà¸±à¸™à¸—à¸¶à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¸œà¹ˆà¸²à¸™ Python API:",e),eF({isOpen:!1,agentId:"",hourSlot:""}),eR({outgoing:"",successful:""}),await e5()):console.error("âŒ à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§:",e.error)}else console.warn("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸™à¸±à¸š (à¸ªà¸³à¹€à¸£à¹‡à¸ˆ)")}catch(e){console.error("âŒ Error saving call input:",e),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+e.message)}},e9=async e=>{if(el(e),ei(e.remarks||""),ed(e.nextContactDate||""),eo(!0),e.dbId)try{let t=await fetch("/api/film-contacts/update-last-followup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.dbId})});if(t.ok){let a=(await t.json()).data.last_followup,s=K.map(t=>t.dbId===e.dbId?{...t,contactDate:a}:t);V(s),el(e=>e?{...e,contactDate:a}:e)}}catch(e){console.error("Error auto-saving last followup:",e)}},e7=()=>{eo(!1),setTimeout(()=>{el(null),ei(""),ed("")},300)},te=(e,t)=>{eu(e),ey(t),eg(!0),setTimeout(()=>eg(!1),3e3)},tt=async()=>{if(!es||!es.dbId)return void te("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸”à¹‰: à¹„à¸¡à¹ˆà¸žà¸š ID à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥","error");try{ex(!0);let[e,t]=await Promise.all([fetch("/api/film-contacts/update-remarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:es.dbId,remarks:en})}),fetch("/api/film-contacts/update-next-contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:es.dbId,nextContactDate:ec})})]);if(e.ok&&t.ok){te("âœ… à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!","success");let e=K.map(e=>e.dbId===es.dbId?{...e,remarks:en,nextContactDate:ec}:e);V(e),el({...es,remarks:en,nextContactDate:ec})}else{let a=[];if(!e.ok){let t=await e.json();a.push(`à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: ${t.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸”à¹‰"}`)}if(!t.ok){let e=await t.json();a.push(`à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­: ${e.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸”à¹‰"}`)}te(`âŒ ${a.join(", ")}`,"error")}}catch(e){console.error("Error saving data:",e),te("âŒ à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥","error")}finally{ex(!1)}},ta=async()=>{await e2(),await e6(),await e4(),await e5(),await e3(),await e1()},ts=async e=>{try{if("create"===M){let t=await fetch("/api/customer-contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();a.success&&i(e=>[a.data,...e])}else if("edit"===M&&T){let t=await fetch(`/api/customer-contacts/${T.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();a.success&&i(e=>e.map(e=>e.id===T.id?a.data:e))}}catch(e){throw console.error("Error submitting form:",e),e}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 w-full",children:[(0,t.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)(l.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-4",children:(0,t.jsxs)("button",{onClick:()=>e.push("/home"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-lg transition-all shadow-md hover:shadow-lg font-medium text-sm",children:[(0,t.jsx)(y.ChevronLeft,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"à¸à¸¥à¸±à¸šà¹„à¸›à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸"})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:(0,t.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-xl p-8 text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"dashboard à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),H&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4 text-white/90 text-sm mt-4",children:[(0,t.jsxs)("span",{children:["Queue: ",H.queue_name]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["Extension: ",H.queue_extension]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["à¸£à¸­à¸ªà¸²à¸¢: ",H.waiting_calls_in_queue," à¸ªà¸²à¸¢"]})]})]})}),(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-end gap-3 mb-6",children:(0,t.jsxs)(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ta,disabled:_,className:"bg-white hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md disabled:opacity-50 border border-gray-200",children:[(0,t.jsx)(h.RefreshCw,{className:`w-5 h-5 ${_?"animate-spin":""}`}),"à¸£à¸µà¹€à¸Ÿà¸£à¸Š"]})}),(0,t.jsx)(l.motion.div,{initial:"hidden",animate:"visible",variants:q,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.keys(O).map(e=>{let a=O[e],s=a.icon,r=eQ[e];return(0,t.jsxs)(l.motion.div,{variants:D,whileHover:{y:-5,scale:1.02},onClick:()=>N(w===e?"all":e),className:`cursor-pointer bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-2 ${w===e?a.borderColor:"border-transparent"}`,children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:`p-4 rounded-xl ${a.lightColor} transform hover:rotate-6 transition-transform`,children:(0,t.jsx)(s,{className:`w-8 h-8 ${a.textColor}`})}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:r}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"à¸£à¸²à¸¢à¸à¸²à¸£"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:`font-semibold ${a.textColor} text-lg`,children:a.label}),w===e&&(0,t.jsx)(l.motion.div,{initial:{scale:0},animate:{scale:1},className:`w-3 h-3 rounded-full ${a.color}`})]})]}),(0,t.jsx)("div",{className:`h-2 bg-gradient-to-r ${a.gradient}`})]},e)})}),(0,t.jsx)(l.motion.div,{initial:"hidden",animate:"visible",variants:q,className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:Object.keys(O).map(e=>{let a=O[e],s=a.icon,o=c.filter(t=>t.status===e);return(0,t.jsxs)(l.motion.div,{variants:D,className:"bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-gray-100",children:[(0,t.jsx)("div",{className:`p-4 bg-gradient-to-r ${a.gradient} text-white`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s,{className:"w-6 h-6"}),(0,t.jsx)("h3",{className:"font-bold text-lg",children:a.label})]}),(0,t.jsx)("div",{className:"bg-white/20 px-3 py-1 rounded-full text-sm font-semibold",children:o.length})]})}),(0,t.jsx)("div",{className:"p-4 space-y-3 min-h-[400px] max-h-[600px] overflow-y-auto",children:(0,t.jsx)(r.AnimatePresence,{mode:"popLayout",children:0===o.length?(0,t.jsxs)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8 text-gray-400",children:[(0,t.jsx)(u.MessageSquare,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£"})]}):o.map(e=>(0,t.jsx)(l.motion.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:`${a.lightColor} rounded-xl p-4 border-2 ${a.borderColor} transition-all`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 text-[16px] truncate",children:e.name}),(0,t.jsx)("p",{className:`text-base font-bold ${a.textColor} whitespace-nowrap`,children:e.phone&&!e.phone.match(/^10[1-8]-/)?e.phone:"-"})]})},e.id))})})]},e)})}),(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-2xl shadow-xl p-6 mb-8",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,t.jsx)(g,{className:"w-7 h-7 text-indigo-600"}),"à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” Agents à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:eJ.map(e=>{let a=O[e.status],s=a.icon;return(0,t.jsxs)(l.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},className:"bg-gradient-to-br from-gray-50 to-white rounded-xl shadow-md hover:shadow-lg transition-all border border-gray-200 overflow-hidden",children:[(0,t.jsx)("div",{className:`${a.color} px-4 py-2 text-center`,children:(0,t.jsx)("p",{className:"text-white font-bold text-lg",children:e.name})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"mb-3 text-center",children:(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:e.phone})}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center mb-2",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,t.jsxs)("div",{className:`flex items-center justify-center gap-2 ${a.lightColor} ${a.textColor} px-3 py-2 rounded-lg`,children:[(0,t.jsx)(s,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"font-semibold text-sm",children:a.label})]})]})]})]},e.id)})}),0===eJ.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,t.jsx)(b.AlertCircle,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Agent"}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"à¸à¸£à¸¸à¸“à¸²à¸£à¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ..."})]})]}),(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.65},className:"bg-white rounded-2xl shadow-xl overflow-hidden mb-8",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,t.jsx)(d.Clock,{className:"w-7 h-7"}),"à¸•à¸²à¸£à¸²à¸‡à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹‚à¸—à¸£à¸•à¸²à¸¡à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²"]})}),(0,t.jsxs)("div",{className:"px-6 py-4 bg-white border-b border-gray-200 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,t.jsx)(x.Calendar,{className:"w-4 h-4 text-indigo-600"}),(0,t.jsx)("span",{children:"à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ"}),(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:new Date(eO).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("label",{htmlFor:"call-matrix-date",className:"text-sm font-semibold text-gray-700",children:"à¸§à¸±à¸™à¸—à¸µà¹ˆ"}),(0,t.jsx)("input",{id:"call-matrix-date",type:"date",value:eO,max:new Date().toISOString().split("T")[0],onChange:e=>{let t=e.target.value;t&&eD(t)},className:"rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border border-gray-400 text-sm border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gray-100",children:[(0,t.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-center font-bold text-gray-700 min-w-[140px]"}),eB.map(e=>(0,t.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-center font-bold text-gray-700",children:e.label},`header-${e.id}`))]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{className:"bg-blue-50",children:[(0,t.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-blue-200",children:"à¸ˆà¸³à¸™à¸§à¸™ à¸™à¸±à¸”à¸œà¹ˆà¸²à¸•à¸±à¸”"}),eB.map(e=>{let a=eG[e.id]??0;return(0,t.jsx)("td",{className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 bg-blue-50",children:a>0?a:""},`surgery-${e.id}`)})]}),(0,t.jsxs)("tr",{className:"bg-yellow-50",children:[(0,t.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-yellow-200",children:"à¸ˆà¸³à¸™à¸§à¸™ consult"}),eB.map(e=>{let a=eH[e.id]??0;return(0,t.jsx)("td",{className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 bg-yellow-50",children:a>0?a:""},`appointment-${e.id}`)})]}),(0,t.jsxs)("tr",{className:"bg-green-50",children:[(0,t.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-green-200",children:"à¸ˆà¸³à¸™à¸§à¸™à¹‚à¸—à¸£"}),eB.map(e=>{let a=eL[e.id]??0;return(0,t.jsx)("td",{className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 bg-green-50",children:a>0?a:""},`total-${e.id}`)})]}),[{label:"9:00-10:00",start:"9"},{label:"10:00-11:00",start:"10"},{label:"11:00-12:00",start:"11"},{label:"12:00-13:00",start:"12"},{label:"13:00-14:00",start:"13"},{label:"14:00-15:00",start:"14"},{label:"15:00-16:00",start:"15"},{label:"16:00-17:00",start:"16"},{label:"17:00-18:00",start:"17"},{label:"18:00-19:00",start:"18"},{label:"19:00-20:00",start:"19"}].map(e=>(0,t.jsxs)("tr",{className:"bg-white",children:[(0,t.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-gray-100",children:e.label}),eB.map(a=>{let s=((e,t,a)=>{if("yale"===a){let a=parseInt(t),s=eP[`${a.toString().padStart(2,"0")}:00-${(a+1).toString().padStart(2,"0")}:00`];return s?s[e]??0:0}return"outgoing"===a?eH[e]??0:"passed"===a?eG[e]??0:0})(a.id,e.start,"yale");return(0,t.jsx)("td",{onClick:()=>eF({isOpen:!0,agentId:a.id,hourSlot:e.start}),className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 cursor-pointer hover:bg-blue-50",children:s>0?s:""},`${e.start}-${a.id}`)})]},`slot-${e.start}`))]})]})}),(0,t.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t-2 border-gray-200",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-gray-600 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{children:["à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸² ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:"7"})," ","à¸Šà¹ˆà¸§à¸‡"]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["à¹€à¸‹à¸¥à¸¥à¹Œ ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:"8"})," à¸„à¸™ (101-108)"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-xs",children:["à¸§à¸±à¸™à¸—à¸µà¹ˆ:"," ",new Date(eO).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})]})]})]})})]}),(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.75},className:"bg-white rounded-2xl shadow-xl overflow-hidden mb-8",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-4",children:(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,t.jsx)(p,{className:"w-7 h-7"}),"à¸£à¸²à¸¢à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"]})}),(0,t.jsx)("div",{className:"px-6 py-4 bg-gray-50",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-4 text-white",children:[(0,t.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¸ˆà¸³à¸™à¸§à¸™ Lead"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:eW.total})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl shadow-lg p-4 text-white",children:[(0,t.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¹‚à¸—à¸£à¹à¸¥à¹‰à¸§"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:eW.outgoing})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-4 text-white",children:[(0,t.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¹„à¸¡à¹ˆà¸£à¸±à¸šà¸ªà¸²à¸¢"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:eW.pending})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-4 text-white",children:[(0,t.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¸•à¸´à¸”à¸ªà¸²à¸¢"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:eW.incoming})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-4 text-white",children:[(0,t.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¸£à¸±à¸šà¸ªà¸²à¸¢"}),(0,t.jsx)("p",{className:"text-3xl font-bold",children:eW.completed})]})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-purple-500 text-white border-b-2 border-purple-600",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œ"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,t.jsx)(h.RefreshCw,{className:"w-8 h-8 text-purple-600 animate-spin mx-auto"})})}):0===Z.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:[(0,t.jsx)(u.MessageSquare,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-semibold",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"})]})}):Z.map((e,a)=>(0,t.jsxs)(l.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.02*a},onClick:()=>e9(e),className:"hover:bg-purple-50 transition-colors cursor-pointer",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"font-semibold text-gray-900",children:e.customerName})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,t.jsx)(o.Phone,{className:"w-4 h-4 text-purple-600"}),e.phoneNumber]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-gray-700",children:e.product||"-"})}),(0,t.jsx)("td",{className:"px-6 py-4 max-w-xs truncate",children:(0,t.jsx)("div",{className:"text-gray-700",children:e.remarks||"-"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.agentId?(0,t.jsxs)("span",{className:"font-semibold text-blue-600",children:["Agent ",e.agentId]}):(0,t.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-semibold ${"incoming"===e.status?"bg-green-500 text-white":"outgoing"===e.status?"bg-blue-500 text-white":"pending"===e.status?"bg-yellow-500 text-white":"bg-gray-500 text-white"}`,children:"incoming"===e.status?"à¸£à¸±à¸šà¸ªà¸²à¸¢":"outgoing"===e.status?"à¹‚à¸—à¸£à¸­à¸­à¸":"pending"===e.status?"à¸£à¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£":"à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:eK(e.contactDate)})]},e.id))})]})}),Z.length>0&&(0,t.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t-2 border-gray-200",children:(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["à¹à¸ªà¸”à¸‡"," ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:Z.length})," ","à¸£à¸²à¸¢à¸à¸²à¸£"]})})]}),(0,t.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,t.jsx)(p,{className:"w-7 h-7"}),"à¸•à¸²à¸£à¸²à¸‡à¸ªà¸£à¸¸à¸› call_AI à¸ˆà¸²à¸ Google Sheets"]})}),ev&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(h.RefreshCw,{className:"w-8 h-8 text-indigo-600 animate-spin"}),(0,t.jsx)("span",{className:"ml-3 text-lg text-gray-600",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."})]}),!ev&&ef.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"à¸¥à¸³à¸”à¸±à¸š"}),ew.map((e,a)=>(0,t.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:e},a))]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,t.jsx)(r.AnimatePresence,{mode:"popLayout",children:ef.slice((e_-1)*20,20*e_).map((e,a)=>(0,t.jsxs)(l.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.02*a},className:"hover:bg-gray-50 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(e_-1)*20+a+1}),ew.map((a,s)=>(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e[a]||"-"},s))]},e.id))})})]})}),ef.length>20&&(0,t.jsx)("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["à¹à¸ªà¸”à¸‡"," ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:(e_-1)*20+1})," ","à¸–à¸¶à¸‡"," ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:Math.min(20*e_,ef.length)})," ","à¸ˆà¸²à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"," ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:ef.length})," ","à¸£à¸²à¸¢à¸à¸²à¸£"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>eC(e=>Math.max(e-1,1)),disabled:1===e_,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${1===e_?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"}`,children:[(0,t.jsx)(y.ChevronLeft,{className:"w-4 h-4"}),"à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²"]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=Math.ceil(ef.length/20),a=[],s=Math.max(1,e_-Math.floor(2.5)),r=Math.min(e,s+5-1);r-s<4&&(s=Math.max(1,r-5+1)),s>1&&(a.push((0,t.jsx)(l.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>eC(1),className:"w-10 h-10 rounded-lg font-semibold text-sm bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:"1"},1)),s>2&&a.push((0,t.jsx)("span",{className:"px-2 text-gray-400",children:"..."},"dots-start")));for(let e=s;e<=r;e++)a.push((0,t.jsx)(l.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>eC(e),className:`w-10 h-10 rounded-lg font-semibold text-sm transition-all ${e_===e?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e},e));return r<e&&(r<e-1&&a.push((0,t.jsx)("span",{className:"px-2 text-gray-400",children:"..."},"dots-end")),a.push((0,t.jsx)(l.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>eC(e),className:"w-10 h-10 rounded-lg font-semibold text-sm bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:e},e))),a})()}),(0,t.jsxs)(l.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>eC(e=>Math.min(e+1,Math.ceil(ef.length/20))),disabled:e_===Math.ceil(ef.length/20),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${e_===Math.ceil(ef.length/20)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"}`,children:["à¸–à¸±à¸”à¹„à¸›",(0,t.jsx)(f.ChevronRight,{className:"w-4 h-4"})]})]})]})})]}),!ev&&0===ef.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,t.jsx)(b.AlertCircle,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-semibold",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"}),(0,t.jsx)("p",{className:"text-sm mt-2",children:'à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸Šà¸µà¸— "à¸ªà¸£à¸¸à¸› call_AI"'})]}),!ev&&ef.length>0&&(0,t.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t-2 border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-6 text-gray-600",children:[(0,t.jsxs)("span",{children:["à¹à¸ªà¸”à¸‡"," ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:ef.length})," ","à¸£à¸²à¸¢à¸à¸²à¸£"]}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsxs)("span",{children:["à¸ˆà¸³à¸™à¸§à¸™à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ"," ",(0,t.jsx)("span",{className:"font-bold text-gray-900",children:ew.length})," ","à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,t.jsx)(x.Calendar,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"text-xs",children:["à¸­à¸±à¸žà¹€à¸”à¸—à¸¥à¹ˆà¸²à¸ªà¸¸à¸”:"," ",new Date().toLocaleString("th-TH",{dateStyle:"medium",timeStyle:"short"})]})]})]})})]})]}),(0,t.jsx)(r.AnimatePresence,{children:er&&es&&(0,t.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e7,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)(l.motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:e=>e.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-8 py-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,t.jsx)("button",{onClick:e7,className:"absolute top-4 right-4 bg-white/20 hover:bg-white/30 p-2 rounded-xl",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,t.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:es.customerName})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,t.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:es.phoneNumber})]}),es.product&&(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,t.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œà¸—à¸µà¹ˆà¸ªà¸™à¹ƒà¸ˆ"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:es.product})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,t.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,t.jsx)("p",{className:"text-lg text-gray-900",children:eK(es.contactDate)})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,t.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸•à¸´à¸”à¸•à¸²à¸¡à¸„à¸£à¸±à¹‰à¸‡à¸–à¸±à¸”à¹„à¸›"}),(0,t.jsx)("input",{type:"datetime-local",value:ec,onChange:e=>ed(e.target.value),className:"w-full bg-white rounded-xl px-4 py-3 border-2 border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none text-gray-900"})]}),(0,t.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,t.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,t.jsx)("textarea",{value:en,onChange:e=>ei(e.target.value),placeholder:"à¸à¸£à¸­à¸à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸...",rows:6,className:"w-full bg-white rounded-xl p-4 border-2 border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none text-gray-900 resize-none"})]}),(0,t.jsx)("button",{onClick:tt,disabled:em,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-2xl font-bold text-lg transition-all flex items-center justify-center gap-3 shadow-lg",children:em?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.RefreshCw,{className:"w-6 h-6 animate-spin"}),"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.CheckCircle2,{className:"w-6 h-6"}),"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"]})})]})})]})})}),(0,t.jsx)(r.AnimatePresence,{children:eh&&(0,t.jsx)(l.motion.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{type:"spring",duration:.5},className:"fixed top-6 right-6 z-[100] max-w-md",children:(0,t.jsxs)("div",{className:`${"success"===eb?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-rose-500"} text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4`,children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("p",{className:"font-bold text-lg",children:ep})}),(0,t.jsx)("button",{onClick:()=>eg(!1),className:"hover:bg-white/20 p-1 rounded-lg transition-colors",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),(0,t.jsx)(r.AnimatePresence,{children:eq.isOpen&&(0,t.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:()=>eF({isOpen:!1,agentId:"",hourSlot:""}),children:(0,t.jsxs)(l.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹‚à¸—à¸£"}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¹€à¸‹à¸¥à¸¥à¹Œ ID:"," ",(0,t.jsx)("span",{className:"text-blue-600",children:eq.agentId})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²:"," ",(0,t.jsxs)("span",{className:"text-blue-600",children:[eq.hourSlot,":00 à¸™."]})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸ˆà¸³à¸™à¸§à¸™à¹‚à¸—à¸£à¸­à¸­à¸"}),(0,t.jsx)("input",{type:"number",min:"0",value:eM.outgoing,onChange:e=>eR({...eM,outgoing:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸™à¸±à¸š (à¸ªà¸³à¹€à¸£à¹‡à¸ˆ)"}),(0,t.jsx)("input",{type:"number",min:"0",value:eM.successful,onChange:e=>eR({...eM,successful:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>eF({isOpen:!1,agentId:"",hourSlot:""}),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,t.jsx)("button",{onClick:e8,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",children:"à¸šà¸±à¸™à¸—à¸¶à¸"})]})]})})}),(0,t.jsx)(k,{isOpen:$,onClose:()=>I(!1),onSubmit:ts,initialData:T?{name:T.name,company:T.company,phone:T.phone,email:T.email,status:T.status,notes:T.notes}:void 0,mode:M})]})}],187253)}]);