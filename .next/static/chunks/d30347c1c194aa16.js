(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,696909,e=>{"use strict";var t=e.i(843476),s=e.i(437902),r=e.i(271645),a=e.i(618566);let l="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",i="block text-sm font-semibold text-gray-700",n=[{label:"à¹€à¸¥à¸·à¸­à¸à¹€à¸žà¸¨",value:""},{label:"à¸Šà¸²à¸¢",value:"M"},{label:"à¸«à¸à¸´à¸‡",value:"F"},{label:"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸",value:"X"}],o="https://raw.githubusercontent.com/kongvut/thai-province-data/refs/heads/master/api/latest",d=null,c=null;async function x(){return d||(c||(c=Promise.all([fetch(`${o}/province.json`).then(e=>{if(!e.ok)throw Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”à¹„à¸”à¹‰");return e.json()}),fetch(`${o}/district.json`).then(e=>{if(!e.ok)throw Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸³à¹€à¸ à¸­à¹„à¸”à¹‰");return e.json()}),fetch(`${o}/sub_district.json`).then(e=>{if(!e.ok)throw Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸³à¸šà¸¥à¹„à¸”à¹‰");return e.json()})]).then(([e,t,s])=>{let r={provinces:e,districts:t,subdistricts:s};return d=r,r})),c)}let m="__province_legacy__",h="__district_legacy__",u="__subdistrict_legacy__";function p(e){return e?e.trim().toLowerCase():""}function g(e,t){let s=p(t);return!!s&&(p(e.name_th)===s||p(e.name_en)===s)}let b=new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}),j=e=>Number.isFinite(e)?b.format(e):"0.00",f=e=>Number.isFinite(e)?e.toFixed(2):"",v=e=>{let t=e.trim();if(!t)return 0;let s=Number(t);return Number.isFinite(s)?s:0},y=e=>{if(null==e)return 0;let t="number"==typeof e?e:Number(e);return Number.isFinite(t)?t:0};function N({visible:e,loading:s,saving:a,exists:o,form:d,error:c,message:b,lead:N,staffOptions:w,staffLoading:k,staffError:_,onClose:C,onChange:L,onSubmit:S}){let[M,$]=(0,r.useState)(!1),[E,T]=(0,r.useState)(""),[D,P]=(0,r.useState)(""),[B,F]=(0,r.useState)(!1),[W,z]=(0,r.useState)(null),[A,I]=(0,r.useState)([]),[H,V]=(0,r.useState)([]),[R,O]=(0,r.useState)([]),[Y,U]=(0,r.useState)(null),[q,X]=(0,r.useState)(null),[G,J]=(0,r.useState)(null),[K,Q]=(0,r.useState)(null),Z=(0,r.useRef)(null),[ee,et]=(0,r.useState)([]),[es,er]=(0,r.useState)(!1),[ea,el]=(0,r.useState)(null),[ei,en]=(0,r.useState)(""),[eo,ed]=(0,r.useState)([]),[ec,ex]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),[eu,ep]=(0,r.useState)(null),[eg,eb]=(0,r.useState)(""),[ej,ef]=(0,r.useState)([]),ev=(0,r.useRef)(null),ey=(0,r.useRef)(null),eN=(0,r.useRef)(null),ew=(0,r.useRef)(null),ek=(0,r.useRef)(null);(0,r.useEffect)(()=>{T(d?.idcardFrontImage||""),P(d?.idcardBackImage||"")},[d?.idcardFrontImage,d?.idcardBackImage]),(0,r.useEffect)(()=>{let e=!1;return(async()=>{er(!0),el(null);try{let t=await fetch("/api/b-item-groups"),s=await t.json();if(!t.ok||!1===s.success)throw Error(s.error||"à¹„à¸¡à¹ˆà¸žà¸šà¸à¸¥à¸¸à¹ˆà¸¡à¸‚à¸²à¸¢ OPD");if(e)return;et(Array.isArray(s.data)?s.data:[])}catch(t){if(e)return;el(t?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸à¸¥à¸¸à¹ˆà¸¡à¸‚à¸²à¸¢ OPD à¹„à¸”à¹‰")}finally{if(e)return;er(!1)}})(),()=>{e=!0}},[]);let e_=async e=>{if(!e)return void ed([]);ev.current=e,eh(!0),ep(null),ed([]);try{let t=await fetch(`/api/b-item-services?groupCode=${encodeURIComponent(e)}`),s=await t.json();if(!t.ok||!1===s.success)throw Error(s.error||"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£");if(ev.current!==e)return;let r=Array.isArray(s.data)?s.data.map(e=>({...e,saleprice:y(e.saleprice)})):[];ed(r)}catch(t){if(ev.current!==e)return;ep(t?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£à¹„à¸”à¹‰")}finally{ev.current===e&&eh(!1)}},eC=()=>{ex(!1),eb(""),ep(null)},eL=(e,t)=>{ef(s=>s.map(s=>s.id===e?t(s):s))},eS=(0,r.useMemo)(()=>ee.find(e=>e.groupcode===ei)??null,[ee,ei]),eM=(0,r.useMemo)(()=>ej.reduce((e,t)=>{let s=Number.isFinite(t.salesprice)?t.salesprice:0,r=v(t.chargePrice),a=v(t.discountPrice);return e.baseTotal+=s,e.chargeTotal+=r,e.discountTotal+=a,e.netTotal+=s+r-a,e},{baseTotal:0,chargeTotal:0,discountTotal:0,netTotal:0}),[ej]),e$=(0,r.useMemo)(()=>{if(!eg.trim())return eo;let e=eg.trim().toLowerCase();return eo.filter(t=>t.itemname.toLowerCase().includes(e)||t.itemcode.toLowerCase().includes(e))},[eo,eg]),eE=(0,r.useMemo)(()=>`${d?.cn??""}::${d?.code??""}`,[d?.cn,d?.code]);(0,r.useEffect)(()=>{if(!e){Z.current=null,Q(null);return}d&&(Z.current===eE&&K||(Q({...d}),Z.current=eE))},[e,d,eE,K]);let eT=p(d?.country??"Thailand"),eD=!d?.country||"thailand"===eT||"à¹„à¸—à¸¢"===eT||"th"===eT;(0,r.useEffect)(()=>{if(!e||!eD||A.length&&H.length&&R.length)return;let t=!1;return F(!0),x().then(e=>{t||(I(e.provinces),V(e.districts),O(e.subdistricts),z(null))}).catch(e=>{t||z(e?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸›à¸£à¸°à¹€à¸—à¸¨à¹„à¸—à¸¢à¹„à¸”à¹‰")}).finally(()=>{t||F(!1)}),()=>{t=!0}},[e,eD,A.length,H.length,R.length]),(0,r.useEffect)(()=>{eD||(U(null),X(null),J(null))},[eD]),(0,r.useEffect)(()=>{if(!eD||!A.length||!d?.province){d?.province||U(null);return}let e=A.find(e=>g(e,d.province));U(e?e.id:null)},[d?.province,eD,A]),(0,r.useEffect)(()=>{if(!eD||!H.length)return;if(!Y||!d?.amphur)return void X(null);let e=H.find(e=>e.province_id===Y&&g(e,d.amphur));X(e?e.id:null)},[d?.amphur,eD,H,Y]),(0,r.useEffect)(()=>{if(!eD||!R.length)return;if(!q||!d?.tumbon)return void J(null);let e=R.find(e=>e.district_id===q&&g(e,d.tumbon));J(e?e.id:null)},[d?.tumbon,eD,R,q]);let eP=(0,r.useMemo)(()=>A.map(e=>({id:e.id,label:`${e.name_th} (${e.name_en})`})),[A]),eB=(0,r.useMemo)(()=>Y?H.filter(e=>e.province_id===Y).map(e=>({id:e.id,label:`${e.name_th} (${e.name_en})`})):[],[H,Y]),eF=(0,r.useMemo)(()=>q?R.filter(e=>e.district_id===q).map(e=>({id:e.id,label:`${e.name_th} (${e.name_en})`})):[],[R,q]),eW=eD&&A.length>0&&H.length>0&&R.length>0&&!W,ez=d?.ownername?.trim()||"",eA=d?.ownercode?.trim()||"";(0,r.useEffect)(()=>{if(!e||!ez||eA)return;let t=w.find(e=>e.nickname===ez);t&&(L("ownercode",t.code),t.nickname!==ez&&L("ownername",t.nickname))},[e,ez,eA,w,L]);let eI=(e,t)=>{if(!t)return void("front"===e?(T(""),L("idcardFrontImage","")):(P(""),L("idcardBackImage","")));let s=new FileReader;s.onload=()=>{let t="string"==typeof s.result?s.result:"";"front"===e?(T(t),L("idcardFrontImage",t)):(P(t),L("idcardBackImage",t))},s.readAsDataURL(t)};if(!e||!d)return null;let eH=(e,t)=>e&&"string"==typeof e[t]?e[t]:"",eV=e=>K?e.some(e=>K?eH(K,e)!==eH(d,e):!!eH(d,e))?{label:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ",className:"bg-emerald-100 text-emerald-700"}:{label:"à¸•à¸£à¸‡à¸à¸±à¸šà¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",className:"bg-gray-100 text-gray-600"}:e.some(e=>!!eH(d,e))?{label:"à¸à¸³à¸¥à¸±à¸‡à¸à¸³à¸«à¸™à¸”",className:"bg-sky-100 text-sky-700"}:{label:"à¸£à¸­à¸à¸£à¸­à¸",className:"bg-gray-200 text-gray-700"},eR=["recordno","idcard","binddate","cusgroup","member"],eO=["disease","allergic"],eY=["locno","moo","soi","road"],eU=["idcardLaserCode","idcardIssueDate","idcardExpireDate"],eq=["idcardProvinceNative","idcardDistrictNative","idcardSubdistrictNative"],eX=eV(["cn","registerdate","prefix","name","surname","nickname","gender","birthdate","mobilephone","email","lineid","facebook","medianame","displayname","ownercode","ownername"]),eG=eV(["country","idcardFrontImage","idcardBackImage"]),eJ=eV(["province","amphur","tumbon","zipcode"]);eV(eR),eV(eO),eV(eY),eV(eU),eV(eq);let eK=eV([...eR,...eO,...eY,...eU,...eq]),eQ=e=>{let t=e.current;t&&t.scrollIntoView({behavior:"smooth",block:"start"})},eZ=(e,t)=>{!t||eH(d,e)||L(e,t)},e0=!N,e2=!!(eA&&w.some(e=>e.code===eA)),e1="__legacy__",e4=e2?eA:ez?e1:"";return(0,t.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"max-h-[95vh] w-full max-w-5xl overflow-y-auto rounded-3xl bg-gradient-to-br from-white via-blue-50 to-indigo-100 shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 border-b border-white/40 bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:o?"à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²":"à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸¥à¸¹à¸à¸„à¹‰à¸²"}),N&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-blue-100",children:["#",N.id," Â· ",N.name," Â· ",N.phone," Â· ",N.status," Â· ",N.interestedProduct]})]}),(0,t.jsx)("button",{onClick:C,className:"rounded-full bg-white/20 p-2 transition hover:bg-white/30","aria-label":"à¸›à¸´à¸”à¸à¸¥à¹ˆà¸­à¸‡à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"sticky top-0 z-10 border-b border-white/60 bg-white/70 px-6 py-3 backdrop-blur",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsx)("nav",{className:"flex flex-wrap gap-2",children:[{id:"basic",label:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²",ref:ey,status:eX},{id:"documents",label:"à¹€à¸­à¸à¸ªà¸²à¸£ / à¸—à¸±à¹ˆà¸§à¹„à¸›",ref:eN,status:eG},{id:"address",label:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™",ref:ew,status:eJ},{id:"advanced",label:"à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡",ref:ek,status:eK,requiresAdvanced:!0}].map(e=>(0,t.jsxs)("button",{type:"button",onClick:()=>(e=>{if(e.requiresAdvanced&&!M){$(!0),setTimeout(()=>eQ(e.ref),160);return}eQ(e.ref)})(e),className:"inline-flex items-center gap-2 rounded-full border border-white/70 bg-white/80 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition hover:border-indigo-400 hover:text-indigo-600",children:[(0,t.jsx)("span",{children:e.label}),(0,t.jsx)("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold shadow-sm ${e.status.className}`,children:e.status.label})]},e.id))}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{if(!N)return;let e=N.name?.trim();if(e){let t=e.match(/^(à¸„à¸¸à¸“|à¸™à¸²à¸¢|à¸™à¸²à¸‡|à¸™à¸ª\.|à¸™à¸ž\.|à¸žà¸\.|à¸”à¸Š\.|à¸”à¸\.)/),s=e;t&&(eZ("prefix",t[0]),s=s.replace(t[0],"").trim());let r=s.split(/\s+/).filter(Boolean);1===r.length?eZ("name",r[0]):r.length>1&&(eZ("name",r[0]),eZ("surname",r.slice(1).join(" "))),eZ("nickname",r[0]),eZ("displayname",e)}eZ("mobilephone",N.phone),eZ("cusgroup",N.status),eZ("medianame",N.interestedProduct),eZ("country","Thailand")},disabled:e0,className:"inline-flex items-center gap-2 rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-indigo-700 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500",title:N?"à¹€à¸•à¸´à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²":"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸•à¸´à¸¡",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})}),"à¹€à¸•à¸´à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´"]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{K&&Object.entries({...K}).forEach(([e,t])=>{L(e,"string"==typeof t?t:"")})},disabled:!K,className:"inline-flex items-center gap-2 rounded-full border border-gray-300 bg-white/80 px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm transition hover:border-indigo-400 hover:text-indigo-600 disabled:cursor-not-allowed disabled:text-gray-400",title:"à¸„à¸·à¸™à¸„à¹ˆà¸²à¸•à¸²à¸¡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0112.618-5.303L18 7.5m0-3v3h-3M19.5 12a7.5 7.5 0 01-12.618 5.303L6 16.5m0 3v-3h3"})}),"à¸„à¸·à¸™à¸„à¹ˆà¸²à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"]})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{ex(!0),ep(null),ei&&e_(ei)},className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 px-5 py-2.5 text-sm font-semibold text-white shadow-lg transition hover:from-emerald-600 hover:to-teal-600",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"à¸šà¸£à¸´à¸à¸²à¸£/à¸‚à¸²à¸¢",ej.length>0&&(0,t.jsx)("span",{className:"ml-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/30 text-xs font-bold",children:ej.length})]}),es&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸à¸¥à¸¸à¹ˆà¸¡..."}),ea&&(0,t.jsx)("span",{className:"text-xs text-red-500",children:ea})]})]})}),(0,t.jsxs)("div",{className:"space-y-6 px-6 py-5",children:[s&&(0,t.jsx)("div",{className:"rounded-xl bg-white/80 p-4 text-sm text-blue-700 shadow",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."}),c&&(0,t.jsx)("div",{className:"rounded-xl bg-red-100 p-4 text-sm text-red-700 shadow",children:c}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),S()},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4 rounded-2xl border border-white/60 bg-white/70 p-5 shadow-sm",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"CN (à¸£à¸«à¸±à¸ªà¸¥à¸¹à¸à¸„à¹‰à¸²)"}),(0,t.jsx)("input",{type:"text",className:`${l} bg-gray-100`,value:d.cn,readOnly:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™"}),(0,t.jsx)("input",{type:"date",className:l,value:d.registerdate,onChange:e=>L("registerdate",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸„à¸³à¸™à¸³à¸«à¸™à¹‰à¸²"}),(0,t.jsxs)("select",{className:l,value:d.prefix||"",onChange:e=>L("prefix",e.target.value),children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸™à¸³à¸«à¸™à¹‰à¸²"}),["à¸„à¸¸à¸“","à¸™à¸²à¸¢","à¸™à¸²à¸‡","à¸™à¸ª.","à¸™à¸ž.","à¸žà¸.","à¸”à¸Š.","à¸”à¸."].map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸Šà¸·à¹ˆà¸­"}),(0,t.jsx)("input",{type:"text",className:l,value:d.name,onChange:e=>L("name",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"}),(0,t.jsx)("input",{type:"text",className:l,value:d.surname,onChange:e=>L("surname",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸Šà¸·à¹ˆà¸­à¹€à¸¥à¹ˆà¸™"}),(0,t.jsx)("input",{type:"text",className:l,value:d.nickname,onChange:e=>L("nickname",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¹€à¸žà¸¨"}),(0,t.jsx)("select",{className:l,value:d.gender,onChange:e=>L("gender",e.target.value),children:n.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸§à¸±à¸™à¹€à¸à¸´à¸”"}),(0,t.jsx)("input",{type:"date",className:l,value:d.birthdate,onChange:e=>L("birthdate",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸«à¸¥à¸±à¸"}),(0,t.jsx)("input",{type:"tel",className:l,value:d.mobilephone,onChange:e=>L("mobilephone",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸­à¸µà¹€à¸¡à¸¥"}),(0,t.jsx)("input",{type:"email",className:l,value:d.email,onChange:e=>L("email",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"LINE ID"}),(0,t.jsx)("input",{type:"text",className:l,value:d.lineid,onChange:e=>L("lineid",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"Facebook"}),(0,t.jsx)("input",{type:"text",className:l,value:d.facebook,onChange:e=>L("facebook",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸ªà¸·à¹ˆà¸­"}),(0,t.jsx)("input",{type:"text",className:l,value:d.medianame,onChange:e=>L("medianame",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸² (à¹ƒà¸Šà¹‰à¹à¸ªà¸”à¸‡)"}),(0,t.jsx)("input",{type:"text",className:l,value:d.displayname,onChange:e=>L("displayname",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥"}),(0,t.jsxs)("select",{className:l,value:e4,onChange:e=>{let t=e.target.value;if(t===e1)return;if(!t){L("ownercode",""),L("ownername","");return}let s=w.find(e=>e.code===t);L("ownercode",t),L("ownername",s?.nickname||"")},disabled:k&&0===w.length,children:[(0,t.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥"}),!e2&&ez&&(0,t.jsx)("option",{value:e1,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${ez}`}),w.map(e=>(0,t.jsx)("option",{value:e.code,children:e.nickname},e.code))]}),k&&0===w.length&&(0,t.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥..."}),!k&&_&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:_}),!k&&!_&&!eA&&ez&&(0,t.jsxs)("p",{className:"mt-1 text-xs text-amber-600",children:["à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ",ez," (à¹„à¸¡à¹ˆà¸žà¸šà¹ƒà¸™à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸žà¸™à¸±à¸à¸‡à¸²à¸™)"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸›à¸£à¸°à¹€à¸—à¸¨"}),(0,t.jsx)("input",{type:"text",className:l,value:d.country,onChange:e=>L("country",e.target.value),placeholder:"à¹€à¸Šà¹ˆà¸™ Thailand"})]}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"}),eW?(0,t.jsxs)("select",{className:l,value:Y?String(Y):d.province?m:"",onChange:e=>(e=>{if(e===m)return;if(!e){U(null),X(null),J(null),L("province",""),L("amphur",""),L("tumbon",""),L("zipcode","");return}let t=Number(e);if(!Number.isFinite(t))return;let s=A.find(e=>e.id===t);U(t),X(null),J(null),L("province",s?.name_th||""),L("amphur",""),L("tumbon",""),L("zipcode","")})(e.target.value),disabled:B,children:[(0,t.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"}),!Y&&d.province&&(0,t.jsx)("option",{value:m,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${d.province}`}),eP.map(e=>(0,t.jsx)("option",{value:e.id,children:e.label},e.id))]}):(0,t.jsx)("input",{type:"text",className:l,value:d.province,onChange:e=>L("province",e.target.value)}),B&&eD&&(0,t.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”..."}),W&&eD&&(0,t.jsx)("p",{className:"mt-1 text-xs text-red-600",children:W})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸­à¸³à¹€à¸ à¸­/à¹€à¸‚à¸•"}),eW?(0,t.jsxs)("select",{className:l,value:q?String(q):d.amphur?h:"",onChange:e=>(e=>{if(e===h)return;if(!e){X(null),J(null),L("amphur",""),L("tumbon",""),L("zipcode","");return}let t=Number(e);if(!Number.isFinite(t))return;let s=H.find(e=>e.id===t);X(t),J(null),L("amphur",s?.name_th||""),L("tumbon",""),L("zipcode","")})(e.target.value),disabled:!Y||B,children:[(0,t.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸­à¸³à¹€à¸ à¸­/à¹€à¸‚à¸•"}),!q&&d.amphur&&(0,t.jsx)("option",{value:h,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${d.amphur}`}),eB.map(e=>(0,t.jsx)("option",{value:e.id,children:e.label},e.id))]}):(0,t.jsx)("input",{type:"text",className:l,value:d.amphur,onChange:e=>L("amphur",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸•à¸³à¸šà¸¥/à¹à¸‚à¸§à¸‡"}),eW?(0,t.jsxs)("select",{className:l,value:G?String(G):d.tumbon?u:"",onChange:e=>(e=>{if(e===u)return;if(!e){J(null),L("tumbon",""),L("zipcode","");return}let t=Number(e);if(!Number.isFinite(t))return;let s=R.find(e=>e.id===t);if(J(t),L("tumbon",s?.name_th||""),s?.zip_code!==null&&s?.zip_code!==void 0){let e=String(s.zip_code).trim();e&&L("zipcode",e)}})(e.target.value),disabled:!q||B,children:[(0,t.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸•à¸³à¸šà¸¥/à¹à¸‚à¸§à¸‡"}),!G&&d.tumbon&&(0,t.jsx)("option",{value:u,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${d.tumbon}`}),eF.map(e=>(0,t.jsx)("option",{value:e.id,children:e.label},e.id))]}):(0,t.jsx)("input",{type:"text",className:l,value:d.tumbon,onChange:e=>L("tumbon",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ"}),(0,t.jsx)("input",{type:"text",className:l,value:d.zipcode,onChange:e=>L("zipcode",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 rounded-2xl border border-white/60 bg-white/70 p-5 shadow-sm",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"à¹€à¸­à¸à¸ªà¸²à¸£à¹à¸¥à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹ˆà¸§à¹„à¸›"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-dashed border-indigo-300 bg-white/80 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:`${i} text-indigo-700`,children:"à¸ à¸²à¸žà¸«à¸™à¹‰à¸²à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™"}),E&&(0,t.jsx)("button",{type:"button",onClick:()=>eI("front"),className:"text-xs font-semibold text-indigo-600 underline-offset-2 hover:underline",children:"à¸¥à¸šà¸ à¸²à¸ž"})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"h-32 w-full overflow-hidden rounded-lg border border-indigo-200 bg-indigo-50",children:E?(0,t.jsx)("img",{src:E,alt:"Thai ID front",className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-indigo-400",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸ à¸²à¸žà¸«à¸™à¹‰à¸²à¸šà¸±à¸•à¸£"})}),(0,t.jsxs)("label",{className:"w-full cursor-pointer rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-2 text-center text-sm font-semibold text-white shadow hover:from-indigo-600 hover:to-purple-600",children:["à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸ à¸²à¸žà¸«à¸™à¹‰à¸²à¸šà¸±à¸•à¸£",(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>eI("front",e.target.files?.[0])})]})]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-dashed border-indigo-300 bg-white/80 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("label",{className:`${i} text-indigo-700`,children:"à¸ à¸²à¸žà¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™"}),D&&(0,t.jsx)("button",{type:"button",onClick:()=>eI("back"),className:"text-xs font-semibold text-indigo-600 underline-offset-2 hover:underline",children:"à¸¥à¸šà¸ à¸²à¸ž"})]}),(0,t.jsxs)("div",{className:"mt-3 flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"h-32 w-full overflow-hidden rounded-lg border border-indigo-200 bg-indigo-50",children:D?(0,t.jsx)("img",{src:D,alt:"Thai ID back",className:"h-full w-full object-cover"}):(0,t.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-indigo-400",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸ à¸²à¸žà¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£"})}),(0,t.jsxs)("label",{className:"w-full cursor-pointer rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-2 text-center text-sm font-semibold text-white shadow hover:from-indigo-600 hover:to-purple-600",children:["à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸ à¸²à¸žà¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£",(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>eI("back",e.target.files?.[0])})]})]})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/60 bg-white/70 p-5 shadow-inner",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>$(e=>!e),className:"flex w-full items-center justify-between gap-3 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-3 text-left text-white shadow",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-semibold",children:[M?"à¸‹à¹ˆà¸­à¸™":"à¹à¸ªà¸”à¸‡"," à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡"]}),(0,t.jsx)("p",{className:"text-xs text-purple-100",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¡à¸²à¸Šà¸´à¸, à¹€à¸­à¸à¸ªà¸²à¸£, à¹‚à¸£à¸„à¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§ à¹à¸¥à¸°à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹à¸šà¸šà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”"})]}),(0,t.jsx)("svg",{className:`h-5 w-5 transition-transform duration-200 ${M?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),M&&(0,t.jsxs)("div",{className:"mt-4 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¡à¸²à¸Šà¸´à¸"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸ à¸²à¸¢à¹ƒà¸™ (recordno)"}),(0,t.jsx)("input",{type:"text",className:l,value:d.recordno||"",onChange:e=>L("recordno",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ / Passport"}),(0,t.jsx)("input",{type:"text",className:l,value:d.idcard,onChange:e=>L("idcard",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆ bind/sync"}),(0,t.jsx)("input",{type:"date",className:l,value:d.binddate,onChange:e=>L("binddate",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸à¸¥à¸¸à¹ˆà¸¡à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,t.jsx)("input",{type:"text",className:l,value:d.cusgroup,onChange:e=>L("cusgroup",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸£à¸«à¸±à¸ªà¸ªà¸¡à¸²à¸Šà¸´à¸"}),(0,t.jsx)("input",{type:"text",className:l,value:d.member,onChange:e=>L("member",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¸à¸‚à¸ à¸²à¸ž"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¹‚à¸£à¸„à¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§"}),(0,t.jsx)("textarea",{className:`${l} min-h-[80px]`,value:d.disease,onChange:e=>L("disease",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹à¸žà¹‰à¸¢à¸²/à¸­à¸²à¸«à¸²à¸£/à¸­à¸·à¹ˆà¸™ à¹†"}),(0,t.jsx)("textarea",{className:`${l} min-h-[80px]`,value:d.allergic,onChange:e=>L("allergic",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸•à¸²à¸¡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸šà¹‰à¸²à¸™"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¹€à¸¥à¸‚à¸—à¸µà¹ˆ"}),(0,t.jsx)("input",{type:"text",className:l,value:d.locno,onChange:e=>L("locno",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸«à¸¡à¸¹à¹ˆ"}),(0,t.jsx)("input",{type:"text",className:l,value:d.moo,onChange:e=>L("moo",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸‹à¸­à¸¢"}),(0,t.jsx)("input",{type:"text",className:l,value:d.soi,onChange:e=>L("soi",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸–à¸™à¸™"}),(0,t.jsx)("input",{type:"text",className:l,value:d.road,onChange:e=>L("road",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"Laser Code (à¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£)"}),(0,t.jsx)("input",{type:"text",className:l,value:d.idcardLaserCode||"",onChange:e=>L("idcardLaserCode",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸­à¸à¸šà¸±à¸•à¸£"}),(0,t.jsx)("input",{type:"date",className:l,value:d.idcardIssueDate||"",onChange:e=>L("idcardIssueDate",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸"}),(0,t.jsx)("input",{type:"date",className:l,value:d.idcardExpireDate||"",onChange:e=>L("idcardExpireDate",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸ à¸¹à¸¡à¸´à¸¥à¸³à¹€à¸™à¸²à¸•à¸²à¸¡à¸šà¸±à¸•à¸£"}),(0,t.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸” (à¸•à¸²à¸¡à¸šà¸±à¸•à¸£)"}),(0,t.jsx)("input",{type:"text",className:l,value:d.idcardProvinceNative||"",onChange:e=>L("idcardProvinceNative",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸­à¸³à¹€à¸ à¸­/à¹€à¸‚à¸• (à¸•à¸²à¸¡à¸šà¸±à¸•à¸£)"}),(0,t.jsx)("input",{type:"text",className:l,value:d.idcardDistrictNative||"",onChange:e=>L("idcardDistrictNative",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:i,children:"à¸•à¸³à¸šà¸¥/à¹à¸‚à¸§à¸‡ (à¸•à¸²à¸¡à¸šà¸±à¸•à¸£)"}),(0,t.jsx)("input",{type:"text",className:l,value:d.idcardSubdistrictNative||"",onChange:e=>L("idcardSubdistrictNative",e.target.value)})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[b&&(0,t.jsx)("span",{className:"text-sm font-semibold text-emerald-700",children:b}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:C,className:"rounded-lg bg-white px-5 py-2 font-semibold text-gray-700 shadow hover:bg-gray-50",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,t.jsx)("button",{type:"submit",className:"rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-2 font-semibold text-white shadow-lg transition hover:from-blue-700 hover:to-indigo-700 disabled:cursor-not-allowed disabled:opacity-70",disabled:a,children:a?"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...":o?"à¸­à¸±à¸›à¹€à¸”à¸•à¸‚à¹‰à¸­à¸¡à¸¹à¸¥":"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"})]})]})]})]})]}),ec&&(0,t.jsx)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/70 p-4 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"relative w-full max-w-6xl overflow-hidden rounded-3xl bg-white shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 px-8 py-5 text-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"à¸šà¸£à¸´à¸à¸²à¸£ OPD"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"à¹€à¸¥à¸·à¸­à¸à¸šà¸£à¸´à¸à¸²à¸£à¹à¸¥à¸°à¸à¸³à¸«à¸™à¸” Charge / Discount"})]}),(0,t.jsx)("button",{type:"button",onClick:eC,className:"rounded-full bg-white/20 p-2 transition hover:bg-white/30",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"border-b bg-gray-50 px-8 py-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"à¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£:"}),(0,t.jsxs)("select",{className:"rounded-xl border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-800 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200",value:ei,onChange:e=>(e=>{if(en(e),eb(""),ep(null),!e){ed([]),ex(!1);return}e_(e),ex(!0)})(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£"}),ee.map(e=>(0,t.jsx)("option",{value:e.groupcode,children:e.groupname},e.groupcode))]}),ej.length>0&&(0,t.jsxs)("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-sm font-semibold text-emerald-700",children:["à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§ ",ej.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]})}),(0,t.jsxs)("div",{className:"grid max-h-[65vh] grid-cols-1 gap-0 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"flex flex-col border-r border-gray-200 bg-gradient-to-br from-blue-50 to-indigo-50 max-h-[65vh]",children:[(0,t.jsxs)("div",{className:"border-b bg-white/80 px-6 py-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"ðŸ“ à¸šà¸£à¸´à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[ej.length," à¸£à¸²à¸¢à¸à¸²à¸£",eS&&` \xb7 ${eS.groupname}`]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===ej.length?(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[(0,t.jsx)("div",{className:"mb-3 text-5xl",children:"ðŸ“‚"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"à¹€à¸¥à¸·à¸­à¸à¸ˆà¸²à¸à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸²à¸‡à¸‚à¸§à¸²à¸¡à¸·à¸­"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-3",children:ej.map(e=>{let s;return(0,t.jsxs)("div",{className:"rounded-2xl border border-white bg-white p-4 shadow-md transition hover:shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-800",children:e.itemname}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["à¸£à¸«à¸±à¸ª ",e.itemcode," Â· à¸£à¸²à¸„à¸² ",j(e.salesprice)]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{var t;return t=e.id,void ef(e=>e.filter(e=>e.id!==t))},className:"ml-2 rounded-full bg-red-100 p-1.5 text-red-600 transition hover:bg-red-200",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"rounded-xl bg-emerald-50 p-3",children:[(0,t.jsx)("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Charge"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"à¸šà¸²à¸—",value:e.chargePrice,onChange:t=>{var s,r;return s=e.id,r=t.target.value,void eL(s,e=>{let t=r.trim(),s=Number(t),a=t.length>0&&Number.isFinite(s)&&e.salesprice>0?f(s/e.salesprice*100):"";return{...e,chargePrice:r,chargePercent:a}})},className:"w-full rounded-lg border border-emerald-200 bg-white px-2 py-1.5 text-sm focus:border-emerald-400 focus:outline-none"}),(0,t.jsx)("input",{type:"text",placeholder:"%",value:e.chargePercent,onChange:t=>{var s,r;return s=e.id,r=t.target.value,void eL(s,e=>{let t=r.trim(),s=Number(t),a=t.length>0&&Number.isFinite(s)&&e.salesprice>0?f(e.salesprice*s/100):"";return{...e,chargePrice:a,chargePercent:r}})},className:"w-16 rounded-lg border border-emerald-200 bg-white px-2 py-1.5 text-center text-sm focus:border-emerald-400 focus:outline-none"})]})]}),(0,t.jsxs)("div",{className:"rounded-xl bg-rose-50 p-3",children:[(0,t.jsx)("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-rose-700",children:"Discount"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",placeholder:"à¸šà¸²à¸—",value:e.discountPrice,onChange:t=>{var s,r;return s=e.id,r=t.target.value,void eL(s,e=>{let t=r.trim(),s=Number(t),a=t.length>0&&Number.isFinite(s)&&e.salesprice>0?f(s/e.salesprice*100):"";return{...e,discountPrice:r,discountPercent:a}})},className:"w-full rounded-lg border border-rose-200 bg-white px-2 py-1.5 text-sm focus:border-rose-400 focus:outline-none"}),(0,t.jsx)("input",{type:"text",placeholder:"%",value:e.discountPercent,onChange:t=>{var s,r;return s=e.id,r=t.target.value,void eL(s,e=>{let t=r.trim(),s=Number(t),a=t.length>0&&Number.isFinite(s)&&e.salesprice>0?f(e.salesprice*s/100):"";return{...e,discountPrice:a,discountPercent:r}})},className:"w-16 rounded-lg border border-rose-200 bg-white px-2 py-1.5 text-center text-sm focus:border-rose-400 focus:outline-none"})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center justify-between rounded-2xl border border-indigo-100 bg-indigo-50/40 px-3 py-2 text-sm font-semibold text-indigo-600",children:[(0,t.jsx)("span",{children:"à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´"}),(0,t.jsx)("span",{children:j((s=Number.isFinite(e.salesprice)?e.salesprice:0,s+v(e.chargePrice)-v(e.discountPrice)))})]})]},e.id)})}),(0,t.jsxs)("div",{className:"mt-4 rounded-2xl border border-dashed border-indigo-200 bg-white/80 px-4 py-3 text-sm text-gray-600 shadow-inner",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-gray-500",children:[(0,t.jsx)("span",{children:"à¸ªà¸£à¸¸à¸›à¸¢à¸­à¸”"}),(0,t.jsxs)("span",{children:[ej.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]}),(0,t.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"à¸£à¸§à¸¡à¸£à¸²à¸„à¸²à¸žà¸·à¹‰à¸™à¸à¸²à¸™"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:j(eM.baseTotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"à¸£à¸§à¸¡à¸„à¹ˆà¸² Charge"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:j(eM.chargeTotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"à¸£à¸§à¸¡à¸ªà¹ˆà¸§à¸™à¸¥à¸”"}),(0,t.jsx)("span",{className:"font-semibold text-gray-700",children:j(eM.discountTotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-base font-semibold text-indigo-600",children:[(0,t.jsx)("span",{children:"à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"}),(0,t.jsx)("span",{children:j(eM.netTotal)})]})]})]})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col bg-white max-h-[65vh]",children:[(0,t.jsxs)("div",{className:"border-b px-6 py-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"ðŸ“œ à¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£"}),eS&&(0,t.jsx)("p",{className:"text-xs text-gray-500",children:eS.groupname})]}),(0,t.jsx)("div",{className:"px-6 py-3",children:(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("input",{type:"text",placeholder:"ðŸ” à¸„à¹‰à¸™à¸«à¸²à¸šà¸£à¸´à¸à¸²à¸£...",value:eg,onChange:e=>eb(e.target.value),className:"w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm focus:border-indigo-400 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-100"})})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 pb-4",children:[em&&(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})}),eu&&(0,t.jsx)("p",{className:"py-4 text-center text-sm text-red-600",children:eu}),!em&&!eu&&0===e$.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,t.jsx)("div",{className:"mb-2 text-4xl",children:"ðŸ’­"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£"})]}),(0,t.jsx)("div",{className:"space-y-2",children:e$.map(e=>{let s=ej.some(t=>t.itemcode===e.itemcode);return(0,t.jsxs)("div",{className:`flex items-center justify-between rounded-xl border px-4 py-3 transition ${s?"border-emerald-200 bg-emerald-50":"border-gray-100 bg-gray-50 hover:border-indigo-200 hover:bg-indigo-50"}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-800",children:e.itemname}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"à¸£à¸²à¸„à¸²"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:j(e.saleprice)})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{ef(t=>t.some(t=>t.itemcode===e.itemcode)?t:[...t,{id:`${e.itemcode}-${Date.now()}`,itemcode:e.itemcode,itemname:e.itemname,salesprice:y(e.saleprice),chargePrice:"",chargePercent:"",discountPrice:"",discountPercent:""}])},disabled:s,className:`rounded-full px-4 py-1.5 text-xs font-semibold transition ${s?"bg-emerald-200 text-emerald-700":"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow hover:shadow-md"}`,children:s?"âœ“ à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§":"à¹€à¸žà¸´à¹ˆà¸¡"})]},e.itemcode)})})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t bg-gray-50 px-8 py-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§ ",(0,t.jsx)("span",{className:"font-bold text-indigo-600",children:ej.length})," à¸£à¸²à¸¢à¸à¸²à¸£",(0,t.jsx)("span",{className:"mx-2 hidden text-xs text-gray-400 md:inline",children:"Â·"}),(0,t.jsx)("span",{className:"mr-1",children:"à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´"}),(0,t.jsx)("span",{className:"font-bold text-indigo-600",children:j(eM.netTotal)})]}),(0,t.jsx)("button",{type:"button",onClick:eC,className:"rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-2.5 font-semibold text-white shadow-lg transition hover:from-indigo-700 hover:to-purple-700",children:"à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™"})]})]})})]})}let w=(e=new Date)=>{let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${r}`},k=e=>{if(!e||""===e||"null"===e||"undefined"===e)return"-";let t=String(e).trim(),s=t.split(":");if(s.length>=2){let e=s[0].padStart(2,"0"),t=s[1].substring(0,2).padStart(2,"0");return`${e}:${t} à¸™.`}return t.slice(0,5)+" à¸™."},_=(e,t=2)=>{if(!e)return"-";let s=String(e).replace(/\r?\n+/g," ").replace(/\s+/g," ").trim();if(!s||"null"===s.toLowerCase()||"undefined"===s.toLowerCase())return"-";let r=s.match(/[^.!?]+[.!?]?/g);return!r||r.length<=t?s.length>160?`${s.slice(0,160).trim()} â€¦`:s:`${r.slice(0,t).join(" ").trim()} â€¦`};function C(){let e=(0,a.useRouter)(),[l,i]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null),[x,m]=(0,r.useState)(""),[h,u]=(0,r.useState)(""),[p,g]=(0,r.useState)("table"),[b,j]=(0,r.useState)(new Date),[f,v]=(0,r.useState)(new Date),[y,C]=(0,r.useState)("new"),[L,S]=(0,r.useState)([]),[M,$]=(0,r.useState)(""),[E,T]=(0,r.useState)(!1),[D,P]=(0,r.useState)(!1),[B,F]=(0,r.useState)({full_name:"",role:"",yearly_leave_quota:10,leave_remaining:10,work_start_time:"08:00",work_end_time:"19:00",is_active:!0}),[W,z]=(0,r.useState)(!1),[A,I]=(0,r.useState)([]),[H,V]=(0,r.useState)([]),[R,O]=(0,r.useState)({employee_id:0,work_date:"",time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),[Y,U]=(0,r.useState)(!1),[q,X]=(0,r.useState)([]),[G,J]=(0,r.useState)(""),[K,Q]=(0,r.useState)(null),[Z,ee]=(0,r.useState)(null),[et,es]=(0,r.useState)([]),[er,ea]=(0,r.useState)(!1),[el,ei]=(0,r.useState)(null),[en,eo]=(0,r.useState)(null),[ed,ec]=(0,r.useState)([]),[ex,em]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)(!1),[ep,eg]=(0,r.useState)(null),[eb,ej]=(0,r.useState)(!1),[ef,ev]=(0,r.useState)(null),[ey,eN]=(0,r.useState)(!1),[ew,ek]=(0,r.useState)(!1),[e_,eC]=(0,r.useState)(!1),[eL,eS]=(0,r.useState)(null),[eM,e$]=(0,r.useState)(null),[eE,eT]=(0,r.useState)(null),[eD,eP]=(0,r.useState)([]),[eB,eF]=(0,r.useState)(!1),[eW,ez]=(0,r.useState)(null),[eA,eI]=(0,r.useState)([]),[eH,eV]=(0,r.useState)(!1),[eR,eO]=(0,r.useState)(null),[eY,eU]=(0,r.useState)(null),eq=["birthdate","registerdate","binddate","idcardIssueDate","idcardExpireDate"],eX=(e,t)=>{let s={...t};if(Object.keys(e).forEach(t=>{if("cn"===t)return;let r=e[t];if("recordno"===t){s.recordno=null==r?"":String(r);return}if(eq.includes(t)){s[t]=(e=>{if(!e)return"";let t=String(e);return t.length>=10?t.slice(0,10):t})(r);return}s[t]=null==r?"":String(r)}),!s.displayname){let e=[s.prefix,s.name,s.surname].filter(Boolean).join(" ").trim();s.displayname=e}return s},eG=(0,r.useCallback)(async()=>{if(!eB&&(!(eD.length>0)||eW)){eF(!0),ez(null);try{let e=await fetch("/api/n-staff"),t=await e.json();if(!e.ok||!1===t.success)throw Error(t?.error||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¹„à¸”à¹‰");let s=Array.isArray(t.data)?t.data:[];eP(s)}catch(e){ez(e?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¹„à¸”à¹‰")}finally{eF(!1)}}},[eB,eD.length,eW]),eJ=async e=>{eG();let t=(e=>{let t=w(),{firstName:s,lastName:r}=(e=>{if(!e)return{firstName:"",lastName:""};let t=e.trim().split(/\s+/);if(1===t.length)return{firstName:t[0],lastName:""};let[s,...r]=t;return{firstName:s,lastName:r.join(" ")}})(e.customer_name||"");return{recordno:"",code:"",cn:String(e.id),prefix:"",name:s,surname:r,nickname:"",gender:"",idcard:"",birthdate:"",registerdate:t,member:"",cusgroup:"",mobilephone:e.phone||"",email:"",lineid:"",facebook:"",medianame:"",disease:"",allergic:"",displayname:e.customer_name||"",locno:"",soi:"",road:"",moo:"",tumbon:"",amphur:"",province:"",zipcode:"",country:"Thailand",address:"",ownercode:"",ownername:e.contact_staff||"",binddate:t,idcardLaserCode:"",idcardIssueDate:"",idcardExpireDate:"",idcardProvinceNative:"",idcardDistrictNative:"",idcardSubdistrictNative:"",idcardFrontImage:"",idcardBackImage:""}})(e);eT({id:e.id,name:e.customer_name||"",phone:e.phone||"",status:e.status||"",interestedProduct:e.interested_product||e.interestedProduct||""}),ev(t),ej(!0),eC(!1),eN(!0),ek(!1),eS(null),e$(null);try{let s=await fetch(`/api/n-customer?cn=${e.id}`),r=await s.json();if(!s.ok||!1===r.success){r?.error&&e$(r.error);return}r.exists&&r.data&&(ev(eX(r.data,t)),eC(!0))}catch(e){e$(e?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹„à¸”à¹‰")}finally{eN(!1)}},eK=async()=>{if(ef){ek(!0),e$(null),eS(null);try{let{idcardFrontImage:e,idcardBackImage:t,...s}=ef,r={...s,cn:ef.cn};r.recordno&&r.recordno.trim()||delete r.recordno;let a=await fetch("/api/n-customer",{method:e_?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),l=await a.json();if(!a.ok||!1===l.success)throw Error(l?.error||"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ");l.data&&ev(eX(l.data,ef)),eC(!0),eS("à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¸³à¹€à¸£à¹‡à¸ˆ")}catch(e){e$(e?.message||"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ")}finally{ek(!1)}}};(0,r.useEffect)(()=>{let e=w();u(e),e2(e,e)},[]),(0,r.useEffect)(()=>{h&&"table"===p&&e2(h,h)},[h]),(0,r.useEffect)(()=>{"calendar"===p&&e1(b)},[b,p]),(0,r.useEffect)(()=>{"calendar2"===p&&(e1(f),eQ(),eZ(f))},[f,p]),(0,r.useEffect)(()=>{eb&&eG()},[eb,eG]);let eQ=async()=>{try{let e=await fetch("/api/hr-employees"),t=await e.json();t.success&&I(t.data.filter(e=>e.is_active))}catch(e){console.error("Error fetching employees:",e)}},eZ=async e=>{try{let t=(e.getMonth()+1).toString(),s=e.getFullYear().toString();console.log("Fetching attendances for:",{month:t,year:s});let r=await fetch(`/api/hr-attendance?month=${t}&year=${s}`),a=await r.json();console.log("Attendance API response:",a),a.success?(V(a.data),console.log("Set attendances:",a.data)):console.error("API Error:",a.error)}catch(e){console.error("Error fetching attendances:",e)}},e0=(0,r.useCallback)(async e=>{let t=e&&e.trim()?e:w();try{eV(!0),eO(null);let e=new URLSearchParams;e.append("from",t),e.append("to",t);let s=await fetch(`/api/appointments?${e.toString()}`),r=await s.json();if(!s.ok||!1===r.success)throw Error(r?.error||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²à¹„à¸”à¹‰");eI(Array.isArray(r.data)?r.data:[])}catch(e){console.error("Error fetching legacy appointments:",e),eI([]),eO(e?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²à¹„à¸”à¹‰")}finally{eV(!1)}},[]);(0,r.useEffect)(()=>{"table"!==p||"old"!==y||e0(h&&h.trim()?h:w())},[y,e0,h,p]);let e2=async(e,t)=>{try{o(!0),c(null);let s="/api/crm-advanced",r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t),r.toString()&&(s+=`?${r.toString()}`);let a=await fetch(s),l=await a.json();l.success?i(l.data):c(l.error||"Failed to fetch data")}catch(e){c(e.message||"Failed to fetch records"),console.error("Error fetching records:",e)}finally{o(!1)}},e1=async e=>{try{o(!0),c(null);let t=(e.getMonth()+1).toString(),s=e.getFullYear().toString(),r=`/api/crm-advanced?month=${t}&year=${s}`,a=await fetch(r),l=await a.json();l.success?i(l.data):c(l.error||"Failed to fetch data")}catch(e){c(e.message||"Failed to fetch records"),console.error("Error fetching records:",e)}finally{o(!1)}},e4=async e=>{if(confirm("à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸µà¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?"))try{let t=await fetch(`/api/crm-advanced?id=${e}`,{method:"DELETE"}),s=await t.json();s.success?(alert("à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),i(l.filter(t=>t.id!==e)),S(L.filter(t=>t.id!==e)),L.length<=1&&T(!1)):alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+s.error)}catch(e){console.error("Error deleting record:",e),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},e3=e=>l.filter(t=>{let s=t.surgery_date?t.surgery_date.split("T")[0]:null,r=t.consult_date?t.consult_date.split("T")[0]:null;return s===e||r===e}),e6=e=>{m(e),u(e);let t=e3(e);t.length>0?(S(t),$(e),T(!0)):e2(e,e)},e8=()=>{T(!1),S([]),$("")},e5=E&&L.some(e=>e.hasCustomerProfile),e9=async()=>{ea(!0),ei(null);try{let e=await fetch("/api/b-item-groups"),t=await e.json();if(!e.ok||!1===t.success)throw Error(t.error||"à¹„à¸¡à¹ˆà¸žà¸šà¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£");es(Array.isArray(t.data)?t.data:[])}catch(e){console.error("Error loading item groups:",e),ei(e?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£à¹„à¸”à¹‰")}finally{ea(!1)}},e7=()=>{em(!1),eu(!1),ec([]),eo(null),eg(null)};(0,r.useEffect)(()=>{!e5||et.length>0||er||e9()},[e5,et.length,er]);let te=e=>{e.note?.trim()&&ee(e)},tt=()=>ee(null),ts=(e,t)=>{F(s=>({...s,[e]:t}))},tr=async()=>{try{let e=await fetch("/api/hr-employees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)}),t=await e.json();t.success?(alert("à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),P(!1),eQ(),F({full_name:"",role:"",yearly_leave_quota:10,leave_remaining:10,work_start_time:"08:00",work_end_time:"19:00",is_active:!0})):alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+t.error)}catch(e){console.error("Error saving employee:",e),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},ta=(e,t)=>{O(s=>{let r={...s,[e]:t};if(("time_in"===e||"time_out"===e)&&r.time_in&&r.time_out){let e=new Date(`2000-01-01T${r.time_in}`),t=(new Date(`2000-01-01T${r.time_out}`).getTime()-e.getTime())/36e5;r.work_hours=Math.max(0,parseFloat(t.toFixed(2))),r.overtime_hours=Math.max(0,parseFloat((t-8).toFixed(2)))}return r})},tl=async e=>{if(confirm("à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸™à¸µà¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?"))try{let t=await fetch(`/api/hr-attendance?id=${e}`,{method:"DELETE"}),s=await t.json();if(s.success){if(alert("à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),await eZ(f),Y&&G){let t=H.filter(t=>t.id!==e).filter(e=>e.work_date.split("T")[0]===G);X(t),0===t.length&&U(!1)}}else alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+s.error)}catch(e){console.error("Error deleting attendance:",e),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},ti=async()=>{try{if(!R.employee_id||0===R.employee_id)return void alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸žà¸™à¸±à¸à¸‡à¸²à¸™");if(!R.work_date)return void alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ");let e=R.work_date.split("T")[0],t=K?`/api/hr-attendance?id=${K.id}`:"/api/hr-attendance",s=K?{employee_id:R.employee_id,work_date:e,time_in:R.time_in,time_out:R.time_out,status:R.status,work_hours:Number(R.work_hours),overtime_hours:Number(R.overtime_hours),note:R.note}:{...R,work_date:e,work_hours:Number(R.work_hours),overtime_hours:Number(R.overtime_hours)},r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await r.json();if(a.success){if(alert(K?"à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!":"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),z(!1),Q(null),await eZ(f),Y&&G){let e=await fetch(`/api/hr-attendance?month=${f.getMonth()+1}&year=${f.getFullYear()}`).then(e=>e.json());if(e.success){let t=e.data.filter(e=>e.work_date.split("T")[0]===G);X(t)}}O({employee_id:0,work_date:"",time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""})}else alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+a.error)}catch(e){console.error("Error saving attendance:",e),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},tn=e=>{let t=e.match(/(\d{1,2}):(\d{2})/);return t?60*parseInt(t[1],10)+parseInt(t[2],10):Number.MAX_SAFE_INTEGER},to=e=>{if(!e)return Number.MAX_SAFE_INTEGER;let t=Date.parse(e);if(!Number.isNaN(t))return t;let s=e.match(/(\d{1,2}):(\d{2})/);return s?tn(`${s[1]}:${s[2]}`):Number.MAX_SAFE_INTEGER},td=[...l].sort((e,t)=>tn(e.appointmentTime)-tn(t.appointmentTime)),tc=[...eA].sort((e,t)=>to(e.start_date)-to(t.start_date)),tx=h&&h.trim()?h:w(),tm=(()=>{if(!tx)return"";let[e,t,s]=tx.split("-").map(Number);if(!e||!t||!s)return tx;let r=new Date(e,t-1,s);return Number.isNaN(r.getTime())?tx:r.toLocaleDateString("th-TH",{day:"numeric",month:"long",year:"numeric"})})(),th=e=>{let t=H.filter(t=>t.work_date.split("T")[0]===e);return console.log(`Attendances for ${e}:`,t),t};return(0,t.jsxs)("div",{className:"min-h-screen h-full w-full bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 p-0 m-0",children:[(0,t.jsx)("div",{className:"px-3 sm:px-8 py-3 sm:py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("button",{onClick:()=>e.push("/home"),className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-lg hover:shadow-xl","aria-label":"à¸à¸¥à¸±à¸šà¹„à¸›à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸",children:(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,t.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,t.jsxs)("button",{onClick:()=>g("table"),className:`px-2 sm:px-4 py-2 rounded-lg transition-all shadow-lg font-medium flex flex-col sm:flex-row items-center gap-0.5 sm:gap-2 text-[10px] sm:text-sm ${"table"===p?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"à¸•à¸²à¸£à¸²à¸‡"})]}),(0,t.jsxs)("button",{onClick:()=>g("calendar"),className:`px-2 sm:px-4 py-2 rounded-lg transition-all shadow-lg font-medium flex flex-col sm:flex-row items-center gap-0.5 sm:gap-2 text-[10px] sm:text-sm ${"calendar"===p?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"à¸›à¸à¸´à¸—à¸´à¸™"})]}),(0,t.jsxs)("button",{onClick:()=>g("calendar2"),className:`px-2 sm:px-4 py-2 rounded-lg transition-all shadow-lg font-medium flex flex-col sm:flex-row items-center gap-0.5 sm:gap-2 text-[10px] sm:text-sm ${"calendar2"===p?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"})]})]})]})}),n&&(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-md rounded-2xl p-8 shadow-2xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."})]})})}),d&&(0,t.jsx)("div",{className:"px-8 pb-4",children:(0,t.jsx)("div",{className:"bg-red-500/20 backdrop-blur-md border-2 border-red-400 rounded-2xl p-6 shadow-2xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("svg",{className:"w-8 h-8 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-white font-bold text-lg",children:"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”"}),(0,t.jsx)("p",{className:"text-red-100",children:d})]})]})})}),(0,t.jsx)("div",{className:"w-full h-full m-0 p-0",children:(0,t.jsxs)("div",{className:"w-full overflow-hidden",children:["calendar"===p&&(0,t.jsx)("div",{className:"px-2 sm:px-8 pb-8",children:(0,t.jsxs)("div",{className:"bg-black/90 backdrop-blur-md rounded-lg sm:rounded-2xl overflow-hidden shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-700",children:[(0,t.jsx)("button",{onClick:()=>{j(new Date(b.getFullYear(),b.getMonth()-1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white",children:b.toLocaleDateString("th-TH",{year:"numeric",month:"short"}).replace(" ",".")})}),(0,t.jsx)("button",{onClick:()=>{j(new Date(b.getFullYear(),b.getMonth()+1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-7",children:[["à¸­à¸².","à¸ˆ.","à¸­.","à¸ž.","à¸žà¸¤.","à¸¨.","à¸ª."].map((e,s)=>(0,t.jsx)("div",{className:`text-center text-[10px] sm:text-xs font-medium py-2 border-b border-r border-gray-700 ${0===s?"text-red-400":"text-gray-400"}`,children:e},e)),(()=>{let e,s,r,{daysInMonth:a,startingDayOfWeek:l,year:i,month:n}=(e=b.getFullYear(),r=new Date(e,s=b.getMonth(),1),{daysInMonth:new Date(e,s+1,0).getDate(),startingDayOfWeek:r.getDay(),year:e,month:s}),o=[],d=w();for(let e=0;e<l;e++)o.push((0,t.jsx)("div",{className:"min-h-[80px] sm:min-h-[100px] border-b border-r border-gray-700"},`empty-${e}`));for(let e=1;e<=a;e++){let s=`${i}-${String(n+1).padStart(2,"0")}-${String(e).padStart(2,"0")}`,r=e3(s),a=s===d,l=s===x,c=r.length>0,m=0===new Date(i,n,e).getDay(),h=r.some(e=>e.star_flag);o.push((0,t.jsxs)("div",{onClick:()=>e6(s),className:`
            min-h-[80px] sm:min-h-[100px] p-1 border-b border-r border-gray-700 cursor-pointer transition-all
            ${a?"bg-gray-800":""}
            ${l?"bg-blue-900/50":""}
            hover:bg-gray-800/50
          `,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("div",{className:`text-xs sm:text-sm font-medium ${m?"text-red-400":"text-gray-300"} ${a?"bg-white text-black rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center":""}`,children:e}),h&&(0,t.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),c&&(0,t.jsxs)("div",{className:"space-y-0.5",children:[r.slice(0,3).map(e=>(0,t.jsxs)("button",{type:"button",onClick:t=>{t.stopPropagation(),eJ(e)},className:"w-full flex items-center gap-0.5 truncate rounded-sm bg-emerald-600 px-1 py-0.5 text-left text-[8px] sm:text-[10px] text-white font-medium hover:bg-emerald-500 transition",title:`${e.customer_name} - ${e.status}`,children:[e.star_flag&&(0,t.jsx)("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-yellow-300 fill-current flex-shrink-0",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,t.jsx)("span",{className:"truncate",children:e.customer_name})]},e.id)),r.length>3&&(0,t.jsxs)("div",{className:"text-[8px] sm:text-[10px] text-gray-400 pl-1",children:["+",r.length-3," à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡"]})]})]},e))}return o})()]})]})}),"calendar2"===p&&(0,t.jsxs)("div",{className:"px-2 sm:px-8 pb-8",children:[(0,t.jsx)("div",{className:"mb-4 flex justify-end gap-3",children:(0,t.jsxs)("button",{onClick:()=>{Q(null);let e=new Date;O({employee_id:0,work_date:`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),z(!0)},className:"px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg transition-all shadow-lg font-bold flex items-center gap-2 text-xs sm:text-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"]})}),(0,t.jsxs)("div",{className:"bg-black/90 backdrop-blur-md rounded-lg sm:rounded-2xl overflow-hidden shadow-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-700",children:[(0,t.jsx)("button",{onClick:()=>{v(new Date(f.getFullYear(),f.getMonth()-1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white",children:f.toLocaleDateString("th-TH",{year:"numeric",month:"short"}).replace(" ",".")})}),(0,t.jsx)("button",{onClick:()=>{v(new Date(f.getFullYear(),f.getMonth()+1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,t.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-7",children:[["à¸­à¸².","à¸ˆ.","à¸­.","à¸ž.","à¸žà¸¤.","à¸¨.","à¸ª."].map((e,s)=>(0,t.jsx)("div",{className:`text-center text-[10px] sm:text-xs font-medium py-2 border-b border-r border-gray-700 ${0===s?"text-red-400":"text-gray-400"}`,children:e},e)),(()=>{let e=f.getFullYear(),s=f.getMonth(),r=new Date(e,s,1),a=new Date(e,s+1,0).getDate(),l=r.getDay(),i=[],n=w();for(let e=0;e<l;e++)i.push((0,t.jsx)("div",{className:"min-h-[80px] sm:min-h-[100px] border-b border-r border-gray-700"},`empty-${e}`));for(let r=1;r<=a;r++){let a=`${e}-${String(s+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`,l=th(a),o=a===n,d=a===x,c=l.length>0,h=0===new Date(e,s,r).getDay();i.push((0,t.jsxs)("div",{onClick:()=>{m(a),c?(X(l),J(a),U(!0)):(Q(null),O({employee_id:0,work_date:a,time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),z(!0))},className:`
            min-h-[80px] sm:min-h-[100px] p-1 border-b border-r border-gray-700 cursor-pointer transition-all
            ${o?"bg-gray-800":""}
            ${d?"bg-teal-900/50":""}
            hover:bg-gray-800/50
          `,children:[(0,t.jsx)("div",{className:`text-xs sm:text-sm font-medium mb-1 ${h?"text-red-400":"text-gray-300"} ${o?"bg-white text-black rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center":""}`,children:r}),c?(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)("div",{className:"text-[8px] sm:text-[10px] bg-teal-500 text-white px-1 py-0.5 rounded-sm font-bold text-center",children:[l.length," à¸„à¸™"]}),l.slice(0,2).map(e=>{let s={PRESENT:"bg-green-500",LATE:"bg-yellow-500",LEAVE:"bg-blue-500",ABSENT:"bg-red-500",WFH:"bg-purple-500"};return(0,t.jsx)("div",{className:`${s[e.status]||"bg-gray-500"} rounded-sm px-1 py-0.5 text-[8px] sm:text-[10px] text-white font-medium truncate`,title:`${e.employee_name} - ${e.status}`,children:e.employee_name},e.id)}),l.length>2&&(0,t.jsxs)("div",{className:"text-[8px] sm:text-[10px] text-gray-400 pl-1",children:["+",l.length-2," à¸„à¸™"]})]}):(0,t.jsx)("div",{className:"text-[8px] sm:text-[10px] text-gray-500 text-center mt-2",children:"à¸„à¸¥à¸´à¸à¹€à¸žà¸·à¹ˆà¸­à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"})]},r))}return i})()]})]})]}),"table"===p&&(0,t.jsxs)("div",{className:"space-y-3 sm:space-y-5 px-2 sm:px-0",children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"date",value:h,onChange:e=>u(e.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,t.jsxs)("div",{className:"px-3 sm:px-4 py-2 rounded-lg bg-white/90 text-gray-800 font-medium text-sm sm:text-base flex items-center gap-2 pointer-events-none",children:[(0,t.jsx)("span",{children:h?(()=>{let[e,t,s]=h.split("-");return`${s}/${t}/${e}`})():"à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ"}),(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]})}),(0,t.jsxs)("div",{className:"flex gap-2 sm:gap-3 justify-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>C("new"),className:`rounded-full px-4 sm:px-6 py-2 text-xs sm:text-sm font-semibold uppercase tracking-wide transition ${"new"===y?"bg-white text-blue-700 shadow-lg":"bg-white/40 text-white border border-white/40"}`,children:"à¸¥à¸¹à¸à¸„à¹‰à¸²à¹ƒà¸«à¸¡à¹ˆ"}),(0,t.jsx)("button",{type:"button",onClick:()=>C("old"),className:`rounded-full px-4 sm:px-6 py-2 text-xs sm:text-sm font-semibold uppercase tracking-wide transition ${"old"===y?"bg-slate-50 text-slate-900 shadow-lg":"bg-white/20 text-white border border-white/30"}`,children:"à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²"})]}),"new"===y?(0,t.jsx)("div",{className:"overflow-x-auto w-full rounded-2xl sm:rounded-3xl border border-white/30 shadow-2xl transition bg-white",children:n||0!==td.length?(0,t.jsxs)("div",{className:"divide-y divide-gray-200",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 grid grid-cols-7 sm:grid-cols-11 gap-0",children:[(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¹€à¸§à¸¥à¸²"}),(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸Šà¸·à¹ˆà¸­"}),(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£"}),(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œ"}),(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸«à¸¡à¸­"}),(0,t.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20 sm:border-r",children:"à¸¢à¸­à¸”"}),(0,t.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸”à¸²à¸§"}),(0,t.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸›à¸£à¸°à¹€à¸—à¸¨"}),(0,t.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"})]}),td.map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{onClick:()=>eU(eY===e.id?null:e.id),className:`grid grid-cols-7 sm:grid-cols-11 gap-0 cursor-pointer ${s%2==0?"bg-gradient-to-r from-slate-50 to-blue-50":"bg-gradient-to-r from-blue-100 to-indigo-100"} hover:bg-gradient-to-r hover:from-blue-200 hover:to-indigo-200 transition-all duration-200`,children:[(0,t.jsx)("div",{className:"px-1 py-2 sm:py-3 text-[8px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center",children:k(e.appointmentTime)}),(0,t.jsxs)("div",{className:"px-0.5 py-1 sm:py-2 text-[8px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex flex-col items-center justify-center",children:[(0,t.jsx)("span",{className:"inline-block px-0.5 sm:px-2 py-0.5 sm:py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full text-[6px] sm:text-xs font-bold shadow",children:e.status}),"à¸™à¸±à¸”à¸žà¸£à¹‰à¸­à¸¡à¸—à¸³"===e.status.trim()&&e.hasCustomerProfile&&(0,t.jsx)("span",{className:"mt-0.5 inline-block rounded-full bg-emerald-500/90 text-white text-[5px] sm:text-[10px] font-semibold px-0.5 sm:px-2 py-0.5",children:"OPD"})]}),(0,t.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[8px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center",children:(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),eJ(e)},className:"font-semibold text-blue-600 hover:underline text-[8px] sm:text-sm truncate max-w-full",children:e.customer_name})}),(0,t.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center",children:e.phone}),(0,t.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center truncate",children:e.interested_product}),(0,t.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 font-medium text-center flex items-center justify-center truncate",children:e.doctor}),(0,t.jsx)("div",{className:"hidden sm:flex px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 text-center items-center justify-center truncate",children:e.contact_staff}),(0,t.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 sm:border-r text-center flex items-center justify-center",children:e.proposed_amount.toLocaleString()}),(0,t.jsx)("div",{className:"hidden sm:flex px-1 py-2 sm:py-3 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center items-center justify-center",children:e.star_flag?(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-current",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):(0,t.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),(0,t.jsx)("div",{className:"hidden sm:flex px-1 py-2 sm:py-3 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center items-center justify-center",children:e.country||"-"}),(0,t.jsx)("div",{className:"hidden sm:flex px-1 py-2 sm:py-3 text-xs sm:text-sm text-gray-800 text-center items-center justify-center",children:e.note?(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),te(e)},className:"text-blue-600 hover:underline text-xs truncate max-w-[80px]",children:"à¸”à¸¹à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}):"-"})]}),eY===e.id&&(0,t.jsx)("div",{className:"sm:hidden bg-gradient-to-r from-indigo-50 to-purple-50 px-3 py-3 border-t border-indigo-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­:"}),(0,t.jsx)("p",{className:"text-gray-800 truncate",children:e.contact_staff||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸•à¸´à¸”à¸”à¸²à¸§:"}),(0,t.jsx)("p",{className:"text-gray-800 flex items-center gap-1",children:e.star_flag?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})," à¹ƒà¸Šà¹ˆ"]}):"à¹„à¸¡à¹ˆ"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸›à¸£à¸°à¹€à¸—à¸¨:"}),(0,t.jsx)("p",{className:"text-gray-800",children:e.country||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:"}),(0,t.jsx)("p",{className:"text-gray-800",children:e.note?(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),te(e)},className:"text-blue-600 hover:underline text-left",children:_(e.note)}):"-"})]})]})})]},e.id))]}):(0,t.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,t.jsxs)("div",{className:"bg-white/20 backdrop-blur-md rounded-2xl p-4 sm:p-8 shadow-2xl text-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-white/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,t.jsx)("h3",{className:"text-white font-bold text-lg sm:text-xl mb-2",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"}),(0,t.jsx)("p",{className:"text-white/80 text-sm sm:text-base",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸"})]})})}):(0,t.jsxs)("div",{className:"overflow-x-auto w-full rounded-2xl sm:rounded-3xl border border-white/30 shadow-2xl transition bg-slate-50",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 sm:gap-4 px-3 sm:px-6 pt-4 sm:pt-6 pb-2 text-slate-700",children:[(0,t.jsxs)("div",{className:"font-semibold text-xs sm:text-base",children:["à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²à¸§à¸±à¸™à¸—à¸µà¹ˆ ",tm||tx]}),(0,t.jsxs)("button",{type:"button",onClick:()=>e0(tx),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1 sm:py-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg shadow hover:from-purple-600 hover:to-indigo-600 transition text-xs sm:text-sm",children:[(0,t.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"à¸£à¸µà¹‚à¸«à¸¥à¸”"]})]}),eR&&(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-200 text-red-700 rounded-xl sm:rounded-2xl px-3 sm:px-6 py-3 sm:py-4 m-3 sm:m-6 flex flex-wrap items-center justify-between gap-2 sm:gap-4",children:[(0,t.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:eR}),(0,t.jsx)("button",{type:"button",onClick:()=>e0(tx),className:"px-3 sm:px-4 py-1 sm:py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition text-xs sm:text-sm",children:"à¸¥à¸­à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡"})]}),eH?(0,t.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,t.jsx)("div",{className:"bg-white/60 rounded-2xl p-4 sm:p-8 shadow-2xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,t.jsxs)("svg",{className:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{className:"text-indigo-700 font-semibold text-lg",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²..."})]})})}):0===tc.length?(0,t.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,t.jsxs)("div",{className:"bg-white/70 rounded-2xl p-4 sm:p-8 shadow-2xl text-center",children:[(0,t.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-indigo-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2a2 2 0 012-2h2a2 2 0 012 2v2m-6 0h6m-3-9h.01M4 6h16M4 10h16M4 14h16"})}),(0,t.jsx)("h3",{className:"text-indigo-700 font-bold text-lg sm:text-xl mb-2",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²"}),(0,t.jsx)("p",{className:"text-indigo-500 text-sm sm:text-base",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ à¸¥à¸­à¸‡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸£à¸·à¸­à¸£à¸µà¹‚à¸«à¸¥à¸”à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡"})]})}):(0,t.jsxs)("table",{className:"w-full border-collapse min-w-[700px]",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500",children:[(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸™à¸±à¸”"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸«à¸±à¸•à¸–à¸à¸²à¸£ / à¸šà¸£à¸´à¸à¸²à¸£"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¹à¸žà¸—à¸¢à¹Œ"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸£à¸«à¸±à¸ªà¸™à¸±à¸”"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸•à¸´à¸”à¸”à¸²à¸§"}),(0,t.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white tracking-wide whitespace-nowrap",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"})]})}),(0,t.jsx)("tbody",{children:tc.map((e,s)=>{let{dateLabel:r,timeLabel:a}=(e=>{if(!e)return{dateLabel:"-",timeLabel:"-"};let t=new Date(e);if(!Number.isNaN(t.getTime()))return{dateLabel:t.toLocaleDateString("th-TH",{day:"2-digit",month:"short"}),timeLabel:`${t.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})} à¸™.`};let[s,r]=e.split(/[T\s]/);return{dateLabel:s||"-",timeLabel:r?k(r.slice(0,5)):"-"}})(e.start_date),l=e.dest_name||e.activity||"-",i=e.activity||"à¸£à¸­à¸•à¸´à¸”à¸•à¹ˆà¸­",n=e.organize||e.bind_code||"-",o=_(e.note),d=!!(e.vn&&e.vn.trim()),c=e.appoint_code||`${e.code}-${s}`;return(0,t.jsxs)("tr",{className:`${s%2==0?"bg-gradient-to-r from-white via-indigo-50 to-purple-50":"bg-gradient-to-r from-purple-50 via-pink-50 to-rose-50"} hover:bg-gradient-to-r hover:from-purple-100 hover:to-pink-100 transition-all duration-200`,children:[(0,t.jsxs)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:[(0,t.jsx)("div",{className:"font-semibold text-indigo-700 text-sm sm:text-base",children:a}),(0,t.jsx)("div",{className:"text-[10px] sm:text-xs text-gray-500",children:r})]}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:(0,t.jsx)("span",{className:"inline-block px-2 sm:px-4 py-1 sm:py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full text-[10px] sm:text-xs font-bold shadow",children:i})}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:(e=>{if(e.display_name&&e.display_name.trim())return e.display_name.trim();let t=[e.prefix,e.name,e.surname].filter(e=>!!(e&&e.trim())).map(e=>e.trim());return t.length>0?t.join(" "):e.nickname&&e.nickname.trim()?e.nickname.trim():"-"})(e)}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center whitespace-nowrap",children:(e=>{if(!e)return"-";let t=e.replace(/\D/g,"");return 10===t.length?`${t.slice(0,3)}-${t.slice(3,6)}-${t.slice(6)}`:e.trim()})(e.mobilephone)}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:l}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:e.doctor_name||"-"}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:n}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:e.appoint_code||e.code||"-"}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 bg-gradient-to-r from-amber-100 to-yellow-100 text-center",children:(0,t.jsx)("div",{className:"flex items-center justify-center",children:d?(0,t.jsx)("svg",{className:"w-6 h-6 text-yellow-500 fill-current",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):(0,t.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),(0,t.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 text-left",children:(0,t.jsx)("div",{className:"text-xs sm:text-sm text-gray-700",title:e.note||void 0,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:o})})]},c)})})]})]})]}),"table"===p&&"new"===y&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 px-3 sm:px-8 py-3 sm:py-6 border-t-4 border-indigo-600",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-4",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-base text-white flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"ðŸ“Š à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:"}),(0,t.jsxs)("span",{className:"bg-white text-blue-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[l.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]}),(0,t.jsxs)("div",{className:"text-xs sm:text-base text-white flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"ðŸ’Ž à¸£à¸§à¸¡à¸¢à¸­à¸”:"}),(0,t.jsxs)("span",{className:"bg-white text-purple-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[l.reduce((e,t)=>e+t.proposedAmount,0).toLocaleString()," ","à¸šà¸²à¸—"]})]})]})}),"table"===p&&"old"===y&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 px-3 sm:px-8 py-3 sm:py-6 border-t-4 border-purple-600",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-4 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-base",children:[(0,t.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"ðŸ“ à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²:"}),(0,t.jsxs)("span",{className:"bg-white text-purple-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[tc.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-base",children:[(0,t.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"â­ à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ VN:"}),(0,t.jsxs)("span",{className:"bg-white text-pink-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[tc.filter(e=>e.vn&&e.vn.trim()).length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]})]})})]})}),E&&L.length>0&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center z-50",onClick:e8,children:(0,t.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{animation:"slideUp 0.3s ease-out"},className:"jsx-12a0491c9b316183 bg-gradient-to-br from-white to-blue-50 rounded-t-3xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden animate-slide-up",children:[(0,t.jsx)(s.default,{id:"12a0491c9b316183",children:"@keyframes slideUp{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}"}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 bg-gradient-to-r from-blue-500 to-indigo-600 px-4 sm:px-6 py-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"jsx-12a0491c9b316183 bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-5 h-5 sm:w-6 sm:h-6 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",className:"jsx-12a0491c9b316183"})})}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("h2",{className:"jsx-12a0491c9b316183 text-lg sm:text-2xl font-bold text-white",children:["à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¸§à¸±à¸™à¸—à¸µà¹ˆ"," ",(()=>{let[e,t,s]=M.split("-").map(Number);return new Date(e,t-1,s).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})()]}),(0,t.jsxs)("p",{className:"jsx-12a0491c9b316183 text-blue-100 text-xs sm:text-sm",children:["à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” ",L.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]})]}),(0,t.jsx)("button",{onClick:e8,className:"jsx-12a0491c9b316183 bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-5 h-5 sm:w-6 sm:h-6 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12",className:"jsx-12a0491c9b316183"})})})]}),(0,t.jsx)("div",{className:"jsx-12a0491c9b316183 p-4 sm:p-6 space-y-4 max-h-[calc(85vh-140px)] overflow-y-auto",children:L.map((e,s)=>(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"jsx-12a0491c9b316183 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-2.5 py-0.5 rounded-full text-xs font-bold",children:["#",s+1]}),(0,t.jsx)("button",{type:"button",onClick:()=>eJ(e),className:"jsx-12a0491c9b316183 text-lg sm:text-xl font-bold text-blue-600 hover:underline",children:e.customer_name}),(0,t.jsx)("span",{className:"jsx-12a0491c9b316183 text-gray-500 text-sm",children:e.phone})]}),(0,t.jsx)("span",{className:"jsx-12a0491c9b316183 px-3 py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full text-xs font-bold",children:e.status})]}),(0,t.jsx)("div",{className:"jsx-12a0491c9b316183 px-4 py-2",children:(0,t.jsxs)("button",{onClick:()=>e4(e.id),className:"jsx-12a0491c9b316183 w-full px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold shadow transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-4 h-4",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",className:"jsx-12a0491c9b316183"})}),"à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"]})}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 px-4 py-3 grid grid-cols-2 gap-x-6 gap-y-3",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183 text-red-500",children:"â°"})," à¹€à¸§à¸¥à¸²à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:k(e.appointmentTime)})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ‘¨â€âš•ï¸"})," à¹à¸žà¸—à¸¢à¹Œ"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:e.doctor})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ’Š"})," à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œ"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:(e=>{if(!e)return"-";let t=e.trim();return t&&"null"!==t.toLowerCase()&&"undefined"!==t.toLowerCase()?t:"-"})(e.interested_product||e.interestedProduct)})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸŒ"})," à¸›à¸£à¸°à¹€à¸—à¸¨"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:e.country||"-"})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ‘¤"})," à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:e.contact_staff||"-"})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ’°"})," à¸¢à¸­à¸”à¹€à¸ªà¸™à¸­"]}),(0,t.jsxs)("p",{className:"jsx-12a0491c9b316183 text-purple-600 font-bold text-lg sm:text-xl",children:[e.proposed_amount.toLocaleString()," à¸¿"]})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"â­"})," à¸•à¸´à¸”à¸”à¸²à¸§"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base flex items-center gap-1",children:e.star_flag?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-5 h-5 text-yellow-500 fill-current",children:(0,t.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",className:"jsx-12a0491c9b316183"})})," à¹ƒà¸Šà¹ˆ"]}):"à¹„à¸¡à¹ˆ"})]}),(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,t.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ¥"})," OPD"]}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:"à¸™à¸±à¸”à¸žà¸£à¹‰à¸­à¸¡à¸—à¸³"===e.status.trim()&&e.hasCustomerProfile?(0,t.jsx)("span",{className:"jsx-12a0491c9b316183 text-emerald-600",children:"à¹€à¸›à¸´à¸” OPD à¹à¸¥à¹‰à¸§"}):"-"})]})]}),e.note&&(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 mx-4 mb-3 bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-xs text-gray-600 font-medium mb-1",children:"ðŸ“ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,t.jsx)("p",{className:"jsx-12a0491c9b316183 text-sm text-gray-800",children:e.note})]}),(e.surgery_date||e.consult_date)&&(0,t.jsxs)("div",{className:"jsx-12a0491c9b316183 px-4 pb-3 flex flex-wrap gap-2",children:[e.surgery_date&&(0,t.jsx)("div",{className:"jsx-12a0491c9b316183 bg-red-100 px-3 py-1 rounded-full",children:(0,t.jsxs)("span",{className:"jsx-12a0491c9b316183 text-red-700 font-bold text-xs",children:["ðŸ¥ à¸œà¹ˆà¸²à¸•à¸±à¸”:"," ",(()=>{let[t,s,r]=e.surgery_date.split("-").map(Number);return new Date(t,s-1,r).toLocaleDateString("th-TH")})()]})}),e.consult_date&&(0,t.jsx)("div",{className:"jsx-12a0491c9b316183 bg-blue-100 px-3 py-1 rounded-full",children:(0,t.jsxs)("span",{className:"jsx-12a0491c9b316183 text-blue-700 font-bold text-xs",children:["ðŸ“… à¸›à¸£à¸¶à¸à¸©à¸²:"," ",(()=>{let[t,s,r]=e.consult_date.split("-").map(Number);return new Date(t,s-1,r).toLocaleDateString("th-TH")})()]})})]})]},e.id))}),(0,t.jsx)("div",{className:"jsx-12a0491c9b316183 bg-gray-100 px-4 sm:px-6 py-3 flex justify-end border-t",children:(0,t.jsx)("button",{onClick:e8,className:"jsx-12a0491c9b316183 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸›à¸´à¸”"})})]})}),D&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>P(!1),children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white to-emerald-50 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-6 rounded-t-2xl flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white",children:"à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸™à¸±à¸à¸‡à¸²à¸™"}),(0,t.jsx)("p",{className:"text-emerald-100 text-sm mt-1",children:"à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸«à¸¡à¹ˆ"})]})]}),(0,t.jsx)("button",{onClick:()=>P(!1),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-gray-700 font-bold mb-2",children:["à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:B.full_name,onChange:e=>ts("full_name",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",placeholder:"à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡"}),(0,t.jsx)("input",{type:"text",value:B.role,onChange:e=>ts("role",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",placeholder:"à¹€à¸Šà¹ˆà¸™ à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸‚à¸²à¸¢, à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¸§à¸±à¸™à¸¥à¸²à¸•à¹ˆà¸­à¸›à¸µ"}),(0,t.jsx)("input",{type:"number",value:B.yearly_leave_quota,onChange:e=>ts("yearly_leave_quota",parseInt(e.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",min:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¸§à¸±à¸™à¸¥à¸²à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­"}),(0,t.jsx)("input",{type:"number",value:B.leave_remaining,onChange:e=>ts("leave_remaining",parseInt(e.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",min:"0"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"}),(0,t.jsx)("input",{type:"time",value:B.work_start_time,onChange:e=>ts("work_start_time",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¹€à¸¥à¸´à¸à¸‡à¸²à¸™"}),(0,t.jsx)("input",{type:"time",value:B.work_end_time,onChange:e=>ts("work_end_time",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"is_active",checked:B.is_active,onChange:e=>ts("is_active",e.target.checked),className:"w-5 h-5 rounded border-2 border-gray-300 text-emerald-600 focus:ring-emerald-500"}),(0,t.jsx)("label",{htmlFor:"is_active",className:"text-gray-700 font-bold",children:"à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸‡à¸²à¸™à¸­à¸¢à¸¹à¹ˆ"})]})]}),(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>P(!1),className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,t.jsx)("button",{onClick:tr,className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸šà¸±à¸™à¸—à¸¶à¸"})]})]})}),W&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>z(!1),children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white to-teal-50 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 p-6 rounded-t-2xl flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[K?"à¹à¸à¹‰à¹„à¸‚":"à¸šà¸±à¸™à¸—à¸¶à¸","à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"]}),(0,t.jsx)("p",{className:"text-teal-100 text-sm mt-1",children:K?"à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²-à¸­à¸­à¸à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸žà¸™à¸±à¸à¸‡à¸²à¸™":"à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²-à¸­à¸­à¸à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸žà¸™à¸±à¸à¸‡à¸²à¸™"})]})]}),(0,t.jsx)("button",{onClick:()=>z(!1),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-gray-700 font-bold mb-2",children:["à¸žà¸™à¸±à¸à¸‡à¸²à¸™ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),K?(0,t.jsx)("div",{className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-gray-100 text-gray-800 font-bold",children:K.employee_name||`ID: ${K.employee_id}`}):(0,t.jsxs)("select",{value:R.employee_id,onChange:e=>ta("employee_id",parseInt(e.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800",children:[(0,t.jsx)("option",{value:0,children:"à¹€à¸¥à¸·à¸­à¸à¸žà¸™à¸±à¸à¸‡à¸²à¸™"}),A.filter(e=>{if(R.work_date){let t=R.work_date.split("T")[0];return!H.some(s=>{let r=s.work_date.split("T")[0];return Number(s.employee_id)===Number(e.id)&&r===t})}return!0}).map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.full_name," - ",e.role]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-gray-700 font-bold mb-2",children:["à¸§à¸±à¸™à¸—à¸µà¹ˆ ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",value:R.work_date,onChange:e=>ta("work_date",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"}),(0,t.jsx)("input",{type:"time",value:R.time_in,onChange:e=>ta("time_in",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¸­à¸­à¸à¸‡à¸²à¸™"}),(0,t.jsx)("input",{type:"time",value:R.time_out,onChange:e=>ta("time_out",e.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:()=>{z(!1),Q(null)},className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,t.jsx)("button",{onClick:ti,className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white rounded-lg font-bold shadow-lg transition-all",children:K?"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚":"à¸šà¸±à¸™à¸—à¸¶à¸"})]})]})}),Y&&q.length>0&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>U(!1),children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white to-teal-50 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 p-6 rounded-t-2xl flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸§à¸±à¸™à¸—à¸µà¹ˆ"," ",(()=>{let[e,t,s]=G.split("-").map(Number);return new Date(e,t-1,s).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})()]}),(0,t.jsxs)("p",{className:"text-teal-100 text-sm mt-1",children:["à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” ",q.length," à¸„à¸™"]})]})]}),(0,t.jsx)("button",{onClick:()=>U(!1),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"mb-4 flex justify-end",children:(0,t.jsxs)("button",{onClick:()=>{U(!1),Q(null),setTimeout(()=>{O({employee_id:0,work_date:G,time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),z(!0)},100)},className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg transition-all shadow-lg font-bold flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸™à¸±à¸à¸‡à¸²à¸™"]})}),(0,t.jsx)("div",{className:"space-y-4",children:q.map((e,s)=>(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white to-teal-50 rounded-xl p-4 border-2 border-teal-200 shadow-lg hover:shadow-xl transition-all",children:[(0,t.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"bg-gradient-to-br from-teal-400 to-cyan-500 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg",children:e.employee_name?.charAt(0)||"?"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-teal-600 font-medium",children:"à¸Šà¸·à¹ˆà¸­à¸žà¸™à¸±à¸à¸‡à¸²à¸™"}),(0,t.jsx)("div",{className:"font-bold text-gray-800 text-lg",children:e.employee_name||`ID: ${e.employee_id}`})]})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("div",{className:"text-xs text-teal-600 font-medium mb-1",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,t.jsx)("span",{className:`inline-block px-4 py-2 rounded-lg font-bold border-2 text-sm ${{PRESENT:"bg-green-100 text-green-800 border-green-300",LATE:"bg-yellow-100 text-yellow-800 border-yellow-300",LEAVE:"bg-blue-100 text-blue-800 border-blue-300",ABSENT:"bg-red-100 text-red-800 border-red-300",WFH:"bg-purple-100 text-purple-800 border-purple-300"}[e.status]||"bg-gray-100 text-gray-800 border-gray-300"}`,children:{PRESENT:"à¸¡à¸²à¸—à¸³à¸‡à¸²à¸™",LATE:"à¸¡à¸²à¸ªà¸²à¸¢",LEAVE:"à¸¥à¸²",ABSENT:"à¸‚à¸²à¸”à¸‡à¸²à¸™",WFH:"WFH"}[e.status]||e.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-teal-600 font-medium mb-1",children:"à¹€à¸§à¸¥à¸²à¹€à¸‚à¹‰à¸²"}),(0,t.jsx)("div",{className:"bg-blue-100 text-blue-800 rounded-lg px-3 py-2 font-bold text-center",children:k(e.time_in)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs text-teal-600 font-medium mb-1",children:"à¹€à¸§à¸¥à¸²à¸­à¸­à¸"}),(0,t.jsx)("div",{className:"bg-orange-100 text-orange-800 rounded-lg px-3 py-2 font-bold text-center",children:k(e.time_out)})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{Q(e),O({employee_id:e.employee_id,work_date:e.work_date.split("T")[0],time_in:e.time_in,time_out:e.time_out,status:e.status,work_hours:e.work_hours,overtime_hours:e.overtime_hours,note:e.note}),U(!1),z(!0)},className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold shadow transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"à¹à¸à¹‰à¹„à¸‚"]}),(0,t.jsxs)("button",{onClick:()=>e.id&&tl(e.id),className:"flex-1 px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold shadow transition-all flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"à¸¥à¸š"]})]})]},e.id||s))})]}),(0,t.jsx)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end",children:(0,t.jsx)("button",{onClick:()=>U(!1),className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸›à¸´à¸”"})})]})}),ex&&en&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e7,children:(0,t.jsxs)("div",{className:"bg-gradient-to-br from-white to-indigo-50 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 rounded-t-2xl flex justify-between items-center text-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold",children:["à¸šà¸£à¸´à¸à¸²à¸£à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡ ",en.groupname]}),(0,t.jsxs)("p",{className:"text-xs text-white/80 mt-1",children:["à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ b_itemservice (groupcode = ",en.groupcode,")"]})]}),(0,t.jsx)("button",{onClick:e7,className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[eh&&(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£..."}),ep&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:ep}),!eh&&!ep&&0===ed.length&&(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰"}),!eh&&ed.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:ed.map(e=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-xl p-3 bg-white shadow-sm",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.itemcode}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:e.itemname})]},e.itemcode))})]}),(0,t.jsx)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end",children:(0,t.jsx)("button",{onClick:e7,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg font-semibold shadow-lg transition-all",children:"à¸›à¸´à¸”"})})]})}),Z&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:tt,children:(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-8",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:Z.customer_name||"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"})]}),(0,t.jsx)("button",{type:"button",onClick:tt,className:"text-gray-500 hover:text-gray-800 transition","aria-label":"à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¸•à¹ˆà¸²à¸‡à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 6l12 12M6 18L18 6"})})})]}),(0,t.jsx)("div",{className:"bg-gray-100 rounded-xl p-6 text-left max-h-[60vh] overflow-y-auto",children:(0,t.jsx)("p",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap",children:Z.note??"-"})}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:tt,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-indigo-600 transition",children:"à¸›à¸´à¸”"})})]})}),(0,t.jsx)(N,{visible:eb,loading:ey,saving:ew,exists:e_,form:ef,error:eM,message:eL,lead:eE,staffOptions:eD,staffLoading:eB,staffError:eW,onClose:()=>{ej(!1),ev(null),e$(null),eS(null),eC(!1),eN(!1),ek(!1),eT(null)},onChange:(e,t)=>{ev(s=>{if(!s)return s;if("prefix"===e||"name"===e||"surname"===e){let r=[s.prefix,s.name,s.surname].filter(Boolean).join(" ").trim(),a={...s,[e]:t},l=[a.prefix,a.name,a.surname].filter(Boolean).join(" ").trim();return s.displayname&&s.displayname.trim()!==r||(a.displayname=l),a}return{...s,[e]:t}})},onSubmit:eK})]})}e.s(["default",()=>C],696909)}]);