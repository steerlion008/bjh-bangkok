module.exports=[570350,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944),e=a.i(346271),f=a.i(262036),g=a.i(963519),h=a.i(170106);let i=(0,h.default)("phone-incoming",[["path",{d:"M16 2v6h6",key:"1mfrl5"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),j=(0,h.default)("phone-outgoing",[["path",{d:"m16 8 6-6",key:"oawc05"}],["path",{d:"M22 8V2h-6",key:"oqy2zc"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var k=a.i(641710),l=a.i(167453),m=a.i(941675),n=a.i(669520);let o=(0,h.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),p=(0,h.default)("phone-call",[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var q=a.i(563588),r=a.i(292e3),s=a.i(613749),t=a.i(50522),u=a.i(633508),v=a.i(546842),w=a.i(267900),x=a.i(992258),y=a.i(114548),z=a.i(596221);let A=[{value:"outgoing",label:"à¹‚à¸—à¸£à¸­à¸­à¸",color:"bg-red-500"},{value:"received",label:"à¸£à¸±à¸šà¸ªà¸²à¸¢",color:"bg-yellow-500"},{value:"waiting",label:"à¸£à¸­à¸ªà¸²à¸¢",color:"bg-cyan-500"},{value:"sale",label:"SALE à¸•à¸´à¸”à¸•à¹ˆà¸­",color:"bg-green-500"}],B=({isOpen:a,onClose:d,onSubmit:h,initialData:i,mode:j})=>{let[k,l]=(0,c.useState)(i||{name:"",company:"",phone:"",email:"",status:"waiting",notes:""}),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)({}),r=a=>{let{name:b,value:c}=a.target;l(a=>({...a,[b]:c})),o[b]&&p(a=>({...a,[b]:void 0}))},s=async a=>{let b;if(a.preventDefault(),b={},k.name.trim()||(b.name="à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"),k.phone.trim()||(b.phone="à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ"),k.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(k.email)||(b.email="à¸£à¸¹à¸›à¹à¸šà¸šà¸­à¸µà¹€à¸¡à¸¥à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡"):b.email="à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸­à¸µà¹€à¸¡à¸¥",p(b),0===Object.keys(b).length){n(!0);try{await h(k),d()}catch(a){console.error("Error submitting form:",a)}finally{n(!1)}}};return(0,b.jsx)(f.AnimatePresence,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:d,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),(0,b.jsx)(e.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 flex items-center justify-between rounded-t-2xl",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"create"===j?"à¹€à¸žà¸´à¹ˆà¸¡à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸«à¸¡à¹ˆ":"à¹à¸à¹‰à¹„à¸‚à¸£à¸²à¸¢à¸à¸²à¸£"}),(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:(0,b.jsx)(u.X,{className:"w-6 h-6"})})]}),(0,b.jsxs)("form",{onSubmit:s,className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(v.User,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",id:"name",name:"name",value:k.name,onChange:r,className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${o.name?"border-red-500":"border-gray-300"}`,placeholder:"à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"})]}),o.name&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"company",className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸šà¸£à¸´à¸©à¸±à¸—/à¸­à¸‡à¸„à¹Œà¸à¸£"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(w.Building2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",id:"company",name:"company",value:k.company,onChange:r,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none",placeholder:"à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­à¸šà¸£à¸´à¸©à¸±à¸—"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"tel",id:"phone",name:"phone",value:k.phone,onChange:r,className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${o.phone?"border-red-500":"border-gray-300"}`,placeholder:"08X-XXX-XXXX"})]}),o.phone&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¸­à¸µà¹€à¸¡à¸¥ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(x.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"email",id:"email",name:"email",value:k.email,onChange:r,className:`w-full pl-12 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none ${o.email?"border-red-500":"border-gray-300"}`,placeholder:"example@email.com"})]}),o.email&&(0,b.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.email})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:["à¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:A.map(a=>(0,b.jsx)(e.motion.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(b=>({...b,status:a.value})),className:`p-4 rounded-xl border-2 transition-all ${k.status===a.value?`${a.color} text-white border-transparent shadow-lg`:"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,children:(0,b.jsx)("span",{className:"font-semibold",children:a.label})},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"notes",className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(q.MessageSquare,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),(0,b.jsx)("textarea",{id:"notes",name:"notes",value:k.notes,onChange:r,rows:4,className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all outline-none resize-none",placeholder:"à¹€à¸žà¸´à¹ˆà¸¡à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸«à¸£à¸·à¸­à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡..."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(e.motion.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d,className:"flex-1 px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,b.jsx)(e.motion.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:m,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Loader2,{className:"w-5 h-5 animate-spin"}),"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.Save,{className:"w-5 h-5"}),"à¸šà¸±à¸™à¸—à¸¶à¸"]})})]})]})]})})]})})},C=process.env.NEXT_PUBLIC_PYTHON_API_URL||"https://believable-ambition-production.up.railway.app";async function D(a){try{let b=a?`${C}/api/call-matrix?date=${a}`:`${C}/api/call-matrix`,c=await fetch(b,{method:"GET",headers:{"Content-Type":"application/json"}});if(!c.ok)throw Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(a){throw a}}async function E(a){try{let b=await fetch(`${C}/api/call-matrix/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error(`HTTP error! status: ${b.status}`);return await b.json()}catch(a){throw a}}let F=process.env.NEXT_PUBLIC_PYTHON_API_URL||"https://believable-ambition-production.up.railway.app";async function G(a,b=!0,c=!1){try{let d=new URLSearchParams;a&&d.append("date",a),b&&d.append("count","true"),c&&d.append("today","true");let e=`${F}/api/film-data-contacts?${d.toString()}`,f=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!f.ok)throw Error(`HTTP error! status: ${f.status}`);return await f.json()}catch(a){throw console.error("Error fetching film data contacts:",a),a}}function H(a){let b={},c={},d={à¸ªà¸²:"101",à¸žà¸±à¸”à¸Šà¸²:"102",à¸•à¸±à¹‰à¸‡à¹‚à¸­à¹‹:"103",Test:"104",à¹‚à¸­à¹‹:"105",à¹€à¸•à¹‰:"106",à¹€à¸­à¹‰:"107",à¸­à¹‰à¸­à¸¡:"108"};return a.data.forEach(a=>{let e=a.contact_person||a["à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"]||"",f=a.consult_date||a["à¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸™à¸±à¸” consult"]||"",g=a.surgery_appointment_date||a["à¸§à¸±à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸™à¸±à¸”à¸œà¹ˆà¸²à¸•à¸±à¸”"]||"",h=e.trim(),i=d[h];if(!i){let a=h.match(/^(\d{3})/);if(!a)return;let d=a[1];f&&""!==f.trim()&&(b[d]=(b[d]||0)+1),g&&""!==g.trim()&&(c[d]=(c[d]||0)+1);return}f&&""!==f.trim()&&(b[i]=(b[i]||0)+1),g&&""!==g.trim()&&(c[i]=(c[i]||0)+1)}),{consultCounts:b,surgeryCounts:c}}let I={outgoing:{label:"à¹‚à¸—à¸£à¸­à¸­à¸",color:"bg-red-500",lightColor:"bg-red-100",textColor:"text-red-600",borderColor:"border-red-500",icon:j,gradient:"from-red-500 to-red-600"},received:{label:"à¸£à¸±à¸šà¸ªà¸²à¸¢",color:"bg-yellow-500",lightColor:"bg-yellow-100",textColor:"text-yellow-600",borderColor:"border-yellow-500",icon:i,gradient:"from-yellow-500 to-yellow-600"},waiting:{label:"à¸£à¸­à¸ªà¸²à¸¢",color:"bg-cyan-500",lightColor:"bg-cyan-100",textColor:"text-cyan-600",borderColor:"border-cyan-500",icon:k.Clock,gradient:"from-cyan-500 to-cyan-600"},sale:{label:"SALE à¸•à¸´à¸”à¸•à¹ˆà¸­",color:"bg-green-500",lightColor:"bg-green-100",textColor:"text-green-600",borderColor:"border-green-500",icon:l.CheckCircle2,gradient:"from-green-500 to-green-600"}},J={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},K={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};a.s(["default",0,()=>{let a=(0,d.useRouter)(),[h,i]=(0,c.useState)([]),[j,u]=(0,c.useState)([]),[v,w]=(0,c.useState)("all"),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1),[C,F]=(0,c.useState)(!1),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)("create"),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)([]),[T,U]=(0,c.useState)([]),[V,W]=(0,c.useState)([]),[X,Y]=(0,c.useState)([]),[Z,$]=(0,c.useState)([]),[_,aa]=(0,c.useState)([]),[ab,ac]=(0,c.useState)({customerName:"",phoneNumber:"",product:"",remarks:""}),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(""),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)(""),[ar,as]=(0,c.useState)("success"),[at,au]=(0,c.useState)([]),[av,aw]=(0,c.useState)([]),[ax,ay]=(0,c.useState)(!1),[az,aA]=(0,c.useState)(1),[aB,aC]=(0,c.useState)({}),[aD,aE]=(0,c.useState)({}),[aF,aG]=(0,c.useState)({}),[aH,aI]=(0,c.useState)({}),[aJ,aK]=(0,c.useState)(new Date().toISOString().split("T")[0]),[aL,aM]=(0,c.useState)({isOpen:!1,agentId:"",hourSlot:""}),[aN,aO]=(0,c.useState)({outgoing:"",successful:""}),[aP,aQ]=(0,c.useState)({}),[aR,aS]=(0,c.useState)({}),aT=[{id:"101",label:"101-à¸ªà¸²"},{id:"102",label:"102-à¸žà¸±à¸”à¸Šà¸²"},{id:"103",label:"103-à¸•à¸±à¹‰à¸‡à¹‚à¸­à¹‹"},{id:"104",label:"104-Test"},{id:"105",label:"105-à¸ˆà¸µà¸™"},{id:"106",label:"106-à¸¡à¸¸à¸"},{id:"107",label:"107-à¹€à¸ˆ"},{id:"108",label:"108-à¸§à¹ˆà¸²à¸™"}],aU=R.length>0?R:h,aV=T.length>0?T:aU,aW={outgoing:aU.filter(a=>"outgoing"===a.status).length,received:aU.filter(a=>"received"===a.status).length,waiting:aU.filter(a=>"waiting"===a.status).length,sale:aU.filter(a=>"sale"===a.status).length,total:aU.length},aX=Array.isArray(Z)?Z:[],aY={total:aX.length,incoming:aX.filter(a=>"incoming"===a.status).length,outgoing:aX.filter(a=>"outgoing"===a.status).length,pending:aX.filter(a=>"pending"===a.status).length,completed:aX.filter(a=>"completed"===a.status).length};Object.values(aH).reduce((a,b)=>a+b,0),(0,c.useEffect)(()=>{a2(),a3(),a$(),a_(),a4(),a5(),a6();let a=setInterval(()=>{a0(void 0,"900"),a$(),a_(),a1()},5e3),b=setInterval(()=>{a4(),a5(),a6(),a3()},3e4);return()=>{clearInterval(a),clearInterval(b)}},[aJ]),(0,c.useEffect)(()=>{let a=R.length>0?R:h;"all"!==v&&(a=a.filter(a=>a.status===v)),x&&(a=a.filter(a=>a.name.toLowerCase().includes(x.toLowerCase())||a.company.toLowerCase().includes(x.toLowerCase())||a.phone.includes(x)||a.email.toLowerCase().includes(x.toLowerCase()))),u(a)},[v,x,h,R]),(0,c.useEffect)(()=>{let a=[...Array.isArray(Z)?Z:[]];ab.customerName&&(a=a.filter(a=>a.customerName.toLowerCase().includes(ab.customerName.toLowerCase()))),ab.phoneNumber&&(a=a.filter(a=>a.phoneNumber.includes(ab.phoneNumber))),ab.product&&(a=a.filter(a=>(a.product||"").toLowerCase().includes(ab.product.toLowerCase()))),ab.remarks&&(a=a.filter(a=>(a.remarks||"").toLowerCase().includes(ab.remarks.toLowerCase()))),aa(a)},[ab,Z]);let aZ=a=>{let b=new Date(a);return new Intl.DateTimeFormat("th-TH",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(b)},a$=async()=>{try{let a=await fetch("/api/robocall"),b=await a.json();if(b.success&&Array.isArray(b.data)){let a=b.data.filter(a=>"à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"===a.status);W(a)}}catch(a){console.error("Error fetching Robocall data:",a)}},a_=async()=>{try{let a=await fetch("/api/google-sheets-log-call-ai"),b=await a.json();b.success&&Array.isArray(b.data)?(Y(b.data),console.log("âœ… Log_call_ai data loaded:",b.data.length,"rows"),console.log("ðŸ“‹ Log_call_ai sample data:",b.data[0]),console.log("ðŸ“‹ Headers:",b.headers)):console.error("âŒ Failed to load Log_call_ai:",b.error)}catch(a){console.error("âŒ Error fetching Log_call_ai data:",a)}},a0=async(a,b)=>{try{let c=await fetch("/api/google-sheets-log-call-ai"),d=await c.json(),e=[];d.success&&Array.isArray(d.data)&&(e=d.data,Y(e),console.log("ðŸ”„ à¹‚à¸«à¸¥à¸” Log_call_ai à¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",e.length,"rows"),console.log("ðŸ“‹ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡:",e[0]));let f=await fetch("/api/robocall"),g=await f.json(),h=[];g.success&&Array.isArray(g.data)&&(h=g.data.filter(a=>"à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"===a.status),W(h),console.log("ðŸ”„ à¹‚à¸«à¸¥à¸” Robocall à¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",h.length,"calls"));let i=new URLSearchParams;a?i.append("queue_uuid",a):b&&i.append("queue_extension",b);let j=await fetch(`/api/yalecom/queue-status?${i.toString()}`),k=await j.json();if(!k.success)throw console.error("âŒ API Error:",k.error),Error(k.error||"Failed to fetch queue status");let l=k.data;Q(l);let m={101:"à¸ªà¸²",102:"à¸žà¸±à¸”à¸Šà¸²",103:"à¸•à¸±à¹‰à¸‡à¹‚à¸­à¹‹",104:"Test",105:"à¸ˆà¸µà¸™",106:"à¸¡à¸¸à¸",107:"à¹€à¸ˆ",108:"à¸§à¹ˆà¸²à¸™"},n=l.agents.map(a=>{let b=m[a.agent_id],c=b?`${a.agent_id} - ${b}`:a.agent_name,d="waiting",e="-";return"Dialing"===a.agent_queue_status?(d="outgoing",e=a.agent_outbound_callee_number||"-"):"Ringing"===a.agent_queue_status?(d="waiting",e=a.agent_queue_caller_number||"-"):"InCall"===a.agent_queue_status||"Busy"===a.agent_queue_status||"Inbound"===a.agent_queue_status||"Outbound"===a.agent_queue_status?(d="sale",e=a.agent_queue_caller_number||a.agent_outbound_callee_number||"-"):"Waiting"===a.agent_queue_status&&(d="waiting",e="-"),{id:a.agent_id,name:c,company:l.queue_name,phone:e,email:"",status:d,lastContact:new Date().toISOString(),notes:`à¸ªà¸–à¸²à¸™à¸°: ${a.agent_queue_status}`,createdAt:new Date().toISOString()}});U(n);let o=h.map(a=>{let b=a.effective_caller_id_number,c=a.caller_destination,d=c.replace(/\D/g,""),f=d.replace(/^0/,""),g=e.some(a=>{let b=a.phone||a.Phone||a.à¹€à¸šà¸­à¸£à¹Œ||a["à¹€à¸šà¸­à¸£à¹Œ"]||"",e=String(b).replace(/\D/g,""),g=e.replace(/^0/,""),h=String(a.status||a.Status||a.à¸ªà¸–à¸²à¸™à¸°||"");return(d===e||f===g||c===b)&&"2"===h}),h=e.some(a=>{let b=a.phone||a.Phone||a.à¹€à¸šà¸­à¸£à¹Œ||a["à¹€à¸šà¸­à¸£à¹Œ"]||"",e=String(b).replace(/\D/g,""),g=e.replace(/^0/,""),h=String(a.status||a.Status||a.à¸ªà¸–à¸²à¸™à¸°||"");return(d===e||f===g||c===b)&&"3"===h}),i=e.find(a=>{let b=a.phone||a.Phone||a.à¹€à¸šà¸­à¸£à¹Œ||a["à¹€à¸šà¸­à¸£à¹Œ"]||"",e=String(b).replace(/\D/g,""),g=e.replace(/^0/,"");return d===e||f===g||c===b});if(i){let a=String(i.status||i.Status||i.à¸ªà¸–à¸²à¸™à¸°||"");console.log("ðŸ“ž à¹€à¸ˆà¸­à¹€à¸šà¸­à¸£à¹Œà¸•à¸£à¸‡à¸à¸±à¸™:",{robocallPhone:c,logPhone:i.phone||i.à¹€à¸šà¸­à¸£à¹Œ,logStatus:a,result:"2"===a?"âœ… à¸¢à¹‰à¸²à¸¢à¹„à¸› à¸£à¸±à¸šà¸ªà¸²à¸¢":"3"===a?"â³ à¸¢à¹‰à¸²à¸¢à¹„à¸› à¸£à¸­à¸ªà¸²à¸¢":"ðŸ”´ à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆ à¹‚à¸—à¸£à¸­à¸­à¸"})}else e.length>0?console.log("ðŸ” à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸šà¸­à¸£à¹Œ:",{robocallPhone:c,cleanPhone:d,withoutZero:f,logDataCount:e.length,availableLogPhones:e.map(a=>({phone:a.phone||a.à¹€à¸šà¸­à¸£à¹Œ,status:a.status})),status:"à¹„à¸¡à¹ˆà¹€à¸ˆà¸­à¹€à¸šà¸­à¸£à¹Œà¸•à¸£à¸‡à¸à¸±à¸™ - à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆ à¹‚à¸—à¸£à¸­à¸­à¸"}):0===e.length&&console.warn("âš ï¸ Log_call_ai à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ - à¸£à¸­à¹‚à¸«à¸¥à¸”...");let j="outgoing",k=`Robocall - ${b}`,l="Robocall (à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£)";return g?(j="received",k=c,l="Robocall (à¸£à¸±à¸šà¸ªà¸²à¸¢à¹à¸¥à¹‰à¸§)"):h&&(j="waiting",k=c,l="Robocall (à¸£à¸­à¸ªà¸²à¸¢)"),{id:`robocall-${a.id}`,name:k,company:l,phone:a.caller_destination,email:"",status:j,lastContact:a.created_at,notes:`Robocall ID: ${a.id}, Transfer to: ${a.transfer_to}, Duration: ${a.call_duration}`,createdAt:a.created_at}}),p=l.agents.map(a=>{let b=null,c="-",d=m[a.agent_id],e=d?`${a.agent_id} - ${d}`:a.agent_name;if("Dialing"===a.agent_queue_status)b="outgoing",c=a.agent_outbound_callee_number||"-";else{if("InCall"!==a.agent_queue_status&&"Busy"!==a.agent_queue_status&&"Inbound"!==a.agent_queue_status&&"Outbound"!==a.agent_queue_status)return null;b="sale",c=a.agent_queue_caller_number||a.agent_outbound_callee_number||"-"}return{id:a.agent_id,name:e,company:l.queue_name,phone:c,email:"",status:b,lastContact:new Date().toISOString(),notes:`à¸ªà¸–à¸²à¸™à¸°: ${a.agent_queue_status}`,createdAt:new Date().toISOString()}}).filter(a=>null!==a),q=[...o,...p];return S(q),l}catch(a){return console.error("Error fetching Yalecom queue status:",a),null}},a1=async()=>{try{let a=await fetch("/api/film-contacts");if(a.ok){let b=await a.json(),c=Array.isArray(b)?b:b.data||[];$(c),aa(c),console.log("âœ… Film contacts loaded:",c.length)}}catch(a){console.error("Error fetching film contacts:",a)}},a2=async()=>{try{A(!0);try{let a=await fetch("/api/customer-contacts"),b=await a.json();b.success?(i(b.data),console.log("âœ… Contacts loaded from Supabase:",b.data.length)):b.error&&"Supabase is not configured"!==b.error&&console.warn("âš ï¸ Supabase API warning:",b.error)}catch(a){console.warn("âš ï¸ Supabase not available, skipping...")}await a0(void 0,"900"),await a1()}catch(a){console.error("Error fetching contacts:",a)}finally{A(!1)}},a3=async()=>{try{ay(!0);let a=await fetch("/api/google-sheets-call-ai"),b=await a.json();if(b.success){au(b.data),console.log("ðŸ“‹ All available headers:",b.headers);let a=["à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²","à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡","status","à¹€à¸šà¸­à¸£à¹Œ","start"],c=b.headers.find(a=>"end"===a.toLowerCase());c&&a.push(c);let d=b.headers.filter(b=>a.includes(b));console.log("âœ… Filtered headers:",d),aw(d.length>0?d:a),aA(1),console.log("âœ… Google Sheets Data loaded:",b.data.length,"rows")}else console.error("âŒ Failed to fetch Google Sheets:",b.error)}catch(a){console.error("Error fetching Google Sheets data:",a)}finally{ay(!1)}},a4=async()=>{try{console.log("ðŸ”„ Fetching user_log_robocall data for date:",aJ);let a=new URLSearchParams;a.append("report_date",aJ),a.append("limit","1000");let b=await fetch(`/api/user-log-robocall?${a.toString()}`),c=await b.json();if(c.success&&Array.isArray(c.data)){let a={},b={};c.data.forEach(c=>{let d=c.caller_id_name||c.user_id||"Unknown";for(let b=9;b<=19;b++){let e=`${b.toString().padStart(2,"0")}:00-${(b+1).toString().padStart(2,"0")}:00`,f=parseInt(c[e])||0;f>0&&(a[e]||(a[e]={}),a[e][d]=f)}c.total_day&&(b[d]=parseInt(c.total_day)||0)}),aG(a),aI(b),console.log("âœ… User log robocall data loaded:",a),console.log("ðŸ“Š Totals:",b),console.log("ðŸ“‹ Sample data:",c.data[0])}else console.error("âŒ Failed to load user_log_robocall:",c.error)}catch(a){console.error("âŒ Error fetching user_log_robocall data:",a)}},a5=async()=>{try{console.log("ðŸ”„ Fetching call matrix from Python API for date:",aJ);let a=await D(aJ);if(a.success){let b,c,{callMatrixYaleCounts:d,callMatrixYaleTotals:e}=(b={},c={},a.time_slots.forEach(c=>{let d=c.split("-")[0];b[d]={},Object.entries(a.matrix_data).forEach(([a,e])=>{let f=e[c]||0;b[d][a]=f})}),a.totals_by_agent&&Object.keys(a.totals_by_agent).length>0?Object.entries(a.totals_by_agent).forEach(([a,b])=>{c[a]=b}):Object.entries(a.matrix_data).forEach(([a,b])=>{let d=Object.values(b).reduce((a,b)=>a+b,0);c[a]=d}),{callMatrixYaleCounts:b,callMatrixYaleTotals:c});aC(d),aE(e),console.log("âœ… Call matrix loaded from Python API:",{date:a.date,grand_total:a.grand_total,agents:Object.keys(a.matrix_data).length,time_slots:a.time_slots.length})}else console.error("âŒ Failed to fetch call matrix from Python API:",a)}catch(a){console.error("âŒ Error fetching call matrix from Python API:",a),console.log("âš ï¸ Trying fallback to Google Sheets API...");try{let a=await fetch(`/api/google-sheets-call-ai-summary?date=${aJ}`),b=await a.json();if(b.success){let a={};Array.isArray(b.timeSlots)&&b.timeSlots.forEach(b=>{if(!b||"object"!=typeof b)return;let c=String(b.hourStart??b.key??"");c&&(a[c]={...b.agentCounts||{}})}),aC(a),aE(b.totals||{}),console.log("âœ… Call matrix loaded from Google Sheets API (fallback):",b)}}catch(a){console.error("âŒ Fallback to Google Sheets API also failed:",a)}}},a6=async()=>{try{let a=new URLSearchParams;a.append("date",aJ),a.append("today","true");let b=await fetch(`/api/film-booking-count?${a.toString()}`),c=await b.json();if(c.success)aQ(c.consultCounts||{}),aS(c.surgeryCounts||{}),console.log("âœ… Film data loaded from SQL API (ORDER BY booking_count DESC):",c),console.log("  - Consult counts by agent:",c.consultCounts),console.log("  - Surgery counts by agent:",c.surgeryCounts),console.log("  - Summary:",c.summary);else{console.warn("âš ï¸ Film data SQL API returned error:",c.error||c),console.log("âš ï¸ Trying fallback to Python API...");try{let a=await G(aJ,!0,!0);if(a.success){let{consultCounts:b,surgeryCounts:c}=H(a);aQ(b),aS(c),console.log("âœ… Film data loaded from Python API (fallback):",a)}else{console.log("âš ï¸ Trying fallback to Google Sheets API...");let a=await fetch(`/api/google-sheets-film-data?date=${aJ}`),b=await a.json();b.success?(aQ(b.agentCounts||{}),aS(b.surgeryCounts||{}),console.log("âœ… Film data loaded from Google Sheets (fallback 2):",b)):(aQ({}),aS({}))}}catch(a){console.error("âŒ All fallbacks failed:",a),aQ({}),aS({})}}}catch(a){console.error("âŒ Error fetching Film data from SQL API:",a);try{let a=await G(aJ,!0,!0);if(a.success){let{consultCounts:b,surgeryCounts:c}=H(a);aQ(b),aS(c),console.log("âœ… Film data loaded from Python API (error fallback):",a)}else aQ({}),aS({})}catch(a){console.error("âŒ Error fallback also failed:",a),aQ({}),aS({})}}},a7=async()=>{if(!aN.outgoing&&!aN.successful)return void alert("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 1 à¸„à¹ˆà¸²");try{let a=parseInt(aN.outgoing)||0,b=parseInt(aN.successful)||0,c=parseInt(aL.hourSlot),d=`${c}-${c+1}`;if(console.log("ðŸ’¾ à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥:",{agent_id:aL.agentId,time_slot:d,outgoing:a,successful:b}),b>0){let a=await E({agent_id:aL.agentId,time_slot:d,value:b});a.success?(console.log("âœ… à¸šà¸±à¸™à¸—à¸¶à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¸œà¹ˆà¸²à¸™ Python API:",a),aM({isOpen:!1,agentId:"",hourSlot:""}),aO({outgoing:"",successful:""}),await a5()):console.error("âŒ à¸šà¸±à¸™à¸—à¸¶à¸à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§:",a.error)}else console.warn("à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸™à¸±à¸š (à¸ªà¸³à¹€à¸£à¹‡à¸ˆ)")}catch(a){console.error("âŒ Error saving call input:",a),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+a.message)}},a8=async a=>{if(ae(a),ai(a.remarks||""),ak(a.nextContactDate||""),ag(!0),a.dbId)try{let b=await fetch("/api/film-contacts/update-last-followup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.dbId})});if(b.ok){let c=(await b.json()).data.last_followup,d=Z.map(b=>b.dbId===a.dbId?{...b,contactDate:c}:b);$(d),ae(a=>a?{...a,contactDate:c}:a)}}catch(a){console.error("Error auto-saving last followup:",a)}},a9=()=>{ag(!1),setTimeout(()=>{ae(null),ai(""),ak("")},300)},ba=(a,b)=>{aq(a),as(b),ao(!0),setTimeout(()=>ao(!1),3e3)},bb=async()=>{if(!ad||!ad.dbId)return void ba("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸”à¹‰: à¹„à¸¡à¹ˆà¸žà¸š ID à¸‚à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥","error");try{am(!0);let[a,b]=await Promise.all([fetch("/api/film-contacts/update-remarks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ad.dbId,remarks:ah})}),fetch("/api/film-contacts/update-next-contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:ad.dbId,nextContactDate:aj})})]);if(a.ok&&b.ok){ba("âœ… à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!","success");let a=Z.map(a=>a.dbId===ad.dbId?{...a,remarks:ah,nextContactDate:aj}:a);$(a),ae({...ad,remarks:ah,nextContactDate:aj})}else{let c=[];if(!a.ok){let b=await a.json();c.push(`à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: ${b.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸”à¹‰"}`)}if(!b.ok){let a=await b.json();c.push(`à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­: ${a.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸”à¹‰"}`)}ba(`âŒ ${c.join(", ")}`,"error")}}catch(a){console.error("Error saving data:",a),ba("âŒ à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥","error")}finally{am(!1)}},bc=async()=>{await a2(),await a3(),await a4(),await a5(),await a6(),await a1()},bd=async a=>{try{if("create"===N){let b=await fetch("/api/customer-contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();c.success&&i(a=>[c.data,...a])}else if("edit"===N&&L){let b=await fetch(`/api/customer-contacts/${L.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();c.success&&i(a=>a.map(a=>a.id===L.id?c.data:a))}}catch(a){throw console.error("Error submitting form:",a),a}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 w-full",children:[(0,b.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)(e.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-4",children:(0,b.jsxs)("button",{onClick:()=>a.push("/home"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white rounded-lg transition-all shadow-md hover:shadow-lg font-medium text-sm",children:[(0,b.jsx)(s.ChevronLeft,{className:"w-5 h-5"}),(0,b.jsx)("span",{children:"à¸à¸¥à¸±à¸šà¹„à¸›à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸"})]})}),(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:(0,b.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-xl p-8 text-center",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"dashboard à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),P&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-4 text-white/90 text-sm mt-4",children:[(0,b.jsxs)("span",{children:["Queue: ",P.queue_name]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["Extension: ",P.queue_extension]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["à¸£à¸­à¸ªà¸²à¸¢: ",P.waiting_calls_in_queue," à¸ªà¸²à¸¢"]})]})]})}),(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-end gap-3 mb-6",children:(0,b.jsxs)(e.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:bc,disabled:z,className:"bg-white hover:bg-gray-50 text-gray-700 px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 shadow-md disabled:opacity-50 border border-gray-200",children:[(0,b.jsx)(n.RefreshCw,{className:`w-5 h-5 ${z?"animate-spin":""}`}),"à¸£à¸µà¹€à¸Ÿà¸£à¸Š"]})}),(0,b.jsx)(e.motion.div,{initial:"hidden",animate:"visible",variants:K,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.keys(I).map(a=>{let c=I[a],d=c.icon,f=aW[a];return(0,b.jsxs)(e.motion.div,{variants:J,whileHover:{y:-5,scale:1.02},onClick:()=>w(v===a?"all":a),className:`cursor-pointer bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-2 ${v===a?c.borderColor:"border-transparent"}`,children:[(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:`p-4 rounded-xl ${c.lightColor} transform hover:rotate-6 transition-transform`,children:(0,b.jsx)(d,{className:`w-8 h-8 ${c.textColor}`})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:f}),(0,b.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"à¸£à¸²à¸¢à¸à¸²à¸£"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:`font-semibold ${c.textColor} text-lg`,children:c.label}),v===a&&(0,b.jsx)(e.motion.div,{initial:{scale:0},animate:{scale:1},className:`w-3 h-3 rounded-full ${c.color}`})]})]}),(0,b.jsx)("div",{className:`h-2 bg-gradient-to-r ${c.gradient}`})]},a)})}),(0,b.jsx)(e.motion.div,{initial:"hidden",animate:"visible",variants:K,className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:Object.keys(I).map(a=>{let c=I[a],d=c.icon,g=j.filter(b=>b.status===a);return(0,b.jsxs)(e.motion.div,{variants:J,className:"bg-white rounded-2xl shadow-lg overflow-hidden border-2 border-gray-100",children:[(0,b.jsx)("div",{className:`p-4 bg-gradient-to-r ${c.gradient} text-white`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d,{className:"w-6 h-6"}),(0,b.jsx)("h3",{className:"font-bold text-lg",children:c.label})]}),(0,b.jsx)("div",{className:"bg-white/20 px-3 py-1 rounded-full text-sm font-semibold",children:g.length})]})}),(0,b.jsx)("div",{className:"p-4 space-y-3 min-h-[400px] max-h-[600px] overflow-y-auto",children:(0,b.jsx)(f.AnimatePresence,{mode:"popLayout",children:0===g.length?(0,b.jsxs)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-center py-8 text-gray-400",children:[(0,b.jsx)(q.MessageSquare,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,b.jsx)("p",{className:"text-sm",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£"})]}):g.map(a=>(0,b.jsx)(e.motion.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:`${c.lightColor} rounded-xl p-4 border-2 ${c.borderColor} transition-all`,children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 text-[16px] truncate",children:a.name}),(0,b.jsx)("p",{className:`text-base font-bold ${c.textColor} whitespace-nowrap`,children:a.phone&&!a.phone.match(/^10[1-8]-/)?a.phone:"-"})]})},a.id))})})]},a)})}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-2xl shadow-xl p-6 mb-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[(0,b.jsx)(o,{className:"w-7 h-7 text-indigo-600"}),"à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” Agents à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:aV.map(a=>{let c=I[a.status],d=c.icon;return(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},className:"bg-gradient-to-br from-gray-50 to-white rounded-xl shadow-md hover:shadow-lg transition-all border border-gray-200 overflow-hidden",children:[(0,b.jsx)("div",{className:`${c.color} px-4 py-2 text-center`,children:(0,b.jsx)("p",{className:"text-white font-bold text-lg",children:a.name})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("div",{className:"mb-3 text-center",children:(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:a.phone})}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 text-center mb-2",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,b.jsxs)("div",{className:`flex items-center justify-center gap-2 ${c.lightColor} ${c.textColor} px-3 py-2 rounded-lg`,children:[(0,b.jsx)(d,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-semibold text-sm",children:c.label})]})]})]})]},a.id)})}),0===aV.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,b.jsx)(r.AlertCircle,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-lg",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Agent"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"à¸à¸£à¸¸à¸“à¸²à¸£à¸­à¸ªà¸±à¸à¸„à¸£à¸¹à¹ˆ..."})]})]}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.65},className:"bg-white rounded-2xl shadow-xl overflow-hidden mb-8",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,b.jsx)(k.Clock,{className:"w-7 h-7"}),"à¸•à¸²à¸£à¸²à¸‡à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹‚à¸—à¸£à¸•à¸²à¸¡à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²"]})}),(0,b.jsxs)("div",{className:"px-6 py-4 bg-white border-b border-gray-200 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4 text-indigo-600"}),(0,b.jsx)("span",{children:"à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:new Date(aJ).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("label",{htmlFor:"call-matrix-date",className:"text-sm font-semibold text-gray-700",children:"à¸§à¸±à¸™à¸—à¸µà¹ˆ"}),(0,b.jsx)("input",{id:"call-matrix-date",type:"date",value:aJ,max:new Date().toISOString().split("T")[0],onChange:a=>{let b=a.target.value;b&&aK(b)},className:"rounded-lg border border-gray-300 px-3 py-2 text-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200"})]})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border border-gray-400 text-sm border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-100",children:[(0,b.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-center font-bold text-gray-700 min-w-[140px]"}),aT.map(a=>(0,b.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-center font-bold text-gray-700",children:a.label},`header-${a.id}`))]})}),(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{className:"bg-blue-50",children:[(0,b.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-blue-200",children:"à¸ˆà¸³à¸™à¸§à¸™ à¸™à¸±à¸”à¸œà¹ˆà¸²à¸•à¸±à¸”"}),aT.map(a=>{let c=aR[a.id]??0;return(0,b.jsx)("td",{className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 bg-blue-50",children:c>0?c:""},`surgery-${a.id}`)})]}),(0,b.jsxs)("tr",{className:"bg-yellow-50",children:[(0,b.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-yellow-200",children:"à¸ˆà¸³à¸™à¸§à¸™ consult"}),aT.map(a=>{let c=aP[a.id]??0;return(0,b.jsx)("td",{className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 bg-yellow-50",children:c>0?c:""},`appointment-${a.id}`)})]}),(0,b.jsxs)("tr",{className:"bg-green-50",children:[(0,b.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-green-200",children:"à¸ˆà¸³à¸™à¸§à¸™à¹‚à¸—à¸£"}),aT.map(a=>{let c=aH[a.id]??0;return(0,b.jsx)("td",{className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 bg-green-50",children:c>0?c:""},`total-${a.id}`)})]}),[{label:"9:00-10:00",start:"9"},{label:"10:00-11:00",start:"10"},{label:"11:00-12:00",start:"11"},{label:"12:00-13:00",start:"12"},{label:"13:00-14:00",start:"13"},{label:"14:00-15:00",start:"14"},{label:"15:00-16:00",start:"15"},{label:"16:00-17:00",start:"16"},{label:"17:00-18:00",start:"17"},{label:"18:00-19:00",start:"18"},{label:"19:00-20:00",start:"19"}].map(a=>(0,b.jsxs)("tr",{className:"bg-white",children:[(0,b.jsx)("th",{className:"border border-gray-400 px-4 py-3 text-left font-semibold text-gray-700 bg-gray-100",children:a.label}),aT.map(c=>{let d=((a,b,c)=>{if("yale"===c){let c=parseInt(b),d=aF[`${c.toString().padStart(2,"0")}:00-${(c+1).toString().padStart(2,"0")}:00`];return d?d[a]??0:0}return"outgoing"===c?aP[a]??0:"passed"===c?aR[a]??0:0})(c.id,a.start,"yale");return(0,b.jsx)("td",{onClick:()=>aM({isOpen:!0,agentId:c.id,hourSlot:a.start}),className:"border border-gray-400 px-4 py-3 text-center font-semibold text-gray-900 cursor-pointer hover:bg-blue-50",children:d>0?d:""},`${a.start}-${c.id}`)})]},`slot-${a.start}`))]})]})}),(0,b.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t-2 border-gray-200",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 text-sm text-gray-600 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{children:["à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸² ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:"7"})," ","à¸Šà¹ˆà¸§à¸‡"]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["à¹€à¸‹à¸¥à¸¥à¹Œ ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:"8"})," à¸„à¸™ (101-108)"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-xs",children:["à¸§à¸±à¸™à¸—à¸µà¹ˆ:"," ",new Date(aJ).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})]})]})]})})]}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.75},className:"bg-white rounded-2xl shadow-xl overflow-hidden mb-8",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-4",children:(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,b.jsx)(p,{className:"w-7 h-7"}),"à¸£à¸²à¸¢à¸à¸²à¸£à¸•à¸´à¸”à¸•à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"]})}),(0,b.jsx)("div",{className:"px-6 py-4 bg-gray-50",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-4 text-white",children:[(0,b.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¸ˆà¸³à¸™à¸§à¸™ Lead"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:aY.total})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl shadow-lg p-4 text-white",children:[(0,b.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¹‚à¸—à¸£à¹à¸¥à¹‰à¸§"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:aY.outgoing})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-4 text-white",children:[(0,b.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¹„à¸¡à¹ˆà¸£à¸±à¸šà¸ªà¸²à¸¢"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:aY.pending})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-4 text-white",children:[(0,b.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¸•à¸´à¸”à¸ªà¸²à¸¢"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:aY.incoming})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-4 text-white",children:[(0,b.jsx)("h3",{className:"text-sm font-bold mb-1",children:"à¸£à¸±à¸šà¸ªà¸²à¸¢"}),(0,b.jsx)("p",{className:"text-3xl font-bold",children:aY.completed})]})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-purple-500 text-white border-b-2 border-purple-600",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œ"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:z?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,b.jsx)(n.RefreshCw,{className:"w-8 h-8 text-purple-600 animate-spin mx-auto"})})}):0===_.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:[(0,b.jsx)(q.MessageSquare,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"})]})}):_.map((a,c)=>(0,b.jsxs)(e.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.02*c},onClick:()=>a8(a),className:"hover:bg-purple-50 transition-colors cursor-pointer",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"font-semibold text-gray-900",children:a.customerName})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-900",children:[(0,b.jsx)(g.Phone,{className:"w-4 h-4 text-purple-600"}),a.phoneNumber]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("div",{className:"text-gray-700",children:a.product||"-"})}),(0,b.jsx)("td",{className:"px-6 py-4 max-w-xs truncate",children:(0,b.jsx)("div",{className:"text-gray-700",children:a.remarks||"-"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.agentId?(0,b.jsxs)("span",{className:"font-semibold text-blue-600",children:["Agent ",a.agentId]}):(0,b.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-semibold ${"incoming"===a.status?"bg-green-500 text-white":"outgoing"===a.status?"bg-blue-500 text-white":"pending"===a.status?"bg-yellow-500 text-white":"bg-gray-500 text-white"}`,children:"incoming"===a.status?"à¸£à¸±à¸šà¸ªà¸²à¸¢":"outgoing"===a.status?"à¹‚à¸—à¸£à¸­à¸­à¸":"pending"===a.status?"à¸£à¸­à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£":"à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:aZ(a.contactDate)})]},a.id))})]})}),_.length>0&&(0,b.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t-2 border-gray-200",children:(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["à¹à¸ªà¸”à¸‡"," ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:_.length})," ","à¸£à¸²à¸¢à¸à¸²à¸£"]})})]}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4",children:(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,b.jsx)(p,{className:"w-7 h-7"}),"à¸•à¸²à¸£à¸²à¸‡à¸ªà¸£à¸¸à¸› call_AI à¸ˆà¸²à¸ Google Sheets"]})}),ax&&(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)(n.RefreshCw,{className:"w-8 h-8 text-indigo-600 animate-spin"}),(0,b.jsx)("span",{className:"ml-3 text-lg text-gray-600",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."})]}),!ax&&at.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b-2 border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:"à¸¥à¸³à¸”à¸±à¸š"}),av.map((a,c)=>(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700 uppercase tracking-wider",children:a},c))]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,b.jsx)(f.AnimatePresence,{mode:"popLayout",children:at.slice((az-1)*20,20*az).map((a,c)=>(0,b.jsxs)(e.motion.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.02*c},className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(az-1)*20+c+1}),av.map((c,d)=>(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:a[c]||"-"},d))]},a.id))})})]})}),at.length>20&&(0,b.jsx)("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["à¹à¸ªà¸”à¸‡"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:(az-1)*20+1})," ","à¸–à¸¶à¸‡"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:Math.min(20*az,at.length)})," ","à¸ˆà¸²à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"," ",(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:at.length})," ","à¸£à¸²à¸¢à¸à¸²à¸£"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>aA(a=>Math.max(a-1,1)),disabled:1===az,className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${1===az?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"}`,children:[(0,b.jsx)(s.ChevronLeft,{className:"w-4 h-4"}),"à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let a=Math.ceil(at.length/20),c=[],d=Math.max(1,az-Math.floor(2.5)),f=Math.min(a,d+5-1);f-d<4&&(d=Math.max(1,f-5+1)),d>1&&(c.push((0,b.jsx)(e.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>aA(1),className:"w-10 h-10 rounded-lg font-semibold text-sm bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:"1"},1)),d>2&&c.push((0,b.jsx)("span",{className:"px-2 text-gray-400",children:"..."},"dots-start")));for(let a=d;a<=f;a++)c.push((0,b.jsx)(e.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>aA(a),className:`w-10 h-10 rounded-lg font-semibold text-sm transition-all ${az===a?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:a},a));return f<a&&(f<a-1&&c.push((0,b.jsx)("span",{className:"px-2 text-gray-400",children:"..."},"dots-end")),c.push((0,b.jsx)(e.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>aA(a),className:"w-10 h-10 rounded-lg font-semibold text-sm bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:a},a))),c})()}),(0,b.jsxs)(e.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>aA(a=>Math.min(a+1,Math.ceil(at.length/20))),disabled:az===Math.ceil(at.length/20),className:`px-4 py-2 rounded-lg font-semibold text-sm transition-all flex items-center gap-2 ${az===Math.ceil(at.length/20)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"}`,children:["à¸–à¸±à¸”à¹„à¸›",(0,b.jsx)(t.ChevronRight,{className:"w-4 h-4"})]})]})]})})]}),!ax&&0===at.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,b.jsx)(r.AlertCircle,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-lg font-semibold",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:'à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸Šà¸µà¸— "à¸ªà¸£à¸¸à¸› call_AI"'})]}),!ax&&at.length>0&&(0,b.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t-2 border-gray-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-6 text-gray-600",children:[(0,b.jsxs)("span",{children:["à¹à¸ªà¸”à¸‡"," ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:at.length})," ","à¸£à¸²à¸¢à¸à¸²à¸£"]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{children:["à¸ˆà¸³à¸™à¸§à¸™à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ"," ",(0,b.jsx)("span",{className:"font-bold text-gray-900",children:av.length})," ","à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(m.Calendar,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"text-xs",children:["à¸­à¸±à¸žà¹€à¸”à¸—à¸¥à¹ˆà¸²à¸ªà¸¸à¸”:"," ",new Date().toLocaleString("th-TH",{dateStyle:"medium",timeStyle:"short"})]})]})]})})]})]}),(0,b.jsx)(f.AnimatePresence,{children:af&&ad&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a9,className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)(e.motion.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:a=>a.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-8 py-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,b.jsx)("button",{onClick:a9,className:"absolute top-4 right-4 bg-white/20 hover:bg-white/30 p-2 rounded-xl",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,b.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:ad.customerName})]}),(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,b.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:ad.phoneNumber})]}),ad.product&&(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,b.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œà¸—à¸µà¹ˆà¸ªà¸™à¹ƒà¸ˆ"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:ad.product})]}),(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,b.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,b.jsx)("p",{className:"text-lg text-gray-900",children:aZ(ad.contactDate)})]}),(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,b.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸•à¸´à¸”à¸•à¸²à¸¡à¸„à¸£à¸±à¹‰à¸‡à¸–à¸±à¸”à¹„à¸›"}),(0,b.jsx)("input",{type:"datetime-local",value:aj,onChange:a=>ak(a.target.value),className:"w-full bg-white rounded-xl px-4 py-3 border-2 border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none text-gray-900"})]}),(0,b.jsxs)("div",{className:"bg-slate-50 rounded-2xl p-6",children:[(0,b.jsx)("label",{className:"block text-base font-bold text-gray-800 mb-3",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,b.jsx)("textarea",{value:ah,onChange:a=>ai(a.target.value),placeholder:"à¸à¸£à¸­à¸à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸...",rows:6,className:"w-full bg-white rounded-xl p-4 border-2 border-gray-300 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all outline-none text-gray-900 resize-none"})]}),(0,b.jsx)("button",{onClick:bb,disabled:al,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-4 rounded-2xl font-bold text-lg transition-all flex items-center justify-center gap-3 shadow-lg",children:al?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.RefreshCw,{className:"w-6 h-6 animate-spin"}),"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.CheckCircle2,{className:"w-6 h-6"}),"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"]})})]})})]})})}),(0,b.jsx)(f.AnimatePresence,{children:an&&(0,b.jsx)(e.motion.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{type:"spring",duration:.5},className:"fixed top-6 right-6 z-[100] max-w-md",children:(0,b.jsxs)("div",{className:`${"success"===ar?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-rose-500"} text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-4`,children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:"font-bold text-lg",children:ap})}),(0,b.jsx)("button",{onClick:()=>ao(!1),className:"hover:bg-white/20 p-1 rounded-lg transition-colors",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),(0,b.jsx)(f.AnimatePresence,{children:aL.isOpen&&(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",onClick:()=>aM({isOpen:!1,agentId:"",hourSlot:""}),children:(0,b.jsxs)(e.motion.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:a=>a.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹‚à¸—à¸£"}),(0,b.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¹€à¸‹à¸¥à¸¥à¹Œ ID:"," ",(0,b.jsx)("span",{className:"text-blue-600",children:aL.agentId})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²:"," ",(0,b.jsxs)("span",{className:"text-blue-600",children:[aL.hourSlot,":00 à¸™."]})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸ˆà¸³à¸™à¸§à¸™à¹‚à¸—à¸£à¸­à¸­à¸"}),(0,b.jsx)("input",{type:"number",min:"0",value:aN.outgoing,onChange:a=>aO({...aN,outgoing:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"à¸ˆà¸³à¸™à¸§à¸™à¸—à¸µà¹ˆà¸™à¸±à¸š (à¸ªà¸³à¹€à¸£à¹‡à¸ˆ)"}),(0,b.jsx)("input",{type:"number",min:"0",value:aN.successful,onChange:a=>aO({...aN,successful:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>aM({isOpen:!1,agentId:"",hourSlot:""}),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,b.jsx)("button",{onClick:a7,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",children:"à¸šà¸±à¸™à¸—à¸¶à¸"})]})]})})}),(0,b.jsx)(B,{isOpen:C,onClose:()=>F(!1),onSubmit:bd,initialData:L?{name:L.name,company:L.company,phone:L.phone,email:L.email,status:L.status,notes:L.notes}:void 0,mode:N})]})}],570350)}];

//# sourceMappingURL=src_app_customer-contact-dashboard_page_tsx_592d29fa._.js.map