module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},650645,a=>{a.n(a.i(827572))},825210,a=>{a.n(a.i(402747))},517537,a=>{a.n(a.i(903363))},13718,a=>{a.n(a.i(685523))},118198,a=>{a.n(a.i(545518))},262212,a=>{a.n(a.i(866114))},522734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},30706,a=>{a.n(a.i(458942))},988057,a=>{"use strict";var b=a.i(907997);a.i(570396);var c=a.i(673727),d=a.i(522734),e=a.i(814747),f=a.i(395936);let g=process.env.NEXT_PUBLIC_BASE_URL||"https://app.bjhbangkok.com",h=e.default.join(process.cwd(),"public","images","video");async function i(a){try{let b,c;try{b=Buffer.from(a,"base64url").toString("utf-8")}catch{return console.log("Failed to decode video ID:",a),null}if(!["/images/video/","images/video/"].some(a=>b.startsWith(a)))return console.log("Path not allowed:",b),null;let f=(b.startsWith("/")?b:`/${b}`).replace(/^\/images\/video\//,""),i=e.default.join(h,f),j=e.default.resolve(i),k=e.default.resolve(h);if(!j.startsWith(k))return console.log("Path traversal attempt blocked:",b),null;if(!d.default.existsSync(i))return console.log("File not found:",i),null;let l=d.default.statSync(i);if(!l.isFile())return console.log("Not a file:",i),null;let m=e.default.basename(i),n=e.default.extname(i).toLowerCase();if(![".mp4",".webm",".mov",".m4v"].includes(n))return console.log("Not a video file:",n),null;let o={".mp4":"video/mp4",".webm":"video/webm",".mov":"video/quicktime",".m4v":"video/x-m4v"}[n]||"video/mp4",p=e.default.dirname(f)||"root",q=e.default.basename(m,n),r=[`${q}_thumb.jpg`,`${q}_thumb.png`,`${q}.jpg`,`${q}.png`],s=`${g}/images/video-placeholder.svg`;for(let a of r){let b=e.default.join(e.default.dirname(i),a);if(d.default.existsSync(b)){let b=e.default.join(e.default.dirname(f),a).split("/").map(a=>encodeURIComponent(a)).join("/");s=`${g}/images/video/${b}`;break}}let t=f.split("/").map(a=>encodeURIComponent(a)).join("/"),u=`${g}/api/serve-video/${t}`,v=`${g}/images/video/${t}`;return{id:a,name:m,displayName:(c=e.default.extname(m).toLowerCase(),e.default.basename(m,c).replace(/[-_]/g," ").replace(/\b\w/g,a=>a.toUpperCase()).trim()),originalUrl:v,videoUrl:u,thumbnail:s,width:1280,height:720,mimeType:o,size:l.size,folder:p}}catch(a){return console.error("Error getting video info:",a),null}}async function j({params:a},b){let{id:c}=await a,d=await i(c);if(!d)return{title:"Video Not Found - BJH Bangkok",description:"The requested video could not be found."};let e=`${g}/all-files-gallery/video/${c}`;return{title:`${d.displayName} - BJH Bangkok`,description:`Watch ${d.displayName} from BJH Bangkok Medical Center`,openGraph:{title:d.displayName,description:`Watch ${d.displayName} from BJH Bangkok Medical Center`,url:e,siteName:"BJH Bangkok",type:"video.other",images:[{url:d.thumbnail,width:d.width,height:d.height,alt:d.displayName}],videos:[{url:d.videoUrl,secureUrl:d.videoUrl,type:"video/mp4",width:d.width,height:d.height}]},twitter:{card:"player",title:d.displayName,description:`Watch ${d.displayName} from BJH Bangkok Medical Center`,images:[d.thumbnail]},other:{"og:video":d.videoUrl,"og:video:secure_url":d.videoUrl,"og:video:type":"video/mp4","og:video:width":String(d.width),"og:video:height":String(d.height),"line:title":d.displayName,"line:description":`Watch ${d.displayName}`,"twitter:player":`${g}/embed/video/${c}`,"twitter:player:width":String(d.width),"twitter:player:height":String(d.height),"twitter:player:stream":d.videoUrl,"twitter:player:stream:content_type":"video/mp4","apple-mobile-web-app-capable":"yes"}}}async function k({params:a}){var d;let{id:e}=await a,h=await i(e);h||(0,c.notFound)();let j=`${g}/all-files-gallery/video/${e}`,k=`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(j)}`;return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,b.jsxs)(f.default,{href:"/all-files-gallery",className:"inline-flex items-center gap-2 text-white/70 hover:text-white mb-6 transition-colors",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Gallery"]}),(0,b.jsx)("div",{className:"bg-black rounded-2xl overflow-hidden shadow-2xl",children:(0,b.jsxs)("video",{controls:!0,autoPlay:!0,playsInline:!0,preload:"metadata",poster:h.thumbnail,className:"w-full aspect-video",children:[(0,b.jsx)("source",{src:h.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:h.displayName}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-white/60 text-sm mb-4",children:[(0,b.jsxs)("span",{children:[" ",h.folder]}),(0,b.jsxs)("span",{children:[" ",(d=h.size)<1024?`${d} B`:d<1048576?`${(d/1024).toFixed(1)} KB`:d<0x40000000?`${(d/1048576).toFixed(1)} MB`:`${(d/0x40000000).toFixed(1)} GB`]})]}),(0,b.jsxs)("div",{className:"mt-8 p-6 bg-white/5 rounded-2xl border border-white/10",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-white mb-4",children:"Share this video"}),(0,b.jsx)("p",{className:"text-white/60 text-sm mb-4",children:"Share this link on LINE for inline video playback"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-black/30 rounded-xl p-3 mb-4",children:[(0,b.jsx)("input",{type:"text",readOnly:!0,value:j,className:"flex-1 bg-transparent text-white/80 text-sm outline-none"}),(0,b.jsx)("button",{onClick:()=>{"undefined"!=typeof navigator&&navigator.clipboard?.writeText(j)},className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-lg transition-colors",children:"Copy"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsxs)("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#00B900] hover:bg-[#00A000] text-white rounded-xl font-medium transition-colors",children:[(0,b.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.349 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),"Share on LINE"]}),(0,b.jsxs)("button",{onClick:()=>{"undefined"!=typeof navigator&&(navigator.clipboard?.writeText(j),alert("Link copied!"))},className:"inline-flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-colors",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy Link"]}),(0,b.jsxs)("button",{onClick:()=>{"undefined"!=typeof navigator&&navigator.share&&navigator.share({title:h.displayName,text:`Watch ${h.displayName} from BJH Bangkok`,url:j})},className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium transition-colors",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),"Share"]})]})]}),(0,b.jsxs)("div",{className:"mt-6 p-4 bg-green-500/10 border border-green-500/20 rounded-xl",children:[(0,b.jsxs)("h3",{className:"text-green-300 font-semibold mb-2 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,b.jsx)("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.349 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.281.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),"LINE Inline Video Playback"]}),(0,b.jsxs)("ul",{className:"text-green-200/80 text-sm space-y-1",children:[(0,b.jsx)("li",{children:" Copy and paste this link directly into LINE chat"}),(0,b.jsx)("li",{children:" LINE will show a video preview thumbnail"}),(0,b.jsx)("li",{children:" Tap play to watch inline without leaving LINE"}),(0,b.jsx)("li",{children:' Or use the green "Share on LINE" button above'})]})]}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsxs)("a",{href:h.originalUrl,download:h.name,className:"inline-flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-medium transition-colors",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download Video"]})})]})]})})}a.s(["default",()=>k,"generateMetadata",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a2ada056._.js.map