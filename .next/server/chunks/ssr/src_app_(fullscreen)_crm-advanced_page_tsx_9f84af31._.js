module.exports=[304325,a=>{"use strict";var b=a.i(187924),c=a.i(731626),d=a.i(572131),e=a.i(50944);let f="w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-500",g="block text-sm font-semibold text-gray-700",h=[{label:"à¹€à¸¥à¸·à¸­à¸à¹€à¸žà¸¨",value:""},{label:"à¸Šà¸²à¸¢",value:"M"},{label:"à¸«à¸à¸´à¸‡",value:"F"},{label:"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸",value:"X"}],i="https://raw.githubusercontent.com/kongvut/thai-province-data/refs/heads/master/api/latest",j=null,k=null;async function l(){return j||(k||(k=Promise.all([fetch(`${i}/province.json`).then(a=>{if(!a.ok)throw Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”à¹„à¸”à¹‰");return a.json()}),fetch(`${i}/district.json`).then(a=>{if(!a.ok)throw Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸³à¹€à¸ à¸­à¹„à¸”à¹‰");return a.json()}),fetch(`${i}/sub_district.json`).then(a=>{if(!a.ok)throw Error("à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸•à¸³à¸šà¸¥à¹„à¸”à¹‰");return a.json()})]).then(([a,b,c])=>{let d={provinces:a,districts:b,subdistricts:c};return j=d,d})),k)}let m="__province_legacy__",n="__district_legacy__",o="__subdistrict_legacy__";function p(a){return a?a.trim().toLowerCase():""}function q(a,b){let c=p(b);return!!c&&(p(a.name_th)===c||p(a.name_en)===c)}let r=new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}),s=a=>Number.isFinite(a)?r.format(a):"0.00",t=a=>Number.isFinite(a)?a.toFixed(2):"",u=a=>{let b=a.trim();if(!b)return 0;let c=Number(b);return Number.isFinite(c)?c:0},v=a=>{if(null==a)return 0;let b="number"==typeof a?a:Number(a);return Number.isFinite(b)?b:0};function w({visible:a,loading:c,saving:e,exists:i,form:j,error:k,message:r,lead:w,staffOptions:x,staffLoading:y,staffError:z,onClose:A,onChange:B,onSubmit:C}){let[D,E]=(0,d.useState)(!1),[F,G]=(0,d.useState)(""),[H,I]=(0,d.useState)(""),[J,K]=(0,d.useState)(!1),[L,M]=(0,d.useState)(null),[N,O]=(0,d.useState)([]),[P,Q]=(0,d.useState)([]),[R,S]=(0,d.useState)([]),[T,U]=(0,d.useState)(null),[V,W]=(0,d.useState)(null),[X,Y]=(0,d.useState)(null),[Z,$]=(0,d.useState)(null),_=(0,d.useRef)(null),[aa,ab]=(0,d.useState)([]),[ac,ad]=(0,d.useState)(!1),[ae,af]=(0,d.useState)(null),[ag,ah]=(0,d.useState)(""),[ai,aj]=(0,d.useState)([]),[ak,al]=(0,d.useState)(!1),[am,an]=(0,d.useState)(!1),[ao,ap]=(0,d.useState)(null),[aq,ar]=(0,d.useState)(""),[as,at]=(0,d.useState)([]),au=(0,d.useRef)(null),av=(0,d.useRef)(null),aw=(0,d.useRef)(null),ax=(0,d.useRef)(null),ay=(0,d.useRef)(null);(0,d.useEffect)(()=>{G(j?.idcardFrontImage||""),I(j?.idcardBackImage||"")},[j?.idcardFrontImage,j?.idcardBackImage]),(0,d.useEffect)(()=>{let a=!1;return(async()=>{ad(!0),af(null);try{let b=await fetch("/api/b-item-groups"),c=await b.json();if(!b.ok||!1===c.success)throw Error(c.error||"à¹„à¸¡à¹ˆà¸žà¸šà¸à¸¥à¸¸à¹ˆà¸¡à¸‚à¸²à¸¢ OPD");if(a)return;ab(Array.isArray(c.data)?c.data:[])}catch(b){if(a)return;af(b?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸à¸¥à¸¸à¹ˆà¸¡à¸‚à¸²à¸¢ OPD à¹„à¸”à¹‰")}finally{if(a)return;ad(!1)}})(),()=>{a=!0}},[]);let az=async a=>{if(!a)return void aj([]);au.current=a,an(!0),ap(null),aj([]);try{let b=await fetch(`/api/b-item-services?groupCode=${encodeURIComponent(a)}`),c=await b.json();if(!b.ok||!1===c.success)throw Error(c.error||"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£");if(au.current!==a)return;let d=Array.isArray(c.data)?c.data.map(a=>({...a,saleprice:v(a.saleprice)})):[];aj(d)}catch(b){if(au.current!==a)return;ap(b?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£à¹„à¸”à¹‰")}finally{au.current===a&&an(!1)}},aA=()=>{al(!1),ar(""),ap(null)},aB=(a,b)=>{at(c=>c.map(c=>c.id===a?b(c):c))},aC=(0,d.useMemo)(()=>aa.find(a=>a.groupcode===ag)??null,[aa,ag]),aD=(0,d.useMemo)(()=>as.reduce((a,b)=>{let c=Number.isFinite(b.salesprice)?b.salesprice:0,d=u(b.chargePrice),e=u(b.discountPrice);return a.baseTotal+=c,a.chargeTotal+=d,a.discountTotal+=e,a.netTotal+=c+d-e,a},{baseTotal:0,chargeTotal:0,discountTotal:0,netTotal:0}),[as]),aE=(0,d.useMemo)(()=>{if(!aq.trim())return ai;let a=aq.trim().toLowerCase();return ai.filter(b=>b.itemname.toLowerCase().includes(a)||b.itemcode.toLowerCase().includes(a))},[ai,aq]),aF=(0,d.useMemo)(()=>`${j?.cn??""}::${j?.code??""}`,[j?.cn,j?.code]);(0,d.useEffect)(()=>{if(!a){_.current=null,$(null);return}j&&(_.current===aF&&Z||($({...j}),_.current=aF))},[a,j,aF,Z]);let aG=p(j?.country??"Thailand"),aH=!j?.country||"thailand"===aG||"à¹„à¸—à¸¢"===aG||"th"===aG;(0,d.useEffect)(()=>{if(!a||!aH||N.length&&P.length&&R.length)return;let b=!1;return K(!0),l().then(a=>{b||(O(a.provinces),Q(a.districts),S(a.subdistricts),M(null))}).catch(a=>{b||M(a?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸›à¸£à¸°à¹€à¸—à¸¨à¹„à¸—à¸¢à¹„à¸”à¹‰")}).finally(()=>{b||K(!1)}),()=>{b=!0}},[a,aH,N.length,P.length,R.length]),(0,d.useEffect)(()=>{aH||(U(null),W(null),Y(null))},[aH]),(0,d.useEffect)(()=>{if(!aH||!N.length||!j?.province){j?.province||U(null);return}let a=N.find(a=>q(a,j.province));U(a?a.id:null)},[j?.province,aH,N]),(0,d.useEffect)(()=>{if(!aH||!P.length)return;if(!T||!j?.amphur)return void W(null);let a=P.find(a=>a.province_id===T&&q(a,j.amphur));W(a?a.id:null)},[j?.amphur,aH,P,T]),(0,d.useEffect)(()=>{if(!aH||!R.length)return;if(!V||!j?.tumbon)return void Y(null);let a=R.find(a=>a.district_id===V&&q(a,j.tumbon));Y(a?a.id:null)},[j?.tumbon,aH,R,V]);let aI=(0,d.useMemo)(()=>N.map(a=>({id:a.id,label:`${a.name_th} (${a.name_en})`})),[N]),aJ=(0,d.useMemo)(()=>T?P.filter(a=>a.province_id===T).map(a=>({id:a.id,label:`${a.name_th} (${a.name_en})`})):[],[P,T]),aK=(0,d.useMemo)(()=>V?R.filter(a=>a.district_id===V).map(a=>({id:a.id,label:`${a.name_th} (${a.name_en})`})):[],[R,V]),aL=aH&&N.length>0&&P.length>0&&R.length>0&&!L,aM=j?.ownername?.trim()||"",aN=j?.ownercode?.trim()||"";(0,d.useEffect)(()=>{if(!a||!aM||aN)return;let b=x.find(a=>a.nickname===aM);b&&(B("ownercode",b.code),b.nickname!==aM&&B("ownername",b.nickname))},[a,aM,aN,x,B]);let aO=(a,b)=>{if(!b)return void("front"===a?(G(""),B("idcardFrontImage","")):(I(""),B("idcardBackImage","")));let c=new FileReader;c.onload=()=>{let b="string"==typeof c.result?c.result:"";"front"===a?(G(b),B("idcardFrontImage",b)):(I(b),B("idcardBackImage",b))},c.readAsDataURL(b)};if(!a||!j)return null;let aP=(a,b)=>a&&"string"==typeof a[b]?a[b]:"",aQ=a=>Z?a.some(a=>Z?aP(Z,a)!==aP(j,a):!!aP(j,a))?{label:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸«à¸¡à¹ˆ",className:"bg-emerald-100 text-emerald-700"}:{label:"à¸•à¸£à¸‡à¸à¸±à¸šà¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",className:"bg-gray-100 text-gray-600"}:a.some(a=>!!aP(j,a))?{label:"à¸à¸³à¸¥à¸±à¸‡à¸à¸³à¸«à¸™à¸”",className:"bg-sky-100 text-sky-700"}:{label:"à¸£à¸­à¸à¸£à¸­à¸",className:"bg-gray-200 text-gray-700"},aR=["recordno","idcard","binddate","cusgroup","member"],aS=["disease","allergic"],aT=["locno","moo","soi","road"],aU=["idcardLaserCode","idcardIssueDate","idcardExpireDate"],aV=["idcardProvinceNative","idcardDistrictNative","idcardSubdistrictNative"],aW=aQ(["cn","registerdate","prefix","name","surname","nickname","gender","birthdate","mobilephone","email","lineid","facebook","medianame","displayname","ownercode","ownername"]),aX=aQ(["country","idcardFrontImage","idcardBackImage"]),aY=aQ(["province","amphur","tumbon","zipcode"]);aQ(aR),aQ(aS),aQ(aT),aQ(aU),aQ(aV);let aZ=aQ([...aR,...aS,...aT,...aU,...aV]),a$=a=>{let b=a.current;b&&b.scrollIntoView({behavior:"smooth",block:"start"})},a_=(a,b)=>{!b||aP(j,a)||B(a,b)},a0=!w,a1=!!(aN&&x.some(a=>a.code===aN)),a2="__legacy__",a3=a1?aN:aM?a2:"";return(0,b.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",children:[(0,b.jsxs)("div",{className:"max-h-[95vh] w-full max-w-5xl overflow-y-auto rounded-3xl bg-gradient-to-br from-white via-blue-50 to-indigo-100 shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 border-b border-white/40 bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:i?"à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²":"à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸¥à¸¹à¸à¸„à¹‰à¸²"}),w&&(0,b.jsxs)("p",{className:"mt-1 text-sm text-blue-100",children:["#",w.id," Â· ",w.name," Â· ",w.phone," Â· ",w.status," Â· ",w.interestedProduct]})]}),(0,b.jsx)("button",{onClick:A,className:"rounded-full bg-white/20 p-2 transition hover:bg-white/30","aria-label":"à¸›à¸´à¸”à¸à¸¥à¹ˆà¸­à¸‡à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™",children:(0,b.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"sticky top-0 z-10 border-b border-white/60 bg-white/70 px-6 py-3 backdrop-blur",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsx)("nav",{className:"flex flex-wrap gap-2",children:[{id:"basic",label:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²",ref:av,status:aW},{id:"documents",label:"à¹€à¸­à¸à¸ªà¸²à¸£ / à¸—à¸±à¹ˆà¸§à¹„à¸›",ref:aw,status:aX},{id:"address",label:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™",ref:ax,status:aY},{id:"advanced",label:"à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡",ref:ay,status:aZ,requiresAdvanced:!0}].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>(a=>{if(a.requiresAdvanced&&!D){E(!0),setTimeout(()=>a$(a.ref),160);return}a$(a.ref)})(a),className:"inline-flex items-center gap-2 rounded-full border border-white/70 bg-white/80 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition hover:border-indigo-400 hover:text-indigo-600",children:[(0,b.jsx)("span",{children:a.label}),(0,b.jsx)("span",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold shadow-sm ${a.status.className}`,children:a.status.label})]},a.id))}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{if(!w)return;let a=w.name?.trim();if(a){let b=a.match(/^(à¸„à¸¸à¸“|à¸™à¸²à¸¢|à¸™à¸²à¸‡|à¸™à¸ª\.|à¸™à¸ž\.|à¸žà¸\.|à¸”à¸Š\.|à¸”à¸\.)/),c=a;b&&(a_("prefix",b[0]),c=c.replace(b[0],"").trim());let d=c.split(/\s+/).filter(Boolean);1===d.length?a_("name",d[0]):d.length>1&&(a_("name",d[0]),a_("surname",d.slice(1).join(" "))),a_("nickname",d[0]),a_("displayname",a)}a_("mobilephone",w.phone),a_("cusgroup",w.status),a_("medianame",w.interestedProduct),a_("country","Thailand")},disabled:a0,className:"inline-flex items-center gap-2 rounded-full bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-indigo-700 disabled:cursor-not-allowed disabled:bg-gray-300 disabled:text-gray-500",title:w?"à¹€à¸•à¸´à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²":"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹ƒà¸«à¹‰à¹€à¸•à¸´à¸¡",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m6-6H6"})}),"à¹€à¸•à¸´à¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{Z&&Object.entries({...Z}).forEach(([a,b])=>{B(a,"string"==typeof b?b:"")})},disabled:!Z,className:"inline-flex items-center gap-2 rounded-full border border-gray-300 bg-white/80 px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm transition hover:border-indigo-400 hover:text-indigo-600 disabled:cursor-not-allowed disabled:text-gray-400",title:"à¸„à¸·à¸™à¸„à¹ˆà¸²à¸•à¸²à¸¡à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥",children:[(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.5,viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0112.618-5.303L18 7.5m0-3v3h-3M19.5 12a7.5 7.5 0 01-12.618 5.303L6 16.5m0 3v-3h3"})}),"à¸„à¸·à¸™à¸„à¹ˆà¸²à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"]})]}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{al(!0),ap(null),ag&&az(ag)},className:"inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500 px-5 py-2.5 text-sm font-semibold text-white shadow-lg transition hover:from-emerald-600 hover:to-teal-600",children:[(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"à¸šà¸£à¸´à¸à¸²à¸£/à¸‚à¸²à¸¢",as.length>0&&(0,b.jsx)("span",{className:"ml-1 inline-flex h-5 w-5 items-center justify-center rounded-full bg-white/30 text-xs font-bold",children:as.length})]}),ac&&(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸à¸¥à¸¸à¹ˆà¸¡..."}),ae&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:ae})]})]})}),(0,b.jsxs)("div",{className:"space-y-6 px-6 py-5",children:[c&&(0,b.jsx)("div",{className:"rounded-xl bg-white/80 p-4 text-sm text-blue-700 shadow",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ˆà¸²à¸à¸à¸²à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."}),k&&(0,b.jsx)("div",{className:"rounded-xl bg-red-100 p-4 text-sm text-red-700 shadow",children:k}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),C()},className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-white/60 bg-white/70 p-5 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"CN (à¸£à¸«à¸±à¸ªà¸¥à¸¹à¸à¸„à¹‰à¸²)"}),(0,b.jsx)("input",{type:"text",className:`${f} bg-gray-100`,value:j.cn,readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™"}),(0,b.jsx)("input",{type:"date",className:f,value:j.registerdate,onChange:a=>B("registerdate",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸„à¸³à¸™à¸³à¸«à¸™à¹‰à¸²"}),(0,b.jsxs)("select",{className:f,value:j.prefix||"",onChange:a=>B("prefix",a.target.value),children:[(0,b.jsx)("option",{value:"",disabled:!0,children:"à¹€à¸¥à¸·à¸­à¸à¸„à¸³à¸™à¸³à¸«à¸™à¹‰à¸²"}),["à¸„à¸¸à¸“","à¸™à¸²à¸¢","à¸™à¸²à¸‡","à¸™à¸ª.","à¸™à¸ž.","à¸žà¸.","à¸”à¸Š.","à¸”à¸."].map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸Šà¸·à¹ˆà¸­"}),(0,b.jsx)("input",{type:"text",className:f,value:j.name,onChange:a=>B("name",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"}),(0,b.jsx)("input",{type:"text",className:f,value:j.surname,onChange:a=>B("surname",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸Šà¸·à¹ˆà¸­à¹€à¸¥à¹ˆà¸™"}),(0,b.jsx)("input",{type:"text",className:f,value:j.nickname,onChange:a=>B("nickname",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¹€à¸žà¸¨"}),(0,b.jsx)("select",{className:f,value:j.gender,onChange:a=>B("gender",a.target.value),children:h.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸§à¸±à¸™à¹€à¸à¸´à¸”"}),(0,b.jsx)("input",{type:"date",className:f,value:j.birthdate,onChange:a=>B("birthdate",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸«à¸¥à¸±à¸"}),(0,b.jsx)("input",{type:"tel",className:f,value:j.mobilephone,onChange:a=>B("mobilephone",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸­à¸µà¹€à¸¡à¸¥"}),(0,b.jsx)("input",{type:"email",className:f,value:j.email,onChange:a=>B("email",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"LINE ID"}),(0,b.jsx)("input",{type:"text",className:f,value:j.lineid,onChange:a=>B("lineid",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"Facebook"}),(0,b.jsx)("input",{type:"text",className:f,value:j.facebook,onChange:a=>B("facebook",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸ªà¸·à¹ˆà¸­"}),(0,b.jsx)("input",{type:"text",className:f,value:j.medianame,onChange:a=>B("medianame",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸² (à¹ƒà¸Šà¹‰à¹à¸ªà¸”à¸‡)"}),(0,b.jsx)("input",{type:"text",className:f,value:j.displayname,onChange:a=>B("displayname",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥"}),(0,b.jsxs)("select",{className:f,value:a3,onChange:a=>{let b=a.target.value;if(b===a2)return;if(!b){B("ownercode",""),B("ownername","");return}let c=x.find(a=>a.code===b);B("ownercode",b),B("ownername",c?.nickname||"")},disabled:y&&0===x.length,children:[(0,b.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥"}),!a1&&aM&&(0,b.jsx)("option",{value:a2,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${aM}`}),x.map(a=>(0,b.jsx)("option",{value:a.code,children:a.nickname},a.code))]}),y&&0===x.length&&(0,b.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥..."}),!y&&z&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600",children:z}),!y&&!z&&!aN&&aM&&(0,b.jsxs)("p",{className:"mt-1 text-xs text-amber-600",children:["à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ",aM," (à¹„à¸¡à¹ˆà¸žà¸šà¹ƒà¸™à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸žà¸™à¸±à¸à¸‡à¸²à¸™)"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸›à¸£à¸°à¹€à¸—à¸¨"}),(0,b.jsx)("input",{type:"text",className:f,value:j.country,onChange:a=>B("country",a.target.value),placeholder:"à¹€à¸Šà¹ˆà¸™ Thailand"})]}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"}),aL?(0,b.jsxs)("select",{className:f,value:T?String(T):j.province?m:"",onChange:a=>(a=>{if(a===m)return;if(!a){U(null),W(null),Y(null),B("province",""),B("amphur",""),B("tumbon",""),B("zipcode","");return}let b=Number(a);if(!Number.isFinite(b))return;let c=N.find(a=>a.id===b);U(b),W(null),Y(null),B("province",c?.name_th||""),B("amphur",""),B("tumbon",""),B("zipcode","")})(a.target.value),disabled:J,children:[(0,b.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”"}),!T&&j.province&&(0,b.jsx)("option",{value:m,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${j.province}`}),aI.map(a=>(0,b.jsx)("option",{value:a.id,children:a.label},a.id))]}):(0,b.jsx)("input",{type:"text",className:f,value:j.province,onChange:a=>B("province",a.target.value)}),J&&aH&&(0,b.jsx)("p",{className:"mt-1 text-xs text-blue-600",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”..."}),L&&aH&&(0,b.jsx)("p",{className:"mt-1 text-xs text-red-600",children:L})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸­à¸³à¹€à¸ à¸­/à¹€à¸‚à¸•"}),aL?(0,b.jsxs)("select",{className:f,value:V?String(V):j.amphur?n:"",onChange:a=>(a=>{if(a===n)return;if(!a){W(null),Y(null),B("amphur",""),B("tumbon",""),B("zipcode","");return}let b=Number(a);if(!Number.isFinite(b))return;let c=P.find(a=>a.id===b);W(b),Y(null),B("amphur",c?.name_th||""),B("tumbon",""),B("zipcode","")})(a.target.value),disabled:!T||J,children:[(0,b.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸­à¸³à¹€à¸ à¸­/à¹€à¸‚à¸•"}),!V&&j.amphur&&(0,b.jsx)("option",{value:n,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${j.amphur}`}),aJ.map(a=>(0,b.jsx)("option",{value:a.id,children:a.label},a.id))]}):(0,b.jsx)("input",{type:"text",className:f,value:j.amphur,onChange:a=>B("amphur",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸•à¸³à¸šà¸¥/à¹à¸‚à¸§à¸‡"}),aL?(0,b.jsxs)("select",{className:f,value:X?String(X):j.tumbon?o:"",onChange:a=>(a=>{if(a===o)return;if(!a){Y(null),B("tumbon",""),B("zipcode","");return}let b=Number(a);if(!Number.isFinite(b))return;let c=R.find(a=>a.id===b);if(Y(b),B("tumbon",c?.name_th||""),c?.zip_code!==null&&c?.zip_code!==void 0){let a=String(c.zip_code).trim();a&&B("zipcode",a)}})(a.target.value),disabled:!V||J,children:[(0,b.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸•à¸³à¸šà¸¥/à¹à¸‚à¸§à¸‡"}),!X&&j.tumbon&&(0,b.jsx)("option",{value:o,disabled:!0,children:`à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹€à¸”à¸´à¸¡: ${j.tumbon}`}),aK.map(a=>(0,b.jsx)("option",{value:a.id,children:a.label},a.id))]}):(0,b.jsx)("input",{type:"text",className:f,value:j.tumbon,onChange:a=>B("tumbon",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ"}),(0,b.jsx)("input",{type:"text",className:f,value:j.zipcode,onChange:a=>B("zipcode",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 rounded-2xl border border-white/60 bg-white/70 p-5 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"à¹€à¸­à¸à¸ªà¸²à¸£à¹à¸¥à¸°à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸—à¸±à¹ˆà¸§à¹„à¸›"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-dashed border-indigo-300 bg-white/80 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:`${g} text-indigo-700`,children:"à¸ à¸²à¸žà¸«à¸™à¹‰à¸²à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™"}),F&&(0,b.jsx)("button",{type:"button",onClick:()=>aO("front"),className:"text-xs font-semibold text-indigo-600 underline-offset-2 hover:underline",children:"à¸¥à¸šà¸ à¸²à¸ž"})]}),(0,b.jsxs)("div",{className:"mt-3 flex flex-col items-center gap-3",children:[(0,b.jsx)("div",{className:"h-32 w-full overflow-hidden rounded-lg border border-indigo-200 bg-indigo-50",children:F?(0,b.jsx)("img",{src:F,alt:"Thai ID front",className:"h-full w-full object-cover"}):(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-indigo-400",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸ à¸²à¸žà¸«à¸™à¹‰à¸²à¸šà¸±à¸•à¸£"})}),(0,b.jsxs)("label",{className:"w-full cursor-pointer rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-2 text-center text-sm font-semibold text-white shadow hover:from-indigo-600 hover:to-purple-600",children:["à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸ à¸²à¸žà¸«à¸™à¹‰à¸²à¸šà¸±à¸•à¸£",(0,b.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:a=>aO("front",a.target.files?.[0])})]})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-dashed border-indigo-300 bg-white/80 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("label",{className:`${g} text-indigo-700`,children:"à¸ à¸²à¸žà¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™"}),H&&(0,b.jsx)("button",{type:"button",onClick:()=>aO("back"),className:"text-xs font-semibold text-indigo-600 underline-offset-2 hover:underline",children:"à¸¥à¸šà¸ à¸²à¸ž"})]}),(0,b.jsxs)("div",{className:"mt-3 flex flex-col items-center gap-3",children:[(0,b.jsx)("div",{className:"h-32 w-full overflow-hidden rounded-lg border border-indigo-200 bg-indigo-50",children:H?(0,b.jsx)("img",{src:H,alt:"Thai ID back",className:"h-full w-full object-cover"}):(0,b.jsx)("div",{className:"flex h-full w-full items-center justify-center text-xs text-indigo-400",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸ à¸²à¸žà¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£"})}),(0,b.jsxs)("label",{className:"w-full cursor-pointer rounded-lg bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-2 text-center text-sm font-semibold text-white shadow hover:from-indigo-600 hover:to-purple-600",children:["à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸ à¸²à¸žà¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£",(0,b.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:a=>aO("back",a.target.files?.[0])})]})]})]})]})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-white/60 bg-white/70 p-5 shadow-inner",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>E(a=>!a),className:"flex w-full items-center justify-between gap-3 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-500 px-4 py-3 text-left text-white shadow",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-semibold",children:[D?"à¸‹à¹ˆà¸­à¸™":"à¹à¸ªà¸”à¸‡"," à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡"]}),(0,b.jsx)("p",{className:"text-xs text-purple-100",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¡à¸²à¸Šà¸´à¸, à¹€à¸­à¸à¸ªà¸²à¸£, à¹‚à¸£à¸„à¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§ à¹à¸¥à¸°à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¹à¸šà¸šà¸¥à¸°à¹€à¸­à¸µà¸¢à¸”"})]}),(0,b.jsx)("svg",{className:`h-5 w-5 transition-transform duration-200 ${D?"rotate-180":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),D&&(0,b.jsxs)("div",{className:"mt-4 space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¡à¸²à¸Šà¸´à¸"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸ à¸²à¸¢à¹ƒà¸™ (recordno)"}),(0,b.jsx)("input",{type:"text",className:f,value:j.recordno||"",onChange:a=>B("recordno",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¹€à¸¥à¸‚à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ / Passport"}),(0,b.jsx)("input",{type:"text",className:f,value:j.idcard,onChange:a=>B("idcard",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆ bind/sync"}),(0,b.jsx)("input",{type:"date",className:f,value:j.binddate,onChange:a=>B("binddate",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸à¸¥à¸¸à¹ˆà¸¡à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,b.jsx)("input",{type:"text",className:f,value:j.cusgroup,onChange:a=>B("cusgroup",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸£à¸«à¸±à¸ªà¸ªà¸¡à¸²à¸Šà¸´à¸"}),(0,b.jsx)("input",{type:"text",className:f,value:j.member,onChange:a=>B("member",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸¸à¸‚à¸ à¸²à¸ž"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¹‚à¸£à¸„à¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§"}),(0,b.jsx)("textarea",{className:`${f} min-h-[80px]`,value:j.disease,onChange:a=>B("disease",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¹à¸žà¹‰à¸¢à¸²/à¸­à¸²à¸«à¸²à¸£/à¸­à¸·à¹ˆà¸™ à¹†"}),(0,b.jsx)("textarea",{className:`${f} min-h-[80px]`,value:j.allergic,onChange:a=>B("allergic",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸•à¸²à¸¡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸šà¹‰à¸²à¸™"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¹€à¸¥à¸‚à¸—à¸µà¹ˆ"}),(0,b.jsx)("input",{type:"text",className:f,value:j.locno,onChange:a=>B("locno",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸«à¸¡à¸¹à¹ˆ"}),(0,b.jsx)("input",{type:"text",className:f,value:j.moo,onChange:a=>B("moo",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸‹à¸­à¸¢"}),(0,b.jsx)("input",{type:"text",className:f,value:j.soi,onChange:a=>B("soi",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸–à¸™à¸™"}),(0,b.jsx)("input",{type:"text",className:f,value:j.road,onChange:a=>B("road",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"Laser Code (à¸«à¸¥à¸±à¸‡à¸šà¸±à¸•à¸£)"}),(0,b.jsx)("input",{type:"text",className:f,value:j.idcardLaserCode||"",onChange:a=>B("idcardLaserCode",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸­à¸à¸šà¸±à¸•à¸£"}),(0,b.jsx)("input",{type:"date",className:f,value:j.idcardIssueDate||"",onChange:a=>B("idcardIssueDate",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸"}),(0,b.jsx)("input",{type:"date",className:f,value:j.idcardExpireDate||"",onChange:a=>B("idcardExpireDate",a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h4",{className:"text-base font-semibold text-gray-800",children:"à¸ à¸¹à¸¡à¸´à¸¥à¸³à¹€à¸™à¸²à¸•à¸²à¸¡à¸šà¸±à¸•à¸£"}),(0,b.jsxs)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸” (à¸•à¸²à¸¡à¸šà¸±à¸•à¸£)"}),(0,b.jsx)("input",{type:"text",className:f,value:j.idcardProvinceNative||"",onChange:a=>B("idcardProvinceNative",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸­à¸³à¹€à¸ à¸­/à¹€à¸‚à¸• (à¸•à¸²à¸¡à¸šà¸±à¸•à¸£)"}),(0,b.jsx)("input",{type:"text",className:f,value:j.idcardDistrictNative||"",onChange:a=>B("idcardDistrictNative",a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:g,children:"à¸•à¸³à¸šà¸¥/à¹à¸‚à¸§à¸‡ (à¸•à¸²à¸¡à¸šà¸±à¸•à¸£)"}),(0,b.jsx)("input",{type:"text",className:f,value:j.idcardSubdistrictNative||"",onChange:a=>B("idcardSubdistrictNative",a.target.value)})]})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[r&&(0,b.jsx)("span",{className:"text-sm font-semibold text-emerald-700",children:r}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:A,className:"rounded-lg bg-white px-5 py-2 font-semibold text-gray-700 shadow hover:bg-gray-50",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,b.jsx)("button",{type:"submit",className:"rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-2 font-semibold text-white shadow-lg transition hover:from-blue-700 hover:to-indigo-700 disabled:cursor-not-allowed disabled:opacity-70",disabled:e,children:e?"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...":i?"à¸­à¸±à¸›à¹€à¸”à¸•à¸‚à¹‰à¸­à¸¡à¸¹à¸¥":"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"})]})]})]})]})]}),ak&&(0,b.jsx)("div",{className:"fixed inset-0 z-[80] flex items-center justify-center bg-black/70 p-4 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"relative w-full max-w-6xl overflow-hidden rounded-3xl bg-white shadow-2xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 px-8 py-5 text-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"à¸šà¸£à¸´à¸à¸²à¸£ OPD"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"à¹€à¸¥à¸·à¸­à¸à¸šà¸£à¸´à¸à¸²à¸£à¹à¸¥à¸°à¸à¸³à¸«à¸™à¸” Charge / Discount"})]}),(0,b.jsx)("button",{type:"button",onClick:aA,className:"rounded-full bg-white/20 p-2 transition hover:bg-white/30",children:(0,b.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"border-b bg-gray-50 px-8 py-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-gray-700",children:"à¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£:"}),(0,b.jsxs)("select",{className:"rounded-xl border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-800 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200",value:ag,onChange:a=>(a=>{if(ah(a),ar(""),ap(null),!a){aj([]),al(!1);return}az(a),al(!0)})(a.target.value),children:[(0,b.jsx)("option",{value:"",children:"à¹€à¸¥à¸·à¸­à¸à¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£"}),aa.map(a=>(0,b.jsx)("option",{value:a.groupcode,children:a.groupname},a.groupcode))]}),as.length>0&&(0,b.jsxs)("span",{className:"rounded-full bg-emerald-100 px-3 py-1 text-sm font-semibold text-emerald-700",children:["à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§ ",as.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]})}),(0,b.jsxs)("div",{className:"grid max-h-[65vh] grid-cols-1 gap-0 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"flex flex-col border-r border-gray-200 bg-gradient-to-br from-blue-50 to-indigo-50 max-h-[65vh]",children:[(0,b.jsxs)("div",{className:"border-b bg-white/80 px-6 py-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"ðŸ“ à¸šà¸£à¸´à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[as.length," à¸£à¸²à¸¢à¸à¸²à¸£",aC&&` \xb7 ${aC.groupname}`]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:0===as.length?(0,b.jsxs)("div",{className:"flex h-full flex-col items-center justify-center text-center",children:[(0,b.jsx)("div",{className:"mb-3 text-5xl",children:"ðŸ“‚"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸šà¸£à¸´à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸"}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:"à¹€à¸¥à¸·à¸­à¸à¸ˆà¸²à¸à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸²à¸‡à¸‚à¸§à¸²à¸¡à¸·à¸­"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"space-y-3",children:as.map(a=>{let c;return(0,b.jsxs)("div",{className:"rounded-2xl border border-white bg-white p-4 shadow-md transition hover:shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-800",children:a.itemname}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["à¸£à¸«à¸±à¸ª ",a.itemcode," Â· à¸£à¸²à¸„à¸² ",s(a.salesprice)]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{var b;return b=a.id,void at(a=>a.filter(a=>a.id!==b))},className:"ml-2 rounded-full bg-red-100 p-1.5 text-red-600 transition hover:bg-red-200",children:(0,b.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"rounded-xl bg-emerald-50 p-3",children:[(0,b.jsx)("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-emerald-700",children:"Charge"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"à¸šà¸²à¸—",value:a.chargePrice,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void aB(c,a=>{let b=d.trim(),c=Number(b),e=b.length>0&&Number.isFinite(c)&&a.salesprice>0?t(c/a.salesprice*100):"";return{...a,chargePrice:d,chargePercent:e}})},className:"w-full rounded-lg border border-emerald-200 bg-white px-2 py-1.5 text-sm focus:border-emerald-400 focus:outline-none"}),(0,b.jsx)("input",{type:"text",placeholder:"%",value:a.chargePercent,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void aB(c,a=>{let b=d.trim(),c=Number(b),e=b.length>0&&Number.isFinite(c)&&a.salesprice>0?t(a.salesprice*c/100):"";return{...a,chargePrice:e,chargePercent:d}})},className:"w-16 rounded-lg border border-emerald-200 bg-white px-2 py-1.5 text-center text-sm focus:border-emerald-400 focus:outline-none"})]})]}),(0,b.jsxs)("div",{className:"rounded-xl bg-rose-50 p-3",children:[(0,b.jsx)("p",{className:"mb-1 text-xs font-semibold uppercase tracking-wide text-rose-700",children:"Discount"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"à¸šà¸²à¸—",value:a.discountPrice,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void aB(c,a=>{let b=d.trim(),c=Number(b),e=b.length>0&&Number.isFinite(c)&&a.salesprice>0?t(c/a.salesprice*100):"";return{...a,discountPrice:d,discountPercent:e}})},className:"w-full rounded-lg border border-rose-200 bg-white px-2 py-1.5 text-sm focus:border-rose-400 focus:outline-none"}),(0,b.jsx)("input",{type:"text",placeholder:"%",value:a.discountPercent,onChange:b=>{var c,d;return c=a.id,d=b.target.value,void aB(c,a=>{let b=d.trim(),c=Number(b),e=b.length>0&&Number.isFinite(c)&&a.salesprice>0?t(a.salesprice*c/100):"";return{...a,discountPrice:e,discountPercent:d}})},className:"w-16 rounded-lg border border-rose-200 bg-white px-2 py-1.5 text-center text-sm focus:border-rose-400 focus:outline-none"})]})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center justify-between rounded-2xl border border-indigo-100 bg-indigo-50/40 px-3 py-2 text-sm font-semibold text-indigo-600",children:[(0,b.jsx)("span",{children:"à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´"}),(0,b.jsx)("span",{children:s((c=Number.isFinite(a.salesprice)?a.salesprice:0,c+u(a.chargePrice)-u(a.discountPrice)))})]})]},a.id)})}),(0,b.jsxs)("div",{className:"mt-4 rounded-2xl border border-dashed border-indigo-200 bg-white/80 px-4 py-3 text-sm text-gray-600 shadow-inner",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold uppercase tracking-wide text-gray-500",children:[(0,b.jsx)("span",{children:"à¸ªà¸£à¸¸à¸›à¸¢à¸­à¸”"}),(0,b.jsxs)("span",{children:[as.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]}),(0,b.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"à¸£à¸§à¸¡à¸£à¸²à¸„à¸²à¸žà¸·à¹‰à¸™à¸à¸²à¸™"}),(0,b.jsx)("span",{className:"font-semibold text-gray-700",children:s(aD.baseTotal)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"à¸£à¸§à¸¡à¸„à¹ˆà¸² Charge"}),(0,b.jsx)("span",{className:"font-semibold text-gray-700",children:s(aD.chargeTotal)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"à¸£à¸§à¸¡à¸ªà¹ˆà¸§à¸™à¸¥à¸”"}),(0,b.jsx)("span",{className:"font-semibold text-gray-700",children:s(aD.discountTotal)})]}),(0,b.jsxs)("div",{className:"flex justify-between text-base font-semibold text-indigo-600",children:[(0,b.jsx)("span",{children:"à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"}),(0,b.jsx)("span",{children:s(aD.netTotal)})]})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex flex-col bg-white max-h-[65vh]",children:[(0,b.jsxs)("div",{className:"border-b px-6 py-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"ðŸ“œ à¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£"}),aC&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:aC.groupname})]}),(0,b.jsx)("div",{className:"px-6 py-3",children:(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("input",{type:"text",placeholder:"ðŸ” à¸„à¹‰à¸™à¸«à¸²à¸šà¸£à¸´à¸à¸²à¸£...",value:aq,onChange:a=>ar(a.target.value),className:"w-full rounded-xl border border-gray-200 bg-gray-50 px-4 py-2.5 text-sm focus:border-indigo-400 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-100"})})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 pb-4",children:[am&&(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-indigo-200 border-t-indigo-600"})}),ao&&(0,b.jsx)("p",{className:"py-4 text-center text-sm text-red-600",children:ao}),!am&&!ao&&0===aE.length&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)("div",{className:"mb-2 text-4xl",children:"ðŸ’­"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£"})]}),(0,b.jsx)("div",{className:"space-y-2",children:aE.map(a=>{let c=as.some(b=>b.itemcode===a.itemcode);return(0,b.jsxs)("div",{className:`flex items-center justify-between rounded-xl border px-4 py-3 transition ${c?"border-emerald-200 bg-emerald-50":"border-gray-100 bg-gray-50 hover:border-indigo-200 hover:bg-indigo-50"}`,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-800",children:a.itemname}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"à¸£à¸²à¸„à¸²"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:s(a.saleprice)})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{at(b=>b.some(b=>b.itemcode===a.itemcode)?b:[...b,{id:`${a.itemcode}-${Date.now()}`,itemcode:a.itemcode,itemname:a.itemname,salesprice:v(a.saleprice),chargePrice:"",chargePercent:"",discountPrice:"",discountPercent:""}])},disabled:c,className:`rounded-full px-4 py-1.5 text-xs font-semibold transition ${c?"bg-emerald-200 text-emerald-700":"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow hover:shadow-md"}`,children:c?"âœ“ à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§":"à¹€à¸žà¸´à¹ˆà¸¡"})]},a.itemcode)})})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-t bg-gray-50 px-8 py-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["à¹€à¸¥à¸·à¸­à¸à¹à¸¥à¹‰à¸§ ",(0,b.jsx)("span",{className:"font-bold text-indigo-600",children:as.length})," à¸£à¸²à¸¢à¸à¸²à¸£",(0,b.jsx)("span",{className:"mx-2 hidden text-xs text-gray-400 md:inline",children:"Â·"}),(0,b.jsx)("span",{className:"mr-1",children:"à¸¢à¸­à¸”à¸ªà¸¸à¸—à¸˜à¸´"}),(0,b.jsx)("span",{className:"font-bold text-indigo-600",children:s(aD.netTotal)})]}),(0,b.jsx)("button",{type:"button",onClick:aA,className:"rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-2.5 font-semibold text-white shadow-lg transition hover:from-indigo-700 hover:to-purple-700",children:"à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™"})]})]})})]})}let x=(a=new Date)=>{let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`},y=a=>{if(!a||""===a||"null"===a||"undefined"===a)return"-";let b=String(a).trim(),c=b.split(":");if(c.length>=2){let a=c[0].padStart(2,"0"),b=c[1].substring(0,2).padStart(2,"0");return`${a}:${b} à¸™.`}return b.slice(0,5)+" à¸™."},z=(a,b=2)=>{if(!a)return"-";let c=String(a).replace(/\r?\n+/g," ").replace(/\s+/g," ").trim();if(!c||"null"===c.toLowerCase()||"undefined"===c.toLowerCase())return"-";let d=c.match(/[^.!?]+[.!?]?/g);return!d||d.length<=b?c.length>160?`${c.slice(0,160).trim()} â€¦`:c:`${d.slice(0,b).join(" ").trim()} â€¦`};function A(){let a=(0,e.useRouter)(),[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(!0),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(""),[n,o]=(0,d.useState)(""),[p,q]=(0,d.useState)("table"),[r,s]=(0,d.useState)(new Date),[t,u]=(0,d.useState)(new Date),[v,A]=(0,d.useState)("new"),[B,C]=(0,d.useState)([]),[D,E]=(0,d.useState)(""),[F,G]=(0,d.useState)(!1),[H,I]=(0,d.useState)(!1),[J,K]=(0,d.useState)({full_name:"",role:"",yearly_leave_quota:10,leave_remaining:10,work_start_time:"08:00",work_end_time:"19:00",is_active:!0}),[L,M]=(0,d.useState)(!1),[N,O]=(0,d.useState)([]),[P,Q]=(0,d.useState)([]),[R,S]=(0,d.useState)({employee_id:0,work_date:"",time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),[T,U]=(0,d.useState)(!1),[V,W]=(0,d.useState)([]),[X,Y]=(0,d.useState)(""),[Z,$]=(0,d.useState)(null),[_,aa]=(0,d.useState)(null),[ab,ac]=(0,d.useState)([]),[ad,ae]=(0,d.useState)(!1),[af,ag]=(0,d.useState)(null),[ah,ai]=(0,d.useState)(null),[aj,ak]=(0,d.useState)([]),[al,am]=(0,d.useState)(!1),[an,ao]=(0,d.useState)(!1),[ap,aq]=(0,d.useState)(null),[ar,as]=(0,d.useState)(!1),[at,au]=(0,d.useState)(null),[av,aw]=(0,d.useState)(!1),[ax,ay]=(0,d.useState)(!1),[az,aA]=(0,d.useState)(!1),[aB,aC]=(0,d.useState)(null),[aD,aE]=(0,d.useState)(null),[aF,aG]=(0,d.useState)(null),[aH,aI]=(0,d.useState)([]),[aJ,aK]=(0,d.useState)(!1),[aL,aM]=(0,d.useState)(null),[aN,aO]=(0,d.useState)([]),[aP,aQ]=(0,d.useState)(!1),[aR,aS]=(0,d.useState)(null),[aT,aU]=(0,d.useState)(null),aV=["birthdate","registerdate","binddate","idcardIssueDate","idcardExpireDate"],aW=(a,b)=>{let c={...b};if(Object.keys(a).forEach(b=>{if("cn"===b)return;let d=a[b];if("recordno"===b){c.recordno=null==d?"":String(d);return}if(aV.includes(b)){c[b]=(a=>{if(!a)return"";let b=String(a);return b.length>=10?b.slice(0,10):b})(d);return}c[b]=null==d?"":String(d)}),!c.displayname){let a=[c.prefix,c.name,c.surname].filter(Boolean).join(" ").trim();c.displayname=a}return c},aX=(0,d.useCallback)(async()=>{if(!aJ&&(!(aH.length>0)||aL)){aK(!0),aM(null);try{let a=await fetch("/api/n-staff"),b=await a.json();if(!a.ok||!1===b.success)throw Error(b?.error||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¹„à¸”à¹‰");let c=Array.isArray(b.data)?b.data:[];aI(c)}catch(a){aM(a?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¹„à¸”à¹‰")}finally{aK(!1)}}},[aJ,aH.length,aL]),aY=async a=>{aX();let b=(a=>{let b=x(),{firstName:c,lastName:d}=(a=>{if(!a)return{firstName:"",lastName:""};let b=a.trim().split(/\s+/);if(1===b.length)return{firstName:b[0],lastName:""};let[c,...d]=b;return{firstName:c,lastName:d.join(" ")}})(a.customer_name||"");return{recordno:"",code:"",cn:String(a.id),prefix:"",name:c,surname:d,nickname:"",gender:"",idcard:"",birthdate:"",registerdate:b,member:"",cusgroup:"",mobilephone:a.phone||"",email:"",lineid:"",facebook:"",medianame:"",disease:"",allergic:"",displayname:a.customer_name||"",locno:"",soi:"",road:"",moo:"",tumbon:"",amphur:"",province:"",zipcode:"",country:"Thailand",address:"",ownercode:"",ownername:a.contact_staff||"",binddate:b,idcardLaserCode:"",idcardIssueDate:"",idcardExpireDate:"",idcardProvinceNative:"",idcardDistrictNative:"",idcardSubdistrictNative:"",idcardFrontImage:"",idcardBackImage:""}})(a);aG({id:a.id,name:a.customer_name||"",phone:a.phone||"",status:a.status||"",interestedProduct:a.interested_product||a.interestedProduct||""}),au(b),as(!0),aA(!1),aw(!0),ay(!1),aC(null),aE(null);try{let c=await fetch(`/api/n-customer?cn=${a.id}`),d=await c.json();if(!c.ok||!1===d.success){d?.error&&aE(d.error);return}d.exists&&d.data&&(au(aW(d.data,b)),aA(!0))}catch(a){aE(a?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹„à¸”à¹‰")}finally{aw(!1)}},aZ=async()=>{if(at){ay(!0),aE(null),aC(null);try{let{idcardFrontImage:a,idcardBackImage:b,...c}=at,d={...c,cn:at.cn};d.recordno&&d.recordno.trim()||delete d.recordno;let e=await fetch("/api/n-customer",{method:az?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),f=await e.json();if(!e.ok||!1===f.success)throw Error(f?.error||"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ");f.data&&au(aW(f.data,at)),aA(!0),aC("à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ªà¸³à¹€à¸£à¹‡à¸ˆ")}catch(a){aE(a?.message||"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ")}finally{ay(!1)}}};(0,d.useEffect)(()=>{let a=x();o(a),a1(a,a)},[]),(0,d.useEffect)(()=>{n&&"table"===p&&a1(n,n)},[n]),(0,d.useEffect)(()=>{"calendar"===p&&a2(r)},[r,p]),(0,d.useEffect)(()=>{"calendar2"===p&&(a2(t),a$(),a_(t))},[t,p]),(0,d.useEffect)(()=>{ar&&aX()},[ar,aX]);let a$=async()=>{try{let a=await fetch("/api/hr-employees"),b=await a.json();b.success&&O(b.data.filter(a=>a.is_active))}catch(a){console.error("Error fetching employees:",a)}},a_=async a=>{try{let b=(a.getMonth()+1).toString(),c=a.getFullYear().toString();console.log("Fetching attendances for:",{month:b,year:c});let d=await fetch(`/api/hr-attendance?month=${b}&year=${c}`),e=await d.json();console.log("Attendance API response:",e),e.success?(Q(e.data),console.log("Set attendances:",e.data)):console.error("API Error:",e.error)}catch(a){console.error("Error fetching attendances:",a)}},a0=(0,d.useCallback)(async a=>{let b=a&&a.trim()?a:x();try{aQ(!0),aS(null);let a=new URLSearchParams;a.append("from",b),a.append("to",b);let c=await fetch(`/api/appointments?${a.toString()}`),d=await c.json();if(!c.ok||!1===d.success)throw Error(d?.error||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²à¹„à¸”à¹‰");aO(Array.isArray(d.data)?d.data:[])}catch(a){console.error("Error fetching legacy appointments:",a),aO([]),aS(a?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²à¹„à¸”à¹‰")}finally{aQ(!1)}},[]);(0,d.useEffect)(()=>{"table"!==p||"old"!==v||a0(n&&n.trim()?n:x())},[v,a0,n,p]);let a1=async(a,b)=>{try{i(!0),k(null);let c="/api/crm-advanced",d=new URLSearchParams;a&&d.append("startDate",a),b&&d.append("endDate",b),d.toString()&&(c+=`?${d.toString()}`);let e=await fetch(c),f=await e.json();f.success?g(f.data):k(f.error||"Failed to fetch data")}catch(a){k(a.message||"Failed to fetch records"),console.error("Error fetching records:",a)}finally{i(!1)}},a2=async a=>{try{i(!0),k(null);let b=(a.getMonth()+1).toString(),c=a.getFullYear().toString(),d=`/api/crm-advanced?month=${b}&year=${c}`,e=await fetch(d),f=await e.json();f.success?g(f.data):k(f.error||"Failed to fetch data")}catch(a){k(a.message||"Failed to fetch records"),console.error("Error fetching records:",a)}finally{i(!1)}},a3=async a=>{if(confirm("à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸™à¸µà¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?"))try{let b=await fetch(`/api/crm-advanced?id=${a}`,{method:"DELETE"}),c=await b.json();c.success?(alert("à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),g(f.filter(b=>b.id!==a)),C(B.filter(b=>b.id!==a)),B.length<=1&&G(!1)):alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+c.error)}catch(a){console.error("Error deleting record:",a),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},a4=a=>f.filter(b=>{let c=b.surgery_date?b.surgery_date.split("T")[0]:null,d=b.consult_date?b.consult_date.split("T")[0]:null;return c===a||d===a}),a5=a=>{m(a),o(a);let b=a4(a);b.length>0?(C(b),E(a),G(!0)):a1(a,a)},a6=()=>{G(!1),C([]),E("")},a7=F&&B.some(a=>a.hasCustomerProfile),a8=async()=>{ae(!0),ag(null);try{let a=await fetch("/api/b-item-groups"),b=await a.json();if(!a.ok||!1===b.success)throw Error(b.error||"à¹„à¸¡à¹ˆà¸žà¸šà¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£");ac(Array.isArray(b.data)?b.data:[])}catch(a){console.error("Error loading item groups:",a),ag(a?.message||"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸«à¸¥à¸”à¸à¸¥à¸¸à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£à¹„à¸”à¹‰")}finally{ae(!1)}},a9=()=>{am(!1),ao(!1),ak([]),ai(null),aq(null)};(0,d.useEffect)(()=>{!a7||ab.length>0||ad||a8()},[a7,ab.length,ad]);let ba=a=>{a.note?.trim()&&aa(a)},bb=()=>aa(null),bc=(a,b)=>{K(c=>({...c,[a]:b}))},bd=async()=>{try{let a=await fetch("/api/hr-employees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)}),b=await a.json();b.success?(alert("à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),I(!1),a$(),K({full_name:"",role:"",yearly_leave_quota:10,leave_remaining:10,work_start_time:"08:00",work_end_time:"19:00",is_active:!0})):alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+b.error)}catch(a){console.error("Error saving employee:",a),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},be=(a,b)=>{S(c=>{let d={...c,[a]:b};if(("time_in"===a||"time_out"===a)&&d.time_in&&d.time_out){let a=new Date(`2000-01-01T${d.time_in}`),b=(new Date(`2000-01-01T${d.time_out}`).getTime()-a.getTime())/36e5;d.work_hours=Math.max(0,parseFloat(b.toFixed(2))),d.overtime_hours=Math.max(0,parseFloat((b-8).toFixed(2)))}return d})},bf=async a=>{if(confirm("à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸™à¸µà¹‰à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?"))try{let b=await fetch(`/api/hr-attendance?id=${a}`,{method:"DELETE"}),c=await b.json();if(c.success){if(alert("à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),await a_(t),T&&X){let b=P.filter(b=>b.id!==a).filter(a=>a.work_date.split("T")[0]===X);W(b),0===b.length&&U(!1)}}else alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+c.error)}catch(a){console.error("Error deleting attendance:",a),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},bg=async()=>{try{if(!R.employee_id||0===R.employee_id)return void alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸žà¸™à¸±à¸à¸‡à¸²à¸™");if(!R.work_date)return void alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ");let a=R.work_date.split("T")[0],b=Z?`/api/hr-attendance?id=${Z.id}`:"/api/hr-attendance",c=Z?{employee_id:R.employee_id,work_date:a,time_in:R.time_in,time_out:R.time_out,status:R.status,work_hours:Number(R.work_hours),overtime_hours:Number(R.overtime_hours),note:R.note}:{...R,work_date:a,work_hours:Number(R.work_hours),overtime_hours:Number(R.overtime_hours)},d=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),e=await d.json();if(e.success){if(alert(Z?"à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!":"à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!"),M(!1),$(null),await a_(t),T&&X){let a=await fetch(`/api/hr-attendance?month=${t.getMonth()+1}&year=${t.getFullYear()}`).then(a=>a.json());if(a.success){let b=a.data.filter(a=>a.work_date.split("T")[0]===X);W(b)}}S({employee_id:0,work_date:"",time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""})}else alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”: "+e.error)}catch(a){console.error("Error saving attendance:",a),alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸šà¸±à¸™à¸—à¸¶à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥")}},bh=a=>{let b=a.match(/(\d{1,2}):(\d{2})/);return b?60*parseInt(b[1],10)+parseInt(b[2],10):Number.MAX_SAFE_INTEGER},bi=a=>{if(!a)return Number.MAX_SAFE_INTEGER;let b=Date.parse(a);if(!Number.isNaN(b))return b;let c=a.match(/(\d{1,2}):(\d{2})/);return c?bh(`${c[1]}:${c[2]}`):Number.MAX_SAFE_INTEGER},bj=[...f].sort((a,b)=>bh(a.appointmentTime)-bh(b.appointmentTime)),bk=[...aN].sort((a,b)=>bi(a.start_date)-bi(b.start_date)),bl=n&&n.trim()?n:x(),bm=(()=>{if(!bl)return"";let[a,b,c]=bl.split("-").map(Number);if(!a||!b||!c)return bl;let d=new Date(a,b-1,c);return Number.isNaN(d.getTime())?bl:d.toLocaleDateString("th-TH",{day:"numeric",month:"long",year:"numeric"})})(),bn=a=>{let b=P.filter(b=>b.work_date.split("T")[0]===a);return console.log(`Attendances for ${a}:`,b),b};return(0,b.jsxs)("div",{className:"min-h-screen h-full w-full bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-700 p-0 m-0",children:[(0,b.jsx)("div",{className:"px-3 sm:px-8 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsx)("button",{onClick:()=>a.push("/home"),className:"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg transition-all shadow-lg hover:shadow-xl","aria-label":"à¸à¸¥à¸±à¸šà¹„à¸›à¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸",children:(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,b.jsxs)("div",{className:"flex gap-1 sm:gap-2",children:[(0,b.jsxs)("button",{onClick:()=>q("table"),className:`px-2 sm:px-4 py-2 rounded-lg transition-all shadow-lg font-medium flex flex-col sm:flex-row items-center gap-0.5 sm:gap-2 text-[10px] sm:text-sm ${"table"===p?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"à¸•à¸²à¸£à¸²à¸‡"})]}),(0,b.jsxs)("button",{onClick:()=>q("calendar"),className:`px-2 sm:px-4 py-2 rounded-lg transition-all shadow-lg font-medium flex flex-col sm:flex-row items-center gap-0.5 sm:gap-2 text-[10px] sm:text-sm ${"calendar"===p?"bg-gradient-to-r from-purple-500 to-pink-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"à¸›à¸à¸´à¸—à¸´à¸™"})]}),(0,b.jsxs)("button",{onClick:()=>q("calendar2"),className:`px-2 sm:px-4 py-2 rounded-lg transition-all shadow-lg font-medium flex flex-col sm:flex-row items-center gap-0.5 sm:gap-2 text-[10px] sm:text-sm ${"calendar2"===p?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":"bg-white/20 text-white hover:bg-white/30"}`,children:[(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"})]})]})]})}),h&&(0,b.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,b.jsx)("div",{className:"bg-white/20 backdrop-blur-md rounded-2xl p-8 shadow-2xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("svg",{className:"animate-spin h-8 w-8 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("span",{className:"text-white font-bold text-lg",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."})]})})}),j&&(0,b.jsx)("div",{className:"px-8 pb-4",children:(0,b.jsx)("div",{className:"bg-red-500/20 backdrop-blur-md border-2 border-red-400 rounded-2xl p-6 shadow-2xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("svg",{className:"w-8 h-8 text-red-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-white font-bold text-lg",children:"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”"}),(0,b.jsx)("p",{className:"text-red-100",children:j})]})]})})}),(0,b.jsx)("div",{className:"w-full h-full m-0 p-0",children:(0,b.jsxs)("div",{className:"w-full overflow-hidden",children:["calendar"===p&&(0,b.jsx)("div",{className:"px-2 sm:px-8 pb-8",children:(0,b.jsxs)("div",{className:"bg-black/90 backdrop-blur-md rounded-lg sm:rounded-2xl overflow-hidden shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-700",children:[(0,b.jsx)("button",{onClick:()=>{s(new Date(r.getFullYear(),r.getMonth()-1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white",children:r.toLocaleDateString("th-TH",{year:"numeric",month:"short"}).replace(" ",".")})}),(0,b.jsx)("button",{onClick:()=>{s(new Date(r.getFullYear(),r.getMonth()+1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-7",children:[["à¸­à¸².","à¸ˆ.","à¸­.","à¸ž.","à¸žà¸¤.","à¸¨.","à¸ª."].map((a,c)=>(0,b.jsx)("div",{className:`text-center text-[10px] sm:text-xs font-medium py-2 border-b border-r border-gray-700 ${0===c?"text-red-400":"text-gray-400"}`,children:a},a)),(()=>{let a,c,d,{daysInMonth:e,startingDayOfWeek:f,year:g,month:h}=(a=r.getFullYear(),d=new Date(a,c=r.getMonth(),1),{daysInMonth:new Date(a,c+1,0).getDate(),startingDayOfWeek:d.getDay(),year:a,month:c}),i=[],j=x();for(let a=0;a<f;a++)i.push((0,b.jsx)("div",{className:"min-h-[80px] sm:min-h-[100px] border-b border-r border-gray-700"},`empty-${a}`));for(let a=1;a<=e;a++){let c=`${g}-${String(h+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,d=a4(c),e=c===j,f=c===l,k=d.length>0,m=0===new Date(g,h,a).getDay(),n=d.some(a=>a.star_flag);i.push((0,b.jsxs)("div",{onClick:()=>a5(c),className:`
            min-h-[80px] sm:min-h-[100px] p-1 border-b border-r border-gray-700 cursor-pointer transition-all
            ${e?"bg-gray-800":""}
            ${f?"bg-blue-900/50":""}
            hover:bg-gray-800/50
          `,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsx)("div",{className:`text-xs sm:text-sm font-medium ${m?"text-red-400":"text-gray-300"} ${e?"bg-white text-black rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center":""}`,children:a}),n&&(0,b.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400 fill-current",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),k&&(0,b.jsxs)("div",{className:"space-y-0.5",children:[d.slice(0,3).map(a=>(0,b.jsxs)("button",{type:"button",onClick:b=>{b.stopPropagation(),aY(a)},className:"w-full flex items-center gap-0.5 truncate rounded-sm bg-emerald-600 px-1 py-0.5 text-left text-[8px] sm:text-[10px] text-white font-medium hover:bg-emerald-500 transition",title:`${a.customer_name} - ${a.status}`,children:[a.star_flag&&(0,b.jsx)("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-yellow-300 fill-current flex-shrink-0",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,b.jsx)("span",{className:"truncate",children:a.customer_name})]},a.id)),d.length>3&&(0,b.jsxs)("div",{className:"text-[8px] sm:text-[10px] text-gray-400 pl-1",children:["+",d.length-3," à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡"]})]})]},a))}return i})()]})]})}),"calendar2"===p&&(0,b.jsxs)("div",{className:"px-2 sm:px-8 pb-8",children:[(0,b.jsx)("div",{className:"mb-4 flex justify-end gap-3",children:(0,b.jsxs)("button",{onClick:()=>{$(null);let a=new Date;S({employee_id:0,work_date:`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`,time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),M(!0)},className:"px-4 sm:px-6 py-2 sm:py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg transition-all shadow-lg font-bold flex items-center gap-2 text-xs sm:text-sm",children:[(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"]})}),(0,b.jsxs)("div",{className:"bg-black/90 backdrop-blur-md rounded-lg sm:rounded-2xl overflow-hidden shadow-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-6 py-3 sm:py-4 border-b border-gray-700",children:[(0,b.jsx)("button",{onClick:()=>{u(new Date(t.getFullYear(),t.getMonth()-1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white",children:t.toLocaleDateString("th-TH",{year:"numeric",month:"short"}).replace(" ",".")})}),(0,b.jsx)("button",{onClick:()=>{u(new Date(t.getFullYear(),t.getMonth()+1))},className:"p-1 sm:p-2 hover:bg-gray-800 rounded-full transition-all",children:(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-7",children:[["à¸­à¸².","à¸ˆ.","à¸­.","à¸ž.","à¸žà¸¤.","à¸¨.","à¸ª."].map((a,c)=>(0,b.jsx)("div",{className:`text-center text-[10px] sm:text-xs font-medium py-2 border-b border-r border-gray-700 ${0===c?"text-red-400":"text-gray-400"}`,children:a},a)),(()=>{let a=t.getFullYear(),c=t.getMonth(),d=new Date(a,c,1),e=new Date(a,c+1,0).getDate(),f=d.getDay(),g=[],h=x();for(let a=0;a<f;a++)g.push((0,b.jsx)("div",{className:"min-h-[80px] sm:min-h-[100px] border-b border-r border-gray-700"},`empty-${a}`));for(let d=1;d<=e;d++){let e=`${a}-${String(c+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`,f=bn(e),i=e===h,j=e===l,k=f.length>0,n=0===new Date(a,c,d).getDay();g.push((0,b.jsxs)("div",{onClick:()=>{m(e),k?(W(f),Y(e),U(!0)):($(null),S({employee_id:0,work_date:e,time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),M(!0))},className:`
            min-h-[80px] sm:min-h-[100px] p-1 border-b border-r border-gray-700 cursor-pointer transition-all
            ${i?"bg-gray-800":""}
            ${j?"bg-teal-900/50":""}
            hover:bg-gray-800/50
          `,children:[(0,b.jsx)("div",{className:`text-xs sm:text-sm font-medium mb-1 ${n?"text-red-400":"text-gray-300"} ${i?"bg-white text-black rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center":""}`,children:d}),k?(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)("div",{className:"text-[8px] sm:text-[10px] bg-teal-500 text-white px-1 py-0.5 rounded-sm font-bold text-center",children:[f.length," à¸„à¸™"]}),f.slice(0,2).map(a=>{let c={PRESENT:"bg-green-500",LATE:"bg-yellow-500",LEAVE:"bg-blue-500",ABSENT:"bg-red-500",WFH:"bg-purple-500"};return(0,b.jsx)("div",{className:`${c[a.status]||"bg-gray-500"} rounded-sm px-1 py-0.5 text-[8px] sm:text-[10px] text-white font-medium truncate`,title:`${a.employee_name} - ${a.status}`,children:a.employee_name},a.id)}),f.length>2&&(0,b.jsxs)("div",{className:"text-[8px] sm:text-[10px] text-gray-400 pl-1",children:["+",f.length-2," à¸„à¸™"]})]}):(0,b.jsx)("div",{className:"text-[8px] sm:text-[10px] text-gray-500 text-center mt-2",children:"à¸„à¸¥à¸´à¸à¹€à¸žà¸·à¹ˆà¸­à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥"})]},d))}return g})()]})]})]}),"table"===p&&(0,b.jsxs)("div",{className:"space-y-3 sm:space-y-5 px-2 sm:px-0",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"date",value:n,onChange:a=>o(a.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,b.jsxs)("div",{className:"px-3 sm:px-4 py-2 rounded-lg bg-white/90 text-gray-800 font-medium text-sm sm:text-base flex items-center gap-2 pointer-events-none",children:[(0,b.jsx)("span",{children:n?(()=>{let[a,b,c]=n.split("-");return`${c}/${b}/${a}`})():"à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸™à¸—à¸µà¹ˆ"}),(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})]})}),(0,b.jsxs)("div",{className:"flex gap-2 sm:gap-3 justify-center",children:[(0,b.jsx)("button",{type:"button",onClick:()=>A("new"),className:`rounded-full px-4 sm:px-6 py-2 text-xs sm:text-sm font-semibold uppercase tracking-wide transition ${"new"===v?"bg-white text-blue-700 shadow-lg":"bg-white/40 text-white border border-white/40"}`,children:"à¸¥à¸¹à¸à¸„à¹‰à¸²à¹ƒà¸«à¸¡à¹ˆ"}),(0,b.jsx)("button",{type:"button",onClick:()=>A("old"),className:`rounded-full px-4 sm:px-6 py-2 text-xs sm:text-sm font-semibold uppercase tracking-wide transition ${"old"===v?"bg-slate-50 text-slate-900 shadow-lg":"bg-white/20 text-white border border-white/30"}`,children:"à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²"})]}),"new"===v?(0,b.jsx)("div",{className:"overflow-x-auto w-full rounded-2xl sm:rounded-3xl border border-white/30 shadow-2xl transition bg-white",children:h||0!==bj.length?(0,b.jsxs)("div",{className:"divide-y divide-gray-200",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 grid grid-cols-7 sm:grid-cols-11 gap-0",children:[(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¹€à¸§à¸¥à¸²"}),(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸Šà¸·à¹ˆà¸­"}),(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£"}),(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œ"}),(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸«à¸¡à¸­"}),(0,b.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"}),(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20 sm:border-r",children:"à¸¢à¸­à¸”"}),(0,b.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸”à¸²à¸§"}),(0,b.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white border-r border-white/20",children:"à¸›à¸£à¸°à¹€à¸—à¸¨"}),(0,b.jsx)("div",{className:"hidden sm:block px-1 py-2 sm:py-3 text-center text-[8px] sm:text-xs font-bold text-white",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"})]}),bj.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{onClick:()=>aU(aT===a.id?null:a.id),className:`grid grid-cols-7 sm:grid-cols-11 gap-0 cursor-pointer ${c%2==0?"bg-gradient-to-r from-slate-50 to-blue-50":"bg-gradient-to-r from-blue-100 to-indigo-100"} hover:bg-gradient-to-r hover:from-blue-200 hover:to-indigo-200 transition-all duration-200`,children:[(0,b.jsx)("div",{className:"px-1 py-2 sm:py-3 text-[8px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center",children:y(a.appointmentTime)}),(0,b.jsxs)("div",{className:"px-0.5 py-1 sm:py-2 text-[8px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex flex-col items-center justify-center",children:[(0,b.jsx)("span",{className:"inline-block px-0.5 sm:px-2 py-0.5 sm:py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full text-[6px] sm:text-xs font-bold shadow",children:a.status}),"à¸™à¸±à¸”à¸žà¸£à¹‰à¸­à¸¡à¸—à¸³"===a.status.trim()&&a.hasCustomerProfile&&(0,b.jsx)("span",{className:"mt-0.5 inline-block rounded-full bg-emerald-500/90 text-white text-[5px] sm:text-[10px] font-semibold px-0.5 sm:px-2 py-0.5",children:"OPD"})]}),(0,b.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[8px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center",children:(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),aY(a)},className:"font-semibold text-blue-600 hover:underline text-[8px] sm:text-sm truncate max-w-full",children:a.customer_name})}),(0,b.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center",children:a.phone}),(0,b.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 text-center flex items-center justify-center truncate",children:a.interested_product}),(0,b.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 font-medium text-center flex items-center justify-center truncate",children:a.doctor}),(0,b.jsx)("div",{className:"hidden sm:flex px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 text-center items-center justify-center truncate",children:a.contact_staff}),(0,b.jsx)("div",{className:"px-0.5 py-2 sm:py-3 text-[7px] sm:text-sm text-gray-800 border-r border-gray-200 sm:border-r text-center flex items-center justify-center",children:a.proposed_amount.toLocaleString()}),(0,b.jsx)("div",{className:"hidden sm:flex px-1 py-2 sm:py-3 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center items-center justify-center",children:a.star_flag?(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 fill-current",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),(0,b.jsx)("div",{className:"hidden sm:flex px-1 py-2 sm:py-3 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center items-center justify-center",children:a.country||"-"}),(0,b.jsx)("div",{className:"hidden sm:flex px-1 py-2 sm:py-3 text-xs sm:text-sm text-gray-800 text-center items-center justify-center",children:a.note?(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),ba(a)},className:"text-blue-600 hover:underline text-xs truncate max-w-[80px]",children:"à¸”à¸¹à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}):"-"})]}),aT===a.id&&(0,b.jsx)("div",{className:"sm:hidden bg-gradient-to-r from-indigo-50 to-purple-50 px-3 py-3 border-t border-indigo-200",children:(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­:"}),(0,b.jsx)("p",{className:"text-gray-800 truncate",children:a.contact_staff||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸•à¸´à¸”à¸”à¸²à¸§:"}),(0,b.jsx)("p",{className:"text-gray-800 flex items-center gap-1",children:a.star_flag?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})," à¹ƒà¸Šà¹ˆ"]}):"à¹„à¸¡à¹ˆ"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸›à¸£à¸°à¹€à¸—à¸¨:"}),(0,b.jsx)("p",{className:"text-gray-800",children:a.country||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold text-gray-600",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:"}),(0,b.jsx)("p",{className:"text-gray-800",children:a.note?(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),ba(a)},className:"text-blue-600 hover:underline text-left",children:z(a.note)}):"-"})]})]})})]},a.id))]}):(0,b.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,b.jsxs)("div",{className:"bg-white/20 backdrop-blur-md rounded-2xl p-4 sm:p-8 shadow-2xl text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-white/50 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,b.jsx)("h3",{className:"text-white font-bold text-lg sm:text-xl mb-2",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"}),(0,b.jsx)("p",{className:"text-white/80 text-sm sm:text-base",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸"})]})})}):(0,b.jsxs)("div",{className:"overflow-x-auto w-full rounded-2xl sm:rounded-3xl border border-white/30 shadow-2xl transition bg-slate-50",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 sm:gap-4 px-3 sm:px-6 pt-4 sm:pt-6 pb-2 text-slate-700",children:[(0,b.jsxs)("div",{className:"font-semibold text-xs sm:text-base",children:["à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²à¸§à¸±à¸™à¸—à¸µà¹ˆ ",bm||bl]}),(0,b.jsxs)("button",{type:"button",onClick:()=>a0(bl),className:"inline-flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-1 sm:py-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-lg shadow hover:from-purple-600 hover:to-indigo-600 transition text-xs sm:text-sm",children:[(0,b.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"à¸£à¸µà¹‚à¸«à¸¥à¸”"]})]}),aR&&(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-200 text-red-700 rounded-xl sm:rounded-2xl px-3 sm:px-6 py-3 sm:py-4 m-3 sm:m-6 flex flex-wrap items-center justify-between gap-2 sm:gap-4",children:[(0,b.jsx)("span",{className:"font-medium text-xs sm:text-sm",children:aR}),(0,b.jsx)("button",{type:"button",onClick:()=>a0(bl),className:"px-3 sm:px-4 py-1 sm:py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition text-xs sm:text-sm",children:"à¸¥à¸­à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡"})]}),aP?(0,b.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,b.jsx)("div",{className:"bg-white/60 rounded-2xl p-4 sm:p-8 shadow-2xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,b.jsxs)("svg",{className:"animate-spin h-8 w-8 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,b.jsx)("span",{className:"text-indigo-700 font-semibold text-lg",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²..."})]})})}):0===bk.length?(0,b.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,b.jsxs)("div",{className:"bg-white/70 rounded-2xl p-4 sm:p-8 shadow-2xl text-center",children:[(0,b.jsx)("svg",{className:"w-12 h-12 sm:w-16 sm:h-16 text-indigo-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2a2 2 0 012-2h2a2 2 0 012 2v2m-6 0h6m-3-9h.01M4 6h16M4 10h16M4 14h16"})}),(0,b.jsx)("h3",{className:"text-indigo-700 font-bold text-lg sm:text-xl mb-2",children:"à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¸²à¸¢à¸à¸²à¸£à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²"}),(0,b.jsx)("p",{className:"text-indigo-500 text-sm sm:text-base",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ à¸¥à¸­à¸‡à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸§à¸±à¸™à¸—à¸µà¹ˆà¸«à¸£à¸·à¸­à¸£à¸µà¹‚à¸«à¸¥à¸”à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡"})]})}):(0,b.jsxs)("table",{className:"w-full border-collapse min-w-[700px]",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500",children:[(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¹€à¸§à¸¥à¸²à¸—à¸µà¹ˆà¸™à¸±à¸”"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸«à¸±à¸•à¸–à¸à¸²à¸£ / à¸šà¸£à¸´à¸à¸²à¸£"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¹à¸žà¸—à¸¢à¹Œ"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸£à¸«à¸±à¸ªà¸™à¸±à¸”"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white border-r border-white/20 tracking-wide whitespace-nowrap",children:"à¸•à¸´à¸”à¸”à¸²à¸§"}),(0,b.jsx)("th",{className:"px-2 sm:px-4 py-3 sm:py-5 text-center text-xs sm:text-sm font-bold text-white tracking-wide whitespace-nowrap",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"})]})}),(0,b.jsx)("tbody",{children:bk.map((a,c)=>{let{dateLabel:d,timeLabel:e}=(a=>{if(!a)return{dateLabel:"-",timeLabel:"-"};let b=new Date(a);if(!Number.isNaN(b.getTime()))return{dateLabel:b.toLocaleDateString("th-TH",{day:"2-digit",month:"short"}),timeLabel:`${b.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})} à¸™.`};let[c,d]=a.split(/[T\s]/);return{dateLabel:c||"-",timeLabel:d?y(d.slice(0,5)):"-"}})(a.start_date),f=a.dest_name||a.activity||"-",g=a.activity||"à¸£à¸­à¸•à¸´à¸”à¸•à¹ˆà¸­",h=a.organize||a.bind_code||"-",i=z(a.note),j=!!(a.vn&&a.vn.trim()),k=a.appoint_code||`${a.code}-${c}`;return(0,b.jsxs)("tr",{className:`${c%2==0?"bg-gradient-to-r from-white via-indigo-50 to-purple-50":"bg-gradient-to-r from-purple-50 via-pink-50 to-rose-50"} hover:bg-gradient-to-r hover:from-purple-100 hover:to-pink-100 transition-all duration-200`,children:[(0,b.jsxs)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:[(0,b.jsx)("div",{className:"font-semibold text-indigo-700 text-sm sm:text-base",children:e}),(0,b.jsx)("div",{className:"text-[10px] sm:text-xs text-gray-500",children:d})]}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:(0,b.jsx)("span",{className:"inline-block px-2 sm:px-4 py-1 sm:py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full text-[10px] sm:text-xs font-bold shadow",children:g})}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:(a=>{if(a.display_name&&a.display_name.trim())return a.display_name.trim();let b=[a.prefix,a.name,a.surname].filter(a=>!!(a&&a.trim())).map(a=>a.trim());return b.length>0?b.join(" "):a.nickname&&a.nickname.trim()?a.nickname.trim():"-"})(a)}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center whitespace-nowrap",children:(a=>{if(!a)return"-";let b=a.replace(/\D/g,"");return 10===b.length?`${b.slice(0,3)}-${b.slice(3,6)}-${b.slice(6)}`:a.trim()})(a.mobilephone)}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:f}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:a.doctor_name||"-"}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:h}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 text-center",children:a.appoint_code||a.code||"-"}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 border-r border-gray-200 bg-gradient-to-r from-amber-100 to-yellow-100 text-center",children:(0,b.jsx)("div",{className:"flex items-center justify-center",children:j?(0,b.jsx)("svg",{className:"w-6 h-6 text-yellow-500 fill-current",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):(0,b.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),(0,b.jsx)("td",{className:"px-2 sm:px-4 py-2 sm:py-4 text-xs sm:text-sm text-gray-800 text-left",children:(0,b.jsx)("div",{className:"text-xs sm:text-sm text-gray-700",title:a.note||void 0,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i})})]},k)})})]})]})]}),"table"===p&&"new"===v&&(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 px-3 sm:px-8 py-3 sm:py-6 border-t-4 border-indigo-600",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"text-xs sm:text-base text-white flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"ðŸ“Š à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”:"}),(0,b.jsxs)("span",{className:"bg-white text-blue-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[f.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]}),(0,b.jsxs)("div",{className:"text-xs sm:text-base text-white flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"ðŸ’Ž à¸£à¸§à¸¡à¸¢à¸­à¸”:"}),(0,b.jsxs)("span",{className:"bg-white text-purple-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[f.reduce((a,b)=>a+b.proposedAmount,0).toLocaleString()," ","à¸šà¸²à¸—"]})]})]})}),"table"===p&&"old"===v&&(0,b.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 px-3 sm:px-8 py-3 sm:py-6 border-t-4 border-purple-600",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-2 sm:gap-4 text-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-base",children:[(0,b.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"ðŸ“ à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸²:"}),(0,b.jsxs)("span",{className:"bg-white text-purple-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[bk.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 text-xs sm:text-base",children:[(0,b.jsx)("span",{className:"bg-white/20 px-2 sm:px-4 py-1 sm:py-2 rounded-lg backdrop-blur-sm font-bold",children:"â­ à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ VN:"}),(0,b.jsxs)("span",{className:"bg-white text-pink-600 px-2 sm:px-4 py-1 sm:py-2 rounded-lg font-bold shadow-lg",children:[bk.filter(a=>a.vn&&a.vn.trim()).length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]})]})})]})}),F&&B.length>0&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center z-50",onClick:a6,children:(0,b.jsxs)("div",{onClick:a=>a.stopPropagation(),style:{animation:"slideUp 0.3s ease-out"},className:"jsx-12a0491c9b316183 bg-gradient-to-br from-white to-blue-50 rounded-t-3xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden animate-slide-up",children:[(0,b.jsx)(c.default,{id:"12a0491c9b316183",children:"@keyframes slideUp{0%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}"}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 bg-gradient-to-r from-blue-500 to-indigo-600 px-4 sm:px-6 py-4 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"jsx-12a0491c9b316183 bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-5 h-5 sm:w-6 sm:h-6 text-white",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",className:"jsx-12a0491c9b316183"})})}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("h2",{className:"jsx-12a0491c9b316183 text-lg sm:text-2xl font-bold text-white",children:["à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢à¸§à¸±à¸™à¸—à¸µà¹ˆ"," ",(()=>{let[a,b,c]=D.split("-").map(Number);return new Date(a,b-1,c).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})})()]}),(0,b.jsxs)("p",{className:"jsx-12a0491c9b316183 text-blue-100 text-xs sm:text-sm",children:["à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” ",B.length," à¸£à¸²à¸¢à¸à¸²à¸£"]})]})]}),(0,b.jsx)("button",{onClick:a6,className:"jsx-12a0491c9b316183 bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-5 h-5 sm:w-6 sm:h-6 text-white",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12",className:"jsx-12a0491c9b316183"})})})]}),(0,b.jsx)("div",{className:"jsx-12a0491c9b316183 p-4 sm:p-6 space-y-4 max-h-[calc(85vh-140px)] overflow-y-auto",children:B.map((a,c)=>(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"jsx-12a0491c9b316183 bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-2.5 py-0.5 rounded-full text-xs font-bold",children:["#",c+1]}),(0,b.jsx)("button",{type:"button",onClick:()=>aY(a),className:"jsx-12a0491c9b316183 text-lg sm:text-xl font-bold text-blue-600 hover:underline",children:a.customer_name}),(0,b.jsx)("span",{className:"jsx-12a0491c9b316183 text-gray-500 text-sm",children:a.phone})]}),(0,b.jsx)("span",{className:"jsx-12a0491c9b316183 px-3 py-1 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-full text-xs font-bold",children:a.status})]}),(0,b.jsx)("div",{className:"jsx-12a0491c9b316183 px-4 py-2",children:(0,b.jsxs)("button",{onClick:()=>a3(a.id),className:"jsx-12a0491c9b316183 w-full px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold shadow transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-4 h-4",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",className:"jsx-12a0491c9b316183"})}),"à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"]})}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 px-4 py-3 grid grid-cols-2 gap-x-6 gap-y-3",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183 text-red-500",children:"â°"})," à¹€à¸§à¸¥à¸²à¸™à¸±à¸”à¸«à¸¡à¸²à¸¢"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:y(a.appointmentTime)})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ‘¨â€âš•ï¸"})," à¹à¸žà¸—à¸¢à¹Œ"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:a.doctor})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ’Š"})," à¸œà¸¥à¸´à¸•à¸ à¸±à¸“à¸‘à¹Œ"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:(a=>{if(!a)return"-";let b=a.trim();return b&&"null"!==b.toLowerCase()&&"undefined"!==b.toLowerCase()?b:"-"})(a.interested_product||a.interestedProduct)})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸŒ"})," à¸›à¸£à¸°à¹€à¸—à¸¨"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:a.country||"-"})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ‘¤"})," à¸œà¸¹à¹‰à¸•à¸´à¸”à¸•à¹ˆà¸­"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:a.contact_staff||"-"})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ’°"})," à¸¢à¸­à¸”à¹€à¸ªà¸™à¸­"]}),(0,b.jsxs)("p",{className:"jsx-12a0491c9b316183 text-purple-600 font-bold text-lg sm:text-xl",children:[a.proposed_amount.toLocaleString()," à¸¿"]})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"â­"})," à¸•à¸´à¸”à¸”à¸²à¸§"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base flex items-center gap-1",children:a.star_flag?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:"jsx-12a0491c9b316183 w-5 h-5 text-yellow-500 fill-current",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",className:"jsx-12a0491c9b316183"})})," à¹ƒà¸Šà¹ˆ"]}):"à¹„à¸¡à¹ˆ"})]}),(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183",children:[(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 flex items-center gap-1.5 text-gray-500 text-xs mb-0.5",children:[(0,b.jsx)("span",{className:"jsx-12a0491c9b316183",children:"ðŸ¥"})," OPD"]}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-gray-900 font-bold text-sm sm:text-base",children:"à¸™à¸±à¸”à¸žà¸£à¹‰à¸­à¸¡à¸—à¸³"===a.status.trim()&&a.hasCustomerProfile?(0,b.jsx)("span",{className:"jsx-12a0491c9b316183 text-emerald-600",children:"à¹€à¸›à¸´à¸” OPD à¹à¸¥à¹‰à¸§"}):"-"})]})]}),a.note&&(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 mx-4 mb-3 bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-xs text-gray-600 font-medium mb-1",children:"ðŸ“ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"}),(0,b.jsx)("p",{className:"jsx-12a0491c9b316183 text-sm text-gray-800",children:a.note})]}),(a.surgery_date||a.consult_date)&&(0,b.jsxs)("div",{className:"jsx-12a0491c9b316183 px-4 pb-3 flex flex-wrap gap-2",children:[a.surgery_date&&(0,b.jsx)("div",{className:"jsx-12a0491c9b316183 bg-red-100 px-3 py-1 rounded-full",children:(0,b.jsxs)("span",{className:"jsx-12a0491c9b316183 text-red-700 font-bold text-xs",children:["ðŸ¥ à¸œà¹ˆà¸²à¸•à¸±à¸”:"," ",(()=>{let[b,c,d]=a.surgery_date.split("-").map(Number);return new Date(b,c-1,d).toLocaleDateString("th-TH")})()]})}),a.consult_date&&(0,b.jsx)("div",{className:"jsx-12a0491c9b316183 bg-blue-100 px-3 py-1 rounded-full",children:(0,b.jsxs)("span",{className:"jsx-12a0491c9b316183 text-blue-700 font-bold text-xs",children:["ðŸ“… à¸›à¸£à¸¶à¸à¸©à¸²:"," ",(()=>{let[b,c,d]=a.consult_date.split("-").map(Number);return new Date(b,c-1,d).toLocaleDateString("th-TH")})()]})})]})]},a.id))}),(0,b.jsx)("div",{className:"jsx-12a0491c9b316183 bg-gray-100 px-4 sm:px-6 py-3 flex justify-end border-t",children:(0,b.jsx)("button",{onClick:a6,className:"jsx-12a0491c9b316183 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸›à¸´à¸”"})})]})}),H&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>I(!1),children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-white to-emerald-50 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-6 rounded-t-2xl flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"à¹€à¸žà¸´à¹ˆà¸¡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸™à¸±à¸à¸‡à¸²à¸™"}),(0,b.jsx)("p",{className:"text-emerald-100 text-sm mt-1",children:"à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¹ƒà¸«à¸¡à¹ˆ"})]})]}),(0,b.jsx)("button",{onClick:()=>I(!1),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-gray-700 font-bold mb-2",children:["à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:J.full_name,onChange:a=>bc("full_name",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",placeholder:"à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡"}),(0,b.jsx)("input",{type:"text",value:J.role,onChange:a=>bc("role",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",placeholder:"à¹€à¸Šà¹ˆà¸™ à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸‚à¸²à¸¢, à¸œà¸¹à¹‰à¸ˆà¸±à¸”à¸à¸²à¸£"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¸§à¸±à¸™à¸¥à¸²à¸•à¹ˆà¸­à¸›à¸µ"}),(0,b.jsx)("input",{type:"number",value:J.yearly_leave_quota,onChange:a=>bc("yearly_leave_quota",parseInt(a.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",min:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¸§à¸±à¸™à¸¥à¸²à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­"}),(0,b.jsx)("input",{type:"number",value:J.leave_remaining,onChange:a=>bc("leave_remaining",parseInt(a.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800",min:"0"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"}),(0,b.jsx)("input",{type:"time",value:J.work_start_time,onChange:a=>bc("work_start_time",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¹€à¸¥à¸´à¸à¸‡à¸²à¸™"}),(0,b.jsx)("input",{type:"time",value:J.work_end_time,onChange:a=>bc("work_end_time",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-emerald-500 focus:outline-none text-gray-800"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"is_active",checked:J.is_active,onChange:a=>bc("is_active",a.target.checked),className:"w-5 h-5 rounded border-2 border-gray-300 text-emerald-600 focus:ring-emerald-500"}),(0,b.jsx)("label",{htmlFor:"is_active",className:"text-gray-700 font-bold",children:"à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸›à¸à¸´à¸šà¸±à¸•à¸´à¸‡à¸²à¸™à¸­à¸¢à¸¹à¹ˆ"})]})]}),(0,b.jsxs)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>I(!1),className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,b.jsx)("button",{onClick:bd,className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸šà¸±à¸™à¸—à¸¶à¸"})]})]})}),L&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>M(!1),children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-white to-teal-50 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 p-6 rounded-t-2xl flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white",children:[Z?"à¹à¸à¹‰à¹„à¸‚":"à¸šà¸±à¸™à¸—à¸¶à¸","à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"]}),(0,b.jsx)("p",{className:"text-teal-100 text-sm mt-1",children:Z?"à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²-à¸­à¸­à¸à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸žà¸™à¸±à¸à¸‡à¸²à¸™":"à¸à¸£à¸­à¸à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¹€à¸‚à¹‰à¸²-à¸­à¸­à¸à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸žà¸™à¸±à¸à¸‡à¸²à¸™"})]})]}),(0,b.jsx)("button",{onClick:()=>M(!1),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-gray-700 font-bold mb-2",children:["à¸žà¸™à¸±à¸à¸‡à¸²à¸™ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),Z?(0,b.jsx)("div",{className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 bg-gray-100 text-gray-800 font-bold",children:Z.employee_name||`ID: ${Z.employee_id}`}):(0,b.jsxs)("select",{value:R.employee_id,onChange:a=>be("employee_id",parseInt(a.target.value)),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800",children:[(0,b.jsx)("option",{value:0,children:"à¹€à¸¥à¸·à¸­à¸à¸žà¸™à¸±à¸à¸‡à¸²à¸™"}),N.filter(a=>{if(R.work_date){let b=R.work_date.split("T")[0];return!P.some(c=>{let d=c.work_date.split("T")[0];return Number(c.employee_id)===Number(a.id)&&d===b})}return!0}).map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.full_name," - ",a.role]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-gray-700 font-bold mb-2",children:["à¸§à¸±à¸™à¸—à¸µà¹ˆ ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"date",value:R.work_date,onChange:a=>be("work_date",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™"}),(0,b.jsx)("input",{type:"time",value:R.time_in,onChange:a=>be("time_in",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-700 font-bold mb-2",children:"à¹€à¸§à¸¥à¸²à¸­à¸­à¸à¸‡à¸²à¸™"}),(0,b.jsx)("input",{type:"time",value:R.time_out,onChange:a=>be("time_out",a.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:border-teal-500 focus:outline-none text-gray-800"})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:()=>{M(!1),$(null)},className:"px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),(0,b.jsx)("button",{onClick:bg,className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white rounded-lg font-bold shadow-lg transition-all",children:Z?"à¸šà¸±à¸™à¸—à¸¶à¸à¸à¸²à¸£à¹à¸à¹‰à¹„à¸‚":"à¸šà¸±à¸™à¸—à¸¶à¸"})]})]})}),T&&V.length>0&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>U(!1),children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-white to-teal-50 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 p-6 rounded-t-2xl flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-lg",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸‡à¸²à¸™à¸§à¸±à¸™à¸—à¸µà¹ˆ"," ",(()=>{let[a,b,c]=X.split("-").map(Number);return new Date(a,b-1,c).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})()]}),(0,b.jsxs)("p",{className:"text-teal-100 text-sm mt-1",children:["à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” ",V.length," à¸„à¸™"]})]})]}),(0,b.jsx)("button",{onClick:()=>U(!1),className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"mb-4 flex justify-end",children:(0,b.jsxs)("button",{onClick:()=>{U(!1),$(null),setTimeout(()=>{S({employee_id:0,work_date:X,time_in:"08:00",time_out:"17:00",status:"PRESENT",work_hours:8,overtime_hours:0,note:""}),M(!0)},100)},className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg transition-all shadow-lg font-bold flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"à¹€à¸žà¸´à¹ˆà¸¡à¸žà¸™à¸±à¸à¸‡à¸²à¸™"]})}),(0,b.jsx)("div",{className:"space-y-4",children:V.map((a,c)=>(0,b.jsxs)("div",{className:"bg-gradient-to-br from-white to-teal-50 rounded-xl p-4 border-2 border-teal-200 shadow-lg hover:shadow-xl transition-all",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-teal-400 to-cyan-500 text-white w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg",children:a.employee_name?.charAt(0)||"?"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-teal-600 font-medium",children:"à¸Šà¸·à¹ˆà¸­à¸žà¸™à¸±à¸à¸‡à¸²à¸™"}),(0,b.jsx)("div",{className:"font-bold text-gray-800 text-lg",children:a.employee_name||`ID: ${a.employee_id}`})]})]}),(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("div",{className:"text-xs text-teal-600 font-medium mb-1",children:"à¸ªà¸–à¸²à¸™à¸°"}),(0,b.jsx)("span",{className:`inline-block px-4 py-2 rounded-lg font-bold border-2 text-sm ${{PRESENT:"bg-green-100 text-green-800 border-green-300",LATE:"bg-yellow-100 text-yellow-800 border-yellow-300",LEAVE:"bg-blue-100 text-blue-800 border-blue-300",ABSENT:"bg-red-100 text-red-800 border-red-300",WFH:"bg-purple-100 text-purple-800 border-purple-300"}[a.status]||"bg-gray-100 text-gray-800 border-gray-300"}`,children:{PRESENT:"à¸¡à¸²à¸—à¸³à¸‡à¸²à¸™",LATE:"à¸¡à¸²à¸ªà¸²à¸¢",LEAVE:"à¸¥à¸²",ABSENT:"à¸‚à¸²à¸”à¸‡à¸²à¸™",WFH:"WFH"}[a.status]||a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-teal-600 font-medium mb-1",children:"à¹€à¸§à¸¥à¸²à¹€à¸‚à¹‰à¸²"}),(0,b.jsx)("div",{className:"bg-blue-100 text-blue-800 rounded-lg px-3 py-2 font-bold text-center",children:y(a.time_in)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-teal-600 font-medium mb-1",children:"à¹€à¸§à¸¥à¸²à¸­à¸­à¸"}),(0,b.jsx)("div",{className:"bg-orange-100 text-orange-800 rounded-lg px-3 py-2 font-bold text-center",children:y(a.time_out)})]})]}),(0,b.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>{$(a),S({employee_id:a.employee_id,work_date:a.work_date.split("T")[0],time_in:a.time_in,time_out:a.time_out,status:a.status,work_hours:a.work_hours,overtime_hours:a.overtime_hours,note:a.note}),U(!1),M(!0)},className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-bold shadow transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"à¹à¸à¹‰à¹„à¸‚"]}),(0,b.jsxs)("button",{onClick:()=>a.id&&bf(a.id),className:"flex-1 px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-bold shadow transition-all flex items-center justify-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"à¸¥à¸š"]})]})]},a.id||c))})]}),(0,b.jsx)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end",children:(0,b.jsx)("button",{onClick:()=>U(!1),className:"px-6 py-3 bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white rounded-lg font-bold shadow-lg transition-all",children:"à¸›à¸´à¸”"})})]})}),al&&ah&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:a9,children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-white to-indigo-50 rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 rounded-t-2xl flex justify-between items-center text-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold",children:["à¸šà¸£à¸´à¸à¸²à¸£à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡ ",ah.groupname]}),(0,b.jsxs)("p",{className:"text-xs text-white/80 mt-1",children:["à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ b_itemservice (groupcode = ",ah.groupcode,")"]})]}),(0,b.jsx)("button",{onClick:a9,className:"bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-all",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[an&&(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸£à¸²à¸¢à¸à¸²à¸£..."}),ap&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:ap}),!an&&!ap&&0===aj.length&&(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰"}),!an&&aj.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:aj.map(a=>(0,b.jsxs)("div",{className:"border border-gray-200 rounded-xl p-3 bg-white shadow-sm",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.itemcode}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:a.itemname})]},a.itemcode))})]}),(0,b.jsx)("div",{className:"bg-gray-100 p-4 rounded-b-2xl flex justify-end",children:(0,b.jsx)("button",{onClick:a9,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg font-semibold shadow-lg transition-all",children:"à¸›à¸´à¸”"})})]})}),_&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:bb,children:(0,b.jsxs)("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-2xl p-8",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:_.customer_name||"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸Šà¸·à¹ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸²"})]}),(0,b.jsx)("button",{type:"button",onClick:bb,className:"text-gray-500 hover:text-gray-800 transition","aria-label":"à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¸•à¹ˆà¸²à¸‡à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 6l12 12M6 18L18 6"})})})]}),(0,b.jsx)("div",{className:"bg-gray-100 rounded-xl p-6 text-left max-h-[60vh] overflow-y-auto",children:(0,b.jsx)("p",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap",children:_.note??"-"})}),(0,b.jsx)("div",{className:"mt-6 flex justify-end",children:(0,b.jsx)("button",{type:"button",onClick:bb,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg shadow-md hover:from-blue-600 hover:to-indigo-600 transition",children:"à¸›à¸´à¸”"})})]})}),(0,b.jsx)(w,{visible:ar,loading:av,saving:ax,exists:az,form:at,error:aD,message:aB,lead:aF,staffOptions:aH,staffLoading:aJ,staffError:aL,onClose:()=>{as(!1),au(null),aE(null),aC(null),aA(!1),aw(!1),ay(!1),aG(null)},onChange:(a,b)=>{au(c=>{if(!c)return c;if("prefix"===a||"name"===a||"surname"===a){let d=[c.prefix,c.name,c.surname].filter(Boolean).join(" ").trim(),e={...c,[a]:b},f=[e.prefix,e.name,e.surname].filter(Boolean).join(" ").trim();return c.displayname&&c.displayname.trim()!==d||(e.displayname=f),e}return{...c,[a]:b}})},onSubmit:aZ})]})}a.s(["default",()=>A],304325)}];

//# sourceMappingURL=src_app_%28fullscreen%29_crm-advanced_page_tsx_9f84af31._.js.map