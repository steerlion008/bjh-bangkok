module.exports=[193695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},650645,a=>{a.n(a.i(827572))},825210,a=>{a.n(a.i(402747))},517537,a=>{a.n(a.i(903363))},13718,a=>{a.n(a.i(685523))},118198,a=>{a.n(a.i(545518))},262212,a=>{a.n(a.i(866114))},522734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},30706,a=>{a.n(a.i(458942))},275251,a=>{"use strict";let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/app/(fullscreen)/all-files-gallery/[videoId]/VideoShareClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(fullscreen)/all-files-gallery/[videoId]/VideoShareClient.tsx <module evaluation>","default");a.s(["default",0,b])},351509,a=>{"use strict";let b=(0,a.i(211857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/app/(fullscreen)/all-files-gallery/[videoId]/VideoShareClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(fullscreen)/all-files-gallery/[videoId]/VideoShareClient.tsx","default");a.s(["default",0,b])},979673,a=>{"use strict";a.i(275251);var b=a.i(351509);a.n(b)},199014,a=>{"use strict";var b=a.i(907997);a.i(570396);var c=a.i(673727),d=a.i(522734),e=a.i(814747),f=a.i(979673);let g=process.env.NEXT_PUBLIC_BASE_URL||"https://app.bjhbangkok.com",h=e.default.join(process.cwd(),"public","images","video"),i=e.default.join(process.cwd(),"public","cache","line-videos");async function j(a){try{try{let b=Buffer.from(a,"base64url").toString("utf-8");if(b.includes("/images/video/")){let c=b.replace(/^\/images\/video\//,""),f=e.default.join(h,c);if(d.default.existsSync(f)){let b=d.default.statSync(f);e.default.basename(f),e.default.extname(f).toLowerCase();let g=e.default.dirname(c);return k(a,f,c,g,b)}}}catch{}let b=function a(b,c,f=""){try{for(let g of d.default.readdirSync(b,{withFileTypes:!0})){let d=e.default.join(b,g.name),h=f?`${f}/${g.name}`:g.name;if(g.isDirectory()){if("transcoded"===g.name||".git"===g.name)continue;let b=a(d,c,h);if(b)return b}else if(g.isFile()){let a=e.default.extname(g.name).toLowerCase();if([".mp4",".webm",".mov",".m4v",".avi"].includes(a)){let b=e.default.basename(g.name,a);if(b===c||g.name===c||b.includes(c)||c.includes(b))return{fullPath:d,relativePath:h,folder:f||"root"}}}}}catch(a){console.error("Error searching for video:",a)}return null}(h,a);if(!b)return null;let c=d.default.statSync(b.fullPath);return k(a,b.fullPath,b.relativePath,b.folder,c)}catch(a){return console.error("Error getting video info:",a),null}}function k(a,b,c,f,h){let j=e.default.basename(b),k=e.default.extname(b).toLowerCase(),l=e.default.basename(j,k),m=`/images/video/${c}`,n=Buffer.from(m).toString("base64url"),o=`${l}_thumb.jpg`,p=e.default.join(e.default.dirname(b),o),q=d.default.existsSync(p)?`/images/video/${e.default.dirname(c)}/${o}`:null,r=`${l}_${n.slice(0,20)}_line.mp4`,s=e.default.join(i,r),t=d.default.existsSync(s),u=c.split("/").map(a=>encodeURIComponent(a)).join("/");return{id:a,name:j,originalUrl:`${g}/images/video/${u}`,lineVideoUrl:t?`${g}/api/line-video/${n}`:`${g}/api/serve-video/${u}`,thumbnailUrl:q?`${g}${q.split("/").map(a=>encodeURIComponent(a)).join("/")}`:`${g}/images/video-placeholder.svg`,width:1280,height:720,mimeType:"video/mp4",folder:f,size:h.size}}async function l(a){try{await fetch(`${g}/api/transcode-video`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoPath:a})})}catch(a){console.error("Error triggering transcoding:",a)}}async function m({params:a},b){let{videoId:c}=await a,d=await j(c);if(!d)return{title:"Video Not Found",description:"The requested video could not be found."};let e=`${g}/all-files-gallery/${c}`;return d.lineVideoUrl.includes("/api/line-video/")||l(`/images/video/${d.folder}/${d.name}`),{title:`${d.name} - BJH Bangkok`,description:`Watch ${d.name} from BJH Bangkok`,openGraph:{title:d.name,description:`Watch ${d.name} from BJH Bangkok`,url:e,siteName:"BJH Bangkok",type:"video.other",images:[{url:d.thumbnailUrl,width:d.width,height:d.height,alt:d.name}],videos:[{url:d.lineVideoUrl,secureUrl:d.lineVideoUrl,type:d.mimeType,width:d.width,height:d.height}]},twitter:{card:"player",title:d.name,description:`Watch ${d.name} from BJH Bangkok`,images:[d.thumbnailUrl]},other:{"line:title":d.name,"line:description":`Watch ${d.name}`,"video:duration":d.duration?.toString()||"","video:release_date":new Date().toISOString(),"apple-mobile-web-app-capable":"yes","og:video":d.lineVideoUrl,"og:video:secure_url":d.lineVideoUrl,"og:video:type":d.mimeType,"og:video:width":String(d.width),"og:video:height":String(d.height)}}}async function n({params:a}){let{videoId:d}=await a,e=await j(d);e||(0,c.notFound)();let h=`${g}/all-files-gallery/${d}`,i=`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(h)}`;return(0,b.jsx)(f.default,{video:e,shareUrl:h,lineShareUrl:i})}a.s(["default",()=>n,"generateMetadata",()=>m])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__353dea36._.js.map