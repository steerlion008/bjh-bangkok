module.exports=[913509,e=>{"use strict";var t=e.i(747909),r=e.i(174017),o=e.i(996250),s=e.i(759756),n=e.i(561916),a=e.i(114444),c=e.i(837092),i=e.i(869741),l=e.i(316795),u=e.i(487718),d=e.i(995169),p=e.i(47587),g=e.i(666012),m=e.i(570101),E=e.i(626937),h=e.i(10372),C=e.i(193695);e.i(52474);var _=e.i(600220),A=e.i(89171);async function R(t){try{let r=t.nextUrl.searchParams,o=new Date().toISOString().split("T")[0],s=r.get("startDate")||o,n=r.get("endDate")||o,a="true"===r.get("daily"),c="true"===r.get("mock"),i={clientId:process.env.GOOGLE_ADS_CLIENT_ID,clientSecret:process.env.GOOGLE_ADS_CLIENT_SECRET,developerToken:process.env.GOOGLE_ADS_DEVELOPER_TOKEN,refreshToken:process.env.GOOGLE_ADS_REFRESH_TOKEN,customerId:process.env.GOOGLE_ADS_CUSTOMER_ID},l=[];if(i.clientId||l.push("GOOGLE_ADS_CLIENT_ID"),i.clientSecret||l.push("GOOGLE_ADS_CLIENT_SECRET"),i.developerToken||l.push("GOOGLE_ADS_DEVELOPER_TOKEN"),i.refreshToken||l.push("GOOGLE_ADS_REFRESH_TOKEN"),i.customerId||l.push("GOOGLE_ADS_CUSTOMER_ID"),l.length>0)return console.error("âŒ Missing Google Ads credentials:",l),A.NextResponse.json({error:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸žà¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Google Ads API",message:"à¸‚à¸²à¸” credentials à¸”à¸±à¸‡à¸™à¸µà¹‰:",missing:l,instructions:{"1. Developer Token":"à¹„à¸›à¸—à¸µà¹ˆ https://ads.google.com/aw/apicenter à¹€à¸žà¸·à¹ˆà¸­à¸‚à¸­ (à¹ƒà¸Šà¹‰à¹€à¸§à¸¥à¸² 1-3 à¸§à¸±à¸™)","2. Refresh Token":"à¸£à¸±à¸™: node scripts/generate-google-ads-refresh-token.js","3. Customer ID":"à¸”à¸¹à¸—à¸µà¹ˆ Google Ads Dashboard à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™"},currentCredentials:{hasClientId:!!i.clientId,hasClientSecret:!!i.clientSecret,hasDeveloperToken:!!i.developerToken,hasRefreshToken:!!i.refreshToken,hasCustomerId:!!i.customerId}},{status:503});if(c){console.log("ðŸŽ­ Using Mock Data Mode...");let e=[{id:"1",name:"Campaign A - Brand Awareness",status:"ENABLED",clicks:1250,impressions:45e3,averageCpc:8.5,cost:10625,ctr:2.78,conversions:45},{id:"2",name:"Campaign B - Product Launch",status:"ENABLED",clicks:890,impressions:32e3,averageCpc:12.3,cost:10947,ctr:2.78,conversions:32},{id:"3",name:"Campaign C - Retargeting",status:"ENABLED",clicks:650,impressions:18500,averageCpc:6.75,cost:4387.5,ctr:3.51,conversions:28}],t={totalClicks:e.reduce((e,t)=>e+t.clicks,0),totalImpressions:e.reduce((e,t)=>e+t.impressions,0),averageCpc:e.reduce((e,t)=>e+t.averageCpc,0)/e.length,totalCost:e.reduce((e,t)=>e+t.cost,0),averageCtr:e.reduce((e,t)=>e+t.ctr,0)/e.length};return console.log("âœ… Mock Data Generated:"),console.log(`  Total Cost: à¸¿${t.totalCost.toFixed(2)}`),console.log(`  Total Clicks: ${t.totalClicks}`),console.log(`  Average CPC: à¸¿${t.averageCpc.toFixed(2)}`),A.NextResponse.json({campaigns:e,summary:t,dateRange:{startDate:s,endDate:n},_mock:!0,_note:"This is mock data. Remove ?mock=true to use real API data."})}console.log("âœ… All credentials available. Connecting to Google Ads API...");try{let{GoogleAdsApi:t}=await e.A(15791);console.log("ðŸ”‘ Initializing Google Ads API client..."),console.log("Customer ID:",i.customerId);let r=new t({client_id:i.clientId,client_secret:i.clientSecret,developer_token:i.developerToken}).Customer({customer_id:i.customerId.replace(/-/g,""),refresh_token:i.refreshToken,login_customer_id:i.customerId.replace(/-/g,"")});console.log("ðŸ” Checking if account is a Manager Account...");let o=!1,c=[];try{let e=await r.query(`
          SELECT
            customer.id,
            customer.manager,
            customer.descriptive_name
          FROM customer
          LIMIT 1
        `);if(e.length>0&&e[0]?.customer?.manager){o=!0,console.log("âš ï¸  This is a Manager Account (MCC). Fetching client accounts...");try{c=(await r.query(`
              SELECT
                customer_client.id,
                customer_client.descriptive_name,
                customer_client.manager,
                customer_client.status
              FROM customer_client
              WHERE customer_client.status = 'ENABLED'
            `)).filter(e=>!e.customer_client.manager).map(e=>({id:e.customer_client.id.toString(),name:e.customer_client.descriptive_name,isManager:e.customer_client.manager,status:e.customer_client.status})),console.log(`ðŸ“‹ Found ${c.length} client accounts`)}catch(e){console.log("âš ï¸  Could not fetch client accounts:",e.message),c=[{id:"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸– query à¹„à¸”à¹‰",name:"à¸à¸£à¸¸à¸“à¸²à¸”à¸¹ Client Account ID à¸ˆà¸²à¸ Google Ads Dashboard",instructions:"à¹„à¸›à¸—à¸µà¹ˆ ads.google.com â†’ Account selector â†’ à¹€à¸¥à¸·à¸­à¸ Client Account â†’ à¸”à¸¹ Customer ID à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™"}]}}}catch(e){console.log("â„¹ï¸  Unable to check account type, proceeding...")}if(o)return A.NextResponse.json({error:"Manager Account à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸– query metrics à¹‚à¸”à¸¢à¸•à¸£à¸‡",message:"Manager Account (MCC) à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸– query campaigns/metrics à¹„à¸”à¹‰à¹‚à¸”à¸¢à¸•à¸£à¸‡",solution:"à¸à¸£à¸¸à¸“à¸²à¹ƒà¸Šà¹‰ Client Account ID à¹à¸—à¸™",currentCustomerId:i.customerId,currentAccountType:"Manager Account (MCC)",clientAccounts:c,howToFindClientAccountId:{method1:"à¸œà¹ˆà¸²à¸™ Google Ads Dashboard",steps:["1. à¹„à¸›à¸—à¸µà¹ˆ https://ads.google.com/","2. à¸„à¸¥à¸´à¸ Account selector (à¸¡à¸¸à¸¡à¸šà¸™à¸‹à¹‰à¸²à¸¢)","3. à¸ˆà¸°à¹€à¸«à¹‡à¸™à¸£à¸²à¸¢à¸à¸²à¸£à¸šà¸±à¸à¸Šà¸µà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” (Manager à¹à¸¥à¸° Client Accounts)","4. à¸„à¸¥à¸´à¸à¹€à¸‚à¹‰à¸²à¹„à¸›à¹ƒà¸™ Client Account à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£","5. à¸”à¸¹ Customer ID à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™ (à¹€à¸Šà¹ˆà¸™ 123-456-7890)","6. à¹€à¸­à¸²à¸•à¸±à¸§à¹€à¸¥à¸‚à¸¡à¸²à¹ƒà¸ªà¹ˆà¹ƒà¸™ .env.local (à¹€à¸Šà¹ˆà¸™ 1234567890)"],method2:"à¸«à¸£à¸·à¸­à¸ªà¸£à¹‰à¸²à¸‡ Client Account à¹ƒà¸«à¸¡à¹ˆ",createSteps:["1. à¹„à¸›à¸—à¸µà¹ˆ https://ads.google.com/","2. à¸„à¸¥à¸´à¸ Tools & Settings â†’ Setup â†’ Create new account","3. à¸ªà¸£à¹‰à¸²à¸‡ Client Account à¹ƒà¸«à¸¡à¹ˆ","4. à¹ƒà¸Šà¹‰ Customer ID à¸‚à¸­à¸‡à¸šà¸±à¸à¸Šà¸µà¹ƒà¸«à¸¡à¹ˆ"]},instructions:{step1:"à¸«à¸² Client Account ID à¸ˆà¸²à¸à¸§à¸´à¸˜à¸µà¸‚à¹‰à¸²à¸‡à¸šà¸™",step2:"à¸­à¸±à¸žà¹€à¸”à¸— GOOGLE_ADS_CUSTOMER_ID à¹ƒà¸™ .env.local",step3:"Restart server à¹à¸¥à¸°à¸¥à¸­à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡",example:'GOOGLE_ADS_CUSTOMER_ID=1234567890 (à¹ƒà¸Šà¹‰à¹€à¸‰à¸žà¸²à¸°à¸•à¸±à¸§à¹€à¸¥à¸‚ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸¡à¸µ "-")'},note:"à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¸¡à¸µ Client Account à¹ƒà¸•à¹‰ Manager à¸™à¸µà¹‰ à¸­à¸²à¸ˆà¸•à¹‰à¸­à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸šà¸±à¸à¸Šà¸µà¹ƒà¸«à¸¡à¹ˆà¸«à¸£à¸·à¸­à¸‚à¸­à¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡ Client Account à¸ˆà¸²à¸à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸šà¸±à¸à¸Šà¸µ"},{status:400});console.log("ðŸ” Querying campaigns from Google Ads API...");let l=a?`
        SELECT
          segments.date,
          metrics.clicks,
          metrics.impressions,
          metrics.average_cpc,
          metrics.cost_micros
        FROM campaign
        WHERE segments.date BETWEEN '${s}' AND '${n}'
      `:`
        SELECT
          campaign.id,
          campaign.name,
          campaign.status,
          metrics.clicks,
          metrics.impressions,
          metrics.average_cpc,
          metrics.cost_micros,
          metrics.ctr,
          metrics.conversions
        FROM campaign
        WHERE segments.date BETWEEN '${s}' AND '${n}'
      `,u=await r.query(l);if(console.log(`âœ… Retrieved ${u.length} ${a?"daily records":"campaigns"}`),a){console.log("ðŸ“Š Processing daily data...");let e=new Map;u.forEach(t=>{let r=t.segments?.date||"";if(!r)return;let o=t.metrics?.clicks||0,s=t.metrics?.impressions||0,n=e.get(r)||{clicks:0,impressions:0};e.set(r,{clicks:n.clicks+o,impressions:n.impressions+s})});let t=Array.from(e.entries()).map(([e,t])=>({date:e,clicks:t.clicks,impressions:t.impressions})).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());return console.log(`âœ… Daily breakdown: ${t.length} days`),t.forEach(e=>{console.log(`  ${e.date}: ${e.clicks} clicks, ${e.impressions} impressions`)}),A.NextResponse.json({success:!0,dailyData:t,dateRange:{startDate:s,endDate:n}})}let d=u.map(e=>({id:e.campaign.id.toString(),name:e.campaign.name,status:e.campaign.status,clicks:e.metrics.clicks||0,impressions:e.metrics.impressions||0,averageCpc:(e.metrics.average_cpc||0)/1e6,cost:(e.metrics.cost_micros||0)/1e6,ctr:100*(e.metrics.ctr||0),conversions:e.metrics.conversions||0}));console.log("ðŸ“Š Campaign Details:"),d.forEach(e=>{console.log(`  - ${e.name}: ${e.clicks} clicks (Status: ${e.status})`)});let p={totalClicks:d.reduce((e,t)=>e+t.clicks,0),totalImpressions:d.reduce((e,t)=>e+t.impressions,0),averageCpc:d.length>0?d.reduce((e,t)=>e+t.averageCpc,0)/d.length:0,totalCost:d.reduce((e,t)=>e+t.cost,0),averageCtr:d.length>0?d.reduce((e,t)=>e+t.ctr,0)/d.length:0};return A.NextResponse.json({campaigns:d,summary:p,dateRange:{startDate:s,endDate:n}})}catch(n){console.error("âŒ Google Ads API Error:",n),console.error("Error Stack:",n.stack),console.error("Error Details:",JSON.stringify(n,null,2));let e="à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Google Ads API",t=n.message||"Unknown error",r="",o="",s=null;if(n.errors&&Array.isArray(n.errors)&&(s=n.errors[0])&&(r=s.error_code?.authorization_error||s.error_code?.authentication_error||s.error_code?.request_error||(s.error_code?.quota_error!==void 0?String(s.error_code.quota_error):null)||"UNKNOWN",t=s.message||t,s.error_code?.quota_error)){let e=s.details?.quota_error_details;e&&(t+=`
Rate Scope: ${e.rate_scope}`,t+=`
Rate Name: ${e.rate_name}`)}if(t.includes("Too many requests")||"2"===r){e="à¹‚à¸”à¸™ Quota Limit - à¹€à¸£à¸µà¸¢à¸ API à¸šà¹ˆà¸­à¸¢à¹€à¸à¸´à¸™à¹„à¸›";let r=s?.details?.quota_error_details?.retry_after_seconds||t.match(/Retry in (\d+) seconds/)?.[1]||"à¹„à¸¡à¹ˆà¸—à¸£à¸²à¸š";t=`Developer Token à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹‚à¸«à¸¡à¸” Test Access à¸‹à¸¶à¹ˆà¸‡à¸¡à¸µ quota à¸ˆà¸³à¸à¸±à¸”à¸¡à¸²à¸ (15,000 operations/à¸§à¸±à¸™)`,o=`
ðŸ• à¸•à¸­à¸™à¸™à¸µà¹‰: à¸£à¸­ ${Math.ceil(Number(r)/3600)} à¸Šà¸±à¹ˆà¸§à¹‚à¸¡à¸‡ à¹à¸¥à¹‰à¸§à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ
ðŸ“‹ à¸§à¸´à¸˜à¸µà¹à¸à¹‰à¸–à¸²à¸§à¸£ (à¹€à¸¥à¸·à¸­à¸ 1 à¹ƒà¸™ 3):
1ï¸âƒ£ à¸‚à¸­ Developer Token à¹à¸šà¸š "Basic Access" (à¹à¸™à¸°à¸™à¸³)
   â€¢ à¹„à¸›à¸—à¸µà¹ˆ: https://ads.google.com/aw/apicenter
   â€¢ à¸„à¸¥à¸´à¸ "Apply for Basic Access"
   â€¢ à¸•à¹‰à¸­à¸‡à¸¡à¸µ API Budget à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ $50/à¸§à¸±à¸™
   â€¢ à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ 1-3 à¸§à¸±à¸™
   â€¢ à¹„à¸”à¹‰ quota: 15,000 ops/à¸§à¸±à¸™ â†’ 100,000+ ops/à¸§à¸±à¸™
2ï¸âƒ£ à¹ƒà¸Šà¹‰ Test Account (Manager Account)
   â€¢ à¹„à¸›à¸—à¸µà¹ˆ: https://ads.google.com/
   â€¢ à¸ªà¸£à¹‰à¸²à¸‡ Test Account à¹ƒà¸«à¸¡à¹ˆ
   â€¢ à¹ƒà¸Šà¹‰ Customer ID à¸‚à¸­à¸‡ Test Account à¹à¸—à¸™
   â€¢ Test Account à¸ˆà¸°à¸¡à¸µ quota à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸²
3ï¸âƒ£ à¸£à¸­ Quota Reset à¸—à¸¸à¸à¸§à¸±à¸™ (00:00 UTC)
   â€¢ Quota à¸ˆà¸° reset à¸•à¸­à¸™ 7:00 à¸™. (à¹€à¸§à¸¥à¸²à¹„à¸—à¸¢)
   â€¢ à¸§à¸±à¸™à¸™à¸µà¹‰à¸£à¸­à¸–à¸¶à¸‡à¸žà¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰à¹€à¸Šà¹‰à¸²
âš ï¸ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸: Developer Token à¸‚à¸­à¸‡à¸„à¸¸à¸“à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¹‚à¸«à¸¡à¸” "Test/Explorer Access" à¸‹à¸¶à¹ˆà¸‡à¸¡à¸µ limit à¸™à¹‰à¸­à¸¢à¸¡à¸²à¸
`}else t.includes("PERMISSION_DENIED")||"PERMISSION_DENIED"===r?(e="Developer Token à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",t="à¸à¸£à¸¸à¸“à¸²à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ Developer Token à¸ˆà¸²à¸ Google (1-3 à¸§à¸±à¸™)",o="à¹ƒà¸Šà¹‰ Test Account à¸«à¸£à¸·à¸­à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´ Token"):t.includes("AUTHENTICATION_ERROR")||"AUTHENTICATION_ERROR"===r?(e="à¸à¸²à¸£à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™à¸¥à¹‰à¸¡à¹€à¸«à¸¥à¸§",t="Refresh Token à¸­à¸²à¸ˆà¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡",o="à¸£à¸±à¸™: node scripts/generate-google-ads-refresh-token.js à¹€à¸žà¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡ Refresh Token à¹ƒà¸«à¸¡à¹ˆ"):t.includes("CUSTOMER_NOT_FOUND")||"CUSTOMER_NOT_FOUND"===r?(e="à¹„à¸¡à¹ˆà¸žà¸š Customer ID",t=`Customer ID ${i.customerId} à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡`,o="à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š Customer ID à¸—à¸µà¹ˆ Google Ads Dashboard (à¸¡à¸¸à¸¡à¸‚à¸§à¸²à¸šà¸™)"):t.includes("manager account")||t.includes("Metrics cannot be requested")||t.includes("MANAGER_CUSTOMER_CANNOT_BE_QUERIED")?(e="à¹ƒà¸Šà¹‰ Manager Account (MCC) à¹„à¸¡à¹ˆà¹„à¸”à¹‰",t="Manager Account à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸– query metrics à¹‚à¸”à¸¢à¸•à¸£à¸‡",o="à¸à¸£à¸¸à¸“à¸²à¹ƒà¸Šà¹‰ Client Account ID à¹à¸—à¸™"):t.includes("DEVELOPER_TOKEN_NOT_APPROVED")?(e="Developer Token à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",t="Token à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸ªà¸–à¸²à¸™à¸°à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",o="à¸£à¸­à¸à¸²à¸£à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¸ˆà¸²à¸ Google (1-3 à¸§à¸±à¸™) à¸«à¸£à¸·à¸­à¹ƒà¸Šà¹‰ Test Account"):t.includes("INVALID_CUSTOMER_ID")?(e="Customer ID à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡",t=`à¸£à¸¹à¸›à¹à¸šà¸š Customer ID (${i.customerId}) à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡`,o="Customer ID à¸„à¸§à¸£à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹€à¸¥à¸‚ 10 à¸«à¸¥à¸±à¸ à¹€à¸Šà¹ˆà¸™ 1234567890"):(t.includes("TOKEN_EXPIRED")||t.includes("invalid_grant"))&&(e="Refresh Token à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸",t="Refresh Token à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸à¸«à¸£à¸·à¸­à¸–à¸¹à¸à¸¢à¸à¹€à¸¥à¸´à¸",o="à¸£à¸±à¸™: node scripts/generate-google-ads-refresh-token.js à¹€à¸žà¸·à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡ Token à¹ƒà¸«à¸¡à¹ˆ");return A.NextResponse.json({error:e,details:t,errorCode:r,solution:o,credentials:{customerId:i.customerId,developerToken:i.developerToken?.substring(0,10)+"...",hasRefreshToken:!!i.refreshToken},fullError:void 0},{status:500})}}catch(e){return console.error("âŒ Unexpected error:",e),A.NextResponse.json({error:"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸„à¸²à¸”à¸„à¸´à¸”",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}e.s(["GET",()=>R],392140);var T=e.i(392140);let v=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/google-ads/route",pathname:"/api/google-ads",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/google-ads/route.ts",nextConfigOutput:"",userland:T}),{workAsyncStorage:D,workUnitAsyncStorage:I,serverHooks:k}=v;function O(){return(0,o.patchFetch)({workAsyncStorage:D,workUnitAsyncStorage:I})}async function f(e,t,o){v.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let A="/api/google-ads/route";A=A.replace(/\/index$/,"")||"/";let R=await v.prepare(e,t,{srcPage:A,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==o.waitUntil||o.waitUntil.call(o,Promise.resolve()),null;let{buildId:T,params:D,nextConfig:I,parsedUrl:k,isDraftMode:O,prerenderManifest:f,routerServerContext:N,isOnDemandRevalidate:S,revalidateOnlyGenerated:y,resolvedPathname:M,clientReferenceManifest:w,serverActionsManifest:x}=R,P=(0,i.normalizeAppPath)(A),G=!!(f.dynamicRoutes[P]||f.routes[M]),U=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,k,!1):t.end("This page could not be found"),null);if(G&&!O){let e=!!f.routes[M],t=f.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(I.experimental.adapterPath)return await U();throw new C.NoFallbackError}}let L=null;!G||v.isDev||O||(L="/index"===(L=M)?"/":L);let q=!0===v.isDev||!G,$=G&&!q;x&&w&&(0,a.setReferenceManifestsSingleton)({page:A,clientReferenceManifest:w,serverActionsManifest:x,serverModuleMap:(0,c.createServerModuleMap)({serverActionsManifest:x})});let b=e.method||"GET",H=(0,n.getTracer)(),F=H.getActiveScopeSpan(),j={params:D,prerenderManifest:f,renderOpts:{experimental:{authInterrupts:!!I.experimental.authInterrupts},cacheComponents:!!I.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:I.cacheLife,waitUntil:o.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,o)=>v.onRequestError(e,t,o,N)},sharedContext:{buildId:T}},B=new l.NodeNextRequest(e),K=new l.NodeNextResponse(t),V=u.NextRequestAdapter.fromNodeNextRequest(B,(0,u.signalFromNodeResponse)(t));try{let a=async e=>v.handle(V,j).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=H.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=r.get("next.route");if(o){let t=`${b} ${o}`;e.setAttributes({"next.route":o,"http.route":o,"next.span_name":t}),e.updateName(t)}else e.updateName(`${b} ${A}`)}),c=!!(0,s.getRequestMeta)(e,"minimalMode"),i=async s=>{var n,i;let l=async({previousCacheEntry:r})=>{try{if(!c&&S&&y&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await a(s);e.fetchMetrics=j.renderOpts.fetchMetrics;let i=j.renderOpts.pendingWaitUntil;i&&o.waitUntil&&(o.waitUntil(i),i=void 0);let l=j.renderOpts.collectedTags;if(!G)return await (0,g.sendResponse)(B,K,n,j.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[h.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,o=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:_.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:o}}}}catch(t){throw(null==r?void 0:r.isStale)&&await v.onRequestError(e,t,{routerKind:"App Router",routePath:A,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:S})},N),t}},u=await v.handleResponse({req:e,nextConfig:I,cacheKey:L,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:f,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:y,responseGenerator:l,waitUntil:o.waitUntil,isMinimalMode:c});if(!G)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==_.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(i=u.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});c||t.setHeader("x-nextjs-cache",S?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),O&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,m.fromNodeOutgoingHttpHeaders)(u.value.headers);return c&&G||d.delete(h.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,E.getCacheControlHeader)(u.cacheControl)),await (0,g.sendResponse)(B,K,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};F?await i(F):await H.withPropagatedContext(e.headers,()=>H.trace(d.BaseServerSpan.handleRequest,{spanName:`${b} ${A}`,kind:n.SpanKind.SERVER,attributes:{"http.method":b,"http.target":e.url}},i))}catch(t){if(t instanceof C.NoFallbackError||await v.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:S})}),G)throw t;return await (0,g.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>f,"patchFetch",()=>O,"routeModule",()=>v,"serverHooks",()=>k,"workAsyncStorage",()=>D,"workUnitAsyncStorage",()=>I],913509)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_362aefa0.js.map