module.exports=[193695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},270406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},918622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},324725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},494197,e=>{"use strict";var t=e.i(747909),r=e.i(174017),s=e.i(996250),n=e.i(759756),a=e.i(561916),o=e.i(114444),i=e.i(837092),c=e.i(869741),l=e.i(316795),d=e.i(487718),p=e.i(995169),u=e.i(47587),h=e.i(666012),v=e.i(570101),g=e.i(626937),m=e.i(10372),A=e.i(193695);e.i(52474);var x=e.i(600220),f=e.i(89171);async function R(t){try{let r=t.nextUrl.searchParams,s=r.get("startDate")||"2025-01-01",n=r.get("endDate")||"2025-04-04",a={appId:process.env.FACEBOOK_APP_ID,appSecret:process.env.FACEBOOK_APP_SECRET,accessToken:process.env.FACEBOOK_ACCESS_TOKEN,adAccountId:process.env.FACEBOOK_AD_ACCOUNT_ID},o=[];if(a.appId||o.push("FACEBOOK_APP_ID"),a.appSecret||o.push("FACEBOOK_APP_SECRET"),a.accessToken||o.push("FACEBOOK_ACCESS_TOKEN"),a.adAccountId||o.push("FACEBOOK_AD_ACCOUNT_ID"),o.length>0)return console.error("âŒ Missing Facebook Ads credentials:",o),f.NextResponse.json({error:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸žà¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ Facebook Ads API",message:"à¸‚à¸²à¸” Environment Variables à¸”à¸±à¸‡à¸™à¸µà¹‰:",missing:o,instructions:{"ðŸ”§ à¸ªà¸³à¸«à¸£à¸±à¸š Local Development":{"1. à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ .env.local":"à¹ƒà¸™à¹‚à¸Ÿà¸¥à¹€à¸”à¸­à¸£à¹Œ package/","2. à¹€à¸žà¸´à¹ˆà¸¡ credentials":"à¸”à¸¹à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¹ƒà¸™ .env.local.example","3. Restart dev server":"npm run dev"},"â˜ï¸ à¸ªà¸³à¸«à¸£à¸±à¸š Vercel (Production)":{"1. à¹„à¸›à¸—à¸µà¹ˆ":"https://vercel.com/your-project/settings/environment-variables","2. à¹€à¸žà¸´à¹ˆà¸¡à¸•à¸±à¸§à¹à¸›à¸£à¹€à¸«à¸¥à¹ˆà¸²à¸™à¸µà¹‰":o.join(", "),"3. Redeploy":"à¸à¸²à¸£ deploy à¸„à¸£à¸±à¹‰à¸‡à¸–à¸±à¸”à¹„à¸›à¸ˆà¸°à¹ƒà¸Šà¹‰à¸•à¸±à¸§à¹à¸›à¸£à¹ƒà¸«à¸¡à¹ˆ"},"ðŸ“š à¸§à¸´à¸˜à¸µà¸‚à¸­ Credentials":{"Facebook App":"https://developers.facebook.com/apps/","Access Token":"https://developers.facebook.com/tools/accesstoken/","Ad Account ID":"https://business.facebook.com/settings/ad-accounts",à¸„à¸¹à¹ˆà¸¡à¸·à¸­:"à¸”à¸¹à¸—à¸µà¹ˆ FACEBOOK_ADS_SETUP.md"}},currentCredentials:{hasAppId:!!a.appId,hasAppSecret:!!a.appSecret,hasAccessToken:!!a.accessToken,hasAdAccountId:!!a.adAccountId},environment:process.env.VERCEL?"Vercel Production":"Local Development"},{status:503});console.log("âœ… All Facebook credentials available. Connecting to API...");try{let t=await e.A(32883),r=t.AdAccount,o=t.Campaign,i=t.FacebookAdsApi.init(a.accessToken);a.appSecret&&i.setDebug(!1);let c=new r(a.adAccountId);console.log("ðŸ” Fetching campaigns from Facebook Ads API...");let l=await c.getCampaigns([o.Fields.id,o.Fields.name,o.Fields.status,o.Fields.objective],{time_range:{since:s,until:n}}),d=[];for(let e of l)try{let t=await e.getInsights(["impressions","clicks","spend","cpm","cpc","ctr","actions"],{time_range:{since:s,until:n}});if(t&&t.length>0){let r=t[0],s=0,n=0;if(r.actions){let e=r.actions.find(e=>"offsite_conversion.fb_pixel_purchase"===e.action_type);s=e?parseFloat(e.value):0}s>0&&r.spend&&(n=parseFloat(r.spend)/s),d.push({id:e.id,name:e.name,status:e.status,objective:e.objective||"Unknown",impressions:parseInt(r.impressions)||0,clicks:parseInt(r.clicks)||0,spend:parseFloat(r.spend)||0,cpm:parseFloat(r.cpm)||0,cpc:parseFloat(r.cpc)||0,ctr:parseFloat(r.ctr)||0,conversions:s,costPerConversion:n})}}catch(t){console.error(`Error fetching insights for campaign ${e.id}:`,t)}console.log(`âœ… Retrieved ${d.length} campaigns with insights`);let p={totalImpressions:d.reduce((e,t)=>e+t.impressions,0),totalClicks:d.reduce((e,t)=>e+t.clicks,0),totalSpend:d.reduce((e,t)=>e+t.spend,0),averageCpm:d.length>0?d.reduce((e,t)=>e+t.cpm,0)/d.length:0,averageCpc:d.length>0?d.reduce((e,t)=>e+t.cpc,0)/d.length:0,averageCtr:d.length>0?d.reduce((e,t)=>e+t.ctr,0)/d.length:0,totalConversions:d.reduce((e,t)=>e+t.conversions,0)};return f.NextResponse.json({campaigns:d,summary:p,dateRange:{startDate:s,endDate:n}})}catch(r){console.error("âŒ Facebook Ads API Error:",r);let e="à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­ Facebook Ads API",t=r.message||"Unknown error";return t.includes("access token")?(e="Access Token à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡à¸«à¸£à¸·à¸­à¸«à¸¡à¸”à¸­à¸²à¸¢à¸¸",t="à¸à¸£à¸¸à¸“à¸²à¸ªà¸£à¹‰à¸²à¸‡ Access Token à¹ƒà¸«à¸¡à¹ˆà¸—à¸µà¹ˆ https://developers.facebook.com/tools/accesstoken/"):t.includes("permissions")?(e="à¹„à¸¡à¹ˆà¸¡à¸µà¸ªà¸´à¸—à¸˜à¸´à¹Œà¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡",t="à¸à¸£à¸¸à¸“à¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸² Access Token à¸¡à¸µ permissions: ads_read, ads_management"):t.includes("account")&&(e="à¹„à¸¡à¹ˆà¸žà¸š Ad Account",t=`Ad Account ID ${a.adAccountId} à¹„à¸¡à¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ à¸à¸£à¸¸à¸“à¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹ƒà¸™ Business Manager`),f.NextResponse.json({error:e,details:t,credentials:{adAccountId:a.adAccountId,hasAccessToken:!!a.accessToken}},{status:500})}}catch(e){return console.error("âŒ Unexpected error:",e),f.NextResponse.json({error:"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸„à¸²à¸”à¸„à¸´à¸”",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}e.s(["GET",()=>R],268348);var E=e.i(268348);let C=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/facebook-ads/route",pathname:"/api/facebook-ads",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/facebook-ads/route.ts",nextConfigOutput:"",userland:E}),{workAsyncStorage:k,workUnitAsyncStorage:_,serverHooks:b}=C;function w(){return(0,s.patchFetch)({workAsyncStorage:k,workUnitAsyncStorage:_})}async function O(e,t,s){C.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let f="/api/facebook-ads/route";f=f.replace(/\/index$/,"")||"/";let R=await C.prepare(e,t,{srcPage:f,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:E,params:k,nextConfig:_,parsedUrl:b,isDraftMode:w,prerenderManifest:O,routerServerContext:T,isOnDemandRevalidate:y,revalidateOnlyGenerated:I,resolvedPathname:P,clientReferenceManifest:F,serverActionsManifest:S}=R,N=(0,c.normalizeAppPath)(f),j=!!(O.dynamicRoutes[N]||O.routes[P]),D=async()=>((null==T?void 0:T.render404)?await T.render404(e,t,b,!1):t.end("This page could not be found"),null);if(j&&!w){let e=!!O.routes[P],t=O.dynamicRoutes[N];if(t&&!1===t.fallback&&!e){if(_.experimental.adapterPath)return await D();throw new A.NoFallbackError}}let U=null;!j||C.isDev||w||(U="/index"===(U=P)?"/":U);let q=!0===C.isDev||!j,K=j&&!q;S&&F&&(0,o.setReferenceManifestsSingleton)({page:f,clientReferenceManifest:F,serverActionsManifest:S,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:S})});let M=e.method||"GET",H=(0,a.getTracer)(),B=H.getActiveScopeSpan(),$={params:k,prerenderManifest:O,renderOpts:{experimental:{authInterrupts:!!_.experimental.authInterrupts},cacheComponents:!!_.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:_.cacheLife,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,s)=>C.onRequestError(e,t,s,T)},sharedContext:{buildId:E}},L=new l.NodeNextRequest(e),V=new l.NodeNextResponse(t),G=d.NextRequestAdapter.fromNodeNextRequest(L,(0,d.signalFromNodeResponse)(t));try{let o=async e=>C.handle(G,$).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=H.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=r.get("next.route");if(s){let t=`${M} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${f}`)}),i=!!(0,n.getRequestMeta)(e,"minimalMode"),c=async n=>{var a,c;let l=async({previousCacheEntry:r})=>{try{if(!i&&y&&I&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let a=await o(n);e.fetchMetrics=$.renderOpts.fetchMetrics;let c=$.renderOpts.pendingWaitUntil;c&&s.waitUntil&&(s.waitUntil(c),c=void 0);let l=$.renderOpts.collectedTags;if(!j)return await (0,h.sendResponse)(L,V,a,$.renderOpts.pendingWaitUntil),null;{let e=await a.blob(),t=(0,v.toNodeOutgoingHttpHeaders)(a.headers);l&&(t[m.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==$.renderOpts.collectedRevalidate&&!($.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&$.renderOpts.collectedRevalidate,s=void 0===$.renderOpts.collectedExpire||$.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:$.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:a.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:s}}}}catch(t){throw(null==r?void 0:r.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:y})},T),t}},d=await C.handleResponse({req:e,nextConfig:_,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:O,isRoutePPREnabled:!1,isOnDemandRevalidate:y,revalidateOnlyGenerated:I,responseGenerator:l,waitUntil:s.waitUntil,isMinimalMode:i});if(!j)return null;if((null==d||null==(a=d.value)?void 0:a.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(c=d.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",y?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),w&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,v.fromNodeOutgoingHttpHeaders)(d.value.headers);return i&&j||p.delete(m.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,g.getCacheControlHeader)(d.cacheControl)),await (0,h.sendResponse)(L,V,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};B?await c(B):await H.withPropagatedContext(e.headers,()=>H.trace(p.BaseServerSpan.handleRequest,{spanName:`${M} ${f}`,kind:a.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},c))}catch(t){if(t instanceof A.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:K,isOnDemandRevalidate:y})}),j)throw t;return await (0,h.sendResponse)(L,V,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>w,"routeModule",()=>C,"serverHooks",()=>b,"workAsyncStorage",()=>k,"workUnitAsyncStorage",()=>_],494197)},32883,e=>{e.v(t=>Promise.all(["server/chunks/[root-of-the-server]__1ad4e0b4._.js","server/chunks/[root-of-the-server]__cdd2cffe._.js","server/chunks/node_modules_22002d8a._.js","server/chunks/node_modules_f4c59939._.js"].map(t=>e.l(t))).then(()=>t(716901)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__f7466644._.js.map