{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/app/api/customer-data/utils.ts"],"sourcesContent":["import type { FieldDef } from \"pg\";\r\n\r\nexport const columnMapping: Record<string, string> = {\r\n  id: \"id\",\r\n  id_all: \"id_all\",\r\n  status: \"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\",\r\n  source: \"‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤\",\r\n  interested_product: \"‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à\",\r\n  doctor: \"‡∏´‡∏°‡∏≠\",\r\n  contact_staff: \"‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\",\r\n  customer_name: \"‡∏ä‡∏∑‡πà‡∏≠\",\r\n  phone: \"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£\",\r\n  note: \"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏\",\r\n  last_followup: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î\",\r\n  next_followup: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ\",\r\n  consult_date: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Consult\",\r\n  surgery_date: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\",\r\n  appointment_time: \"‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î\",\r\n  got_contact_date: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå\",\r\n  booked_consult_date: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î consult\",\r\n  booked_surgery_date: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\",\r\n  proposed_amount: \"‡∏¢‡∏≠‡∏î‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠\",\r\n  customer_code: \"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤\",\r\n  star_flag: \"‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß\",\r\n  country: \"‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®\",\r\n  car_call_time: \"‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏£‡∏ñ\",\r\n  lat: \"Lat\",\r\n  long: \"Long\",\r\n  photo_note: \"‡∏£‡∏π‡∏õ\",\r\n  gender: \"‡πÄ‡∏û‡∏®\",\r\n  age: \"‡∏≠‡∏≤‡∏¢‡∏∏\",\r\n  occupation: \"‡∏≠‡∏≤‡∏ä‡∏µ‡∏û\",\r\n  from_province: \"‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î\",\r\n  travel_method: \"‡∏à‡∏∞‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏°‡∏≤‡∏£‡∏û.‡∏¢‡∏±‡∏á‡πÑ‡∏á\",\r\n  contact_prefer_date: \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\",\r\n  contact_prefer_time: \"‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\",\r\n  free_program: \"‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ü‡∏£‡∏µ\",\r\n  event_id: \"Event ID\",\r\n  html_link: \"htmlLink\",\r\n  ical_uid: \"iCalUID\",\r\n  log: \"Log\",\r\n  doc_calendar: \"Doc Calendar\",\r\n  doc_event_id: \"Doc Event ID\",\r\n  doc_html_link: \"Doc htmlLink\",\r\n  doc_ical_uid: \"Doc iCalUID\",\r\n  line_note: \"line\",\r\n  line_doctor_note: \"line ‡∏´‡∏°‡∏≠\",\r\n  ivr: \"IVR\",\r\n  transfer_to: \"TRANSFER_TO\",\r\n  status_call: \"status_call\",\r\n  created_at: \"created_at\",\r\n  updated_at: \"updated_at\",\r\n};\r\n\r\nexport const reverseColumnMapping: Record<string, string> = Object.entries(\r\n  columnMapping\r\n).reduce((acc, [eng, thai]) => {\r\n  acc[thai] = eng;\r\n  return acc;\r\n}, {} as Record<string, string>);\r\n\r\nconst mapFieldNameToThai = (fieldName: string) => columnMapping[fieldName] || fieldName;\r\n\r\nexport const getThaiHeaders = (fields: FieldDef[]) =>\r\n  fields.map((field) => mapFieldNameToThai(field.name));\r\n\r\nexport const mapRowsToThai = (rows: Record<string, any>[], fields: FieldDef[]) =>\r\n  rows.map((row) => {\r\n    const rowObj: Record<string, any> = {};\r\n    fields.forEach((field, index) => {\r\n      const thaiColumnName = mapFieldNameToThai(field.name);\r\n      rowObj[thaiColumnName] = row[field.name];\r\n    });\r\n    return rowObj;\r\n  });\r\n\r\nexport const getLatestUpdatedAt = (rows: Record<string, any>[]) => {\r\n  let latest: string | null = null;\r\n  rows.forEach((row) => {\r\n    if (row.updated_at) {\r\n      const date = new Date(row.updated_at);\r\n      if (!Number.isNaN(date.getTime())) {\r\n        const iso = date.toISOString();\r\n        if (!latest || iso > latest) {\r\n          latest = iso;\r\n        }\r\n      }\r\n    }\r\n  });\r\n  return latest;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAEO,MAAM,gBAAwC;IACnD,IAAI;IACJ,QAAQ;IACR,QAAQ;IACR,QAAQ;IACR,oBAAoB;IACpB,QAAQ;IACR,eAAe;IACf,eAAe;IACf,OAAO;IACP,MAAM;IACN,eAAe;IACf,eAAe;IACf,cAAc;IACd,cAAc;IACd,kBAAkB;IAClB,kBAAkB;IAClB,qBAAqB;IACrB,qBAAqB;IACrB,iBAAiB;IACjB,eAAe;IACf,WAAW;IACX,SAAS;IACT,eAAe;IACf,KAAK;IACL,MAAM;IACN,YAAY;IACZ,QAAQ;IACR,KAAK;IACL,YAAY;IACZ,eAAe;IACf,eAAe;IACf,qBAAqB;IACrB,qBAAqB;IACrB,cAAc;IACd,UAAU;IACV,WAAW;IACX,UAAU;IACV,KAAK;IACL,cAAc;IACd,cAAc;IACd,eAAe;IACf,cAAc;IACd,WAAW;IACX,kBAAkB;IAClB,KAAK;IACL,aAAa;IACb,aAAa;IACb,YAAY;IACZ,YAAY;AACd;AAEO,MAAM,uBAA+C,OAAO,OAAO,CACxE,eACA,MAAM,CAAC,CAAC,KAAK,CAAC,KAAK,KAAK;IACxB,GAAG,CAAC,KAAK,GAAG;IACZ,OAAO;AACT,GAAG,CAAC;AAEJ,MAAM,qBAAqB,CAAC,YAAsB,aAAa,CAAC,UAAU,IAAI;AAEvE,MAAM,iBAAiB,CAAC,SAC7B,OAAO,GAAG,CAAC,CAAC,QAAU,mBAAmB,MAAM,IAAI;AAE9C,MAAM,gBAAgB,CAAC,MAA6B,SACzD,KAAK,GAAG,CAAC,CAAC;QACR,MAAM,SAA8B,CAAC;QACrC,OAAO,OAAO,CAAC,CAAC,OAAO;YACrB,MAAM,iBAAiB,mBAAmB,MAAM,IAAI;YACpD,MAAM,CAAC,eAAe,GAAG,GAAG,CAAC,MAAM,IAAI,CAAC;QAC1C;QACA,OAAO;IACT;AAEK,MAAM,qBAAqB,CAAC;IACjC,IAAI,SAAwB;IAC5B,KAAK,OAAO,CAAC,CAAC;QACZ,IAAI,IAAI,UAAU,EAAE;YAClB,MAAM,OAAO,IAAI,KAAK,IAAI,UAAU;YACpC,IAAI,CAAC,OAAO,KAAK,CAAC,KAAK,OAAO,KAAK;gBACjC,MAAM,MAAM,KAAK,WAAW;gBAC5B,IAAI,CAAC,UAAU,MAAM,QAAQ;oBAC3B,SAAS;gBACX;YACF;QACF;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/app/%28fullscreen%29/customer-all-data/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useMemo, useCallback, useRef, Suspense } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport {\r\n  Search,\r\n  RefreshCw,\r\n  Download,\r\n  ChevronUp,\r\n  ChevronDown,\r\n  Filter,\r\n  X,\r\n  Plus,\r\n  ArrowLeft,\r\n} from \"lucide-react\";\r\nimport { EditCustomerModal } from \"@/components/EditCustomerModal\";\r\nimport { AddCustomerModal } from \"@/components/AddCustomerModal\";\r\nimport UserMenu from \"@/components/UserMenu\";\r\nimport { getLatestUpdatedAt } from \"@/app/api/customer-data/utils\";\r\n// Add custom styles for scrollbar (horizontal and vertical)\r\nconst customScrollbarStyle = `\r\n  .custom-scrollbar::-webkit-scrollbar {\r\n    width: 8px;\r\n    height: 8px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-track {\r\n    background: rgba(219, 234, 254, 0.5);\r\n    border-radius: 10px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-thumb {\r\n    background: linear-gradient(to bottom, #3b82f6, #06b6d4);\r\n    border-radius: 10px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n    background: linear-gradient(to bottom, #0284c7, #0891b2);\r\n  }\r\n  .custom-scrollbar-horizontal::-webkit-scrollbar {\r\n    height: 8px;\r\n    width: 8px;\r\n  }\r\n  .custom-scrollbar-horizontal::-webkit-scrollbar-track {\r\n    background: rgba(219, 234, 254, 0.5);\r\n    border-radius: 10px;\r\n  }\r\n  .custom-scrollbar-horizontal::-webkit-scrollbar-thumb {\r\n    background: linear-gradient(to right, #3b82f6, #06b6d4);\r\n    border-radius: 10px;\r\n  }\r\n  .custom-scrollbar-horizontal::-webkit-scrollbar-thumb:hover {\r\n    background: linear-gradient(to right, #0284c7, #0891b2);\r\n  }\r\n`;\r\ninterface TableData {\r\n  tableNumber: number;\r\n  headers: string[];\r\n  rowCount: number;\r\n  data: Record<string, any>[];\r\n}\r\ninterface ApiResponse {\r\n  success: boolean;\r\n  error?: string;\r\n  totalTables: number;\r\n  tables: TableData[];\r\n  rawData: {\r\n    totalRows: number;\r\n    totalColumns: number;\r\n  };\r\n}\r\n\r\ninterface TableSizeOption {\r\n  id: number;\r\n  size_value: number;\r\n  size_label: string;\r\n  sort_order: number;\r\n}\r\nconst CustomerAllDataPage = () => {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const customerType = searchParams.get(\"type\"); // \"existing\" or \"new\"\r\n  const [tableData, setTableData] = useState<TableData[]>([]);\r\n  const [lastUpdateTimestamp, setLastUpdateTimestamp] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState<any>(null);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [debouncedSearchTerm, setDebouncedSearchTerm] = useState(\"\");\r\n  const [filterColumn, setFilterColumn] = useState<string>(\"all\");\r\n  const [showFilterMenu, setShowFilterMenu] = useState(false);\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n  const [showStatusMenu, setShowStatusMenu] = useState(false);\r\n  const [productFilter, setProductFilter] = useState<string>(\"all\");\r\n  const [showProductMenu, setShowProductMenu] = useState(false);\r\n  const [contactFilter, setContactFilter] = useState<string>(\"all\");\r\n  const [showContactMenu, setShowContactMenu] = useState(false);\r\n  const [showFollowUpLastMenu, setShowFollowUpLastMenu] = useState(false);\r\n  const [followUpLastDate, setFollowUpLastDate] = useState<string>(\"\");\r\n  const [showFollowUpNextMenu, setShowFollowUpNextMenu] = useState(false);\r\n  const [followUpNextDate, setFollowUpNextDate] = useState<string>(\"\");\r\n  const [showConsultMenu, setShowConsultMenu] = useState(false);\r\n  const [consultDate, setConsultDate] = useState<string>(\"\");\r\n  const [showSurgeryMenu, setShowSurgeryMenu] = useState(false);\r\n  const [surgeryDate, setSurgeryDate] = useState<string>(\"\");\r\n  const [showGetNameMenu, setShowGetNameMenu] = useState(false);\r\n  const [getNameDate, setGetNameDate] = useState<string>(\"\");\r\n  const [showGetConsultApptMenu, setShowGetConsultApptMenu] = useState(false);\r\n  const [getConsultApptDate, setGetConsultApptDate] = useState<string>(\"\");\r\n  const [showGetSurgeryApptMenu, setShowGetSurgeryApptMenu] = useState(false);\r\n  const [getSurgeryApptDate, setGetSurgeryApptDate] = useState<string>(\"\");\r\n  const [sortColumn, setSortColumn] = useState<string | null>(null);\r\n  const [sortDirection, setSortDirection] = useState<\"asc\" | \"desc\">(\"asc\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage, setItemsPerPage] = useState(500);\r\n  const [selectedRow, setSelectedRow] = useState<Record<string, any> | null>(\r\n    null\r\n  );\r\n  const [editedRow, setEditedRow] = useState<Record<string, any> | null>(null);\r\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n  const [editingCustomer, setEditingCustomer] = useState<Record<\r\n    string,\r\n    any\r\n  > | null>(null);\r\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\r\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const [showFilterSheet, setShowFilterSheet] = useState(false);\r\n  const [statusOptions, setStatusOptions] = useState<\r\n    Array<{ value: string; label: string; color: string }>\r\n  >([]);\r\n  const [tableSizeOptions, setTableSizeOptions] = useState<TableSizeOption[]>(\r\n    []\r\n  );\r\n  const [showTableSizeMenu, setShowTableSizeMenu] = useState(false);\r\n  const [tableSize, setTableSize] = useState<number>(500);\r\n  const tableDataRef = useRef<TableData[]>([]);\r\n  const fetchData = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      // ‡πÉ‡∏ä‡πâ API endpoint ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö n8n database\r\n      const response = await fetch(\"/api/customer-data\");\r\n      const result = await response.json();\r\n      if (\r\n        !result.success ||\r\n        !result.columns ||\r\n        !result.data ||\r\n        result.data.length === 0\r\n      ) {\r\n        return;\r\n      }\r\n      // API ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ return format: { success: true, columns: [...], data: [{...}, {...}], ... }\r\n      // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô array of objects ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á\r\n      // ‡∏£‡∏ß‡∏° 'id' ‡πÉ‡∏ô headers ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á\r\n      const headers = result.columns;\r\n      const formattedData = result.data;\r\n      const tables = [\r\n        {\r\n          tableNumber: 1,\r\n          headers: headers,\r\n          rowCount: formattedData.length,\r\n          data: formattedData,\r\n        },\r\n      ];\r\n      if (tables && tables.length > 0) {\r\n        const sanitizedTables = tables.map((table: TableData) => {\r\n          // Trim whitespace so columns with stray spaces still render and match filters\r\n          const sanitizedHeaders = table.headers.map((header: string) =>\r\n            header.trim()\r\n          );\r\n          const sanitizedData = table.data.map((row: Record<string, any>) => {\r\n            const sanitizedRow: Record<string, any> = {};\r\n            Object.entries(row).forEach(([key, value]) => {\r\n              sanitizedRow[key.trim()] = value;\r\n            });\r\n            return sanitizedRow;\r\n          });\r\n          return {\r\n            ...table,\r\n            headers: sanitizedHeaders,\r\n            data: sanitizedData,\r\n            rowCount: sanitizedData.length,\r\n          };\r\n        });\r\n        // Define the desired column order for consistency between table and form\r\n        const columnOrder = [\r\n          \"‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\",\r\n          \"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\",\r\n          \"‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à\",\r\n          \"‡∏ä‡∏∑‡πà‡∏≠\",\r\n          \"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£\",\r\n          \"‡πÄ‡∏û‡∏®\",\r\n          \"‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤\",\r\n          \"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î consult\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Consult\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\",\r\n          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\",\r\n          \"‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î\",\r\n          \"‡∏´‡∏°‡∏≠\",\r\n          \"‡∏¢‡∏≠‡∏î‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠\",\r\n          \"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤\",\r\n          \"‡∏ï‡∏¥‡∏î‡∏î‡∏≤‡∏ß\",\r\n          \"‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®\",\r\n          \"‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏£‡∏ñ\",\r\n          \"Lat\",\r\n          \"Long\",\r\n          \"id\",\r\n        ];\r\n\r\n        // Mandatory fields that should always be shown even if empty\r\n        const mandatoryFields = [\r\n          \"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\",\r\n          \"‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à\",\r\n          \"‡∏ä‡∏∑‡πà‡∏≠\",\r\n          \"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£\",\r\n          \"‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤\",\r\n          \"‡πÄ‡∏û‡∏®\",\r\n        ];\r\n\r\n        const allHeadersSet = new Set<string>();\r\n        const allHeaders: string[] = [];\r\n\r\n        // First add mandatory fields in the column order\r\n        columnOrder.forEach((header) => {\r\n          if (mandatoryFields.includes(header) && !allHeadersSet.has(header)) {\r\n            allHeadersSet.add(header);\r\n            allHeaders.push(header);\r\n          }\r\n        });\r\n\r\n        // Then add other headers in the desired order that exist in data\r\n        columnOrder.forEach((header) => {\r\n          if (!allHeadersSet.has(header)) {\r\n            sanitizedTables.forEach((table) => {\r\n              if (table.headers.includes(header) && !allHeadersSet.has(header)) {\r\n                allHeadersSet.add(header);\r\n                allHeaders.push(header);\r\n              }\r\n            });\r\n          }\r\n        });\r\n        // Then add any remaining headers not in the columnOrder\r\n        sanitizedTables.forEach((table: TableData) => {\r\n          table.headers.forEach((header: string) => {\r\n            if (!allHeadersSet.has(header)) {\r\n              allHeadersSet.add(header);\r\n              allHeaders.push(header);\r\n            }\r\n          });\r\n        });\r\n\r\n        const filteredHeaders = allHeaders.filter((header: string) => {\r\n          // Exclude specified columns\r\n          const excludedColumns = [\r\n            \"‡∏£‡∏π‡∏õ\",\r\n            \"‡∏≠‡∏≤‡∏¢‡∏∏\",\r\n            \"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤\",\r\n            \"‡∏≠‡∏≤‡∏ä‡∏µ‡∏û\",\r\n            \"‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î\",\r\n            \"‡∏à‡∏∞‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏°‡∏≤‡∏£‡∏û.‡∏¢‡∏±‡∏á‡πÑ‡∏á\",\r\n            \"Event ID\",\r\n            \"htmlLink\",\r\n            \"iCalUID\",\r\n            \"Log\",\r\n            \"Doc Calendar\",\r\n            \"Doc Event ID\",\r\n            \"Doc htmlLink\",\r\n            \"Doc iCalUID\",\r\n            \"line\",\r\n            \"line ‡∏´‡∏°‡∏≠\",\r\n            \"IVR\",\r\n            \"TRANSFER_TO\",\r\n            \"status_call\",\r\n          ];\r\n          if (excludedColumns.includes(header)) {\r\n            return false;\r\n          }\r\n          // Always include mandatory fields\r\n          if (mandatoryFields.includes(header)) {\r\n            return true;\r\n          }\r\n          return sanitizedTables.some((table: TableData) => {\r\n            return table.data.some(\r\n              (row: Record<string, any>) =>\r\n                row[header] !== undefined &&\r\n                row[header] !== null &&\r\n                row[header] !== \"\"\r\n            );\r\n          });\r\n        });\r\n        const allData: Record<string, any>[] = [];\r\n        sanitizedTables.forEach((table: TableData) => {\r\n          allData.push(...table.data);\r\n        });\r\n        // Filter by customer type based on CN number (cn column from OPD system)\r\n        let typeFilteredData = allData;\r\n        if (customerType === \"existing\") {\r\n          // ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤ - customers with CN number (opened OPD)\r\n          typeFilteredData = allData.filter((row) => {\r\n            const cnValue = row[\"cn\"];\r\n            return cnValue && cnValue.toString().trim() !== \"\";\r\n          });\r\n        } else if (customerType === \"new\") {\r\n          // ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà - customers without CN number (not opened OPD yet)\r\n          typeFilteredData = allData.filter((row) => {\r\n            const cnValue = row[\"cn\"];\r\n            return !cnValue || cnValue.toString().trim() === \"\";\r\n          });\r\n        }\r\n        // Keep all rows that have at least one value in any header\r\n        const filteredData = typeFilteredData.filter((row) => {\r\n          return filteredHeaders.some((header) => {\r\n            const value = row[header];\r\n            return value !== undefined && value !== null && value !== \"\";\r\n          });\r\n        });\r\n        const mergedTable: TableData = {\r\n          tableNumber: 1,\r\n          headers: filteredHeaders,\r\n          rowCount: filteredData.length,\r\n          data: filteredData,\r\n        };\r\n        setTableData([mergedTable]);\r\n        const latestTimestamp = getLatestUpdatedAt(result.data);\r\n        if (latestTimestamp) {\r\n          setLastUpdateTimestamp(latestTimestamp);\r\n        }\r\n      } else {\r\n        setTableData([]);\r\n      }\r\n    } catch (err) {\r\n      // Error during fetch\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  const fetchStatusOptions = async () => {\r\n    try {\r\n      const response = await fetch(\"/api/status-options\");\r\n      const result = await response.json();\r\n      if (result.success && result.data) {\r\n        setStatusOptions(result.data);\r\n      } else {\r\n        console.error(\"Failed to fetch status options:\", result.error);\r\n        // Fallback to default if API fails\r\n        setStatusOptions([\r\n          {\r\n            value: \"all\",\r\n            label: \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\",\r\n            color: \"bg-gray-200 text-gray-800\",\r\n          },\r\n        ]);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching status options:\", error);\r\n      // Fallback to default if API fails\r\n      setStatusOptions([\r\n        { value: \"all\", label: \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\", color: \"bg-gray-200 text-gray-800\" },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const fetchTableSizeOptions = async () => {\r\n    try {\r\n      const response = await fetch(\"/api/table-size-options\");\r\n      const result = await response.json();\r\n      if (result.success && result.data) {\r\n        setTableSizeOptions(result.data);\r\n      } else {\r\n        console.error(\"Failed to fetch table size options:\", result.error);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching table size options:\", error);\r\n    }\r\n  };\r\n  const fetchRealtimeUpdates = useCallback(async () => {\r\n    if (!lastUpdateTimestamp || tableDataRef.current.length === 0) {\r\n      return;\r\n    }\r\n    try {\r\n      const response = await fetch(\r\n        `/api/customer-updates?since=${encodeURIComponent(lastUpdateTimestamp)}`\r\n      );\r\n      const result = await response.json();\r\n      if (!response.ok || result.success === false) {\r\n        return;\r\n      }\r\n      if (!Array.isArray(result.data) || result.data.length === 0) {\r\n        return;\r\n      }\r\n      const currentTable = tableDataRef.current[0];\r\n      if (!currentTable) {\r\n        return;\r\n      }\r\n      const mergedMap = new Map<any, Record<string, any>>();\r\n      currentTable.data.forEach((row) => {\r\n        if (row.id !== undefined && row.id !== null) {\r\n          mergedMap.set(row.id, row);\r\n        }\r\n      });\r\n      result.data.forEach((incoming: Record<string, any>) => {\r\n        if (incoming.id === undefined || incoming.id === null) {\r\n          return;\r\n        }\r\n        const existing = mergedMap.get(incoming.id);\r\n        mergedMap.set(\r\n          incoming.id,\r\n          existing ? { ...existing, ...incoming } : incoming\r\n        );\r\n      });\r\n      const updatedData = Array.from(mergedMap.values());\r\n      const mergedHeaders = [...currentTable.headers];\r\n      (result.columns || []).forEach((column: string) => {\r\n        if (!mergedHeaders.includes(column)) {\r\n          mergedHeaders.push(column);\r\n        }\r\n      });\r\n      setTableData([\r\n        {\r\n          ...currentTable,\r\n          headers: mergedHeaders,\r\n          data: updatedData,\r\n          rowCount: updatedData.length,\r\n        },\r\n      ]);\r\n      if (result.latestUpdatedAt) {\r\n        setLastUpdateTimestamp(result.latestUpdatedAt);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching realtime updates:\", error);\r\n    }\r\n  }, [lastUpdateTimestamp]);\r\n  useEffect(() => {\r\n    tableDataRef.current = tableData;\r\n  }, [tableData]);\r\n  useEffect(() => {\r\n    // Check authentication and get user data\r\n    const checkAuth = () => {\r\n      const userStr = localStorage.getItem(\"user\");\r\n      if (!userStr) {\r\n        window.location.href = \"/login\";\r\n        return;\r\n      }\r\n      const user = JSON.parse(userStr);\r\n      setCurrentUser(user);\r\n    };\r\n    checkAuth();\r\n    fetchData();\r\n    fetchStatusOptions();\r\n    fetchTableSizeOptions();\r\n  }, []);\r\n  useEffect(() => {\r\n    if (!lastUpdateTimestamp || tableData.length === 0) {\r\n      return;\r\n    }\r\n    fetchRealtimeUpdates();\r\n    const interval = setInterval(fetchRealtimeUpdates, 8000);\r\n    return () => clearInterval(interval);\r\n  }, [lastUpdateTimestamp, fetchRealtimeUpdates, tableData.length]);\r\n\r\n  // Debounce search term - only update after 300ms of no typing and when 3+ chars\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (searchTerm.length >= 3 || searchTerm.length === 0) {\r\n        setDebouncedSearchTerm(searchTerm);\r\n      }\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [searchTerm]);\r\n\r\n  // Close all menus when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      const target = event.target as HTMLElement;\r\n      // Close dropdowns when clicking outside the filter toolbar\r\n      if (!target.closest('.filter-toolbar')) {\r\n        closeAllFilterMenus();\r\n      }\r\n    };\r\n\r\n    // Add event listener\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    // Cleanup\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, []);\r\n  // Helper function to format date values and remove timezone\r\n  const formatDateValue = (value: any): string => {\r\n    if (!value) return \"\";\r\n    const strValue = String(value);\r\n\r\n    // Check if value contains ISO date format with timezone (T...Z)\r\n    if (strValue.includes(\"T\") && strValue.includes(\"Z\")) {\r\n      try {\r\n        // Extract just the date part (YYYY-MM-DD)\r\n        const dateOnly = strValue.split(\"T\")[0];\r\n        return dateOnly;\r\n      } catch (error) {\r\n        return strValue;\r\n      }\r\n    }\r\n\r\n    return strValue;\r\n  };\r\n\r\n  const handleSort = (column: string) => {\r\n    if (sortColumn === column) {\r\n      setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortColumn(column);\r\n      setSortDirection(\"asc\");\r\n    }\r\n  };\r\n  const handleEditRow = (row: Record<string, any>) => {\r\n    setSelectedRow(row);\r\n    setEditedRow({ ...row });\r\n  };\r\n  const handleFieldChange = (fieldName: string, value: any) => {\r\n    if (editedRow) {\r\n      setEditedRow({\r\n        ...editedRow,\r\n        [fieldName]: value,\r\n      });\r\n    }\r\n  };\r\n  const handleSaveRow = () => {\r\n    if (editedRow) {\r\n      // Data saved successfully\r\n    }\r\n  };\r\n  const exportToCSV = () => {\r\n    if (tableData.length === 0) return;\r\n    const table = tableData[0];\r\n    const headers = table.headers.join(\",\");\r\n    const rows = filteredAndSortedData\r\n      .map((row) =>\r\n        table.headers\r\n          .map((header) => {\r\n            const value = row[header] || \"\";\r\n            const stringValue = String(value).replace(/\"/g, '\"\"');\r\n            return stringValue.includes(\",\") ? `\"${stringValue}\"` : stringValue;\r\n          })\r\n          .join(\",\")\r\n      )\r\n      .join(\"\\n\");\r\n    const csv = `\\ufeff${headers}\\n${rows}`;\r\n    const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\r\n    const link = document.createElement(\"a\");\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute(\"href\", url);\r\n    link.setAttribute(\r\n      \"download\",\r\n      `customer_data_${new Date().toISOString().split(\"T\")[0]}.csv`\r\n    );\r\n    link.style.visibility = \"hidden\";\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n  const exportToExcel = () => {\r\n    if (tableData.length === 0) return;\r\n    const table = tableData[0];\r\n    let html = '<html xmlns:x=\"urn:schemas-microsoft-com:office:excel\">';\r\n    html += '<head><meta charset=\"UTF-8\"></head><body>';\r\n    html += '<table border=\"1\">';\r\n    html += \"<tr>\";\r\n    table.headers.forEach((header) => {\r\n      html += `<th style=\"background-color: #fde047; font-weight: bold;\">${header}</th>`;\r\n    });\r\n    html += \"</tr>\";\r\n    filteredAndSortedData.forEach((row, idx) => {\r\n      const bgColor = idx % 2 === 0 ? \"#ffffff\" : \"#fbcfe8\";\r\n      html += `<tr style=\"background-color: ${bgColor};\">`;\r\n      table.headers.forEach((header) => {\r\n        const value = row[header] || \"-\";\r\n        html += `<td>${value}</td>`;\r\n      });\r\n      html += \"</tr>\";\r\n    });\r\n    html += \"</table></body></html>\";\r\n    const blob = new Blob([html], { type: \"application/vnd.ms-excel\" });\r\n    const link = document.createElement(\"a\");\r\n    const url = URL.createObjectURL(blob);\r\n    link.setAttribute(\"href\", url);\r\n    link.setAttribute(\r\n      \"download\",\r\n      `customer_data_${new Date().toISOString().split(\"T\")[0]}.xls`\r\n    );\r\n    link.style.visibility = \"hidden\";\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n  const handleEditCustomer = (row: Record<string, any>) => {\r\n    console.log(\"üîß Opening edit modal for:\", row);\r\n    setEditingCustomer(row);\r\n    setIsEditModalOpen(true);\r\n  };\r\n  const handleSaveCustomer = async (updatedData: Record<string, any>) => {\r\n    try {\r\n      const response = await fetch(\"/api/customer-data\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          action: \"update\",\r\n          data: updatedData,\r\n        }),\r\n      });\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setIsEditModalOpen(false);\r\n        // ‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà\r\n        await fetchData();\r\n      } else {\r\n        console.error(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\");\r\n    }\r\n  };\r\n\r\n  const handleAddCustomer = async (newData: Record<string, any>) => {\r\n    try {\r\n      const response = await fetch(\"/api/customer-data\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          action: \"create\",\r\n          data: newData,\r\n        }),\r\n      });\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        setIsAddModalOpen(false);\r\n        // ‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà\r\n        await fetchData();\r\n      } else {\r\n        console.error(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteMultiple = async () => {\r\n    if (selectedIds.length === 0) {\r\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö\");\r\n      return;\r\n    }\r\n\r\n    const confirmMessage = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${selectedIds.length\r\n      } ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?\\n\\nID ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö: ${selectedIds.join(\r\n        \", \"\r\n      )}\\n\\n‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`;\r\n\r\n    if (!confirm(confirmMessage)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsDeleting(true);\r\n      const response = await fetch(\"/api/customer-data\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          action: \"deleteMultiple\",\r\n          data: { ids: selectedIds },\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        alert(`‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${result.deletedCount} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`);\r\n        setSelectedIds([]);\r\n        await fetchData();\r\n      } else {\r\n        alert(`‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:\", error);\r\n      alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\");\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleSelectAll = () => {\r\n    if (selectedIds.length === filteredAndSortedData.length) {\r\n      setSelectedIds([]);\r\n    } else {\r\n      const allIds = filteredAndSortedData\r\n        .map((row) => row[\"id\"])\r\n        .filter((id) => id != null);\r\n      setSelectedIds(allIds);\r\n    }\r\n  };\r\n\r\n  const handleToggleSelect = (id: number) => {\r\n    setSelectedIds((prev) => {\r\n      if (prev.includes(id)) {\r\n        return prev.filter((selectedId) => selectedId !== id);\r\n      } else {\r\n        return [...prev, id];\r\n      }\r\n    });\r\n  };\r\n  const filteredAndSortedData = useMemo(() => {\r\n    if (tableData.length === 0) return [];\r\n\r\n    // Only consider search term active if it has 3+ characters\r\n    const effectiveSearchTerm = debouncedSearchTerm.length >= 3 ? debouncedSearchTerm : \"\";\r\n\r\n    // Check if any filter is active - if not, return empty for performance\r\n    const hasActiveFilter =\r\n      statusFilter !== \"all\" ||\r\n      productFilter !== \"all\" ||\r\n      contactFilter !== \"all\" ||\r\n      followUpLastDate ||\r\n      followUpNextDate ||\r\n      consultDate ||\r\n      surgeryDate ||\r\n      getNameDate ||\r\n      getConsultApptDate ||\r\n      getSurgeryApptDate ||\r\n      effectiveSearchTerm;\r\n\r\n    // Return empty array if no filters applied (for mobile performance)\r\n    if (!hasActiveFilter) return [];\r\n\r\n    let filtered = [...tableData[0].data];\r\n    // Filter by current user if not superadmin or admin\r\n    if (\r\n      currentUser &&\r\n      currentUser.role_tag !== \"superadmin\" &&\r\n      currentUser.role_tag !== \"admin\"\r\n    ) {\r\n      const contactColumnIndex = tableData[0].headers.findIndex(\r\n        (h) =>\r\n          h.toLowerCase().includes(\"‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\") ||\r\n          h.toLowerCase().includes(\"contact\") ||\r\n          h.toLowerCase().includes(\"‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\")\r\n      );\r\n      if (contactColumnIndex !== -1) {\r\n        const contactColumn = tableData[0].headers[contactColumnIndex];\r\n        filtered = filtered.filter((row) => {\r\n          const value = row[contactColumn];\r\n          // Match by user's name\r\n          return value && String(value).trim() === currentUser.name;\r\n        });\r\n      }\r\n    }\r\n    if (statusFilter !== \"all\") {\r\n      const statusColumnIndex = tableData[0].headers.findIndex(\r\n        (h) =>\r\n          h.toLowerCase().includes(\"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\") ||\r\n          h.toLowerCase().includes(\"status\")\r\n      );\r\n      if (statusColumnIndex !== -1) {\r\n        const statusColumn = tableData[0].headers[statusColumnIndex];\r\n        filtered = filtered.filter((row) => {\r\n          const value = row[statusColumn];\r\n          return value && String(value).trim() === statusFilter;\r\n        });\r\n      }\r\n    }\r\n    if (productFilter !== \"all\") {\r\n      const productColumnIndex = tableData[0].headers.findIndex(\r\n        (h) =>\r\n          h.toLowerCase().includes(\"‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå\") ||\r\n          h.toLowerCase().includes(\"product\") ||\r\n          h.toLowerCase().includes(\"‡∏™‡∏ô‡πÉ‡∏à\")\r\n      );\r\n      if (productColumnIndex !== -1) {\r\n        const productColumn = tableData[0].headers[productColumnIndex];\r\n        filtered = filtered.filter((row) => {\r\n          const value = row[productColumn];\r\n          if (value) {\r\n            const products = String(value)\r\n              .split(/[,\\n]+/)\r\n              .map((p) => p.trim());\r\n            return products.some((p) => p === productFilter);\r\n          }\r\n          return false;\r\n        });\r\n      }\r\n    }\r\n    if (contactFilter !== \"all\") {\r\n      const contactColumnIndex = tableData[0].headers.findIndex(\r\n        (h) =>\r\n          h.toLowerCase().includes(\"‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\") ||\r\n          h.toLowerCase().includes(\"contact\") ||\r\n          h.toLowerCase().includes(\"‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠\")\r\n      );\r\n      if (contactColumnIndex !== -1) {\r\n        const contactColumn = tableData[0].headers[contactColumnIndex];\r\n        filtered = filtered.filter((row) => {\r\n          const value = row[contactColumn];\r\n          return value && String(value).trim() === contactFilter;\r\n        });\r\n      }\r\n    }\r\n    const filterByDate = (columnName: string, dateValue: string) => {\r\n      if (!dateValue) return;\r\n      const dateColumnIndex = tableData[0].headers.findIndex(\r\n        (h) => h.trim() === columnName\r\n      );\r\n      if (dateColumnIndex !== -1) {\r\n        const dateColumn = tableData[0].headers[dateColumnIndex];\r\n        filtered = filtered.filter((row) => {\r\n          const value = row[dateColumn];\r\n          if (!value) return false;\r\n          const dateStr = String(value).trim();\r\n          let rowDate: Date | null = null;\r\n          const ddmmyyyyMatch = dateStr.match(/(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})/);\r\n          if (ddmmyyyyMatch) {\r\n            const [, day, month, year] = ddmmyyyyMatch;\r\n            rowDate = new Date(\r\n              parseInt(year),\r\n              parseInt(month) - 1,\r\n              parseInt(day)\r\n            );\r\n          } else if (dateStr.match(/\\d{4}-\\d{2}-\\d{2}/)) {\r\n            rowDate = new Date(dateStr);\r\n          }\r\n          if (!rowDate || isNaN(rowDate.getTime())) return false;\r\n          const filterDate = new Date(dateValue);\r\n\r\n          // Set time to start of day for comparison\r\n          filterDate.setHours(0, 0, 0, 0);\r\n          rowDate.setHours(0, 0, 0, 0);\r\n\r\n          return rowDate.getTime() === filterDate.getTime();\r\n        });\r\n      }\r\n    };\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î\", followUpLastDate);\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ\", followUpNextDate);\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Consult\", consultDate);\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\", surgeryDate);\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå\", getNameDate);\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î Consult\", getConsultApptDate);\r\n    filterByDate(\"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\", getSurgeryApptDate);\r\n    // Use effective search term (only if 3+ characters)\r\n    if (effectiveSearchTerm) {\r\n      filtered = filtered.filter((row) => {\r\n        if (filterColumn === \"all\") {\r\n          return tableData[0].headers.some((header) => {\r\n            const value = row[header];\r\n            return (\r\n              value &&\r\n              String(value).toLowerCase().includes(effectiveSearchTerm.toLowerCase())\r\n            );\r\n          });\r\n        } else {\r\n          const value = row[filterColumn];\r\n          return (\r\n            value &&\r\n            String(value).toLowerCase().includes(effectiveSearchTerm.toLowerCase())\r\n          );\r\n        }\r\n      });\r\n    }\r\n    if (sortColumn) {\r\n      filtered.sort((a, b) => {\r\n        const aVal = a[sortColumn] || \"\";\r\n        const bVal = b[sortColumn] || \"\";\r\n        const aStr = String(aVal).toLowerCase();\r\n        const bStr = String(bVal).toLowerCase();\r\n        if (aStr < bStr) return sortDirection === \"asc\" ? -1 : 1;\r\n        if (aStr > bStr) return sortDirection === \"asc\" ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }\r\n    return filtered;\r\n  }, [\r\n    tableData,\r\n    debouncedSearchTerm,\r\n    filterColumn,\r\n    sortColumn,\r\n    sortDirection,\r\n    statusFilter,\r\n    productFilter,\r\n    contactFilter,\r\n    followUpLastDate,\r\n    currentUser,\r\n    followUpNextDate,\r\n    consultDate,\r\n    surgeryDate,\r\n    getNameDate,\r\n    getConsultApptDate,\r\n    getSurgeryApptDate,\r\n  ]);\r\n\r\n  // Helper to check if any filter is active (for UI display)\r\n  const hasActiveFilter = useMemo(() => {\r\n    const effectiveSearch = debouncedSearchTerm.length >= 3;\r\n    return (\r\n      statusFilter !== \"all\" ||\r\n      productFilter !== \"all\" ||\r\n      contactFilter !== \"all\" ||\r\n      followUpLastDate ||\r\n      followUpNextDate ||\r\n      consultDate ||\r\n      surgeryDate ||\r\n      getNameDate ||\r\n      getConsultApptDate ||\r\n      getSurgeryApptDate ||\r\n      effectiveSearch\r\n    );\r\n  }, [statusFilter, productFilter, contactFilter, followUpLastDate, followUpNextDate, consultDate, surgeryDate, getNameDate, getConsultApptDate, getSurgeryApptDate, debouncedSearchTerm]);\r\n\r\n  // Check if user is typing but hasn't reached minimum characters yet\r\n  const isTypingSearch = searchTerm.length > 0 && searchTerm.length < 3;\r\n\r\n  // Compact columns to show when filter/search is active\r\n  const compactColumns = [\"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞\", \"‡∏ä‡∏∑‡πà‡∏≠\", \"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£\", \"‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ó‡∏µ‡πà‡∏™‡∏ô‡πÉ‡∏à\"];\r\n\r\n  // Get display headers based on filter state\r\n  const displayHeaders = useMemo(() => {\r\n    if (hasActiveFilter && tableData.length > 0) {\r\n      return compactColumns.filter(col => tableData[0].headers.includes(col));\r\n    }\r\n    return tableData.length > 0 ? tableData[0].headers : [];\r\n  }, [hasActiveFilter, tableData]);\r\n\r\n  const paginatedData = useMemo(() => {\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    const endIndex = startIndex + itemsPerPage;\r\n    return filteredAndSortedData.slice(startIndex, endIndex);\r\n  }, [filteredAndSortedData, currentPage, itemsPerPage]);\r\n  const totalPages = Math.ceil(filteredAndSortedData.length / itemsPerPage);\r\n\r\n  // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n  const closeAllFilterMenus = () => {\r\n    setShowFilterMenu(false);\r\n    setShowStatusMenu(false);\r\n    setShowProductMenu(false);\r\n    setShowContactMenu(false);\r\n    setShowFollowUpLastMenu(false);\r\n    setShowFollowUpNextMenu(false);\r\n    setShowConsultMenu(false);\r\n    setShowSurgeryMenu(false);\r\n    setShowGetNameMenu(false);\r\n    setShowGetConsultApptMenu(false);\r\n    setShowGetSurgeryApptMenu(false);\r\n    setShowTableSizeMenu(false);\r\n  };\r\n\r\n  const contactOptions = [\r\n    { value: \"all\", label: \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" },\r\n    { value: \"‡∏™‡∏≤\", label: \"‡∏™‡∏≤\" },\r\n    { value: \"‡πÄ‡∏à\", label: \"‡πÄ‡∏à\" },\r\n    { value: \"‡∏û‡∏¥‡∏î‡∏¢‡∏≤\", label: \"‡∏û‡∏¥‡∏î‡∏¢‡∏≤\" },\r\n    { value: \"‡∏ß‡πà‡∏≤‡∏ô\", label: \"‡∏ß‡πà‡∏≤‡∏ô\" },\r\n    { value: \"‡∏à‡∏µ‡∏ô\", label: \"‡∏à‡∏µ‡∏ô\" },\r\n    { value: \"‡∏°‡∏∏‡∏Å\", label: \"‡∏°‡∏∏‡∏Å\" },\r\n    { value: \"‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏≠‡πã\", label: \"‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏≠‡πã\" },\r\n  ];\r\n  const productOptions = [\r\n    { value: \"all\", label: \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" },\r\n    { value: \"‡∏ï‡∏µ‡∏ï‡∏±‡∏ß‡πÑ‡∏•‡πà‡∏ï‡∏±‡∏ß\", label: \"‡∏ï‡∏µ‡∏ï‡∏±‡∏ß‡πÑ‡∏•‡πà‡∏ï‡∏±‡∏ß\" },\r\n    { value: \"Sub brow lift\", label: \"Sub brow lift\" },\r\n    { value: \"‡πÅ‡∏Å‡πâ‡∏ï‡∏≤‡∏´‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏ß\", label: \"‡πÅ‡∏Å‡πâ‡∏ï‡∏≤‡∏´‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡∏ß\" },\r\n    { value: \"‡∏ï‡∏≤‡∏™‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô\", label: \"‡∏ï‡∏≤‡∏™‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô\" },\r\n    { value: \"‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏à‡∏°‡∏π‡∏Å\", label: \"‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏à‡∏°‡∏π‡∏Å\" },\r\n    { value: \"‡πÅ‡∏Å‡πâ‡∏à‡∏°‡∏π‡∏Å\", label: \"‡πÅ‡∏Å‡πâ‡∏à‡∏°‡∏π‡∏Å\" },\r\n    { value: \"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏ï‡∏≤‡∏Ç‡∏≤‡∏ß\", label: \"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏ï‡∏≤‡∏Ç‡∏≤‡∏ß\" },\r\n    { value: \"‡∏•‡∏¥‡∏á‡∏´‡∏ô‡πâ‡∏≤\", label: \"‡∏•‡∏¥‡∏á‡∏´‡∏ô‡πâ‡∏≤\" },\r\n    { value: \"Skin\", label: \"Skin\" },\r\n    { value: \"‡∏ï‡∏∑‡πà‡∏≠\", label: \"‡∏ï‡∏∑‡πà‡∏≠\" },\r\n  ];\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [\r\n    searchTerm,\r\n    filterColumn,\r\n    statusFilter,\r\n    productFilter,\r\n    contactFilter,\r\n    followUpLastDate,\r\n    followUpNextDate,\r\n    consultDate,\r\n    surgeryDate,\r\n    getNameDate,\r\n    getConsultApptDate,\r\n    getSurgeryApptDate,\r\n  ]);\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"w-full h-screen flex items-center justify-center bg-white\">\r\n        <div className=\"text-gray-600\">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <>\r\n      <style>{customScrollbarStyle}</style>\r\n      <div className=\"w-full min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 p-3 flex flex-col\">\r\n        {/* Header - Back and Add buttons */}\r\n        <div className=\"flex justify-between items-center mb-3\">\r\n          <button\r\n            onClick={() => router.push(\"/customer-selection\")}\r\n            className=\"flex items-center justify-center w-11 h-11 bg-white hover:bg-slate-50 text-slate-600 rounded-xl transition-all shadow-sm border border-slate-200 active:scale-95\"\r\n          >\r\n            <ArrowLeft className=\"w-5 h-5\" />\r\n          </button>\r\n          {/* Title showing customer type */}\r\n          <div className=\"flex-1 text-center\">\r\n            <h1 className=\"text-lg font-semibold text-slate-700\">\r\n              {customerType === \"existing\" ? \"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Å‡πà‡∏≤\" : customerType === \"new\" ? \"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà\" : \"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\"}\r\n            </h1>\r\n          </div>\r\n          <button\r\n            onClick={() => setIsAddModalOpen(true)}\r\n            className=\"flex items-center justify-center w-11 h-11 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white rounded-xl transition-all shadow-md active:scale-95\"\r\n          >\r\n            <Plus className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Search Bar */}\r\n        <div className=\"mb-3\">\r\n          <div className=\"relative\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£)...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className={`w-full pl-10 pr-4 py-3 bg-white border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm text-sm ${isTypingSearch ? \"border-yellow-400\" : \"border-slate-200\"\r\n                }`}\r\n            />\r\n            {isTypingSearch && (\r\n              <span className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-xs text-yellow-600\">\r\n                +{3 - searchTerm.length}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Mobile Filter Button & Active Count */}\r\n        <div className=\"flex md:hidden items-center gap-2 mb-3\">\r\n          <button\r\n            onClick={() => setShowFilterSheet(true)}\r\n            className={`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-xl transition-all text-sm font-medium ${hasActiveFilter\r\n              ? \"bg-blue-500 text-white shadow-md\"\r\n              : \"bg-white text-slate-600 border border-slate-200 shadow-sm\"\r\n              }`}\r\n          >\r\n            <Filter className=\"w-5 h-5\" />\r\n            <span>‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á</span>\r\n            {hasActiveFilter && (\r\n              <span className=\"bg-white text-blue-500 px-2 py-0.5 rounded-full text-xs font-bold\">\r\n                {[\r\n                  statusFilter !== \"all\",\r\n                  productFilter !== \"all\",\r\n                  contactFilter !== \"all\",\r\n                  followUpLastDate,\r\n                  followUpNextDate,\r\n                  consultDate,\r\n                  surgeryDate,\r\n                  getNameDate,\r\n                  getConsultApptDate,\r\n                  getSurgeryApptDate,\r\n                  searchTerm\r\n                ].filter(Boolean).length}\r\n              </span>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Delete Button - Show when items selected */}\r\n        {selectedIds.length > 0 && (\r\n          <div className=\"mb-3 md:hidden\">\r\n            <button\r\n              onClick={handleDeleteMultiple}\r\n              disabled={isDeleting}\r\n              className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-rose-500 text-white rounded-xl text-sm font-medium hover:bg-rose-600 disabled:opacity-50 shadow-md\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n              {isDeleting ? \"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...\" : `‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (${selectedIds.length})`}\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Mobile Filter Bottom Sheet */}\r\n        {showFilterSheet && (\r\n          <div className=\"fixed inset-0 z-50 md:hidden\">\r\n            {/* Backdrop */}\r\n            <div\r\n              className=\"absolute inset-0 bg-black/50 transition-opacity\"\r\n              onClick={() => setShowFilterSheet(false)}\r\n            />\r\n\r\n            {/* Sheet */}\r\n            <div className=\"absolute bottom-0 left-0 right-0 bg-white rounded-t-3xl max-h-[85vh] overflow-hidden animate-slide-up\">\r\n              {/* Handle */}\r\n              <div className=\"flex justify-center py-3\">\r\n                <div className=\"w-10 h-1 bg-slate-300 rounded-full\" />\r\n              </div>\r\n\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between px-4 pb-3 border-b border-slate-100\">\r\n                <h3 className=\"text-lg font-semibold text-slate-800\">‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á</h3>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setStatusFilter(\"all\");\r\n                      setProductFilter(\"all\");\r\n                      setContactFilter(\"all\");\r\n                      setFollowUpLastDate(\"\");\r\n                      setFollowUpNextDate(\"\");\r\n                      setConsultDate(\"\");\r\n                      setSurgeryDate(\"\");\r\n                      setGetNameDate(\"\");\r\n                      setGetConsultApptDate(\"\");\r\n                      setGetSurgeryApptDate(\"\");\r\n                    }}\r\n                    className=\"px-3 py-1.5 text-sm text-rose-500 hover:bg-rose-50 rounded-lg\"\r\n                  >\r\n                    ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setShowFilterSheet(false)}\r\n                    className=\"p-2 hover:bg-slate-100 rounded-full\"\r\n                  >\r\n                    <X className=\"w-5 h-5 text-slate-500\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Filter Content - Scrollable */}\r\n              <div className=\"overflow-y-auto max-h-[calc(85vh-120px)] px-4 py-4\">\r\n                {/* Status Filter */}\r\n                <div className=\"mb-5\">\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-2\">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>\r\n                  <select\r\n                    value={statusFilter}\r\n                    onChange={(e) => setStatusFilter(e.target.value)}\r\n                    className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    <option value=\"all\">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>\r\n                    {statusOptions.map((status) => (\r\n                      <option key={status.value} value={status.value}>{status.label}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Product Filter */}\r\n                <div className=\"mb-5\">\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-2\">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>\r\n                  <select\r\n                    value={productFilter}\r\n                    onChange={(e) => setProductFilter(e.target.value)}\r\n                    className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  >\r\n                    {productOptions.map((product) => (\r\n                      <option key={product.value} value={product.value}>{product.label}</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Contact Filter - Only for admin */}\r\n                {currentUser && (currentUser.role_tag === \"superadmin\" || currentUser.role_tag === \"admin\") && (\r\n                  <div className=\"mb-5\">\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-2\">‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>\r\n                    <select\r\n                      value={contactFilter}\r\n                      onChange={(e) => setContactFilter(e.target.value)}\r\n                      className=\"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    >\r\n                      {contactOptions.map((contact) => (\r\n                        <option key={contact.value} value={contact.value}>{contact.label}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Date Filters Section */}\r\n                <div className=\"mb-2\">\r\n                  <label className=\"block text-sm font-medium text-slate-700 mb-3\">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>\r\n\r\n                  <div className=\"space-y-4\">\r\n                    {/* ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°-‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°-‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={followUpLastDate}\r\n                        onChange={(e) => setFollowUpLastDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {followUpLastDate && (\r\n                        <button onClick={() => setFollowUpLastDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* ‡∏ß‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°-‡∏ñ‡∏±‡∏î‡πÑ‡∏õ */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°-‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={followUpNextDate}\r\n                        onChange={(e) => setFollowUpNextDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {followUpNextDate && (\r\n                        <button onClick={() => setFollowUpNextDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Consult */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡∏ß‡∏±‡∏ô Consult</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={consultDate}\r\n                        onChange={(e) => setConsultDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {consultDate && (\r\n                        <button onClick={() => setConsultDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡∏ß‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={surgeryDate}\r\n                        onChange={(e) => setSurgeryDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {surgeryDate && (\r\n                        <button onClick={() => setSurgeryDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* ‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠ */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={getNameDate}\r\n                        onChange={(e) => setGetNameDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {getNameDate && (\r\n                        <button onClick={() => setGetNameDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* ‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î Consult */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î Consult</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={getConsultApptDate}\r\n                        onChange={(e) => setGetConsultApptDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {getConsultApptDate && (\r\n                        <button onClick={() => setGetConsultApptDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* ‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î */}\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <span className=\"text-xs text-slate-500 w-24 shrink-0\">‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</span>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={getSurgeryApptDate}\r\n                        onChange={(e) => setGetSurgeryApptDate(e.target.value)}\r\n                        className=\"flex-1 px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                      />\r\n                      {getSurgeryApptDate && (\r\n                        <button onClick={() => setGetSurgeryApptDate(\"\")} className=\"p-1 text-rose-500\">\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Apply Button */}\r\n              <div className=\"px-4 py-4 border-t border-slate-100 bg-white\">\r\n                <button\r\n                  onClick={() => setShowFilterSheet(false)}\r\n                  className=\"w-full py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors\"\r\n                >\r\n                  ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Desktop Filters - Hidden on mobile */}\r\n        <div className=\"hidden md:block bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-4\">\r\n          <div className=\"flex flex-wrap items-center gap-3 mb-3 filter-toolbar\">\r\n            {/* Status Filter */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowStatusMenu(!showStatusMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${statusFilter !== \"all\"\r\n                  ? \"bg-cyan-50 border-cyan-300 text-cyan-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showStatusMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showStatusMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 min-w-[200px] overflow-hidden\">\r\n                  <div className=\"max-h-64 overflow-y-auto\">\r\n                    {statusOptions.map((status) => (\r\n                      <button\r\n                        key={status.value}\r\n                        onClick={() => {\r\n                          setStatusFilter(status.value);\r\n                          setShowStatusMenu(false);\r\n                        }}\r\n                        className={`w-full text-left px-4 py-2.5 transition-all text-sm ${statusFilter === status.value\r\n                          ? \"bg-cyan-50 text-cyan-700 font-medium\"\r\n                          : \"text-slate-600 hover:bg-slate-50\"\r\n                          }`}\r\n                      >\r\n                        {statusFilter === status.value && \"‚úì \"}\r\n                        {status.label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Product Filter */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowProductMenu(!showProductMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${productFilter !== \"all\"\r\n                  ? \"bg-indigo-50 border-indigo-300 text-indigo-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showProductMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showProductMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 min-w-[200px] overflow-hidden\">\r\n                  <div className=\"max-h-64 overflow-y-auto\">\r\n                    {productOptions.map((product) => (\r\n                      <button\r\n                        key={product.value}\r\n                        onClick={() => {\r\n                          setProductFilter(product.value);\r\n                          setShowProductMenu(false);\r\n                        }}\r\n                        className={`w-full text-left px-4 py-2.5 transition-all text-sm ${productFilter === product.value\r\n                          ? \"bg-indigo-50 text-indigo-700 font-medium\"\r\n                          : \"text-slate-600 hover:bg-slate-50\"\r\n                          }`}\r\n                      >\r\n                        {productFilter === product.value && \"‚úì \"}\r\n                        {product.label}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Contact Filter - Only for admin */}\r\n            {currentUser && (currentUser.role_tag === \"superadmin\" || currentUser.role_tag === \"admin\") && (\r\n              <div className=\"relative\">\r\n                <button\r\n                  onClick={() => {\r\n                    closeAllFilterMenus();\r\n                    setShowContactMenu(!showContactMenu);\r\n                  }}\r\n                  className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${contactFilter !== \"all\"\r\n                    ? \"bg-rose-50 border-rose-300 text-rose-700\"\r\n                    : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                    }`}\r\n                >\r\n                  <span>‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</span>\r\n                  <ChevronDown className={`w-4 h-4 transition-transform ${showContactMenu ? \"rotate-180\" : \"\"}`} />\r\n                </button>\r\n                {showContactMenu && (\r\n                  <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 min-w-[180px] overflow-hidden\">\r\n                    <div className=\"max-h-64 overflow-y-auto\">\r\n                      {contactOptions.map((contact) => (\r\n                        <button\r\n                          key={contact.value}\r\n                          onClick={() => {\r\n                            setContactFilter(contact.value);\r\n                            setShowContactMenu(false);\r\n                          }}\r\n                          className={`w-full text-left px-4 py-2.5 transition-all text-sm ${contactFilter === contact.value\r\n                            ? \"bg-rose-50 text-rose-700 font-medium\"\r\n                            : \"text-slate-600 hover:bg-slate-50\"\r\n                            }`}\r\n                        >\r\n                          {contactFilter === contact.value && \"‚úì \"}\r\n                          {contact.label}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Date Filters */}\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowFollowUpLastMenu(!showFollowUpLastMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${followUpLastDate\r\n                  ? \"bg-emerald-50 border-emerald-300 text-emerald-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°-‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showFollowUpLastMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showFollowUpLastMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={followUpLastDate}\r\n                    onChange={(e) => setFollowUpLastDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {followUpLastDate && (\r\n                    <button onClick={() => setFollowUpLastDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowFollowUpNextMenu(!showFollowUpNextMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${followUpNextDate\r\n                  ? \"bg-violet-50 border-violet-300 text-violet-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°-‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showFollowUpNextMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showFollowUpNextMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={followUpNextDate}\r\n                    onChange={(e) => setFollowUpNextDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {followUpNextDate && (\r\n                    <button onClick={() => setFollowUpNextDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowConsultMenu(!showConsultMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${consultDate\r\n                  ? \"bg-fuchsia-50 border-fuchsia-300 text-fuchsia-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>Consult</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showConsultMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showConsultMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={consultDate}\r\n                    onChange={(e) => setConsultDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-fuchsia-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {consultDate && (\r\n                    <button onClick={() => setConsultDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowSurgeryMenu(!showSurgeryMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${surgeryDate\r\n                  ? \"bg-orange-50 border-orange-300 text-orange-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showSurgeryMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showSurgeryMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={surgeryDate}\r\n                    onChange={(e) => setSurgeryDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {surgeryDate && (\r\n                    <button onClick={() => setSurgeryDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowGetNameMenu(!showGetNameMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${getNameDate\r\n                  ? \"bg-teal-50 border-teal-300 text-teal-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡∏ß‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showGetNameMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showGetNameMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={getNameDate}\r\n                    onChange={(e) => setGetNameDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {getNameDate && (\r\n                    <button onClick={() => setGetNameDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowGetConsultApptMenu(!showGetConsultApptMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${getConsultApptDate\r\n                  ? \"bg-sky-50 border-sky-300 text-sky-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î Consult</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showGetConsultApptMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showGetConsultApptMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={getConsultApptDate}\r\n                    onChange={(e) => setGetConsultApptDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {getConsultApptDate && (\r\n                    <button onClick={() => setGetConsultApptDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n              <button\r\n                onClick={() => {\r\n                  closeAllFilterMenus();\r\n                  setShowGetSurgeryApptMenu(!showGetSurgeryApptMenu);\r\n                }}\r\n                className={`px-4 py-2 rounded-lg flex items-center gap-2 transition-all text-sm font-medium border ${getSurgeryApptDate\r\n                  ? \"bg-amber-50 border-amber-300 text-amber-700\"\r\n                  : \"bg-white border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                  }`}\r\n              >\r\n                <span>‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î</span>\r\n                <ChevronDown className={`w-4 h-4 transition-transform ${showGetSurgeryApptMenu ? \"rotate-180\" : \"\"}`} />\r\n              </button>\r\n              {showGetSurgeryApptMenu && (\r\n                <div className=\"absolute top-full left-0 mt-2 bg-white border border-slate-200 rounded-xl shadow-lg z-50 p-3 w-64\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={getSurgeryApptDate}\r\n                    onChange={(e) => setGetSurgeryApptDate(e.target.value)}\r\n                    className=\"w-full px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent text-sm\"\r\n                  />\r\n                  {getSurgeryApptDate && (\r\n                    <button onClick={() => setGetSurgeryApptDate(\"\")} className=\"mt-2 w-full px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 rounded-lg\">\r\n                      ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Clear All Filters */}\r\n            {hasActiveFilter && (\r\n              <button\r\n                onClick={() => {\r\n                  setStatusFilter(\"all\");\r\n                  setProductFilter(\"all\");\r\n                  setContactFilter(\"all\");\r\n                  setFollowUpLastDate(\"\");\r\n                  setFollowUpNextDate(\"\");\r\n                  setConsultDate(\"\");\r\n                  setSurgeryDate(\"\");\r\n                  setGetNameDate(\"\");\r\n                  setGetConsultApptDate(\"\");\r\n                  setGetSurgeryApptDate(\"\");\r\n                }}\r\n                className=\"px-4 py-2 bg-rose-500 text-white rounded-lg text-sm font-medium hover:bg-rose-600\"\r\n              >\r\n                ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Results count and delete button */}\r\n          <div className=\"flex justify-between items-center pt-3 border-t border-slate-100\">\r\n            <span className=\"text-sm text-slate-600\">\r\n              <span className=\"font-medium\">{filteredAndSortedData.length}</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\r\n            </span>\r\n            {selectedIds.length > 0 && (\r\n              <button\r\n                onClick={handleDeleteMultiple}\r\n                disabled={isDeleting}\r\n                className=\"flex items-center gap-2 px-4 py-2 bg-rose-500 text-white rounded-lg text-sm font-medium hover:bg-rose-600 disabled:opacity-50\"\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n                {isDeleting ? \"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...\" : `‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (${selectedIds.length})`}\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Pagination - Only show when filter is active (mobile) */}\r\n        {hasActiveFilter &&\r\n          tableData.length > 0 && totalPages > 1 && (\r\n            <div className=\"flex md:hidden justify-center items-center gap-1 mb-3\">\r\n              <button\r\n                onClick={() => setCurrentPage(currentPage - 1)}\r\n                disabled={currentPage === 1}\r\n                className=\"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm disabled:opacity-50 shadow-sm\"\r\n              >\r\n                ‚Üê\r\n              </button>\r\n              <div className=\"flex items-center gap-1\">\r\n                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                  let page;\r\n                  if (totalPages <= 5) {\r\n                    page = i + 1;\r\n                  } else if (currentPage <= 3) {\r\n                    page = i + 1;\r\n                  } else if (currentPage >= totalPages - 2) {\r\n                    page = totalPages - 4 + i;\r\n                  } else {\r\n                    page = currentPage - 2 + i;\r\n                  }\r\n                  return (\r\n                    <button\r\n                      key={page}\r\n                      onClick={() => setCurrentPage(page)}\r\n                      className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${page === currentPage\r\n                        ? \"bg-blue-500 text-white shadow-md\"\r\n                        : \"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                        }`}\r\n                    >\r\n                      {page}\r\n                    </button>\r\n                  );\r\n                })}\r\n                {totalPages > 5 && currentPage < totalPages - 2 && (\r\n                  <>\r\n                    <span className=\"text-slate-400\">...</span>\r\n                    <button\r\n                      onClick={() => setCurrentPage(totalPages)}\r\n                      className=\"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50\"\r\n                    >\r\n                      {totalPages}\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <button\r\n                onClick={() => setCurrentPage(currentPage + 1)}\r\n                disabled={currentPage === totalPages}\r\n                className=\"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm disabled:opacity-50 shadow-sm\"\r\n              >\r\n                ‚Üí\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n        {/* Desktop Pagination - Always show */}\r\n        {tableData.length > 0 && totalPages > 1 && (\r\n          <div className=\"hidden md:flex justify-center items-center gap-1 mb-3\">\r\n            <button\r\n              onClick={() => setCurrentPage(currentPage - 1)}\r\n              disabled={currentPage === 1}\r\n              className=\"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm disabled:opacity-50 shadow-sm\"\r\n            >\r\n              ‚Üê\r\n            </button>\r\n            <div className=\"flex items-center gap-1\">\r\n              {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                let page;\r\n                if (totalPages <= 5) {\r\n                  page = i + 1;\r\n                } else if (currentPage <= 3) {\r\n                  page = i + 1;\r\n                } else if (currentPage >= totalPages - 2) {\r\n                  page = totalPages - 4 + i;\r\n                } else {\r\n                  page = currentPage - 2 + i;\r\n                }\r\n                return (\r\n                  <button\r\n                    key={page}\r\n                    onClick={() => setCurrentPage(page)}\r\n                    className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${page === currentPage\r\n                      ? \"bg-blue-500 text-white shadow-md\"\r\n                      : \"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                      }`}\r\n                  >\r\n                    {page}\r\n                  </button>\r\n                );\r\n              })}\r\n              {totalPages > 5 && currentPage < totalPages - 2 && (\r\n                <>\r\n                  <span className=\"text-slate-400\">...</span>\r\n                  <button\r\n                    onClick={() => setCurrentPage(totalPages)}\r\n                    className=\"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50\"\r\n                  >\r\n                    {totalPages}\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={() => setCurrentPage(currentPage + 1)}\r\n              disabled={currentPage === totalPages}\r\n              className=\"px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm disabled:opacity-50 shadow-sm\"\r\n            >\r\n              ‚Üí\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Mobile: Show message when no filter applied */}\r\n        {!hasActiveFilter && (\r\n          <div className=\"md:hidden flex-1 flex flex-col items-center justify-center py-16\">\r\n            <Filter className=\"w-16 h-16 text-slate-300 mb-4\" />\r\n            {isTypingSearch ? (\r\n              <p className=\"text-slate-500 text-center text-sm\">\r\n                ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏µ‡∏Å {3 - searchTerm.length} ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤\r\n              </p>\r\n            ) : (\r\n              <p className=\"text-slate-500 text-center text-sm\">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>\r\n            )}\r\n            <button\r\n              onClick={() => setShowFilterSheet(true)}\r\n              className=\"mt-4 px-6 py-2 bg-blue-500 text-white rounded-xl text-sm font-medium hover:bg-blue-600 transition-colors\"\r\n            >\r\n              ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n        {/* Data Table - Desktop always shows, Mobile only when filter active */}\r\n        {hasActiveFilter &&\r\n          tableData.length > 0 && (\r\n            <div className=\"md:hidden bg-white rounded-lg shadow-md overflow-hidden mb-4\">\r\n              {/* Horizontal scrollbar on top */}\r\n              <div\r\n                className=\"overflow-x-auto custom-scrollbar-horizontal\"\r\n                style={{\r\n                  overflowY: \"hidden\",\r\n                  height: \"12px\",\r\n                }}\r\n                onScroll={(e) => {\r\n                  const target = e.currentTarget;\r\n                  const tableContainer = target.nextElementSibling as HTMLElement;\r\n                  if (tableContainer) {\r\n                    tableContainer.scrollLeft = target.scrollLeft;\r\n                  }\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    width: tableData[0].headers.length * 150 + \"px\",\r\n                    height: \"1px\",\r\n                  }}\r\n                />\r\n              </div>\r\n              <div\r\n                className=\"overflow-x-auto overflow-y-auto custom-scrollbar\"\r\n                style={{\r\n                  maxHeight: `calc(100vh + ${tableSize}px)`,\r\n                  position: \"relative\",\r\n                }}\r\n                onScroll={(e) => {\r\n                  const target = e.currentTarget;\r\n                  const topScroller =\r\n                    target.previousElementSibling as HTMLElement;\r\n                  if (topScroller) {\r\n                    topScroller.scrollLeft = target.scrollLeft;\r\n                  }\r\n                }}\r\n              >\r\n                <table\r\n                  className=\"w-full border-collapse text-sm table-auto\"\r\n                  style={{ position: \"relative\", zIndex: 1 }}\r\n                >\r\n                  <thead className=\"sticky top-0 z-30 bg-yellow-300\">\r\n                    <tr className=\"bg-yellow-300 border border-gray-400\">\r\n                      <th className=\"px-3 py-2 text-center font-bold text-gray-900 border-r border-gray-400\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={\r\n                            selectedIds.length === filteredAndSortedData.length &&\r\n                            filteredAndSortedData.length > 0\r\n                          }\r\n                          onChange={handleToggleSelectAll}\r\n                          className=\"w-4 h-4 cursor-pointer\"\r\n                          title=\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\"\r\n                        />\r\n                      </th>\r\n                      {displayHeaders.map((header, idx) => {\r\n                        // Define gradient colors for header date columns\r\n                        const headerGradients: Record<string, string> = {\r\n                          ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:\r\n                            \"bg-gradient-to-r from-emerald-300 to-emerald-400\",\r\n                          ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:\r\n                            \"bg-gradient-to-r from-emerald-300 to-emerald-400\",\r\n                          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Consult\":\r\n                            \"bg-gradient-to-r from-fuchsia-300 to-fuchsia-400\",\r\n                          ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î:\r\n                            \"bg-gradient-to-r from-orange-300 to-orange-400\",\r\n                          ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î:\r\n                            \"bg-gradient-to-r from-orange-300 to-orange-400\",\r\n                          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå\":\r\n                            \"bg-gradient-to-r from-blue-300 to-blue-400\",\r\n                          \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î consult\":\r\n                            \"bg-gradient-to-r from-fuchsia-300 to-fuchsia-400\",\r\n                          ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î:\r\n                            \"bg-gradient-to-r from-orange-300 to-orange-400\",\r\n                        };\r\n\r\n                        const headerGradient =\r\n                          headerGradients[header] || \"bg-yellow-300\";\r\n                        const hoverClass = headerGradients[header]\r\n                          ? \"hover:opacity-90\"\r\n                          : \"hover:bg-yellow-400\";\r\n\r\n                        return (\r\n                          <th\r\n                            key={idx}\r\n                            onClick={() => handleSort(header)}\r\n                            className={`px-3 py-2 text-center text-xs font-bold text-gray-900 border-r border-gray-400 whitespace-nowrap cursor-pointer ${hoverClass} transition-all ${headerGradient}`}\r\n                            style={{ fontSize: \"11px\" }}\r\n                          >\r\n                            <div className=\"flex items-center justify-center gap-1\">\r\n                              <span>{header}</span>\r\n                              {sortColumn === header &&\r\n                                (sortDirection === \"asc\" ? (\r\n                                  <ChevronUp className=\"w-3 h-3\" />\r\n                                ) : (\r\n                                  <ChevronDown className=\"w-3 h-3\" />\r\n                                ))}\r\n                            </div>\r\n                          </th>\r\n                        );\r\n                      })}\r\n                      {/* View More column header - only show when filter is active */}\r\n                      {hasActiveFilter && (\r\n                        <th className=\"px-3 py-2 text-center text-xs font-bold text-gray-900 border-r border-gray-400 whitespace-nowrap bg-blue-300\" style={{ fontSize: \"11px\" }}>\r\n                          ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\r\n                        </th>\r\n                      )}\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {(() => {\r\n                      console.log(\r\n                        \"üìä Rendering tbody with\",\r\n                        paginatedData.length,\r\n                        \"rows\"\r\n                      );\r\n                      return null;\r\n                    })()}\r\n                    {paginatedData.map((row, rowIndex) => {\r\n                      const absoluteIndex =\r\n                        (currentPage - 1) * itemsPerPage + rowIndex;\r\n                      const patternIndex = absoluteIndex % 4;\r\n                      const rowId = row[\"id\"];\r\n                      const isChecked = selectedIds.includes(rowId);\r\n                      // Pattern: white (0) ‚Üí pink (1) ‚Üí white (2) ‚Üí purple-light (3)\r\n                      let bgColor = \"bg-white\";\r\n                      if (patternIndex === 1) {\r\n                        bgColor = \"bg-pink-200\";\r\n                      } else if (patternIndex === 3) {\r\n                        bgColor = \"bg-purple-200\";\r\n                      }\r\n\r\n                      if (isChecked) {\r\n                        bgColor = \"bg-blue-100\";\r\n                      }\r\n\r\n                      return (\r\n                        <tr\r\n                          key={rowIndex}\r\n                          onClick={() => {\r\n                            setEditingCustomer(row);\r\n                            setIsEditModalOpen(true);\r\n                          }}\r\n                          className={`border border-gray-300 transition-all duration-200 group ${bgColor} hover:bg-blue-50 cursor-pointer`}\r\n                        >\r\n                          <td\r\n                            className=\"px-3 py-2 border-r border-gray-300 text-center\"\r\n                            onClick={(e) => e.stopPropagation()}\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={isChecked}\r\n                              onChange={() => handleToggleSelect(rowId)}\r\n                              className=\"w-4 h-4 cursor-pointer\"\r\n                            />\r\n                          </td>\r\n                          {displayHeaders.map((header, colIdx) => {\r\n                            const value = row[header];\r\n                            const hasValue =\r\n                              value !== undefined &&\r\n                              value !== null &&\r\n                              value !== \"\";\r\n                            const displayValue = formatDateValue(value);\r\n                            const isNotesColumn = header === \"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏\";\r\n\r\n                            // Define gradient colors for specific date columns\r\n                            const dateColumns: Record<string, string> = {\r\n                              ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:\r\n                                \"bg-gradient-to-r from-emerald-100 to-emerald-200\",\r\n                              ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ:\r\n                                \"bg-gradient-to-r from-emerald-100 to-emerald-200\",\r\n                              \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Consult\":\r\n                                \"bg-gradient-to-r from-fuchsia-100 to-fuchsia-200\",\r\n                              ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î:\r\n                                \"bg-gradient-to-r from-orange-100 to-orange-200\",\r\n                              ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î:\r\n                                \"bg-gradient-to-r from-orange-100 to-orange-200\",\r\n                              \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå\":\r\n                                \"bg-gradient-to-r from-blue-100 to-blue-200\",\r\n                              \"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î consult\":\r\n                                \"bg-gradient-to-r from-fuchsia-100 to-fuchsia-200\",\r\n                              ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏±‡∏î‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î:\r\n                                \"bg-gradient-to-r from-orange-100 to-orange-200\",\r\n                            };\r\n\r\n                            const gradientClass = dateColumns[header] || \"\";\r\n                            const isDateColumn = !!dateColumns[header];\r\n\r\n                            return (\r\n                              <td\r\n                                key={colIdx}\r\n                                className={`px-3 py-2 text-xs text-gray-900 border-r border-gray-300 text-center align-middle ${isNotesColumn ? \"\" : \"whitespace-nowrap\"\r\n                                  } ${gradientClass}`}\r\n                                style={{\r\n                                  fontSize: \"11px\",\r\n                                  minWidth: isNotesColumn\r\n                                    ? \"450px\"\r\n                                    : isDateColumn\r\n                                      ? \"80px\"\r\n                                      : undefined,\r\n                                  maxWidth: isNotesColumn\r\n                                    ? \"450px\"\r\n                                    : isDateColumn\r\n                                      ? \"80px\"\r\n                                      : undefined,\r\n                                }}\r\n                              >\r\n                                {hasValue ? (\r\n                                  <span\r\n                                    className={\r\n                                      isNotesColumn\r\n                                        ? \"block text-left whitespace-pre-wrap break-words\"\r\n                                        : \"block\"\r\n                                    }\r\n                                  >\r\n                                    {displayValue}\r\n                                  </span>\r\n                                ) : (\r\n                                  <span className=\"text-gray-400 block\">-</span>\r\n                                )}\r\n                              </td>\r\n                            );\r\n                          })}\r\n                          {/* View More button - only show when filter is active */}\r\n                          {hasActiveFilter && (\r\n                            <td\r\n                              className=\"px-3 py-2 text-center border-r border-gray-300\"\r\n                              onClick={(e) => e.stopPropagation()}\r\n                            >\r\n                              <button\r\n                                onClick={() => {\r\n                                  setEditingCustomer(row);\r\n                                  setIsEditModalOpen(true);\r\n                                }}\r\n                                className=\"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-xs font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow-md\"\r\n                              >\r\n                                ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\r\n                              </button>\r\n                            </td>\r\n                          )}\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n        {/* Desktop: Show message when no filter applied */}\r\n        {!hasActiveFilter && tableData.length > 0 && (\r\n          <div className=\"hidden md:flex flex-col items-center justify-center py-16 bg-white rounded-xl shadow-sm border border-slate-200\">\r\n            <Filter className=\"w-16 h-16 text-slate-300 mb-4\" />\r\n            {isTypingSearch ? (\r\n              <p className=\"text-slate-500 text-center text-sm\">\r\n                ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏µ‡∏Å {3 - searchTerm.length} ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤\r\n              </p>\r\n            ) : (\r\n              <p className=\"text-slate-500 text-center text-sm\">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Desktop Data Table - Only visible when filter is active */}\r\n        {hasActiveFilter && tableData.length > 0 && (\r\n          <div className=\"hidden md:block bg-white rounded-lg shadow-md overflow-hidden mb-4\">\r\n            {/* Horizontal scrollbar on top */}\r\n            <div\r\n              className=\"overflow-x-auto custom-scrollbar-horizontal\"\r\n              style={{\r\n                overflowY: \"hidden\",\r\n                height: \"12px\",\r\n              }}\r\n              onScroll={(e) => {\r\n                const target = e.currentTarget;\r\n                const tableContainer = target.nextElementSibling as HTMLElement;\r\n                if (tableContainer) {\r\n                  tableContainer.scrollLeft = target.scrollLeft;\r\n                }\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  width: tableData[0].headers.length * 150 + \"px\",\r\n                  height: \"1px\",\r\n                }}\r\n              />\r\n            </div>\r\n            <div\r\n              className=\"overflow-x-auto overflow-y-auto custom-scrollbar\"\r\n              style={{\r\n                maxHeight: `calc(100vh + ${tableSize}px)`,\r\n                position: \"relative\",\r\n              }}\r\n              onScroll={(e) => {\r\n                const target = e.currentTarget;\r\n                const topScroller = target.previousElementSibling as HTMLElement;\r\n                if (topScroller) {\r\n                  topScroller.scrollLeft = target.scrollLeft;\r\n                }\r\n              }}\r\n            >\r\n              <table\r\n                className=\"w-full border-collapse text-sm table-auto\"\r\n                style={{ position: \"relative\", zIndex: 1 }}\r\n              >\r\n                <thead className=\"sticky top-0 z-30 bg-yellow-300\">\r\n                  <tr className=\"bg-yellow-300 border border-gray-400\">\r\n                    <th className=\"px-3 py-2 text-center font-bold text-gray-900 border-r border-gray-400\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={\r\n                          selectedIds.length === filteredAndSortedData.length &&\r\n                          filteredAndSortedData.length > 0\r\n                        }\r\n                        onChange={handleToggleSelectAll}\r\n                        className=\"w-4 h-4 cursor-pointer\"\r\n                        title=\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\"\r\n                      />\r\n                    </th>\r\n                    {displayHeaders.map((header, idx) => (\r\n                      <th\r\n                        key={idx}\r\n                        className=\"px-3 py-2 text-center font-bold text-gray-900 whitespace-nowrap border-r border-gray-400\"\r\n                      >\r\n                        {header}\r\n                      </th>\r\n                    ))}\r\n                    {/* View More column header */}\r\n                    <th className=\"px-3 py-2 text-center font-bold text-gray-900 whitespace-nowrap border-r border-gray-400 bg-blue-300\">\r\n                      ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {paginatedData.map((row, rowIdx) => {\r\n                    const rowId = row[\"‡πÑ‡∏≠‡∏î‡∏µ\"] || row[\"id\"] || rowIdx;\r\n                    const isSelected = selectedIds.includes(rowId);\r\n                    return (\r\n                      <tr\r\n                        key={rowIdx}\r\n                        className={`border-b border-gray-200 ${isSelected ? \"bg-blue-50\" : rowIdx % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"\r\n                          } hover:bg-blue-100 transition-colors`}\r\n                      >\r\n                        <td\r\n                          className=\"px-3 py-2 text-center border-r border-gray-200\"\r\n                          onClick={(e) => e.stopPropagation()}\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={isSelected}\r\n                            onChange={() => handleToggleSelect(rowId)}\r\n                            className=\"w-4 h-4 cursor-pointer\"\r\n                          />\r\n                        </td>\r\n                        {displayHeaders.map((header, colIdx) => {\r\n                          const value = row[header];\r\n                          const hasValue = value !== undefined && value !== null && value !== \"\";\r\n                          const displayValue = hasValue ? String(value) : \"-\";\r\n                          return (\r\n                            <td\r\n                              key={colIdx}\r\n                              className=\"px-3 py-2 text-center border-r border-gray-200 whitespace-nowrap\"\r\n                              style={{ fontSize: \"11px\" }}\r\n                            >\r\n                              {hasValue ? displayValue : <span className=\"text-gray-400\">-</span>}\r\n                            </td>\r\n                          );\r\n                        })}\r\n                        {/* View More button */}\r\n                        <td className=\"px-3 py-2 text-center border-r border-gray-200\">\r\n                          <button\r\n                            onClick={() => {\r\n                              setEditingCustomer(row);\r\n                              setIsEditModalOpen(true);\r\n                            }}\r\n                            className=\"px-3 py-1.5 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-xs font-medium rounded-lg transition-all duration-200 shadow-sm hover:shadow-md\"\r\n                          >\r\n                            ‡∏î‡∏π‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <EditCustomerModal\r\n        isOpen={isEditModalOpen}\r\n        onClose={() => setIsEditModalOpen(false)}\r\n        customerData={editingCustomer || {}}\r\n        onSave={handleSaveCustomer}\r\n      />\r\n      <AddCustomerModal\r\n        isOpen={isAddModalOpen}\r\n        onClose={() => setIsAddModalOpen(false)}\r\n        onSuccess={() => {\r\n          setIsAddModalOpen(false);\r\n          fetchData();\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\n// Wrapper component with Suspense for useSearchParams\r\nexport default function CustomerAllDataPageWrapper() {\r\n  return (\r\n    <Suspense fallback={\r\n      <div className=\"w-full min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 flex items-center justify-center\">\r\n        <div className=\"text-slate-500\">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>\r\n      </div>\r\n    }>\r\n      <CustomerAllDataPage />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}