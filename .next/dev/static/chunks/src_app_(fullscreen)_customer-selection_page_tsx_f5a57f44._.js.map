{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/app/%28fullscreen%29/customer-selection/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { FaUsers, FaUserPlus, FaArrowLeft } from \"react-icons/fa\";\r\n\r\ninterface CustomerCount {\r\n  existingCount: number;\r\n  newCount: number;\r\n}\r\n\r\nexport default function CustomerSelectionPage() {\r\n  const router = useRouter();\r\n  const [counts, setCounts] = useState<CustomerCount>({\r\n    existingCount: 0,\r\n    newCount: 0,\r\n  });\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchCustomerCounts();\r\n  }, []);\r\n\r\n  const fetchCustomerCounts = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await fetch(\"/api/customer-data\");\r\n      const result = await response.json();\r\n\r\n      if (result.success && result.data) {\r\n        // Count existing customers (with CN/รหัสลูกค้า) and new customers (without)\r\n        let existingCount = 0;\r\n        let newCount = 0;\r\n\r\n        result.data.forEach((row: Record<string, any>) => {\r\n          // Check 'cn' column for existing customers (customers with CN number from OPD)\r\n          const cnValue = row[\"cn\"];\r\n          if (cnValue && cnValue.toString().trim() !== \"\") {\r\n            existingCount++;\r\n          } else {\r\n            newCount++;\r\n          }\r\n        });\r\n\r\n        console.log(\"Customer counts:\", { existingCount, newCount, total: result.data.length });\r\n        setCounts({ existingCount, newCount });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching customer counts:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSelectType = (type: \"existing\" | \"new\") => {\r\n    router.push(`/customer-all-data?type=${type}`);\r\n  };\r\n\r\n  const handleBack = () => {\r\n    router.push(\"/home\");\r\n  };\r\n\r\n  const customerTypes = [\r\n    {\r\n      id: \"existing\",\r\n      title: \"ลูกค้าเก่า\",\r\n      description: \"ลูกค้าที่มีรหัส CN\",\r\n      icon: <FaUsers className=\"text-5xl\" />,\r\n      count: counts.existingCount,\r\n      color: \"from-blue-500 to-blue-700\",\r\n      hoverColor: \"hover:from-blue-600 hover:to-blue-800\",\r\n    },\r\n    {\r\n      id: \"new\",\r\n      title: \"ลูกค้าใหม่\",\r\n      description: \"ลูกค้าที่ยังไม่มีรหัส CN\",\r\n      icon: <FaUserPlus className=\"text-5xl\" />,\r\n      count: counts.newCount,\r\n      color: \"from-emerald-500 to-emerald-700\",\r\n      hoverColor: \"hover:from-emerald-600 hover:to-emerald-800\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-900 via-purple-700 to-pink-600 relative overflow-hidden\">\r\n      {/* Animated background elements */}\r\n      <div className=\"absolute inset-0 overflow-hidden\">\r\n        {[...Array(20)].map((_, i) => (\r\n          <motion.div\r\n            key={i}\r\n            className=\"absolute rounded-full\"\r\n            style={{\r\n              width: Math.random() * 10 + 5,\r\n              height: Math.random() * 10 + 5,\r\n              background: `hsl(${Math.random() * 60 + 280}, 80%, 60%)`,\r\n              left: `${Math.random() * 100}%`,\r\n              top: `${Math.random() * 100}%`,\r\n            }}\r\n            animate={{\r\n              y: [0, -30, 0],\r\n              opacity: [0.3, 0.8, 0.3],\r\n            }}\r\n            transition={{\r\n              duration: Math.random() * 3 + 2,\r\n              repeat: Infinity,\r\n              ease: \"easeInOut\",\r\n            }}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Header */}\r\n      <div className=\"relative z-10 p-4\">\r\n        <div className=\"flex items-center justify-between max-w-4xl mx-auto\">\r\n          <motion.button\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            whileHover={{ scale: 1.05 }}\r\n            whileTap={{ scale: 0.95 }}\r\n            onClick={handleBack}\r\n            className=\"p-3 bg-white/20 backdrop-blur-sm rounded-xl text-white hover:bg-white/30 transition-colors\"\r\n          >\r\n            <FaArrowLeft className=\"text-xl\" />\r\n          </motion.button>\r\n\r\n          <motion.h1\r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"text-2xl font-bold text-white\"\r\n          >\r\n            ลูกค้าสัมพันธ์\r\n          </motion.h1>\r\n\r\n          <div className=\"w-12\" /> {/* Spacer for alignment */}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main content - positioned higher for mobile */}\r\n      <div className=\"relative z-10 flex flex-col items-center pt-8 px-4\">\r\n        {/* Customer type selection */}\r\n        <div className=\"w-full max-w-md space-y-4\">\r\n          {customerTypes.map((type, index) => (\r\n            <motion.div\r\n              key={type.id}\r\n              initial={{ opacity: 0, y: 30 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 0.5, delay: index * 0.1 + 0.2 }}\r\n            >\r\n              <motion.button\r\n                whileHover={{ scale: 1.02, y: -2 }}\r\n                whileTap={{ scale: 0.98 }}\r\n                onClick={() => handleSelectType(type.id as \"existing\" | \"new\")}\r\n                className={`w-full bg-gradient-to-r ${type.color} ${type.hoverColor} rounded-2xl p-6 text-white shadow-lg transition-all duration-300`}\r\n              >\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"p-3 bg-white/20 rounded-xl\">\r\n                    {type.icon}\r\n                  </div>\r\n                  <div className=\"flex-1 text-left\">\r\n                    <h3 className=\"text-xl font-bold\">{type.title}</h3>\r\n                    <p className=\"text-white/80 text-sm\">{type.description}</p>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    {isLoading ? (\r\n                      <div className=\"animate-pulse bg-white/30 rounded-lg h-8 w-16\" />\r\n                    ) : (\r\n                      <div className=\"text-2xl font-bold\">\r\n                        {type.count.toLocaleString()}\r\n                      </div>\r\n                    )}\r\n                    <div className=\"text-white/80 text-xs\">รายการ</div>\r\n                  </div>\r\n                </div>\r\n              </motion.button>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer */}\r\n      <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ duration: 1, delay: 0.5 }}\r\n        className=\"relative z-10 text-center pb-6 text-white\"\r\n      >\r\n        <p className=\"text-sm opacity-75\">\r\n          © 2025 ระบบบริหารจัดการคลินิก - All Rights Reserved\r\n        </p>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}