{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/app/facebook-ads-manager/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { FacebookProvider, EmbeddedVideo, EmbeddedPost } from \"react-facebook\";\r\n// Declare Facebook SDK types\r\ndeclare global {\r\n  interface Window {\r\n    FB: any;\r\n    fbAsyncInit: () => void;\r\n  }\r\n}\r\n// Facebook SDK Initialization\r\nif (typeof window !== \"undefined\") {\r\n  // Load Facebook SDK\r\n  window.fbAsyncInit = function () {\r\n    if (window.FB) {\r\n      window.FB.init({\r\n        xfbml: true,\r\n        version: \"v18.0\",\r\n      });\r\n    }\r\n  };\r\n  // Load SDK script\r\n  if (!document.getElementById(\"facebook-jssdk\")) {\r\n    const script = document.createElement(\"script\");\r\n    script.id = \"facebook-jssdk\";\r\n    script.src = \"https://connect.facebook.net/th_TH/sdk.js\";\r\n    script.async = true;\r\n    script.defer = true;\r\n    script.crossOrigin = \"anonymous\";\r\n    document.head.appendChild(script);\r\n  }\r\n}\r\n// ‡∏õ‡∏¥‡∏î root layout ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö modal\r\nif (typeof document !== \"undefined\") {\r\n  const style = document.createElement(\"style\");\r\n  style.textContent = `\r\n    header, footer, nav.navbar, .layout-grid > :not(main) {\r\n      display: none !important;\r\n    }\r\n    body {\r\n      padding: 0 !important;\r\n      margin: 0 !important;\r\n      overflow-x: hidden !important;\r\n    }\r\n    main, .layout-grid {\r\n      padding: 0 !important;\r\n      margin: 0 !important;\r\n    }\r\n    /* Mobile Responsive Styles */\r\n    @media (max-width: 640px) {\r\n      .min-h-screen {\r\n        min-height: 100vh !important;\r\n      }\r\n    }\r\n    @media (max-width: 768px) {\r\n      /* Make tables scrollable on mobile */\r\n      .overflow-x-auto {\r\n        overflow-x: auto !important;\r\n        -webkit-overflow-scrolling: touch !important;\r\n      }\r\n    }\r\n    .modal-overlay {\r\n      backdrop-filter: blur(8px);\r\n      animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n    }\r\n    .video-modal-container {\r\n      animation: slideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);\r\n    }\r\n    @keyframes fadeIn {\r\n      from { opacity: 0; }\r\n      to { opacity: 1; }\r\n    }\r\n    @keyframes slideUp {\r\n      from { \r\n        opacity: 0;\r\n        transform: translateY(30px) scale(0.95);\r\n      }\r\n      to { \r\n        opacity: 1;\r\n        transform: translateY(0) scale(1);\r\n      }\r\n    }\r\n    @keyframes float {\r\n      0%, 100% { transform: translateY(0px); }\r\n      50% { transform: translateY(-10px); }\r\n    }\r\n    @keyframes shimmer {\r\n      0% { background-position: -1000px 0; }\r\n      100% { background-position: 1000px 0; }\r\n    }\r\n    @keyframes pulse {\r\n      0%, 100% { opacity: 1; }\r\n      50% { opacity: 0.8; }\r\n    }\r\n    @keyframes slideInFromLeft {\r\n      from { \r\n        opacity: 0;\r\n        transform: translateX(-30px);\r\n      }\r\n      to { \r\n        opacity: 1;\r\n        transform: translateX(0);\r\n      }\r\n    }\r\n    @keyframes slideInFromRight {\r\n      from { \r\n        opacity: 0;\r\n        transform: translateX(30px);\r\n      }\r\n      to { \r\n        opacity: 1;\r\n        transform: translateX(0);\r\n      }\r\n    }\r\n    .animate-slide-in-left {\r\n      animation: slideInFromLeft 0.5s ease-out;\r\n    }\r\n    .animate-slide-in-right {\r\n      animation: slideInFromRight 0.5s ease-out;\r\n    }\r\n    .glass-effect {\r\n      background: rgba(255, 255, 255, 0.9);\r\n      backdrop-filter: blur(10px);\r\n      border: 1px solid rgba(255, 255, 255, 0.2);\r\n    }\r\n    .gradient-border {\r\n      position: relative;\r\n      background: linear-gradient(white, white) padding-box,\r\n                  linear-gradient(135deg, #667eea 0%, #764ba2 100%) border-box;\r\n      border: 2px solid transparent;\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n}\r\ninterface Action {\r\n  action_type: string;\r\n  value: string;\r\n}\r\ninterface AdCreative {\r\n  id: string;\r\n  thumbnail_url?: string;\r\n  image_url?: string;\r\n  video_id?: string;\r\n  video_source?: string; // Direct video URL from Facebook API\r\n  object_story_spec?: any;\r\n  effective_object_story_id?: string;\r\n}\r\ninterface AdInsight {\r\n  ad_id: string;\r\n  ad_name: string;\r\n  adset_id: string;\r\n  adset_name: string;\r\n  campaign_id: string;\r\n  campaign_name: string;\r\n  spend: string;\r\n  impressions: string;\r\n  clicks: string;\r\n  ctr: string;\r\n  cpc: string;\r\n  cpm: string;\r\n  actions?: Action[];\r\n  conversions?: Action[];\r\n  date_start: string;\r\n  date_stop: string;\r\n  reach?: string;\r\n  frequency?: string;\r\n  cost_per_action_type?: { action_type: string; value: string }[];\r\n  creative?: AdCreative;\r\n}\r\ninterface ApiResponse {\r\n  success: boolean;\r\n  data: AdInsight[];\r\n  error?: string;\r\n  details?: any;\r\n}\r\ntype ViewMode = \"campaigns\" | \"adsets\" | \"ads\";\r\nexport default function FacebookAdsManagerPage() {\r\n  const router = useRouter();\r\n  const [insights, setInsights] = useState<AdInsight[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [viewMode, setViewMode] = useState<ViewMode>(\"ads\");\r\n  const [dateRange, setDateRange] = useState(\"today\");\r\n  const [customDateStart, setCustomDateStart] = useState(\"\");\r\n  const [customDateEnd, setCustomDateEnd] = useState(\"\");\r\n  const [showDatePicker, setShowDatePicker] = useState(false);\r\n  // Page selection for different ad portfolios (Facebook, TikTok, etc.)\r\n  const [selectedPage, setSelectedPage] = useState<1 | 2 | 3 | 4>(1);\r\n  const [googleSheetsData, setGoogleSheetsData] = useState<number>(0);\r\n  const [googleSheetsLoading, setGoogleSheetsLoading] = useState(false);\r\n  const [googleAdsData, setGoogleAdsData] = useState<number>(0);\r\n  const [googleAdsLoading, setGoogleAdsLoading] = useState(false);\r\n  const [facebookBalance, setFacebookBalance] = useState<number>(0);\r\n  const [facebookBalanceLoading, setFacebookBalanceLoading] = useState(false);\r\n  const [phoneCountData, setPhoneCountData] = useState<{\r\n    total: number;\r\n    datesWithData: number;\r\n  }>({ total: 0, datesWithData: 0 });\r\n  const [phoneCountLoading, setPhoneCountLoading] = useState(false);\r\n  const [selectedPlatform, setSelectedPlatform] = useState<\r\n    \"facebook\" | \"tiktok\" | \"googlead\"\r\n  >(\"facebook\");\r\n  const [adCreatives, setAdCreatives] = useState<Map<string, AdCreative>>(\r\n    new Map()\r\n  );\r\n  const [creativesLoading, setCreativesLoading] = useState(false);\r\n  const [selectedAdForPreview, setSelectedAdForPreview] =\r\n    useState<AdInsight | null>(null);\r\n  const [showVideoModal, setShowVideoModal] = useState(false);\r\n  const [topAdsSortBy, setTopAdsSortBy] = useState<\r\n    \"leads\" | \"cost\" | \"phone\" | \"thruplay\"\r\n  >(\"leads\");\r\n  const [dailySummaryData, setDailySummaryData] = useState<AdInsight[]>([]);\r\n  const [dailySummaryLoading, setDailySummaryLoading] = useState(false);\r\n  const [phoneLeadsData, setPhoneLeadsData] = useState<{\r\n    [date: string]: number;\r\n  }>({});\r\n  const [phoneLeadsLoading, setPhoneLeadsLoading] = useState(false);\r\n  const [topAdsPhoneLeads, setTopAdsPhoneLeads] = useState<Map<string, number>>(\r\n    new Map()\r\n  );\r\n  const [topAdsPhoneLeadsLoading, setTopAdsPhoneLeadsLoading] = useState(false);\r\n  const [topAdsLimit, setTopAdsLimit] = useState<5 | 10 | 15 | 20 | 30 | \"all\">(\r\n    20\r\n  );\r\n  // State for adset-level insights (for TOP Ad Set table)\r\n  const [adsetInsights, setAdsetInsights] = useState<AdInsight[]>([]);\r\n  const [adsetInsightsLoading, setAdsetInsightsLoading] = useState(false);\r\n  // Campaign type filter for Ad Set table (TOF, MOF, BOF)\r\n  const [adSetCampaignFilter, setAdSetCampaignFilter] = useState<Set<string>>(\r\n    new Set([\"MOF\", \"BOF\"])\r\n  );\r\n  // Separate state for Ad Set table sorting and limit (independent from TOP Ads)\r\n  const [topAdSetSortBy, setTopAdSetSortBy] = useState<\r\n    \"leads\" | \"phone\" | \"thruplay\"\r\n  >(\"leads\");\r\n  const [topAdSetLimit, setTopAdSetLimit] = useState<\r\n    5 | 10 | 15 | 20 | 30 | \"all\"\r\n  >(20);\r\n  // State for Ad Set detail modal\r\n  const [selectedAdSet, setSelectedAdSet] = useState<AdInsight | null>(null);\r\n  const [showAdSetModal, setShowAdSetModal] = useState(false);\r\n\r\n  // ============ Page 2 States ============\r\n  // Interface ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Page 2 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö actions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö messaging)\r\n  interface Page2AdInsight {\r\n    ad_id: string;\r\n    ad_name: string;\r\n    adset_id: string;\r\n    adset_name: string;\r\n    campaign_id: string;\r\n    campaign_name: string;\r\n    spend: string;\r\n    impressions: string;\r\n    clicks: string;\r\n    ctr: string;\r\n    cpc: string;\r\n    cpm: string;\r\n    reach?: string;\r\n    frequency?: string;\r\n    actions?: Array<{\r\n      action_type: string;\r\n      value: string;\r\n    }>;\r\n  }\r\n\r\n  interface Page2Summary {\r\n    totalSpend: number;\r\n    totalImpressions: number;\r\n    totalClicks: number;\r\n    totalAds: number;\r\n    avgCtr: number;\r\n    avgCpc: number;\r\n    avgCpm: number;\r\n    total_messaging_first_reply?: number;\r\n    total_messaging_connection?: number;\r\n  }\r\n\r\n  const [page2Insights, setPage2Insights] = useState<Page2AdInsight[]>([]);\r\n  const [page2Loading, setPage2Loading] = useState(false);\r\n  const [page2Error, setPage2Error] = useState<string | null>(null);\r\n  const [page2Summary, setPage2Summary] = useState<Page2Summary>({\r\n    totalSpend: 0,\r\n    totalImpressions: 0,\r\n    totalClicks: 0,\r\n    totalAds: 0,\r\n    avgCtr: 0,\r\n    avgCpc: 0,\r\n    avgCpm: 0,\r\n    total_messaging_first_reply: 0,\r\n    total_messaging_connection: 0,\r\n  });\r\n  const [page2SortBy, setPage2SortBy] = useState<\"spend\" | \"clicks\" | \"impressions\" | \"ctr\" | \"cpc\" | \"cpm\">(\"spend\");\r\n  const [page2Limit, setPage2Limit] = useState<5 | 10 | 15 | 20 | 30 | \"all\">(20);\r\n\r\n  // Page 2 Balance State\r\n  const [page2Balance, setPage2Balance] = useState<number>(0);\r\n  const [page2BalanceLoading, setPage2BalanceLoading] = useState(false);\r\n  const [page2AmountSpent, setPage2AmountSpent] = useState<number>(0);\r\n  const [page2Currency, setPage2Currency] = useState<string>(\"THB\");\r\n\r\n  // Get ads that belong to a specific adset\r\n  const getAdsByAdSetId = useCallback(\r\n    (adsetId: string) => {\r\n      return insights.filter((ad) => ad.adset_id === adsetId);\r\n    },\r\n    [insights]\r\n  );\r\n\r\n  // Get total phone leads for an adset (sum of all ads in this adset)\r\n  const getPhoneLeadsByAdSetId = useCallback(\r\n    (adsetId: string) => {\r\n      const adsInAdSet = insights.filter((ad) => ad.adset_id === adsetId);\r\n      let totalPhoneLeads = 0;\r\n      adsInAdSet.forEach((ad) => {\r\n        totalPhoneLeads += topAdsPhoneLeads.get(ad.ad_id) || 0;\r\n      });\r\n      return totalPhoneLeads;\r\n    },\r\n    [insights, topAdsPhoneLeads]\r\n  );\r\n\r\n  // Re-parse Facebook SDK when modal opens\r\n  useEffect(() => {\r\n    if (showVideoModal && typeof window !== \"undefined\" && window.FB) {\r\n      // Give time for DOM to update\r\n      setTimeout(() => {\r\n        if (window.FB) {\r\n          window.FB.XFBML.parse();\r\n        }\r\n      }, 100);\r\n    }\r\n  }, [showVideoModal, selectedAdForPreview]);\r\n  const fetchAdCreatives = useCallback(async (adIds: string[]) => {\r\n    setCreativesLoading(true);\r\n    try {\r\n      const creativesMap = new Map<string, AdCreative>();\r\n      for (const adId of adIds) {\r\n        try {\r\n          // ‡πÉ‡∏ä‡πâ Next.js API route ‡πÅ‡∏ó‡∏ô Railway API\r\n          const response = await fetch(\r\n            `/api/facebook-ads-creative?ad_id=${adId}`\r\n          );\r\n          const result = await response.json();\r\n          if (result.success && result.data) {\r\n            creativesMap.set(adId, result.data);\r\n          }\r\n        } catch (error) {\r\n          // Error fetching creative\r\n        }\r\n      }\r\n      // Force re-render by creating a new Map instance\r\n      setAdCreatives(new Map(creativesMap));\r\n    } catch (error) {\r\n      // Fatal error\r\n    } finally {\r\n      setCreativesLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchTopAdsPhoneLeads = useCallback(\r\n    async (adIds: string[]) => {\r\n      try {\r\n        setTopAdsPhoneLeadsLoading(true);\r\n        const adIdsParam = adIds.join(\",\");\r\n\r\n        // Calculate date range based on current dateRange state\r\n        const today = new Date();\r\n        let startDate: string;\r\n        let endDate: string = today.toISOString().split(\"T\")[0];\r\n\r\n        if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n          startDate = customDateStart;\r\n          endDate = customDateEnd;\r\n        } else {\r\n          let start: Date;\r\n          switch (dateRange) {\r\n            case \"today\":\r\n              startDate = endDate;\r\n              break;\r\n            case \"yesterday\":\r\n              const yesterday = new Date(today);\r\n              yesterday.setDate(yesterday.getDate() - 1);\r\n              startDate = endDate = yesterday.toISOString().split(\"T\")[0];\r\n              break;\r\n            case \"last_7d\":\r\n              start = new Date(today);\r\n              start.setDate(start.getDate() - 7);\r\n              startDate = start.toISOString().split(\"T\")[0];\r\n              break;\r\n            case \"last_14d\":\r\n              start = new Date(today);\r\n              start.setDate(start.getDate() - 14);\r\n              startDate = start.toISOString().split(\"T\")[0];\r\n              break;\r\n            case \"last_30d\":\r\n              start = new Date(today);\r\n              start.setDate(start.getDate() - 30);\r\n              startDate = start.toISOString().split(\"T\")[0];\r\n              break;\r\n            case \"this_month\":\r\n              start = new Date(today.getFullYear(), today.getMonth(), 1);\r\n              startDate = start.toISOString().split(\"T\")[0];\r\n              break;\r\n            case \"last_month\":\r\n              start = new Date(today.getFullYear(), today.getMonth() - 1, 1);\r\n              const lastMonthEnd = new Date(\r\n                today.getFullYear(),\r\n                today.getMonth(),\r\n                0\r\n              );\r\n              startDate = start.toISOString().split(\"T\")[0];\r\n              endDate = lastMonthEnd.toISOString().split(\"T\")[0];\r\n              break;\r\n            default:\r\n              startDate = endDate;\r\n          }\r\n        }\r\n\r\n        // ‡πÉ‡∏ä‡πâ API ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà query ‡∏à‡∏≤‡∏Å SQL ‡πÇ‡∏î‡∏¢‡πÅ‡∏°‡∏û‡∏Å‡∏±‡∏ö fb_ad_id ‡πÅ‡∏•‡∏∞ filter ‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n        const response = await fetch(\r\n          `/api/facebook-ads-phone-leads-sql?ad_ids=${adIdsParam}&date_start=${startDate}&date_end=${endDate}`\r\n        );\r\n        const result = await response.json();\r\n        if (result.success && result.data) {\r\n          const phoneLeadsMap = new Map<string, number>();\r\n          Object.keys(result.data).forEach((adId) => {\r\n            phoneLeadsMap.set(adId, result.data[adId]);\r\n          });\r\n          setTopAdsPhoneLeads(new Map(phoneLeadsMap));\r\n        }\r\n      } catch (error) {\r\n        setTopAdsPhoneLeads(new Map());\r\n      } finally {\r\n        setTopAdsPhoneLeadsLoading(false);\r\n      }\r\n    },\r\n    [dateRange, customDateStart, customDateEnd]\r\n  );\r\n\r\n  const fetchInsights = useCallback(\r\n    async (isBackgroundRefresh = false, retryCount = 0) => {\r\n      try {\r\n        if (!isBackgroundRefresh) {\r\n          setLoading(true);\r\n        }\r\n        setError(null);\r\n        const levelParam =\r\n          viewMode === \"campaigns\"\r\n            ? \"campaign\"\r\n            : viewMode === \"adsets\"\r\n              ? \"adset\"\r\n              : \"ad\";\r\n        let url = `https://believable-ambition-production.up.railway.app/api/facebook-ads-campaigns?level=${levelParam}`;\r\n        const filtering = JSON.stringify([\r\n          {\r\n            field: \"action_type\",\r\n            operator: \"IN\",\r\n            value: [\r\n              \"onsite_conversion.messaging_first_reply\",\r\n              \"onsite_conversion.total_messaging_connection\",\r\n            ],\r\n          },\r\n        ]);\r\n        url += `&filtering=${encodeURIComponent(filtering)}`;\r\n        url += `&action_breakdowns=action_type`;\r\n        if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n          const timeRange = JSON.stringify({\r\n            since: customDateStart,\r\n            until: customDateEnd,\r\n          });\r\n          url += `&time_range=${encodeURIComponent(timeRange)}`;\r\n        } else {\r\n          url += `&date_preset=${dateRange}`;\r\n        }\r\n        const response = await fetch(url);\r\n        const result: ApiResponse = await response.json();\r\n\r\n        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Rate Limit Error (403)\r\n        if (\r\n          response.status === 403 &&\r\n          result.error?.includes(\"Application request limit reached\")\r\n        ) {\r\n          const retryDelay = Math.min(30000 * Math.pow(2, retryCount), 120000); // Exponential backoff: 30s, 60s, 120s\r\n          setError(\r\n            `‚è≥ API Rate Limit - ‡∏à‡∏∞‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å ${retryDelay / 1000\r\n            } ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ... (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${retryCount + 1})`\r\n          );\r\n\r\n          // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å delay\r\n          setTimeout(() => {\r\n            if (retryCount < 3) {\r\n              // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á\r\n              fetchInsights(isBackgroundRefresh, retryCount + 1);\r\n            } else {\r\n              setError(\r\n                \"‚ùå API Rate Limit - ‡πÄ‡∏Å‡∏¥‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á\"\r\n              );\r\n              setLoading(false);\r\n            }\r\n          }, retryDelay);\r\n\r\n          return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß\r\n        }\r\n\r\n        if (!response.ok || !result.success) {\r\n          throw new Error(result.error || \"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ\");\r\n        }\r\n        const uniqueData = new Map<string, AdInsight>();\r\n        result.data.forEach((item) => {\r\n          const key = item.ad_id || item.adset_id || item.campaign_id;\r\n          if (uniqueData.has(key)) {\r\n            const existing = uniqueData.get(key)!;\r\n            if (item.actions) {\r\n              if (!existing.actions) existing.actions = [];\r\n              item.actions.forEach((action) => {\r\n                const existingAction = existing.actions!.find(\r\n                  (a) => a.action_type === action.action_type\r\n                );\r\n                if (existingAction) {\r\n                  existingAction.value = String(\r\n                    parseInt(existingAction.value || \"0\") +\r\n                    parseInt(action.value || \"0\")\r\n                  );\r\n                } else {\r\n                  existing.actions!.push({ ...action });\r\n                }\r\n              });\r\n            }\r\n            if (item.conversions) {\r\n              if (!existing.conversions) existing.conversions = [];\r\n              item.conversions.forEach((conversion) => {\r\n                const existingConversion = existing.conversions!.find(\r\n                  (c) => c.action_type === conversion.action_type\r\n                );\r\n                if (existingConversion) {\r\n                  existingConversion.value = String(\r\n                    parseInt(existingConversion.value || \"0\") +\r\n                    parseInt(conversion.value || \"0\")\r\n                  );\r\n                } else {\r\n                  existing.conversions!.push({ ...conversion });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            uniqueData.set(key, { ...item });\r\n          }\r\n        });\r\n        const insightsArray = Array.from(uniqueData.values());\r\n        setInsights(insightsArray);\r\n        // Fetch creatives for ALL ads\r\n        const allAdIds = insightsArray\r\n          .filter((item) => item.ad_id)\r\n          .map((item) => item.ad_id);\r\n        if (allAdIds.length > 0) {\r\n          fetchAdCreatives(allAdIds);\r\n          // Fetch phone leads for TOP 10 Ads\r\n          fetchTopAdsPhoneLeads(allAdIds);\r\n        }\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : \"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î\");\r\n      } finally {\r\n        if (!isBackgroundRefresh) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    },\r\n    [\r\n      dateRange,\r\n      viewMode,\r\n      customDateStart,\r\n      customDateEnd,\r\n      fetchAdCreatives,\r\n      fetchTopAdsPhoneLeads,\r\n    ]\r\n  );\r\n  const fetchGoogleSheetsData = useCallback(async () => {\r\n    try {\r\n      setGoogleSheetsLoading(true);\r\n      let url =\r\n        \"https://believable-ambition-production.up.railway.app/api/google-sheets-data\";\r\n      if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n        const timeRange = JSON.stringify({\r\n          since: customDateStart,\r\n          until: customDateEnd,\r\n        });\r\n        url += `?time_range=${encodeURIComponent(timeRange)}`;\r\n      } else {\r\n        url += `?date_preset=${dateRange}`;\r\n      }\r\n      const response = await fetch(url);\r\n      const result = await response.json();\r\n      if (!response.ok || !result.success) {\r\n        setGoogleSheetsData(0);\r\n      } else {\r\n        setGoogleSheetsData(result.total || 0);\r\n      }\r\n    } catch (err) {\r\n      setGoogleSheetsData(0);\r\n    } finally {\r\n      setGoogleSheetsLoading(false);\r\n    }\r\n  }, [dateRange, customDateStart, customDateEnd]);\r\n  const fetchGoogleAdsData = useCallback(async () => {\r\n    try {\r\n      setGoogleAdsLoading(true);\r\n      let url =\r\n        \"https://believable-ambition-production.up.railway.app/api/google-ads\";\r\n      if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n        url += `?startDate=${customDateStart}&endDate=${customDateEnd}`;\r\n      } else {\r\n        const today = new Date();\r\n        let startDate = \"\";\r\n        let endDate = today.toISOString().split(\"T\")[0];\r\n        switch (dateRange) {\r\n          case \"today\":\r\n            startDate = endDate;\r\n            break;\r\n          case \"yesterday\":\r\n            const yesterday = new Date(today);\r\n            yesterday.setDate(yesterday.getDate() - 1);\r\n            startDate = endDate = yesterday.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"last_7d\":\r\n            const last7d = new Date(today);\r\n            last7d.setDate(last7d.getDate() - 7);\r\n            startDate = last7d.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"last_30d\":\r\n            const last30d = new Date(today);\r\n            last30d.setDate(last30d.getDate() - 30);\r\n            startDate = last30d.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"this_month\":\r\n            startDate = new Date(today.getFullYear(), today.getMonth(), 1)\r\n              .toISOString()\r\n              .split(\"T\")[0];\r\n            break;\r\n          case \"last_month\":\r\n            const lastMonth = new Date(\r\n              today.getFullYear(),\r\n              today.getMonth() - 1,\r\n              1\r\n            );\r\n            const lastMonthEnd = new Date(\r\n              today.getFullYear(),\r\n              today.getMonth(),\r\n              0\r\n            );\r\n            startDate = lastMonth.toISOString().split(\"T\")[0];\r\n            endDate = lastMonthEnd.toISOString().split(\"T\")[0];\r\n            break;\r\n          default:\r\n            startDate = endDate;\r\n        }\r\n        url += `?startDate=${startDate}&endDate=${endDate}`;\r\n      }\r\n      const response = await fetch(url);\r\n      const result = await response.json();\r\n      if (!response.ok || result.error) {\r\n        setGoogleAdsData(0);\r\n      } else {\r\n        const totalClicks = result.summary?.totalClicks || 0;\r\n        setGoogleAdsData(totalClicks);\r\n      }\r\n    } catch (err) {\r\n      setGoogleAdsData(0);\r\n    } finally {\r\n      setGoogleAdsLoading(false);\r\n    }\r\n  }, [dateRange, customDateStart, customDateEnd]);\r\n  const fetchFacebookBalance = useCallback(async () => {\r\n    try {\r\n      setFacebookBalanceLoading(true);\r\n      const response = await fetch(\"/api/facebook-ads-balance\");\r\n      const result = await response.json();\r\n      if (!response.ok || !result.success) {\r\n        setFacebookBalance(0);\r\n      } else {\r\n        setFacebookBalance(result.data.available_balance || 0);\r\n      }\r\n    } catch (err) {\r\n      setFacebookBalance(0);\r\n    } finally {\r\n      setFacebookBalanceLoading(false);\r\n    }\r\n  }, []);\r\n  const fetchPhoneCount = useCallback(async () => {\r\n    try {\r\n      setPhoneCountLoading(true);\r\n\r\n      // Calculate date range\r\n      const today = new Date();\r\n      let startDate: string;\r\n      let endDate: string = today.toISOString().split(\"T\")[0];\r\n\r\n      if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n        startDate = customDateStart;\r\n        endDate = customDateEnd;\r\n      } else {\r\n        let start: Date;\r\n        switch (dateRange) {\r\n          case \"today\":\r\n            startDate = endDate;\r\n            break;\r\n          case \"yesterday\":\r\n            const yesterday = new Date(today);\r\n            yesterday.setDate(yesterday.getDate() - 1);\r\n            startDate = endDate = yesterday.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"last_7d\":\r\n            start = new Date(today);\r\n            start.setDate(start.getDate() - 7);\r\n            startDate = start.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"last_14d\":\r\n            start = new Date(today);\r\n            start.setDate(start.getDate() - 14);\r\n            startDate = start.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"last_30d\":\r\n            start = new Date(today);\r\n            start.setDate(start.getDate() - 30);\r\n            startDate = start.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"this_month\":\r\n            start = new Date(today.getFullYear(), today.getMonth(), 1);\r\n            startDate = start.toISOString().split(\"T\")[0];\r\n            break;\r\n          case \"last_month\":\r\n            start = new Date(today.getFullYear(), today.getMonth() - 1, 1);\r\n            const lastMonthEnd = new Date(\r\n              today.getFullYear(),\r\n              today.getMonth(),\r\n              0\r\n            );\r\n            startDate = start.toISOString().split(\"T\")[0];\r\n            endDate = lastMonthEnd.toISOString().split(\"T\")[0];\r\n            break;\r\n          default:\r\n            startDate = endDate;\r\n        }\r\n      }\r\n\r\n      // Fetch phone count with date range from Next.js API\r\n      const response = await fetch(`/api/phone-count`);\r\n      const result = await response.json();\r\n\r\n      if (!response.ok || !result.success) {\r\n        setPhoneCountData({ total: 0, datesWithData: 0 });\r\n      } else {\r\n        // Calculate total for date range from result.data { \"2025-11-23\": 3, ... }\r\n        let total = 0;\r\n        let datesCount = 0;\r\n\r\n        // Compare dates as strings (YYYY-MM-DD format)\r\n        Object.keys(result.data || {}).forEach((dateStr) => {\r\n          // dateStr is already in YYYY-MM-DD format\r\n          if (dateStr >= startDate && dateStr <= endDate) {\r\n            total += result.data[dateStr];\r\n            datesCount++;\r\n          }\r\n        });\r\n\r\n        setPhoneCountData({\r\n          total: total,\r\n          datesWithData: datesCount,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      setPhoneCountData({ total: 0, datesWithData: 0 });\r\n    } finally {\r\n      setPhoneCountLoading(false);\r\n    }\r\n  }, [dateRange, customDateStart, customDateEnd]);\r\n  const fetchPhoneLeadsData = useCallback(async () => {\r\n    try {\r\n      setPhoneLeadsLoading(true);\r\n      // Fetch all phone leads data grouped by date (no date filter = get all dates)\r\n      const response = await fetch(`/api/facebook-ads-phone-leads`);\r\n      const result = await response.json();\r\n      if (result.success && result.data) {\r\n        // Store phone leads count for each date\r\n        // result.data format: { \"2024-11-23\": 5, \"2024-11-22\": 3, ... }\r\n        setPhoneLeadsData(result.data);\r\n      } else {\r\n        setPhoneLeadsData({});\r\n      }\r\n    } catch (err) {\r\n      setPhoneLeadsData({});\r\n    } finally {\r\n      setPhoneLeadsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchDailySummaryData = useCallback(async () => {\r\n    try {\r\n      setDailySummaryLoading(true);\r\n      // Fetch last 30 days data from Facebook Ads API with daily breakdown\r\n      const url = `https://believable-ambition-production.up.railway.app/api/facebook-ads-campaigns?level=ad&date_preset=last_30d&time_increment=1`;\r\n      const response = await fetch(url);\r\n      const result: ApiResponse = await response.json();\r\n      if (!response.ok || !result.success) {\r\n        setDailySummaryData([]);\r\n      } else {\r\n        setDailySummaryData(result.data || []);\r\n        // Fetch phone leads data for all dates\r\n        fetchPhoneLeadsData();\r\n      }\r\n    } catch (err) {\r\n      setDailySummaryData([]);\r\n    } finally {\r\n      setDailySummaryLoading(false);\r\n    }\r\n  }, [fetchPhoneLeadsData]);\r\n\r\n  // Fetch adset-level insights for TOP Ad Set table\r\n  const fetchAdsetInsights = useCallback(async () => {\r\n    try {\r\n      setAdsetInsightsLoading(true);\r\n      let url = `https://believable-ambition-production.up.railway.app/api/facebook-ads-campaigns?level=adset`;\r\n\r\n      if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n        const timeRange = JSON.stringify({\r\n          since: customDateStart,\r\n          until: customDateEnd,\r\n        });\r\n        url += `&time_range=${encodeURIComponent(timeRange)}`;\r\n      } else {\r\n        url += `&date_preset=${dateRange}`;\r\n      }\r\n\r\n      const response = await fetch(url);\r\n      const result: ApiResponse = await response.json();\r\n\r\n      if (!response.ok || !result.success) {\r\n        setAdsetInsights([]);\r\n      } else {\r\n        // Deduplicate adset data\r\n        const uniqueData = new Map<string, AdInsight>();\r\n        result.data.forEach((item) => {\r\n          const key = item.adset_id;\r\n          if (uniqueData.has(key)) {\r\n            const existing = uniqueData.get(key)!;\r\n            if (item.actions) {\r\n              if (!existing.actions) existing.actions = [];\r\n              item.actions.forEach((action) => {\r\n                const existingAction = existing.actions!.find(\r\n                  (a) => a.action_type === action.action_type\r\n                );\r\n                if (existingAction) {\r\n                  existingAction.value = String(\r\n                    parseInt(existingAction.value || \"0\") +\r\n                    parseInt(action.value || \"0\")\r\n                  );\r\n                } else {\r\n                  existing.actions!.push({ ...action });\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            uniqueData.set(key, { ...item });\r\n          }\r\n        });\r\n        setAdsetInsights(Array.from(uniqueData.values()));\r\n      }\r\n    } catch (err) {\r\n      setAdsetInsights([]);\r\n    } finally {\r\n      setAdsetInsightsLoading(false);\r\n    }\r\n  }, [dateRange, customDateStart, customDateEnd]);\r\n\r\n  // ============ Fetch Page 2 Data ============\r\n  const fetchPage2Insights = useCallback(async () => {\r\n    try {\r\n      setPage2Loading(true);\r\n      setPage2Error(null);\r\n\r\n      // ‡πÉ‡∏ä‡πâ Railway API ‡πÅ‡∏ó‡∏ô local API\r\n      let url = `https://believable-ambition-production.up.railway.app/api/facebook-ads-campaigns`;\r\n      const params = new URLSearchParams();\r\n\r\n      // Set ad_account_id for Page 2\r\n      params.append(\"ad_account_id\", \"act_869492750129928\");\r\n\r\n      // Set level to ad\r\n      params.append(\"level\", \"ad\");\r\n\r\n      // Add filtering for messaging actions\r\n      const filtering = JSON.stringify([\r\n        {\r\n          field: \"action_type\",\r\n          operator: \"IN\",\r\n          value: [\r\n            \"onsite_conversion.messaging_first_reply\",\r\n            \"onsite_conversion.total_messaging_connection\",\r\n          ],\r\n        },\r\n      ]);\r\n      params.append(\"filtering\", filtering);\r\n      params.append(\"action_breakdowns\", \"action_type\");\r\n\r\n      // ‡πÉ‡∏ä‡πâ date range ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Page 1\r\n      if (dateRange === \"custom\" && customDateStart && customDateEnd) {\r\n        const timeRange = JSON.stringify({\r\n          since: customDateStart,\r\n          until: customDateEnd,\r\n        });\r\n        params.append(\"time_range\", timeRange);\r\n      } else {\r\n        params.append(\"date_preset\", dateRange);\r\n      }\r\n\r\n      const response = await fetch(`${url}?${params.toString()}`);\r\n      const result = await response.json();\r\n\r\n      if (!response.ok || !result.success) {\r\n        setPage2Error(result.error || \"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Page 2 ‡πÑ‡∏î‡πâ\");\r\n        setPage2Insights([]);\r\n        setPage2Summary({\r\n          totalSpend: 0,\r\n          totalImpressions: 0,\r\n          totalClicks: 0,\r\n          totalAds: 0,\r\n          avgCtr: 0,\r\n          avgCpc: 0,\r\n          avgCpm: 0,\r\n          total_messaging_first_reply: 0,\r\n          total_messaging_connection: 0,\r\n        });\r\n      } else {\r\n        setPage2Insights(result.data || []);\r\n        // Map API summary fields to state\r\n        setPage2Summary({\r\n          totalSpend: result.summary?.total_spend || 0,\r\n          totalImpressions: result.summary?.total_impressions || 0,\r\n          totalClicks: result.summary?.total_clicks || 0,\r\n          totalAds: result.data?.length || 0,\r\n          avgCtr: result.summary?.total_impressions > 0 ? (result.summary?.total_clicks / result.summary?.total_impressions) * 100 : 0,\r\n          avgCpc: result.summary?.total_clicks > 0 ? result.summary?.total_spend / result.summary?.total_clicks : 0,\r\n          avgCpm: result.summary?.total_impressions > 0 ? (result.summary?.total_spend / result.summary?.total_impressions) * 1000 : 0,\r\n          total_messaging_first_reply: result.summary?.total_messaging_first_reply || 0,\r\n          total_messaging_connection: result.summary?.total_messaging_connection || 0,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      setPage2Error(err instanceof Error ? err.message : \"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î\");\r\n      setPage2Insights([]);\r\n    } finally {\r\n      setPage2Loading(false);\r\n    }\r\n  }, [dateRange, customDateStart, customDateEnd]);\r\n\r\n  // ============ Fetch Page 2 Balance ============\r\n  const fetchPage2Balance = useCallback(async () => {\r\n    try {\r\n      setPage2BalanceLoading(true);\r\n      const response = await fetch(\"/api/facebook-ads-balance-page2\");\r\n      const result = await response.json();\r\n\r\n      if (!response.ok || !result.success) {\r\n        setPage2Balance(0);\r\n        setPage2AmountSpent(0);\r\n      } else {\r\n        setPage2Balance(result.data.available_balance || result.data.balance || 0);\r\n        setPage2AmountSpent(result.data.amount_spent || 0);\r\n        setPage2Currency(result.data.currency || \"THB\");\r\n      }\r\n    } catch (err) {\r\n      setPage2Balance(0);\r\n      setPage2AmountSpent(0);\r\n    } finally {\r\n      setPage2BalanceLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loadAllData = async () => {\r\n      try {\r\n        await Promise.all([\r\n          fetchInsights(),\r\n          fetchGoogleSheetsData(),\r\n          fetchGoogleAdsData(),\r\n          fetchFacebookBalance(),\r\n          fetchPhoneCount(),\r\n          fetchDailySummaryData(),\r\n          fetchAdsetInsights(),\r\n          fetchPage2Insights(),\r\n          fetchPage2Balance(),\r\n        ]);\r\n      } catch (error) {\r\n        setError(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\");\r\n        setLoading(false);\r\n      }\r\n    };\r\n    loadAllData();\r\n    // Auto-refresh every 2 minutes (120000ms) in background - ‡∏•‡∏î frequency ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Rate Limit\r\n    const refreshInterval = setInterval(() => {\r\n      Promise.all([\r\n        fetchInsights(true), // true = background refresh (‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á loading state)\r\n        fetchGoogleSheetsData(),\r\n        fetchGoogleAdsData(),\r\n        fetchFacebookBalance(),\r\n        fetchPhoneCount(),\r\n        fetchDailySummaryData(),\r\n        fetchAdsetInsights(),\r\n        fetchPage2Insights(),\r\n        fetchPage2Balance(),\r\n      ]);\r\n    }, 120000); // 120000ms = 2 minutes (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏ô‡∏≤‡∏ó‡∏µ)\r\n    // Cleanup interval on unmount\r\n    return () => {\r\n      clearInterval(refreshInterval);\r\n    };\r\n  }, [\r\n    fetchInsights,\r\n    fetchGoogleSheetsData,\r\n    fetchGoogleAdsData,\r\n    fetchFacebookBalance,\r\n    fetchPhoneCount,\r\n    fetchDailySummaryData,\r\n    fetchAdsetInsights,\r\n    fetchPage2Insights,\r\n    fetchPage2Balance,\r\n  ]);\r\n  // Monitor adCreatives changes\r\n  useEffect(() => {\r\n    // adCreatives updated\r\n  }, [adCreatives]);\r\n  const formatNumber = (value: string | number) => {\r\n    const num = typeof value === \"string\" ? parseFloat(value) : value;\r\n    return isNaN(num)\r\n      ? \"‚Äî\"\r\n      : num.toLocaleString(\"th-TH\", { maximumFractionDigits: 2 });\r\n  };\r\n  const formatCurrency = (value: string | number) => {\r\n    const num = typeof value === \"string\" ? parseFloat(value) : value;\r\n    return isNaN(num)\r\n      ? \"‚Äî\"\r\n      : `‡∏ø${num.toLocaleString(\"th-TH\", {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      })}`;\r\n  };\r\n  const formatPercentage = (value: string | number) => {\r\n    const num = typeof value === \"string\" ? parseFloat(value) : value;\r\n    return isNaN(num)\r\n      ? \"‚Äî\"\r\n      : `${num.toLocaleString(\"th-TH\", {\r\n        minimumFractionDigits: 2,\r\n        maximumFractionDigits: 2,\r\n      })}%`;\r\n  };\r\n  const getResultsByActionType = (\r\n    actions: Action[] | undefined,\r\n    actionType: string\r\n  ) => {\r\n    if (!actions) return 0;\r\n    const action = actions.find((a) => a.action_type === actionType);\r\n    return action ? parseInt(action.value || \"0\") : 0;\r\n  };\r\n  const getTotalResults = () => {\r\n    let total = 0;\r\n    insights.forEach((ad) => {\r\n      if (ad.actions) {\r\n        const messagingAction = ad.actions.find(\r\n          (action) =>\r\n            action.action_type === \"onsite_conversion.messaging_first_reply\"\r\n        );\r\n        if (messagingAction) {\r\n          const value = parseInt(messagingAction.value || \"0\");\r\n          total += value;\r\n        }\r\n      }\r\n    });\r\n    return total;\r\n  };\r\n  const getTotalMessagingConnection = () => {\r\n    let total = 0;\r\n    insights.forEach((ad) => {\r\n      if (ad.actions) {\r\n        const messagingAction = ad.actions.find(\r\n          (action) =>\r\n            action.action_type ===\r\n            \"onsite_conversion.total_messaging_connection\"\r\n        );\r\n        if (messagingAction) {\r\n          const value = parseInt(messagingAction.value || \"0\");\r\n          total += value;\r\n        }\r\n      }\r\n    });\r\n    return total;\r\n  };\r\n  const getTotalLeads = () => {\r\n    let total = 0;\r\n    insights.forEach((ad) => {\r\n      if (ad.actions) {\r\n        const leadAction = ad.actions.find(\r\n          (action) => action.action_type === \"lead\"\r\n        );\r\n        if (leadAction) {\r\n          const value = parseInt(leadAction.value || \"0\");\r\n          total += value;\r\n        }\r\n      }\r\n    });\r\n    return total;\r\n  };\r\n  const handleDateRangeChange = (value: string) => {\r\n    setDateRange(value);\r\n    if (value === \"custom\") {\r\n      const today = new Date().toISOString().split(\"T\")[0];\r\n      if (!customDateStart) setCustomDateStart(today);\r\n      if (!customDateEnd) setCustomDateEnd(today);\r\n      setShowDatePicker(true);\r\n    } else {\r\n      setShowDatePicker(false);\r\n    }\r\n  };\r\n  const applyCustomDateRange = () => {\r\n    if (customDateStart && customDateEnd) {\r\n      setShowDatePicker(false);\r\n      setTimeout(() => {\r\n        setDateRange(\"custom\");\r\n      }, 0);\r\n    }\r\n  };\r\n  // Filter insights based on main date range (‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≤‡∏Å üìä ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°)\r\n  const getTopAdsFilteredInsights = useCallback(() => {\r\n    // ‡πÉ‡∏ä‡πâ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö main dateRange (üìä ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°)\r\n    return insights;\r\n  }, [insights, dateRange]);\r\n  const filteredInsights = insights;\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mb-6\"></div>\r\n          <p className=\"text-gray-700 text-xl font-semibold\">\r\n            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...\r\n          </p>\r\n          <p className=\"text-gray-500 text-sm mt-2\">‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  if (error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\r\n        <div className=\"bg-white rounded-lg shadow-lg p-8 max-w-2xl w-full\">\r\n          <div className=\"text-red-500 text-5xl mb-4 text-center\">‚ö†Ô∏è</div>\r\n          <h2 className=\"text-xl font-bold text-gray-800 mb-4 text-center\">\r\n            ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î\r\n          </h2>\r\n          <p className=\"text-gray-600 mb-6 text-center\">{error}</p>\r\n          <div className=\"flex gap-3\">\r\n            <button\r\n              onClick={() => {\r\n                setError(null);\r\n                setLoading(true);\r\n                fetchInsights(false);\r\n              }}\r\n              className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded transition-colors\"\r\n            >\r\n              ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50\">\r\n      {/* Back Button */}\r\n      <div className=\"bg-white border-b border-gray-200 px-3 sm:px-6 py-3\">\r\n        <button\r\n          onClick={() => router.push(\"/home\")}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg transition-all shadow-md hover:shadow-lg font-medium text-sm\"\r\n        >\r\n          <span className=\"text-lg\">‚Üê</span>\r\n          <span>‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>\r\n        </button>\r\n      </div>\r\n      {/* Top Navigation Bar with Date Range Tabs */}\r\n      <div className=\"bg-white shadow-md border-b border-gray-200\">\r\n        <div className=\"px-3 sm:px-6 py-3\">\r\n          {/* Desktop View: Tabs */}\r\n          <div className=\"hidden md:flex items-center space-x-2\">\r\n            <button className=\"px-3 sm:px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium text-xs sm:text-sm\">\r\n              üìä ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°\r\n            </button>\r\n            <button\r\n              onClick={() => handleDateRangeChange(\"today\")}\r\n              className={`px-3 sm:px-6 py-2 rounded-lg transition-colors font-medium text-xs sm:text-sm ${dateRange === \"today\"\r\n                ? \"bg-blue-500 text-white shadow-md\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                }`}\r\n            >\r\n              ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ\r\n            </button>\r\n            <button\r\n              onClick={() => handleDateRangeChange(\"yesterday\")}\r\n              className={`px-6 py-2 rounded-lg transition-colors font-medium text-sm ${dateRange === \"yesterday\"\r\n                ? \"bg-blue-500 text-white shadow-md\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                }`}\r\n            >\r\n              ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô\r\n            </button>\r\n            <button\r\n              onClick={() => handleDateRangeChange(\"last_7d\")}\r\n              className={`px-6 py-2 rounded-lg transition-colors font-medium text-sm ${dateRange === \"last_7d\"\r\n                ? \"bg-blue-500 text-white shadow-md\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                }`}\r\n            >\r\n              7 ‡∏ß‡∏±‡∏ô\r\n            </button>\r\n            <button\r\n              onClick={() => handleDateRangeChange(\"last_30d\")}\r\n              className={`px-6 py-2 rounded-lg transition-colors font-medium text-sm ${dateRange === \"last_30d\"\r\n                ? \"bg-blue-500 text-white shadow-md\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                }`}\r\n            >\r\n              30 ‡∏ß‡∏±‡∏ô\r\n            </button>\r\n            <button\r\n              onClick={() => handleDateRangeChange(\"this_month\")}\r\n              className={`px-6 py-2 rounded-lg transition-colors font-medium text-sm ${dateRange === \"this_month\"\r\n                ? \"bg-blue-500 text-white shadow-md\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                }`}\r\n            >\r\n              ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ\r\n            </button>\r\n            <button\r\n              onClick={() => handleDateRangeChange(\"custom\")}\r\n              className={`px-6 py-2 rounded-lg transition-colors font-medium text-sm ${dateRange === \"custom\"\r\n                ? \"bg-blue-500 text-white shadow-md\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                }`}\r\n            >\r\n              üóìÔ∏è ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á\r\n            </button>\r\n            {dateRange === \"custom\" && customDateStart && customDateEnd && (\r\n              <span className=\"text-xs text-gray-600 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200 font-medium ml-2\">\r\n                {customDateStart} ‡∏ñ‡∏∂‡∏á {customDateEnd}\r\n              </span>\r\n            )}\r\n            {/* Spacer to push page buttons to the right */}\r\n            <div className=\"flex-1\"></div>\r\n            {/* Page Selection Buttons */}\r\n            <div className=\"flex items-center gap-2 border-l border-gray-300 pl-4 ml-2\">\r\n              <button\r\n                onClick={() => setSelectedPage(1)}\r\n                className={`px-4 py-2 rounded-lg transition-colors font-medium text-sm ${selectedPage === 1\r\n                  ? \"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                  }`}\r\n              >\r\n                Page 1\r\n              </button>\r\n              <button\r\n                onClick={() => setSelectedPage(2)}\r\n                className={`px-4 py-2 rounded-lg transition-colors font-medium text-sm ${selectedPage === 2\r\n                  ? \"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                  }`}\r\n              >\r\n                Page 2\r\n              </button>\r\n              <button\r\n                onClick={() => setSelectedPage(3)}\r\n                className={`px-4 py-2 rounded-lg transition-colors font-medium text-sm ${selectedPage === 3\r\n                  ? \"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                  }`}\r\n              >\r\n                Page 3\r\n              </button>\r\n              <button\r\n                onClick={() => setSelectedPage(4)}\r\n                className={`px-4 py-2 rounded-lg transition-colors font-medium text-sm ${selectedPage === 4\r\n                  ? \"bg-gradient-to-r from-purple-600 to-pink-600 text-white shadow-md\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n                  }`}\r\n              >\r\n                Page 4\r\n              </button>\r\n            </div>\r\n          </div>\r\n          {/* Mobile View: Dropdown */}\r\n          <div className=\"md:hidden space-y-3\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm font-semibold text-gray-700\">üìÖ</span>\r\n              <select\r\n                value={dateRange}\r\n                onChange={(e) => handleDateRangeChange(e.target.value)}\r\n                className=\"flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white text-gray-700 font-medium text-sm\"\r\n              >\r\n                <option value=\"today\">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</option>\r\n                <option value=\"yesterday\">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏ô</option>\r\n                <option value=\"last_7d\">7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</option>\r\n                <option value=\"last_14d\">14 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</option>\r\n                <option value=\"last_30d\">30 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤</option>\r\n                <option value=\"this_month\">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</option>\r\n                <option value=\"custom\">üóìÔ∏è ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á‡πÄ‡∏≠‡∏á</option>\r\n              </select>\r\n            </div>\r\n            {dateRange === \"custom\" && customDateStart && customDateEnd && (\r\n              <div className=\"text-xs text-gray-600 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200 font-medium\">\r\n                {customDateStart} ‡∏ñ‡∏∂‡∏á {customDateEnd}\r\n              </div>\r\n            )}\r\n            {/* Mobile Page Selection */}\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm font-semibold text-gray-700\">üìÑ</span>\r\n              <select\r\n                value={selectedPage}\r\n                onChange={(e) =>\r\n                  setSelectedPage(Number(e.target.value) as 1 | 2 | 3 | 4)\r\n                }\r\n                className=\"flex-1 px-4 py-2 border-2 border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white text-gray-700 font-medium text-sm\"\r\n              >\r\n                <option value={1}>Page 1</option>\r\n                <option value={2}>Page 2</option>\r\n                <option value={3}>Page 3</option>\r\n                <option value={4}>Page 4</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Calendar Date Picker */}\r\n      {showDatePicker && (\r\n        <div\r\n          className=\"modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              setShowDatePicker(false);\r\n            }\r\n          }}\r\n        >\r\n          <div\r\n            className=\"date-picker-container bg-white rounded-2xl shadow-2xl p-8 max-w-3xl w-full\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n              <h3 className=\"text-2xl font-bold text-gray-800\">\r\n                ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n              </h3>\r\n              <button\r\n                onClick={() => setShowDatePicker(false)}\r\n                className=\"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2 transition-all text-2xl w-10 h-10 flex items-center justify-center\"\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n              <div>\r\n                <label className=\"block text-base font-bold text-gray-700 mb-4\">\r\n                  üìÖ ‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                </label>\r\n                <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-xl border-2 border-blue-300 shadow-md\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={\r\n                      customDateStart || new Date().toISOString().split(\"T\")[0]\r\n                    }\r\n                    onChange={(e) => setCustomDateStart(e.target.value)}\r\n                    className=\"w-full px-5 py-4 border-2 border-gray-300 rounded-xl text-lg font-medium focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-base font-bold text-gray-700 mb-4\">\r\n                  üìÖ ‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                </label>\r\n                <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-xl border-2 border-orange-300 shadow-md\">\r\n                  <input\r\n                    type=\"date\"\r\n                    value={\r\n                      customDateEnd || new Date().toISOString().split(\"T\")[0]\r\n                    }\r\n                    onChange={(e) => setCustomDateEnd(e.target.value)}\r\n                    className=\"w-full px-5 py-4 border-2 border-gray-300 rounded-xl text-lg font-medium focus:outline-none focus:ring-4 focus:ring-orange-300 focus:border-orange-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex space-x-4 justify-end\">\r\n              <button\r\n                onClick={() => setShowDatePicker(false)}\r\n                className=\"px-10 py-4 text-base border-2 border-gray-300 rounded-xl hover:bg-gray-100 transition-colors font-semibold text-gray-700\"\r\n              >\r\n                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n              </button>\r\n              <button\r\n                onClick={applyCustomDateRange}\r\n                className=\"px-10 py-4 text-base bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all font-semibold\"\r\n              >\r\n                ‚úì ‡∏ï‡∏Å‡∏•‡∏á\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Video Preview Modal */}\r\n      {showVideoModal && selectedAdForPreview && (\r\n        <div\r\n          className=\"modal-overlay fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            width: \"100vw\",\r\n            height: \"100vh\",\r\n            margin: 0,\r\n            padding: \"1rem\",\r\n          }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              setShowVideoModal(false);\r\n              setSelectedAdForPreview(null);\r\n            }\r\n          }}\r\n        >\r\n          <div\r\n            className=\"video-modal-container bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"sticky top-0 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 px-6 py-4 flex items-center justify-between z-10 rounded-t-2xl\">\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-xl font-bold text-white truncate\">\r\n                  üéØ {selectedAdForPreview.ad_name}\r\n                </h3>\r\n                <div className=\"flex flex-col sm:flex-row sm:gap-4 mt-1\">\r\n                  <p className=\"text-sm text-white/80\">\r\n                    üìÅ Campaign: {selectedAdForPreview.campaign_name}\r\n                  </p>\r\n                  <p className=\"text-sm text-white/80\">\r\n                    üìÇ Ad Set: {selectedAdForPreview.adset_name || \"‚Äî\"}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={() => {\r\n                  setShowVideoModal(false);\r\n                  setSelectedAdForPreview(null);\r\n                }}\r\n                className=\"text-white hover:text-gray-200 hover:bg-white/20 rounded-full p-2 transition-all text-2xl w-10 h-10 flex items-center justify-center ml-4\"\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n            <div className=\"p-6\">\r\n              {/* Video/Post Preview */}\r\n              <div className=\"mb-6\">\r\n                {(() => {\r\n                  const creative = adCreatives.get(selectedAdForPreview.ad_id);\r\n                  const effectiveStoryId = creative?.effective_object_story_id;\r\n                  const videoId =\r\n                    creative?.object_story_spec?.video_data?.video_id ||\r\n                    creative?.video_id;\r\n                  const thumbnailUrl =\r\n                    creative?.thumbnail_url ||\r\n                    creative?.object_story_spec?.video_data?.image_url ||\r\n                    creative?.image_url;\r\n                  // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ effective_object_story_id ‡πÉ‡∏ä‡πâ EmbeddedPost ‡∏Å‡πà‡∏≠‡∏ô\r\n                  if (effectiveStoryId) {\r\n                    const postUrl = `https://www.facebook.com/${effectiveStoryId.replace(\r\n                      \"_\",\r\n                      \"/posts/\"\r\n                    )}`;\r\n                    return (\r\n                      <div className=\"space-y-4\">\r\n                        {/* Facebook Embedded Post */}\r\n                        <div className=\"bg-white rounded-xl overflow-hidden shadow-lg\">\r\n                          <FacebookProvider appId=\"1086145253509335\">\r\n                            <EmbeddedPost\r\n                              href={postUrl}\r\n                              width=\"100%\"\r\n                              showText={true}\r\n                            />\r\n                          </FacebookProvider>\r\n                        </div>\r\n                        {/* Fallback: Open in Facebook Button */}\r\n                        <div className=\"flex justify-center\">\r\n                          <a\r\n                            href={postUrl}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"flex items-center justify-center gap-2 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium shadow-lg\"\r\n                          >\r\n                            <span>üì±</span>\r\n                            <span>‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏π‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏ô Facebook</span>\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  // ‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ local video file ‡∏Å‡πà‡∏≠‡∏ô (‡∏à‡∏≤‡∏Å /images/video/{video_id}.mp4)\r\n                  const localVideoPath = videoId ? `/images/video/${videoId}.mp4` : null;\r\n                  const videoSource = creative?.video_source;\r\n\r\n                  // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ videoId - ‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏≤‡∏Å local ‡∏Å‡πà‡∏≠‡∏ô\r\n                  if (videoId) {\r\n                    return (\r\n                      <div className=\"space-y-4\">\r\n                        {/* Video Player - ‡∏•‡∏≠‡∏á‡∏à‡∏≤‡∏Å local ‡∏Å‡πà‡∏≠‡∏ô */}\r\n                        <div className=\"rounded-xl overflow-hidden bg-black shadow-lg\">\r\n                          <video\r\n                            controls\r\n                            autoPlay\r\n                            className=\"w-full h-auto max-h-[60vh]\"\r\n                            poster={thumbnailUrl}\r\n                            onError={(e) => {\r\n                              console.log(\"‚ùå [Video Error] Local video not found, trying Facebook source\");\r\n                              const videoEl = e.target as HTMLVideoElement;\r\n                              // ‡∏ñ‡πâ‡∏≤ local ‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ video_source ‡∏à‡∏≤‡∏Å Facebook\r\n                              if (videoSource && videoEl.src !== videoSource) {\r\n                                videoEl.src = videoSource;\r\n                              } else {\r\n                                // ‡∏ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á local ‡πÅ‡∏•‡∏∞ Facebook ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏™‡∏î‡∏á fallback\r\n                                videoEl.style.display = \"none\";\r\n                                const parent = videoEl.parentElement;\r\n                                if (parent && thumbnailUrl) {\r\n                                  parent.innerHTML = `\r\n                                    <div class=\"relative\">\r\n                                      <img src=\"${thumbnailUrl}\" alt=\"Video thumbnail\" class=\"w-full h-auto\" />\r\n                                      <div class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40\">\r\n                                        <span class=\"text-white text-4xl\">‚ö†Ô∏è ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ</span>\r\n                                      </div>\r\n                                    </div>\r\n                                  `;\r\n                                }\r\n                              }\r\n                            }}\r\n                          >\r\n                            <source src={localVideoPath || videoSource || ''} type=\"video/mp4\" />\r\n                            ‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\r\n                          </video>\r\n                        </div>\r\n                        {/* Open in Facebook Buttons */}\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                          <a\r\n                            href={`https://www.facebook.com/reel/${videoId}`}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium shadow-lg text-sm sm:text-base\"\r\n                          >\r\n                            <span>üé¨</span>\r\n                            <span>‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô Reel</span>\r\n                          </a>\r\n                          <a\r\n                            href={`https://www.facebook.com/watch/?v=${videoId}`}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"flex items-center justify-center gap-2 px-6 py-3 bg-gray-700 hover:bg-gray-800 text-white rounded-lg transition-colors font-medium shadow-lg text-sm sm:text-base\"\r\n                          >\r\n                            <span>‚ñ∂Ô∏è</span>\r\n                            <span>‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô Video</span>\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡πÑ‡∏°‡πà‡∏°‡∏µ video)\r\n                  if (thumbnailUrl) {\r\n                    return (\r\n                      <div className=\"rounded-xl overflow-hidden bg-gray-100 shadow-lg\">\r\n                        <img\r\n                          src={thumbnailUrl}\r\n                          alt={selectedAdForPreview.ad_name}\r\n                          className=\"w-full h-auto\"\r\n                          onError={(e) => {\r\n                            (e.target as HTMLImageElement).style.display =\r\n                              \"none\";\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    );\r\n                  }\r\n                  // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•\r\n                  return (\r\n                    <div className=\"aspect-video bg-gray-200 rounded-xl flex items-center justify-center\">\r\n                      <div className=\"text-center\">\r\n                        <span className=\"text-6xl mb-4 block\">üé¨</span>\r\n                        <p className=\"text-gray-600\">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n              {/* Ad Performance Stats */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n                <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">üí∞ Spent</div>\r\n                  <div className=\"text-xl font-bold text-blue-700\">\r\n                    {formatCurrency(selectedAdForPreview.spend)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-green-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">üí¨ New Inbox</div>\r\n                  <div className=\"text-xl font-bold text-green-700\">\r\n                    {getResultsByActionType(\r\n                      selectedAdForPreview.actions,\r\n                      \"onsite_conversion.messaging_first_reply\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-teal-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">\r\n                    üì® Total Inbox\r\n                  </div>\r\n                  <div className=\"text-xl font-bold text-teal-700\">\r\n                    {getResultsByActionType(\r\n                      selectedAdForPreview.actions,\r\n                      \"onsite_conversion.total_messaging_connection\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-purple-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">\r\n                    üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                  </div>\r\n                  <div className=\"text-xl font-bold text-purple-700\">\r\n                    {topAdsPhoneLeads.get(selectedAdForPreview.ad_id) || 0}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* CTR, CPM, CPC Stats */}\r\n              <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n                <div className=\"bg-orange-50 rounded-lg p-4 text-center\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">üìä CTR</div>\r\n                  <div className=\"text-2xl font-bold text-orange-700\">\r\n                    {formatPercentage(selectedAdForPreview.ctr)}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 mt-1\">\r\n                    Click-Through Rate\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-pink-50 rounded-lg p-4 text-center\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">üíµ CPM</div>\r\n                  <div className=\"text-2xl font-bold text-pink-700\">\r\n                    {formatCurrency(selectedAdForPreview.cpm)}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 mt-1\">\r\n                    Cost per 1,000 Impressions\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-indigo-50 rounded-lg p-4 text-center\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">üñ±Ô∏è CPC</div>\r\n                  <div className=\"text-2xl font-bold text-indigo-700\">\r\n                    {formatCurrency(selectedAdForPreview.cpc)}\r\n                  </div>\r\n                  <div className=\"text-xs text-gray-500 mt-1\">\r\n                    Cost per Click\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Ad Details */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h4 className=\"font-semibold text-gray-800 mb-3\">\r\n                    üìà Performance Details\r\n                  </h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Impressions:</span>\r\n                      <span className=\"font-medium\">\r\n                        {formatNumber(selectedAdForPreview.impressions)}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Clicks:</span>\r\n                      <span className=\"font-medium\">\r\n                        {formatNumber(selectedAdForPreview.clicks)}\r\n                      </span>\r\n                    </div>\r\n                    {selectedAdForPreview.reach && (\r\n                      <div className=\"flex justify-between\">\r\n                        <span className=\"text-gray-600\">Reach:</span>\r\n                        <span className=\"font-medium\">\r\n                          {formatNumber(selectedAdForPreview.reach)}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">ThruPlay:</span>\r\n                      <span className=\"font-medium\">\r\n                        {(() => {\r\n                          const thruplay = selectedAdForPreview.actions?.find(\r\n                            (action) => action.action_type === \"video_view\"\r\n                          );\r\n                          return thruplay ? formatNumber(thruplay.value) : \"‚Äî\";\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Cost per Inbox:</span>\r\n                      <span className=\"font-medium\">\r\n                        {(() => {\r\n                          const costPerMessaging =\r\n                            selectedAdForPreview.cost_per_action_type?.find(\r\n                              (cost) =>\r\n                                cost.action_type ===\r\n                                \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                          return costPerMessaging\r\n                            ? formatCurrency(costPerMessaging.value)\r\n                            : \"‚Äî\";\r\n                        })()}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-gray-50 rounded-lg p-4\">\r\n                  <h4 className=\"font-semibold text-gray-800 mb-3\">\r\n                    üìã Campaign & Ad Set Info\r\n                  </h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Campaign:</span>\r\n                      <span\r\n                        className=\"font-medium text-right max-w-[180px] truncate\"\r\n                        title={selectedAdForPreview.campaign_name}\r\n                      >\r\n                        {selectedAdForPreview.campaign_name}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Ad Set:</span>\r\n                      <span\r\n                        className=\"font-medium text-right max-w-[180px] truncate\"\r\n                        title={selectedAdForPreview.adset_name}\r\n                      >\r\n                        {selectedAdForPreview.adset_name || \"‚Äî\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Ad ID:</span>\r\n                      <span className=\"font-medium text-xs\">\r\n                        {selectedAdForPreview.ad_id}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Date Range:</span>\r\n                      <span className=\"font-medium\">\r\n                        {selectedAdForPreview.date_start}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Ad Set Detail Modal */}\r\n      {showAdSetModal && selectedAdSet && (\r\n        <div\r\n          className=\"modal-overlay fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\"\r\n          style={{\r\n            position: \"fixed\",\r\n            top: 0,\r\n            left: 0,\r\n            right: 0,\r\n            bottom: 0,\r\n            width: \"100vw\",\r\n            height: \"100vh\",\r\n            margin: 0,\r\n            padding: \"1rem\",\r\n          }}\r\n          onClick={(e) => {\r\n            if (e.target === e.currentTarget) {\r\n              setShowAdSetModal(false);\r\n              setSelectedAdSet(null);\r\n            }\r\n          }}\r\n        >\r\n          <div\r\n            className=\"video-modal-container bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {/* Header */}\r\n            <div className=\"sticky top-0 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 px-6 py-4 flex items-center justify-between z-10 rounded-t-2xl\">\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-xl font-bold text-white truncate\">\r\n                  üìä {selectedAdSet.adset_name}\r\n                </h3>\r\n                <p className=\"text-sm text-white/80 mt-1\">\r\n                  Campaign: {selectedAdSet.campaign_name}\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() => {\r\n                  setShowAdSetModal(false);\r\n                  setSelectedAdSet(null);\r\n                }}\r\n                className=\"text-white hover:text-gray-200 hover:bg-white/20 rounded-full p-2 transition-all text-2xl w-10 h-10 flex items-center justify-center ml-4\"\r\n              >\r\n                ‚úï\r\n              </button>\r\n            </div>\r\n\r\n            {/* Ad Set Summary */}\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\r\n                <div className=\"bg-blue-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß</div>\r\n                  <div className=\"text-xl font-bold text-blue-700\">\r\n                    {formatCurrency(selectedAdSet.spend)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-green-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">New Inbox</div>\r\n                  <div className=\"text-xl font-bold text-green-700\">\r\n                    {getResultsByActionType(\r\n                      selectedAdSet.actions,\r\n                      \"onsite_conversion.messaging_first_reply\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-purple-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">Total Inbox</div>\r\n                  <div className=\"text-xl font-bold text-purple-700\">\r\n                    {getResultsByActionType(\r\n                      selectedAdSet.actions,\r\n                      \"onsite_conversion.total_messaging_connection\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-cyan-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">ThruPlay</div>\r\n                  <div className=\"text-xl font-bold text-cyan-700\">\r\n                    {(() => {\r\n                      const thruplay = selectedAdSet.actions?.find(\r\n                        (action) => action.action_type === \"video_view\"\r\n                      );\r\n                      return thruplay ? formatNumber(thruplay.value) : \"‚Äî\";\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n                <div className=\"bg-orange-50 rounded-lg p-4\">\r\n                  <div className=\"text-sm text-gray-600 mb-1\">‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô/Inbox</div>\r\n                  <div className=\"text-xl font-bold text-orange-700\">\r\n                    {(() => {\r\n                      const spend = parseFloat(selectedAdSet.spend || \"0\");\r\n                      const inbox = getResultsByActionType(\r\n                        selectedAdSet.actions,\r\n                        \"onsite_conversion.total_messaging_connection\"\r\n                      );\r\n                      return inbox > 0 ? formatCurrency(spend / inbox) : \"‚Äî\";\r\n                    })()}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Ads List */}\r\n            <div className=\"p-6\">\r\n              <h4 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\">\r\n                üéØ Ads ‡πÉ‡∏ô Ad Set ‡∏ô‡∏µ‡πâ\r\n                <span className=\"bg-purple-100 text-purple-700 text-sm px-2 py-1 rounded-full\">\r\n                  {getAdsByAdSetId(selectedAdSet.adset_id).length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\r\n                </span>\r\n              </h4>\r\n\r\n              {getAdsByAdSetId(selectedAdSet.adset_id).length === 0 ? (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  <div className=\"text-4xl mb-2\">üí≠</div>\r\n                  <p>‡πÑ‡∏°‡πà‡∏û‡∏ö Ads ‡πÉ‡∏ô Ad Set ‡∏ô‡∏µ‡πâ</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead>\r\n                      <tr className=\"border-b-2 border-gray-200 bg-gray-50\">\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          #\r\n                        </th>\r\n                        <th className=\"text-left py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏£‡∏π‡∏õ\r\n                        </th>\r\n                        <th className=\"text-left py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ä‡∏∑‡πà‡∏≠ Ad\r\n                        </th>\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                        </th>\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          New Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          Total Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ä‡∏∑‡πà‡∏≠-‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                        </th>\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          ThruPlay\r\n                        </th>\r\n                        <th className=\"text-center py-3 px-2 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô/Inbox\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {getAdsByAdSetId(selectedAdSet.adset_id)\r\n                        .sort((a, b) => {\r\n                          const inboxA = getResultsByActionType(\r\n                            a.actions,\r\n                            \"onsite_conversion.total_messaging_connection\"\r\n                          );\r\n                          const inboxB = getResultsByActionType(\r\n                            b.actions,\r\n                            \"onsite_conversion.total_messaging_connection\"\r\n                          );\r\n                          return inboxB - inboxA;\r\n                        })\r\n                        .map((ad, idx) => {\r\n                          const creative = adCreatives.get(ad.ad_id);\r\n                          const thumbnailUrl =\r\n                            creative?.thumbnail_url ||\r\n                            creative?.image_url ||\r\n                            creative?.object_story_spec?.video_data?.image_url;\r\n                          const spend = parseFloat(ad.spend || \"0\");\r\n                          const inbox = getResultsByActionType(\r\n                            ad.actions,\r\n                            \"onsite_conversion.total_messaging_connection\"\r\n                          );\r\n                          const costPerInbox = inbox > 0 ? spend / inbox : 0;\r\n                          const phoneLeads =\r\n                            topAdsPhoneLeads.get(ad.ad_id) || 0;\r\n\r\n                          return (\r\n                            <tr\r\n                              key={ad.ad_id}\r\n                              className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer\"\r\n                              onClick={() => {\r\n                                setSelectedAdForPreview(ad);\r\n                                setShowVideoModal(true);\r\n                              }}\r\n                            >\r\n                              <td className=\"py-3 px-2 text-center text-gray-600 font-medium\">\r\n                                {idx + 1}\r\n                              </td>\r\n                              <td className=\"py-3 px-2\">\r\n                                {thumbnailUrl ? (\r\n                                  <img\r\n                                    src={thumbnailUrl}\r\n                                    alt=\"Ad thumbnail\"\r\n                                    className=\"w-12 h-12 object-cover rounded-lg shadow-sm\"\r\n                                  />\r\n                                ) : (\r\n                                  <div className=\"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400\">\r\n                                    üñºÔ∏è\r\n                                  </div>\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-3 px-2\">\r\n                                <div\r\n                                  className=\"text-gray-700 font-medium text-sm max-w-[200px] truncate\"\r\n                                  title={ad.ad_name}\r\n                                >\r\n                                  {ad.ad_name || \"‚Äî\"}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-3 px-2 text-center text-gray-700 font-semibold\">\r\n                                {formatCurrency(ad.spend)}\r\n                              </td>\r\n                              <td className=\"py-3 px-2 text-center font-semibold text-green-600\">\r\n                                {getResultsByActionType(\r\n                                  ad.actions,\r\n                                  \"onsite_conversion.messaging_first_reply\"\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-3 px-2 text-center font-semibold text-blue-600\">\r\n                                {getResultsByActionType(\r\n                                  ad.actions,\r\n                                  \"onsite_conversion.total_messaging_connection\"\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-3 px-2 text-center font-semibold text-purple-600\">\r\n                                {phoneLeads}\r\n                              </td>\r\n                              <td className=\"py-3 px-2 text-center font-semibold text-cyan-600\">\r\n                                {(() => {\r\n                                  const thruplay = ad.actions?.find(\r\n                                    (action) =>\r\n                                      action.action_type === \"video_view\"\r\n                                  );\r\n                                  return thruplay\r\n                                    ? formatNumber(thruplay.value)\r\n                                    : \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                              <td className=\"py-3 px-2 text-center text-gray-700\">\r\n                                {costPerInbox > 0\r\n                                  ? formatCurrency(costPerInbox)\r\n                                  : \"‚Äî\"}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Content Layout */}\r\n      <div className=\"px-3 sm:px-6 py-3 sm:py-6\">\r\n        {/* Page 1 Content */}\r\n        {selectedPage === 1 && (\r\n          <>\r\n            {/* Performance Cards and Tables in 3-Column Layout */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n              {/* Column 1: ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ + ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏° */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {facebookBalanceLoading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          `‡∏ø${facebookBalance.toLocaleString(\"th-TH\", {\r\n                            minimumFractionDigits: 2,\r\n                            maximumFractionDigits: 2,\r\n                          })}`\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üí∞ ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {formatCurrency(\r\n                          insights.reduce(\r\n                            (sum, ad) => sum + parseFloat(ad.spend || \"0\"),\r\n                            0\r\n                          )\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-blue-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dailySummaryLoading ? (\r\n                          <tr>\r\n                            <td\r\n                              colSpan={2}\r\n                              className=\"px-2 py-4 text-center text-xs\"\r\n                            >\r\n                              ‚è≥\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          (() => {\r\n                            const dailyData = new Map<string, { spend: number }>();\r\n                            dailySummaryData.forEach((ad) => {\r\n                              const date = ad.date_start;\r\n                              const existing = dailyData.get(date) || { spend: 0 };\r\n                              existing.spend += parseFloat(ad.spend || \"0\");\r\n                              dailyData.set(date, existing);\r\n                            });\r\n                            const sortedDates = Array.from(dailyData.keys()).sort(\r\n                              (a, b) =>\r\n                                new Date(b).getTime() - new Date(a).getTime()\r\n                            );\r\n                            const last30Days = sortedDates.slice(1, 31);\r\n                            return last30Days.map((date) => {\r\n                              const data = dailyData.get(date)!;\r\n                              return (\r\n                                <tr\r\n                                  key={date}\r\n                                  className=\"hover:bg-blue-50 border-b\"\r\n                                >\r\n                                  <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                    {new Date(date).toLocaleDateString(\"th-TH\", {\r\n                                      month: \"short\",\r\n                                      day: \"numeric\",\r\n                                    })}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-blue-600\">\r\n                                    {formatCurrency(data.spend)}\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            });\r\n                          })()\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 2: New Inbox & Total Inbox */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-teal-500 via-teal-600 to-cyan-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        New Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {getTotalResults()}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        Total Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {getTotalMessagingConnection()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-teal-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            New Inbox\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            Total Inbox\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dailySummaryLoading ? (\r\n                          <tr>\r\n                            <td\r\n                              colSpan={3}\r\n                              className=\"px-2 py-4 text-center text-xs\"\r\n                            >\r\n                              ‚è≥\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          (() => {\r\n                            const dailyData = new Map<\r\n                              string,\r\n                              { newInbox: number; totalInbox: number }\r\n                            >();\r\n                            dailySummaryData.forEach((ad) => {\r\n                              const date = ad.date_start;\r\n                              const existing = dailyData.get(date) || {\r\n                                newInbox: 0,\r\n                                totalInbox: 0,\r\n                              };\r\n                              existing.newInbox += getResultsByActionType(\r\n                                ad.actions,\r\n                                \"onsite_conversion.messaging_first_reply\"\r\n                              );\r\n                              existing.totalInbox += getResultsByActionType(\r\n                                ad.actions,\r\n                                \"onsite_conversion.total_messaging_connection\"\r\n                              );\r\n                              dailyData.set(date, existing);\r\n                            });\r\n                            const sortedDates = Array.from(dailyData.keys()).sort(\r\n                              (a, b) =>\r\n                                new Date(b).getTime() - new Date(a).getTime()\r\n                            );\r\n                            const last30Days = sortedDates.slice(1, 31);\r\n                            return last30Days.map((date) => {\r\n                              const data = dailyData.get(date)!;\r\n                              return (\r\n                                <tr\r\n                                  key={date}\r\n                                  className=\"hover:bg-teal-50 border-b\"\r\n                                >\r\n                                  <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                    {new Date(date).toLocaleDateString(\"th-TH\", {\r\n                                      month: \"short\",\r\n                                      day: \"numeric\",\r\n                                    })}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-green-600\">\r\n                                    {data.newInbox}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-teal-600\">\r\n                                    {data.totalInbox}\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            });\r\n                          })()\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 3: ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl text-center\">\r\n                  <div className=\"text-base sm:text-xl font-semibold mb-2 sm:mb-3 opacity-90\">\r\n                    üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                  </div>\r\n                  <div className=\"text-2xl sm:text-4xl font-bold\">\r\n                    {phoneCountLoading ? (\r\n                      <span className=\"text-3xl\">‚è≥</span>\r\n                    ) : (\r\n                      <div>{phoneCountData.total.toLocaleString()}</div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-purple-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {phoneLeadsLoading ? (\r\n                          <tr>\r\n                            <td\r\n                              colSpan={2}\r\n                              className=\"px-2 py-4 text-center text-xs\"\r\n                            >\r\n                              ‚è≥\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          Object.entries(phoneLeadsData)\r\n                            .sort(\r\n                              ([dateA], [dateB]) =>\r\n                                new Date(dateB).getTime() -\r\n                                new Date(dateA).getTime()\r\n                            )\r\n                            .slice(1)\r\n                            .map(([date, count]) => (\r\n                              <tr\r\n                                key={date}\r\n                                className=\"hover:bg-purple-50 border-b\"\r\n                              >\r\n                                <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                  {new Date(date).toLocaleDateString(\"th-TH\", {\r\n                                    month: \"short\",\r\n                                    day: \"numeric\",\r\n                                  })}\r\n                                </td>\r\n                                <td className=\"px-2 py-2 text-center text-xs font-semibold text-purple-600\">\r\n                                  {count}\r\n                                </td>\r\n                              </tr>\r\n                            ))\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* TOP Ads Section - Two Column Layout */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-8\">\r\n              {/* Left Column - TOP Ads Table */}\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üèÜ TOP {topAdsLimit === \"all\" ? \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" : topAdsLimit} Ads{\" \"}\r\n                    <span className=\"bg-gradient-to-r from-yellow-400 via-orange-400 to-red-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-xl font-bold shadow-xl\">\r\n                      ‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°\r\n                    </span>\r\n                  </h2>\r\n                  <div className=\"flex flex-col sm:flex-row gap-2 w-full\">\r\n                    {/* Sort By Buttons */}\r\n                    <div className=\"flex gap-2 flex-1\">\r\n                      <button\r\n                        onClick={() => setTopAdsSortBy(\"leads\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdsSortBy === \"leads\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üí¨ Total Inbox (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üí¨ Inbox</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setTopAdsSortBy(\"phone\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdsSortBy === \"phone\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setTopAdsSortBy(\"cost\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdsSortBy === \"cost\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üí∞ ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ô‡πâ‡∏≠‡∏¢ ‚Üí ‡∏°‡∏≤‡∏Å)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üí∞ Cost</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setTopAdsSortBy(\"thruplay\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdsSortBy === \"thruplay\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üé¨ ThruPlay (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üé¨ ThruPlay</span>\r\n                      </button>\r\n                    </div>\r\n                    {/* Top Ads Limit Dropdown */}\r\n                    <select\r\n                      value={topAdsLimit}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setTopAdsLimit(\r\n                          value === \"all\"\r\n                            ? \"all\"\r\n                            : (Number(value) as 5 | 10 | 15 | 20 | 30)\r\n                        );\r\n                      }}\r\n                      className=\"flex-1 sm:flex-none sm:min-w-[140px] px-3 py-2 rounded-lg font-medium text-xs sm:text-sm bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-800 hover:from-yellow-500 hover:to-orange-500 transition-all border-2 border-yellow-500 shadow-lg cursor-pointer\"\r\n                    >\r\n                      <option value={5}>‚≠ê Top 5</option>\r\n                      <option value={10}>‚≠ê Top 10</option>\r\n                      <option value={15}>‚≠ê Top 15</option>\r\n                      <option value={20}>‚≠ê Top 20</option>\r\n                      <option value={30}>‚≠ê Top 30</option>\r\n                      <option value=\"all\">‚≠ê Top ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                  {/* Loading State */}\r\n                  {creativesLoading && adCreatives.size === 0 && (\r\n                    <div className=\"bg-blue-50 border-l-4 border-blue-500 p-3 mb-4 rounded\">\r\n                      <p className=\"text-blue-700 text-sm font-medium\">\r\n                        ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤...\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {/* Success State */}\r\n                  {/* {!creativesLoading && adCreatives.size > 0 && (\r\n                  <div className=\"bg-green-50 border-l-4 border-green-500 p-3 mb-4 rounded\">\r\n                    <p className=\"text-green-700 text-sm font-medium\">\r\n                      ‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à {adCreatives.size} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\r\n                    </p>\r\n                  </div>\r\n                )} */}\r\n                  <table className=\"w-full\" key={`table-${adCreatives.size}`}>\r\n                    <thead>\r\n                      <tr className=\"border-b-2 border-gradient-to-r from-blue-200 via-purple-200 to-pink-200\">\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          #\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Ad Image\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          New Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Total Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ThruPlay\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô Inbox\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody key={`tbody-${adCreatives.size}-${Date.now()}`}>\r\n                      {getTopAdsFilteredInsights()\r\n                        .sort((a, b) => {\r\n                          if (topAdsSortBy === \"leads\") {\r\n                            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° Total Inbox ‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢\r\n                            const totalInboxA = getResultsByActionType(\r\n                              a.actions,\r\n                              \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            const totalInboxB = getResultsByActionType(\r\n                              b.actions,\r\n                              \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            return totalInboxB - totalInboxA;\r\n                          } else if (topAdsSortBy === \"phone\") {\r\n                            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå ‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢\r\n                            const phoneLeadsA = topAdsPhoneLeads.get(a.ad_id) || 0;\r\n                            const phoneLeadsB = topAdsPhoneLeads.get(b.ad_id) || 0;\r\n                            return phoneLeadsB - phoneLeadsA;\r\n                          } else if (topAdsSortBy === \"thruplay\") {\r\n                            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° ThruPlay ‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢\r\n                            const thruplayA = a.actions?.find(\r\n                              (action) => action.action_type === \"video_view\"\r\n                            );\r\n                            const thruplayB = b.actions?.find(\r\n                              (action) => action.action_type === \"video_view\"\r\n                            );\r\n                            const valueA = thruplayA\r\n                              ? parseFloat(thruplayA.value)\r\n                              : 0;\r\n                            const valueB = thruplayB\r\n                              ? parseFloat(thruplayB.value)\r\n                              : 0;\r\n                            return valueB - valueA;\r\n                          } else {\r\n                            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° cost per messaging connection ‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ‡∏°‡∏≤‡∏Å\r\n                            const costA = a.cost_per_action_type?.find(\r\n                              (cost) =>\r\n                                cost.action_type ===\r\n                                \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            const costB = b.cost_per_action_type?.find(\r\n                              (cost) =>\r\n                                cost.action_type ===\r\n                                \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            const valueA = costA\r\n                              ? parseFloat(costA.value)\r\n                              : Infinity;\r\n                            const valueB = costB\r\n                              ? parseFloat(costB.value)\r\n                              : Infinity;\r\n                            return valueA - valueB;\r\n                          }\r\n                        })\r\n                        .slice(0, topAdsLimit === \"all\" ? undefined : topAdsLimit)\r\n                        .map((ad, index) => {\r\n                          const creative = adCreatives.get(ad.ad_id);\r\n                          console.log(\r\n                            `üñºÔ∏è [Render TOP ${index + 1}] Ad:`,\r\n                            ad.ad_id,\r\n                            ad.ad_name?.substring(0, 30),\r\n                            \"| Creative:\",\r\n                            creative\r\n                              ? {\r\n                                id: creative.id,\r\n                                has_thumbnail: !!creative.thumbnail_url,\r\n                                has_image: !!creative.image_url,\r\n                                thumbnail_preview:\r\n                                  creative.thumbnail_url?.substring(0, 60),\r\n                              }\r\n                              : \"NO CREATIVE DATA\"\r\n                          );\r\n                          console.log(\r\n                            \"üì¶ [Render] adCreatives Map:\",\r\n                            \"size=\",\r\n                            adCreatives.size,\r\n                            \"| Has this ad?\",\r\n                            adCreatives.has(ad.ad_id),\r\n                            \"| All ad IDs in map:\",\r\n                            Array.from(adCreatives.keys())\r\n                          );\r\n                          return (\r\n                            <tr\r\n                              key={ad.ad_id}\r\n                              className=\"border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50 hover:via-purple-50 hover:to-pink-50 transition-all duration-300 hover:shadow-md\"\r\n                            >\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div className=\"text-gray-700 font-bold text-lg\">\r\n                                  {index + 1}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div\r\n                                  className=\"relative group cursor-pointer flex justify-center items-center\"\r\n                                  onClick={() => {\r\n                                    setSelectedAdForPreview(ad);\r\n                                    setShowVideoModal(true);\r\n                                  }}\r\n                                >\r\n                                  {(() => {\r\n                                    const videoId =\r\n                                      creative?.object_story_spec?.video_data\r\n                                        ?.video_id || creative?.video_id;\r\n                                    const thumbnailUrl =\r\n                                      creative?.thumbnail_url ||\r\n                                      creative?.image_url;\r\n                                    const localVideoPath = videoId ? `/images/video/${videoId}.mp4` : null;\r\n\r\n                                    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ videoId - ‡πÅ‡∏™‡∏î‡∏á video preview ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ 3 ‡∏ß‡∏¥ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover\r\n                                    if (videoId && localVideoPath) {\r\n                                      return (\r\n                                        <div className=\"w-20 h-20 flex-shrink-0 relative overflow-hidden rounded-lg shadow-sm hover:shadow-md transition-shadow\">\r\n                                          {/* Video Preview - ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ loop ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏ß‡∏¥ */}\r\n                                          <video\r\n                                            src={localVideoPath}\r\n                                            className=\"w-full h-full object-cover\"\r\n                                            muted\r\n                                            loop\r\n                                            playsInline\r\n                                            autoPlay\r\n                                            onLoadedMetadata={(e) => {\r\n                                              const video = e.currentTarget;\r\n                                              // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏Ñ‡πà 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏£‡∏Å\r\n                                              video.currentTime = 0;\r\n                                              const checkTime = () => {\r\n                                                if (video.currentTime >= 3) {\r\n                                                  video.currentTime = 0;\r\n                                                }\r\n                                              };\r\n                                              video.addEventListener('timeupdate', checkTime);\r\n                                            }}\r\n                                            onError={(e) => {\r\n                                              // ‡∏ñ‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏™‡∏î‡∏á thumbnail ‡πÅ‡∏ó‡∏ô\r\n                                              const video = e.currentTarget;\r\n                                              video.style.display = 'none';\r\n                                              const parent = video.parentElement;\r\n                                              if (parent && thumbnailUrl) {\r\n                                                const img = document.createElement('img');\r\n                                                img.src = thumbnailUrl;\r\n                                                img.className = 'w-full h-full object-cover';\r\n                                                img.alt = 'Ad preview';\r\n                                                parent.appendChild(img);\r\n                                              }\r\n                                            }}\r\n                                          />\r\n                                          {/* Play icon overlay */}\r\n                                          <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                            <span className=\"text-white text-2xl drop-shadow-lg\">‚ñ∂Ô∏è</span>\r\n                                          </div>\r\n                                        </div>\r\n                                      );\r\n                                    }\r\n\r\n                                    // ‡πÅ‡∏™‡∏î‡∏á thumbnail ‡∏û‡∏£‡πâ‡∏≠‡∏° play icon ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\r\n                                    if (thumbnailUrl) {\r\n                                      return (\r\n                                        <div className=\"w-20 h-20 flex-shrink-0 relative\">\r\n                                          <img\r\n                                            src={thumbnailUrl}\r\n                                            alt=\"Ad preview\"\r\n                                            className=\"w-full h-full object-cover rounded-lg shadow-sm cursor-pointer hover:shadow-md transition-shadow\"\r\n                                            onError={(e) => {\r\n                                              e.currentTarget.src =\r\n                                                \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Crect width='80' height='80' fill='%23e5e7eb'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%239ca3af' font-size='12'%3ENo Image%3C/text%3E%3C/svg%3E\";\r\n                                            }}\r\n                                          />\r\n                                          {videoId && (\r\n                                            <div className=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 rounded-lg\">\r\n                                              <span className=\"text-white text-2xl\">‚ñ∂Ô∏è</span>\r\n                                            </div>\r\n                                          )}\r\n                                        </div>\r\n                                      );\r\n                                    }\r\n                                    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û\r\n                                    return (\r\n                                      <div className=\"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                                        <span className=\"text-gray-400 text-xs\">\r\n                                          üì∑\r\n                                        </span>\r\n                                      </div>\r\n                                    );\r\n                                  })()}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 font-semibold text-xl\">\r\n                                {formatCurrency(ad.spend)}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-green-700 text-xl\">\r\n                                {getResultsByActionType(\r\n                                  ad.actions,\r\n                                  \"onsite_conversion.messaging_first_reply\"\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-blue-700 text-xl\">\r\n                                {getResultsByActionType(\r\n                                  ad.actions,\r\n                                  \"onsite_conversion.total_messaging_connection\"\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-purple-700 text-xl\">\r\n                                {topAdsPhoneLeadsLoading ? (\r\n                                  <span className=\"text-sm\">‚è≥</span>\r\n                                ) : (\r\n                                  topAdsPhoneLeads.get(ad.ad_id) || 0\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 text-xl\">\r\n                                {(() => {\r\n                                  const thruplay = ad.actions?.find(\r\n                                    (action) => action.action_type === \"video_view\"\r\n                                  );\r\n                                  return thruplay\r\n                                    ? formatNumber(thruplay.value)\r\n                                    : \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 text-xl\">\r\n                                {(() => {\r\n                                  const costPerMessaging =\r\n                                    ad.cost_per_action_type?.find(\r\n                                      (cost) =>\r\n                                        cost.action_type ===\r\n                                        \"onsite_conversion.total_messaging_connection\"\r\n                                    );\r\n                                  return costPerMessaging\r\n                                    ? formatCurrency(costPerMessaging.value)\r\n                                    : \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Right Column - TOP Ad Set Table */}\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üèÜ TOP {topAdSetLimit === \"all\" ? \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" : topAdSetLimit} Ad\r\n                    Set{\" \"}\r\n                    <span className=\"bg-gradient-to-r from-yellow-400 via-orange-400 to-red-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-xl font-bold shadow-xl\">\r\n                      ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°\r\n                    </span>\r\n                  </h2>\r\n                  <div className=\"flex flex-col sm:flex-row gap-2 w-full\">\r\n                    {/* Sort By Buttons */}\r\n                    <div className=\"flex gap-2 flex-1\">\r\n                      <button\r\n                        onClick={() => setTopAdSetSortBy(\"leads\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdSetSortBy === \"leads\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üí¨ Total Inbox (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üí¨ Inbox</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setTopAdSetSortBy(\"phone\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdSetSortBy === \"phone\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setTopAdSetSortBy(\"thruplay\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${topAdSetSortBy === \"thruplay\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üé¨ ThruPlay (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üé¨ ThruPlay</span>\r\n                      </button>\r\n                    </div>\r\n                    {/* Top Ad Set Limit Dropdown */}\r\n                    <select\r\n                      value={topAdSetLimit}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setTopAdSetLimit(\r\n                          value === \"all\"\r\n                            ? \"all\"\r\n                            : (Number(value) as 5 | 10 | 15 | 20 | 30)\r\n                        );\r\n                      }}\r\n                      className=\"flex-1 sm:flex-none sm:min-w-[140px] px-3 py-2 rounded-lg font-medium text-xs sm:text-sm bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-800 hover:from-yellow-500 hover:to-orange-500 transition-all border-2 border-yellow-500 shadow-lg cursor-pointer\"\r\n                    >\r\n                      <option value={5}>‚≠ê Top 5</option>\r\n                      <option value={10}>‚≠ê Top 10</option>\r\n                      <option value={15}>‚≠ê Top 15</option>\r\n                      <option value={20}>‚≠ê Top 20</option>\r\n                      <option value={30}>‚≠ê Top 30</option>\r\n                      <option value=\"all\">‚≠ê Top ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>\r\n                    </select>\r\n                  </div>\r\n                  {/* Campaign Type Filter Buttons (TOF/MOF/BOF) */}\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      onClick={() => {\r\n                        const newFilter = new Set(adSetCampaignFilter);\r\n                        if (newFilter.has(\"TOF\")) {\r\n                          newFilter.delete(\"TOF\");\r\n                        } else {\r\n                          newFilter.add(\"TOF\");\r\n                        }\r\n                        setAdSetCampaignFilter(newFilter);\r\n                      }}\r\n                      className={`px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${adSetCampaignFilter.has(\"TOF\")\r\n                        ? \"bg-blue-600 text-white shadow-lg\"\r\n                        : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                        }`}\r\n                    >\r\n                      TOF\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        const newFilter = new Set(adSetCampaignFilter);\r\n                        if (newFilter.has(\"MOF\")) {\r\n                          newFilter.delete(\"MOF\");\r\n                        } else {\r\n                          newFilter.add(\"MOF\");\r\n                        }\r\n                        setAdSetCampaignFilter(newFilter);\r\n                      }}\r\n                      className={`px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${adSetCampaignFilter.has(\"MOF\")\r\n                        ? \"bg-green-600 text-white shadow-lg\"\r\n                        : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                        }`}\r\n                    >\r\n                      MOF\r\n                    </button>\r\n                    <button\r\n                      onClick={() => {\r\n                        const newFilter = new Set(adSetCampaignFilter);\r\n                        if (newFilter.has(\"BOF\")) {\r\n                          newFilter.delete(\"BOF\");\r\n                        } else {\r\n                          newFilter.add(\"BOF\");\r\n                        }\r\n                        setAdSetCampaignFilter(newFilter);\r\n                      }}\r\n                      className={`px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${adSetCampaignFilter.has(\"BOF\")\r\n                        ? \"bg-orange-600 text-white shadow-lg\"\r\n                        : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                        }`}\r\n                    >\r\n                      BOF\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                  {adsetInsightsLoading && adsetInsights.length === 0 && (\r\n                    <div className=\"bg-blue-50 border-l-4 border-blue-500 p-3 mb-4 rounded\">\r\n                      <p className=\"text-blue-700 text-sm font-medium\">\r\n                        ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Ad Set...\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  <table className=\"w-full\" key={`table2-${adsetInsights.length}`}>\r\n                    <thead>\r\n                      <tr className=\"border-b-2 border-gradient-to-r from-blue-200 via-purple-200 to-pink-200\">\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          #\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Ad Set\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          New Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Total Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ThruPlay\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody key={`tbody2-${adsetInsights.length}-${Date.now()}`}>\r\n                      {adsetInsights\r\n                        .filter((adset) => {\r\n                          // If no filter selected, show all\r\n                          if (adSetCampaignFilter.size === 0) return true;\r\n                          // Get first 3 characters of campaign name (uppercase)\r\n                          const campaignPrefix = (adset.campaign_name || \"\")\r\n                            .substring(0, 3)\r\n                            .toUpperCase();\r\n                          return adSetCampaignFilter.has(campaignPrefix);\r\n                        })\r\n                        .sort((a, b) => {\r\n                          if (topAdSetSortBy === \"leads\") {\r\n                            const totalInboxA = getResultsByActionType(\r\n                              a.actions,\r\n                              \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            const totalInboxB = getResultsByActionType(\r\n                              b.actions,\r\n                              \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            return totalInboxB - totalInboxA;\r\n                          } else if (topAdSetSortBy === \"phone\") {\r\n                            // Sort by phone leads (highest first)\r\n                            const phoneLeadsA = getPhoneLeadsByAdSetId(a.adset_id);\r\n                            const phoneLeadsB = getPhoneLeadsByAdSetId(b.adset_id);\r\n                            return phoneLeadsB - phoneLeadsA;\r\n                          } else {\r\n                            // Sort by thruplay (highest first)\r\n                            const thruplayA = a.actions?.find(\r\n                              (action) => action.action_type === \"video_view\"\r\n                            );\r\n                            const thruplayB = b.actions?.find(\r\n                              (action) => action.action_type === \"video_view\"\r\n                            );\r\n                            const valueA = thruplayA\r\n                              ? parseFloat(thruplayA.value)\r\n                              : 0;\r\n                            const valueB = thruplayB\r\n                              ? parseFloat(thruplayB.value)\r\n                              : 0;\r\n                            return valueB - valueA;\r\n                          }\r\n                        })\r\n                        .slice(\r\n                          0,\r\n                          topAdSetLimit === \"all\" ? undefined : topAdSetLimit\r\n                        )\r\n                        .map((adset, index) => {\r\n                          // Calculate cost per inbox\r\n                          const spend = parseFloat(adset.spend || \"0\");\r\n                          const totalInbox = getResultsByActionType(\r\n                            adset.actions,\r\n                            \"onsite_conversion.total_messaging_connection\"\r\n                          );\r\n                          const costPerInbox =\r\n                            totalInbox > 0 ? spend / totalInbox : 0;\r\n\r\n                          return (\r\n                            <tr\r\n                              key={adset.adset_id}\r\n                              className=\"border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50 hover:via-purple-50 hover:to-pink-50 transition-all duration-300 hover:shadow-md cursor-pointer\"\r\n                              onClick={() => {\r\n                                setSelectedAdSet(adset);\r\n                                setShowAdSetModal(true);\r\n                              }}\r\n                            >\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div className=\"text-gray-700 font-bold text-lg\">\r\n                                  {index + 1}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div\r\n                                  className=\"text-gray-700 font-medium text-sm max-w-[150px] truncate mx-auto hover:text-purple-600\"\r\n                                  title={adset.adset_name}\r\n                                >\r\n                                  {adset.adset_name || \"‚Äî\"}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 font-semibold text-xl\">\r\n                                {formatCurrency(adset.spend)}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-green-700 text-xl\">\r\n                                {getResultsByActionType(\r\n                                  adset.actions,\r\n                                  \"onsite_conversion.messaging_first_reply\"\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-blue-700 text-xl\">\r\n                                {getResultsByActionType(\r\n                                  adset.actions,\r\n                                  \"onsite_conversion.total_messaging_connection\"\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-purple-700 text-xl\">\r\n                                {topAdsPhoneLeadsLoading ? (\r\n                                  <span className=\"text-sm\">‚è≥</span>\r\n                                ) : (\r\n                                  getPhoneLeadsByAdSetId(adset.adset_id)\r\n                                )}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 text-xl\">\r\n                                {(() => {\r\n                                  const thruplay = adset.actions?.find(\r\n                                    (action) => action.action_type === \"video_view\"\r\n                                  );\r\n                                  return thruplay\r\n                                    ? formatNumber(thruplay.value)\r\n                                    : \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Page 2 Content - ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Page 1 ‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£ */}\r\n        {selectedPage === 2 && (\r\n          <>\r\n            {/* Performance Cards and Tables in 3-Column Layout - ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Page 1 */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n              {/* Column 1: ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ + ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏° */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {page2BalanceLoading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          `‡∏ø${page2Balance.toLocaleString(\"th-TH\", {\r\n                            minimumFractionDigits: 2,\r\n                            maximumFractionDigits: 2,\r\n                          })}`\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üí∞ ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {page2Loading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          formatCurrency(page2Summary.totalSpend)\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà + ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-blue-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {page2Loading ? (\r\n                          <tr>\r\n                            <td colSpan={2} className=\"px-2 py-4 text-center text-xs\">\r\n                              ‚è≥\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          <tr>\r\n                            <td colSpan={2} className=\"px-2 py-4 text-center text-xs text-gray-400\">\r\n                              ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô\r\n                            </td>\r\n                          </tr>\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 2: New Inbox & Total Inbox */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-teal-500 via-teal-600 to-cyan-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        New Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {page2Loading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          formatNumber(page2Summary.total_messaging_first_reply || 0)\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        Total Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {page2Loading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          formatNumber(page2Summary.total_messaging_connection || 0)\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà + New Inbox + Total Inbox */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-teal-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            New Inbox\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            Total Inbox\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {page2Loading ? (\r\n                          <tr>\r\n                            <td colSpan={3} className=\"px-2 py-4 text-center text-xs\">\r\n                              ‚è≥\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          <tr>\r\n                            <td colSpan={3} className=\"px-2 py-4 text-center text-xs text-gray-400\">\r\n                              ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Inbox\r\n                            </td>\r\n                          </tr>\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 3: ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl text-center\">\r\n                  <div className=\"text-base sm:text-xl font-semibold mb-2 sm:mb-3 opacity-90\">\r\n                    üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                  </div>\r\n                  <div className=\"text-2xl sm:text-4xl font-bold\">\r\n                    {page2Loading ? (\r\n                      <span className=\"text-3xl\">‚è≥</span>\r\n                    ) : (\r\n                      \"‚Äî\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                {/* Table - ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà + ‡πÄ‡∏ö‡∏≠‡∏£‡πå */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-purple-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {page2Loading ? (\r\n                          <tr>\r\n                            <td colSpan={2} className=\"px-2 py-4 text-center text-xs\">\r\n                              ‚è≥\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          <tr>\r\n                            <td colSpan={2} className=\"px-2 py-4 text-center text-xs text-gray-400\">\r\n                              ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£\r\n                            </td>\r\n                          </tr>\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* TOP Ads Section - Two Column Layout - ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Page 1 */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-8\">\r\n              {/* Left Column - TOP Ads Table */}\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üèÜ TOP {page2Limit === \"all\" ? \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" : page2Limit} Ads{\" \"}\r\n                    <span className=\"bg-gradient-to-r from-yellow-400 via-orange-400 to-red-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-xl font-bold shadow-xl\">\r\n                      ‡∏ô‡∏±‡∏Å‡πÄ‡∏ï‡∏∞‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°\r\n                    </span>\r\n                  </h2>\r\n                  <div className=\"flex flex-col sm:flex-row gap-2 w-full\">\r\n                    {/* Sort By Buttons - ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Page 1 ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ field ‡∏ó‡∏µ‡πà‡∏°‡∏µ */}\r\n                    <div className=\"flex gap-2 flex-1\">\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"spend\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"spend\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üí∞ Spend (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üí∞ Spend</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"clicks\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"clicks\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üñ±Ô∏è Clicks (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üñ±Ô∏è Clicks</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"ctr\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"ctr\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üìà CTR (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üìà CTR</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"impressions\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"impressions\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üëÅÔ∏è Impressions (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üëÅÔ∏è Impr</span>\r\n                      </button>\r\n                    </div>\r\n                    {/* Top Ads Limit Dropdown */}\r\n                    <select\r\n                      value={page2Limit}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setPage2Limit(\r\n                          value === \"all\"\r\n                            ? \"all\"\r\n                            : (Number(value) as 5 | 10 | 15 | 20 | 30)\r\n                        );\r\n                      }}\r\n                      className=\"flex-1 sm:flex-none sm:min-w-[140px] px-3 py-2 rounded-lg font-medium text-xs sm:text-sm bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-800 hover:from-yellow-500 hover:to-orange-500 transition-all border-2 border-yellow-500 shadow-lg cursor-pointer\"\r\n                    >\r\n                      <option value={5}>‚≠ê Top 5</option>\r\n                      <option value={10}>‚≠ê Top 10</option>\r\n                      <option value={15}>‚≠ê Top 15</option>\r\n                      <option value={20}>‚≠ê Top 20</option>\r\n                      <option value={30}>‚≠ê Top 30</option>\r\n                      <option value=\"all\">‚≠ê Top ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                  {/* Loading State */}\r\n                  {page2Loading && page2Insights.length === 0 && (\r\n                    <div className=\"bg-blue-50 border-l-4 border-blue-500 p-3 mb-4 rounded\">\r\n                      <p className=\"text-blue-700 text-sm font-medium\">\r\n                        ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  {page2Error && (\r\n                    <div className=\"bg-red-50 border-l-4 border-red-500 p-3 mb-4 rounded\">\r\n                      <p className=\"text-red-700 text-sm font-medium\">\r\n                        ‚ùå {page2Error}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  <table className=\"w-full\" key={`page2-table-${page2Insights.length}`}>\r\n                    <thead>\r\n                      <tr className=\"border-b-2 border-gradient-to-r from-blue-200 via-purple-200 to-pink-200\">\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          #\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Ad Image\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          New Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Total Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ThruPlay\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô Inbox\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {page2Insights\r\n                        .sort((a, b) => {\r\n                          switch (page2SortBy) {\r\n                            case \"spend\":\r\n                              return parseFloat(b.spend || \"0\") - parseFloat(a.spend || \"0\");\r\n                            case \"clicks\":\r\n                              return parseInt(b.clicks || \"0\") - parseInt(a.clicks || \"0\");\r\n                            case \"impressions\":\r\n                              return parseInt(b.impressions || \"0\") - parseInt(a.impressions || \"0\");\r\n                            case \"ctr\":\r\n                              return parseFloat(b.ctr || \"0\") - parseFloat(a.ctr || \"0\");\r\n                            case \"cpc\":\r\n                              return parseFloat(b.cpc || \"0\") - parseFloat(a.cpc || \"0\");\r\n                            case \"cpm\":\r\n                              return parseFloat(b.cpm || \"0\") - parseFloat(a.cpm || \"0\");\r\n                            default:\r\n                              return parseFloat(b.spend || \"0\") - parseFloat(a.spend || \"0\");\r\n                          }\r\n                        })\r\n                        .slice(0, page2Limit === \"all\" ? undefined : page2Limit)\r\n                        .map((ad, index) => {\r\n                          return (\r\n                            <tr\r\n                              key={ad.ad_id}\r\n                              className=\"border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50 hover:via-purple-50 hover:to-pink-50 transition-all duration-300 hover:shadow-md\"\r\n                            >\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div className=\"text-gray-700 font-bold text-lg\">\r\n                                  {index + 1}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div className=\"relative group cursor-pointer flex justify-center items-center\">\r\n                                  {/* ‡πÑ‡∏°‡πà‡∏°‡∏µ Ad Image - ‡πÅ‡∏™‡∏î‡∏á placeholder */}\r\n                                  <div className=\"w-20 h-20 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                                    <span className=\"text-gray-400 text-xs\">\r\n                                      üì∑\r\n                                    </span>\r\n                                  </div>\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 font-semibold text-xl\">\r\n                                {formatCurrency(ad.spend)}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-green-700 text-xl\">\r\n                                {(() => {\r\n                                  const newInbox = ad.actions?.find(\r\n                                    (action) => action.action_type === \"onsite_conversion.messaging_first_reply\"\r\n                                  );\r\n                                  return newInbox ? formatNumber(newInbox.value) : \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-blue-700 text-xl\">\r\n                                {(() => {\r\n                                  const totalInbox = ad.actions?.find(\r\n                                    (action) => action.action_type === \"onsite_conversion.total_messaging_connection\"\r\n                                  );\r\n                                  return totalInbox ? formatNumber(totalInbox.value) : \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-purple-700 text-xl\">\r\n                                {/* ‡πÑ‡∏°‡πà‡∏°‡∏µ phone leads - ‡πÅ‡∏™‡∏î‡∏á ‚Äî */}\r\n                                ‚Äî\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 text-xl\">\r\n                                {/* ‡πÑ‡∏°‡πà‡∏°‡∏µ ThruPlay - ‡πÅ‡∏™‡∏î‡∏á ‚Äî */}\r\n                                ‚Äî\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 text-xl\">\r\n                                {(() => {\r\n                                  const totalInbox = ad.actions?.find(\r\n                                    (action) => action.action_type === \"onsite_conversion.total_messaging_connection\"\r\n                                  );\r\n                                  const spend = parseFloat(ad.spend || \"0\");\r\n                                  const inboxCount = parseInt(totalInbox?.value || \"0\");\r\n                                  if (inboxCount > 0) {\r\n                                    return formatCurrency(spend / inboxCount);\r\n                                  }\r\n                                  return \"‚Äî\";\r\n                                })()}\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Right Column - TOP Ad Set Table */}\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üèÜ TOP {page2Limit === \"all\" ? \"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\" : page2Limit} Ad Set{\" \"}\r\n                    <span className=\"bg-gradient-to-r from-yellow-400 via-orange-400 to-red-500 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-xl font-bold shadow-xl\">\r\n                      ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°\r\n                    </span>\r\n                  </h2>\r\n                  <div className=\"flex flex-col sm:flex-row gap-2 w-full\">\r\n                    {/* Sort By Buttons */}\r\n                    <div className=\"flex gap-2 flex-1\">\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"spend\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"spend\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üí∞ Spend (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üí∞ Spend</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"clicks\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"clicks\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üñ±Ô∏è Clicks (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üñ±Ô∏è Clicks</span>\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setPage2SortBy(\"impressions\")}\r\n                        className={`flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-all ${page2SortBy === \"impressions\"\r\n                          ? \"bg-purple-600 text-white shadow-lg\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                          }`}\r\n                      >\r\n                        <span className=\"hidden sm:inline\">\r\n                          üëÅÔ∏è Impressions (‡∏°‡∏≤‡∏Å ‚Üí ‡∏ô‡πâ‡∏≠‡∏¢)\r\n                        </span>\r\n                        <span className=\"sm:hidden\">üëÅÔ∏è Impr</span>\r\n                      </button>\r\n                    </div>\r\n                    {/* Top Ad Set Limit Dropdown */}\r\n                    <select\r\n                      value={page2Limit}\r\n                      onChange={(e) => {\r\n                        const value = e.target.value;\r\n                        setPage2Limit(\r\n                          value === \"all\"\r\n                            ? \"all\"\r\n                            : (Number(value) as 5 | 10 | 15 | 20 | 30)\r\n                        );\r\n                      }}\r\n                      className=\"flex-1 sm:flex-none sm:min-w-[140px] px-3 py-2 rounded-lg font-medium text-xs sm:text-sm bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-800 hover:from-yellow-500 hover:to-orange-500 transition-all border-2 border-yellow-500 shadow-lg cursor-pointer\"\r\n                    >\r\n                      <option value={5}>‚≠ê Top 5</option>\r\n                      <option value={10}>‚≠ê Top 10</option>\r\n                      <option value={15}>‚≠ê Top 15</option>\r\n                      <option value={20}>‚≠ê Top 20</option>\r\n                      <option value={30}>‚≠ê Top 30</option>\r\n                      <option value=\"all\">‚≠ê Top ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"overflow-x-auto\">\r\n                  {page2Loading && (\r\n                    <div className=\"bg-blue-50 border-l-4 border-blue-500 p-3 mb-4 rounded\">\r\n                      <p className=\"text-blue-700 text-sm font-medium\">\r\n                        ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Ad Set...\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  <table className=\"w-full\" key={`page2-adset-table-${page2Insights.length}`}>\r\n                    <thead>\r\n                      <tr className=\"border-b-2 border-gradient-to-r from-blue-200 via-purple-200 to-pink-200\">\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          #\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Ad Set\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          New Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          Total Inbox\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå\r\n                        </th>\r\n                        <th className=\"text-center py-2 px-1 font-semibold text-gray-700 text-sm\">\r\n                          ThruPlay\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {(() => {\r\n                        // Group by adset with actions data\r\n                        const adsetData = new Map<string, {\r\n                          adset_id: string;\r\n                          adset_name: string;\r\n                          campaign_name: string;\r\n                          spend: number;\r\n                          clicks: number;\r\n                          impressions: number;\r\n                          newInbox: number;\r\n                          totalInbox: number;\r\n                        }>();\r\n\r\n                        page2Insights.forEach((ad) => {\r\n                          const existing = adsetData.get(ad.adset_id) || {\r\n                            adset_id: ad.adset_id,\r\n                            adset_name: ad.adset_name,\r\n                            campaign_name: ad.campaign_name,\r\n                            spend: 0,\r\n                            clicks: 0,\r\n                            impressions: 0,\r\n                            newInbox: 0,\r\n                            totalInbox: 0,\r\n                          };\r\n                          existing.spend += parseFloat(ad.spend || \"0\");\r\n                          existing.clicks += parseInt(ad.clicks || \"0\");\r\n                          existing.impressions += parseInt(ad.impressions || \"0\");\r\n\r\n                          // Sum up actions\r\n                          if (ad.actions) {\r\n                            const newInboxAction = ad.actions.find(\r\n                              (action) => action.action_type === \"onsite_conversion.messaging_first_reply\"\r\n                            );\r\n                            const totalInboxAction = ad.actions.find(\r\n                              (action) => action.action_type === \"onsite_conversion.total_messaging_connection\"\r\n                            );\r\n                            existing.newInbox += parseInt(newInboxAction?.value || \"0\");\r\n                            existing.totalInbox += parseInt(totalInboxAction?.value || \"0\");\r\n                          }\r\n\r\n                          adsetData.set(ad.adset_id, existing);\r\n                        });\r\n\r\n                        return Array.from(adsetData.values())\r\n                          .sort((a, b) => {\r\n                            switch (page2SortBy) {\r\n                              case \"spend\":\r\n                                return b.spend - a.spend;\r\n                              case \"clicks\":\r\n                                return b.clicks - a.clicks;\r\n                              case \"impressions\":\r\n                                return b.impressions - a.impressions;\r\n                              default:\r\n                                return b.spend - a.spend;\r\n                            }\r\n                          })\r\n                          .slice(0, page2Limit === \"all\" ? undefined : page2Limit)\r\n                          .map((adset, index) => (\r\n                            <tr\r\n                              key={adset.adset_id}\r\n                              className=\"border-b border-gray-100 hover:bg-gradient-to-r hover:from-blue-50 hover:via-purple-50 hover:to-pink-50 transition-all duration-300 hover:shadow-md cursor-pointer\"\r\n                            >\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div className=\"text-gray-700 font-bold text-lg\">\r\n                                  {index + 1}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center\">\r\n                                <div\r\n                                  className=\"text-gray-700 font-medium text-sm max-w-[150px] truncate mx-auto hover:text-purple-600\"\r\n                                  title={adset.adset_name}\r\n                                >\r\n                                  {adset.adset_name || \"‚Äî\"}\r\n                                </div>\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 font-semibold text-xl\">\r\n                                {formatCurrency(adset.spend)}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-green-700 text-xl\">\r\n                                {adset.newInbox > 0 ? formatNumber(adset.newInbox) : \"‚Äî\"}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-blue-700 text-xl\">\r\n                                {adset.totalInbox > 0 ? formatNumber(adset.totalInbox) : \"‚Äî\"}\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center font-semibold text-purple-700 text-xl\">\r\n                                {/* ‡πÑ‡∏°‡πà‡∏°‡∏µ phone leads - ‡πÅ‡∏™‡∏î‡∏á ‚Äî */}\r\n                                ‚Äî\r\n                              </td>\r\n                              <td className=\"py-2 px-1 text-center text-gray-700 text-xl\">\r\n                                {/* ‡πÑ‡∏°‡πà‡∏°‡∏µ ThruPlay - ‡πÅ‡∏™‡∏î‡∏á ‚Äî */}\r\n                                ‚Äî\r\n                              </td>\r\n                            </tr>\r\n                          ));\r\n                      })()}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Page 3 Content - Same structure as Page 1 */}\r\n        {selectedPage === 3 && (\r\n          <>\r\n            {/* Performance Cards and Tables in 3-Column Layout */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n              {/* Column 1: ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ + ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏° */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Page 3)\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {facebookBalanceLoading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          `‡∏ø${facebookBalance.toLocaleString(\"th-TH\", {\r\n                            minimumFractionDigits: 2,\r\n                            maximumFractionDigits: 2,\r\n                          })}`\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üí∞ ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {formatCurrency(\r\n                          insights.reduce(\r\n                            (sum, ad) => sum + parseFloat(ad.spend || \"0\"),\r\n                            0\r\n                          )\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-blue-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dailySummaryLoading ? (\r\n                          <tr>\r\n                            <td colSpan={2} className=\"px-2 py-4 text-center text-xs\">‚è≥</td>\r\n                          </tr>\r\n                        ) : (\r\n                          (() => {\r\n                            const dailyData = new Map<string, { spend: number }>();\r\n                            dailySummaryData.forEach((ad) => {\r\n                              const date = ad.date_start;\r\n                              const existing = dailyData.get(date) || { spend: 0 };\r\n                              existing.spend += parseFloat(ad.spend || \"0\");\r\n                              dailyData.set(date, existing);\r\n                            });\r\n                            const sortedDates = Array.from(dailyData.keys()).sort(\r\n                              (a, b) => new Date(b).getTime() - new Date(a).getTime()\r\n                            );\r\n                            const last30Days = sortedDates.slice(1, 31);\r\n                            return last30Days.map((date) => {\r\n                              const data = dailyData.get(date)!;\r\n                              return (\r\n                                <tr key={date} className=\"hover:bg-blue-50 border-b\">\r\n                                  <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                    {new Date(date).toLocaleDateString(\"th-TH\", { month: \"short\", day: \"numeric\" })}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-blue-600\">\r\n                                    {formatCurrency(data.spend)}\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            });\r\n                          })()\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 2: New Inbox & Total Inbox */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-teal-500 via-teal-600 to-cyan-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        New Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {getTotalResults()}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        Total Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {getTotalMessagingConnection()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-teal-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">New Inbox</th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">Total Inbox</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dailySummaryLoading ? (\r\n                          <tr><td colSpan={3} className=\"px-2 py-4 text-center text-xs\">‚è≥</td></tr>\r\n                        ) : (\r\n                          (() => {\r\n                            const dailyData = new Map<string, { newInbox: number; totalInbox: number }>();\r\n                            dailySummaryData.forEach((ad) => {\r\n                              const date = ad.date_start;\r\n                              const existing = dailyData.get(date) || { newInbox: 0, totalInbox: 0 };\r\n                              existing.newInbox += getResultsByActionType(ad.actions, \"onsite_conversion.messaging_first_reply\");\r\n                              existing.totalInbox += getResultsByActionType(ad.actions, \"onsite_conversion.total_messaging_connection\");\r\n                              dailyData.set(date, existing);\r\n                            });\r\n                            const sortedDates = Array.from(dailyData.keys()).sort((a, b) => new Date(b).getTime() - new Date(a).getTime());\r\n                            const last30Days = sortedDates.slice(1, 31);\r\n                            return last30Days.map((date) => {\r\n                              const data = dailyData.get(date)!;\r\n                              return (\r\n                                <tr key={date} className=\"hover:bg-teal-50 border-b\">\r\n                                  <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                    {new Date(date).toLocaleDateString(\"th-TH\", { month: \"short\", day: \"numeric\" })}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-green-600\">{data.newInbox}</td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-teal-600\">{data.totalInbox}</td>\r\n                                </tr>\r\n                              );\r\n                            });\r\n                          })()\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 3: ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl text-center\">\r\n                  <div className=\"text-base sm:text-xl font-semibold mb-2 sm:mb-3 opacity-90\">üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå</div>\r\n                  <div className=\"text-2xl sm:text-4xl font-bold\">\r\n                    {phoneCountLoading ? <span className=\"text-3xl\">‚è≥</span> : <div>{phoneCountData.total.toLocaleString()}</div>}\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-purple-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">‡πÄ‡∏ö‡∏≠‡∏£‡πå</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {phoneLeadsLoading ? (\r\n                          <tr><td colSpan={2} className=\"px-2 py-4 text-center text-xs\">‚è≥</td></tr>\r\n                        ) : (\r\n                          Object.entries(phoneLeadsData)\r\n                            .sort(([dateA], [dateB]) => new Date(dateB).getTime() - new Date(dateA).getTime())\r\n                            .slice(1)\r\n                            .map(([date, count]) => (\r\n                              <tr key={date} className=\"hover:bg-purple-50 border-b\">\r\n                                <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                  {new Date(date).toLocaleDateString(\"th-TH\", { month: \"short\", day: \"numeric\" })}\r\n                                </td>\r\n                                <td className=\"px-2 py-2 text-center text-xs font-semibold text-purple-600\">{count}</td>\r\n                              </tr>\r\n                            ))\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* TOP Ads Section - Two Column Layout */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-8\">\r\n              {/* Placeholder for Page 3 specific content */}\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üåê Page 3 - Campaign Overview\r\n                  </h2>\r\n                  <p className=\"text-gray-600 text-sm\">Page 3 content area - Same structure as Page 1</p>\r\n                </div>\r\n                <div className=\"p-8 text-center text-gray-500\">\r\n                  <div className=\"text-6xl mb-4\">üéØ</div>\r\n                  <p className=\"text-lg\">Page 3 specific content will be displayed here</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üìä Page 3 - Performance Metrics\r\n                  </h2>\r\n                  <p className=\"text-gray-600 text-sm\">Page 3 metrics area</p>\r\n                </div>\r\n                <div className=\"p-8 text-center text-gray-500\">\r\n                  <div className=\"text-6xl mb-4\">üìâ</div>\r\n                  <p className=\"text-lg\">Page 3 metrics will be displayed here</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Page 4 Content - Same structure as Page 1 */}\r\n        {selectedPage === 4 && (\r\n          <>\r\n            {/* Performance Cards and Tables in 3-Column Layout */}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4\">\r\n              {/* Column 1: ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ + ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏° */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Page 4)\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {facebookBalanceLoading ? (\r\n                          <span className=\"text-2xl\">‚è≥</span>\r\n                        ) : (\r\n                          `‡∏ø${facebookBalance.toLocaleString(\"th-TH\", {\r\n                            minimumFractionDigits: 2,\r\n                            maximumFractionDigits: 2,\r\n                          })}`\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-2\">\r\n                        üí∞ ‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-3xl font-bold\">\r\n                        {formatCurrency(\r\n                          insights.reduce(\r\n                            (sum, ad) => sum + parseFloat(ad.spend || \"0\"),\r\n                            0\r\n                          )\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-blue-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà\r\n                          </th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">\r\n                            ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dailySummaryLoading ? (\r\n                          <tr>\r\n                            <td colSpan={2} className=\"px-2 py-4 text-center text-xs\">‚è≥</td>\r\n                          </tr>\r\n                        ) : (\r\n                          (() => {\r\n                            const dailyData = new Map<string, { spend: number }>();\r\n                            dailySummaryData.forEach((ad) => {\r\n                              const date = ad.date_start;\r\n                              const existing = dailyData.get(date) || { spend: 0 };\r\n                              existing.spend += parseFloat(ad.spend || \"0\");\r\n                              dailyData.set(date, existing);\r\n                            });\r\n                            const sortedDates = Array.from(dailyData.keys()).sort(\r\n                              (a, b) => new Date(b).getTime() - new Date(a).getTime()\r\n                            );\r\n                            const last30Days = sortedDates.slice(1, 31);\r\n                            return last30Days.map((date) => {\r\n                              const data = dailyData.get(date)!;\r\n                              return (\r\n                                <tr key={date} className=\"hover:bg-blue-50 border-b\">\r\n                                  <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                    {new Date(date).toLocaleDateString(\"th-TH\", { month: \"short\", day: \"numeric\" })}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-blue-600\">\r\n                                    {formatCurrency(data.spend)}\r\n                                  </td>\r\n                                </tr>\r\n                              );\r\n                            });\r\n                          })()\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 2: New Inbox & Total Inbox */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-teal-500 via-teal-600 to-cyan-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl\">\r\n                  <div className=\"grid grid-cols-2 gap-2 sm:gap-4\">\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        New Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {getTotalResults()}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <div className=\"text-xs sm:text-base font-semibold opacity-90 mb-1 sm:mb-3\">\r\n                        Total Inbox\r\n                      </div>\r\n                      <div className=\"text-xl sm:text-4xl font-bold\">\r\n                        {getTotalMessagingConnection()}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-teal-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">New Inbox</th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">Total Inbox</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {dailySummaryLoading ? (\r\n                          <tr><td colSpan={3} className=\"px-2 py-4 text-center text-xs\">‚è≥</td></tr>\r\n                        ) : (\r\n                          (() => {\r\n                            const dailyData = new Map<string, { newInbox: number; totalInbox: number }>();\r\n                            dailySummaryData.forEach((ad) => {\r\n                              const date = ad.date_start;\r\n                              const existing = dailyData.get(date) || { newInbox: 0, totalInbox: 0 };\r\n                              existing.newInbox += getResultsByActionType(ad.actions, \"onsite_conversion.messaging_first_reply\");\r\n                              existing.totalInbox += getResultsByActionType(ad.actions, \"onsite_conversion.total_messaging_connection\");\r\n                              dailyData.set(date, existing);\r\n                            });\r\n                            const sortedDates = Array.from(dailyData.keys()).sort((a, b) => new Date(b).getTime() - new Date(a).getTime());\r\n                            const last30Days = sortedDates.slice(1, 31);\r\n                            return last30Days.map((date) => {\r\n                              const data = dailyData.get(date)!;\r\n                              return (\r\n                                <tr key={date} className=\"hover:bg-teal-50 border-b\">\r\n                                  <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                    {new Date(date).toLocaleDateString(\"th-TH\", { month: \"short\", day: \"numeric\" })}\r\n                                  </td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-green-600\">{data.newInbox}</td>\r\n                                  <td className=\"px-2 py-2 text-center text-xs font-semibold text-teal-600\">{data.totalInbox}</td>\r\n                                </tr>\r\n                              );\r\n                            });\r\n                          })()\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Column 3: ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå */}\r\n              <div className=\"flex flex-col\">\r\n                {/* Card */}\r\n                <div className=\"bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-2xl sm:rounded-3xl p-4 sm:p-8 text-white shadow-2xl text-center\">\r\n                  <div className=\"text-base sm:text-xl font-semibold mb-2 sm:mb-3 opacity-90\">üìû ‡∏ä‡∏∑‡πà‡∏≠ - ‡πÄ‡∏ö‡∏≠‡∏£‡πå</div>\r\n                  <div className=\"text-2xl sm:text-4xl font-bold\">\r\n                    {phoneCountLoading ? <span className=\"text-3xl\">‚è≥</span> : <div>{phoneCountData.total.toLocaleString()}</div>}\r\n                  </div>\r\n                </div>\r\n                {/* Table */}\r\n                <div className=\"bg-white rounded-b-2xl sm:rounded-b-3xl shadow-2xl overflow-hidden border border-gray-100 border-t-0 flex-1 mt-0\">\r\n                  <div className=\"overflow-y-auto max-h-[120px]\">\r\n                    <table className=\"w-full min-w-max text-xs\">\r\n                      <thead className=\"bg-purple-50 sticky top-0\">\r\n                        <tr>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>\r\n                          <th className=\"px-2 py-2 text-center font-semibold text-gray-700 border-b text-xs whitespace-nowrap\">‡πÄ‡∏ö‡∏≠‡∏£‡πå</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {phoneLeadsLoading ? (\r\n                          <tr><td colSpan={2} className=\"px-2 py-4 text-center text-xs\">‚è≥</td></tr>\r\n                        ) : (\r\n                          Object.entries(phoneLeadsData)\r\n                            .sort(([dateA], [dateB]) => new Date(dateB).getTime() - new Date(dateA).getTime())\r\n                            .slice(1)\r\n                            .map(([date, count]) => (\r\n                              <tr key={date} className=\"hover:bg-purple-50 border-b\">\r\n                                <td className=\"px-2 py-2 text-center text-xs text-gray-900\">\r\n                                  {new Date(date).toLocaleDateString(\"th-TH\", { month: \"short\", day: \"numeric\" })}\r\n                                </td>\r\n                                <td className=\"px-2 py-2 text-center text-xs font-semibold text-purple-600\">{count}</td>\r\n                              </tr>\r\n                            ))\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* TOP Ads Section - Two Column Layout */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-8\">\r\n              {/* Placeholder for Page 4 specific content */}\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    ‚öôÔ∏è Page 4 - Settings & Configuration\r\n                  </h2>\r\n                  <p className=\"text-gray-600 text-sm\">Page 4 content area - Same structure as Page 1</p>\r\n                </div>\r\n                <div className=\"p-8 text-center text-gray-500\">\r\n                  <div className=\"text-6xl mb-4\">üîß</div>\r\n                  <p className=\"text-lg\">Page 4 specific content will be displayed here</p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-2xl sm:rounded-3xl shadow-2xl p-4 sm:p-8 border border-gray-100\">\r\n                <div className=\"bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 px-4 sm:px-8 py-4 sm:py-6 -m-4 sm:-m-8 mb-4 sm:mb-8 relative overflow-hidden rounded-t-2xl sm:rounded-t-3xl\">\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-10 transition-opacity duration-500\"></div>\r\n                </div>\r\n                <div className=\"flex flex-col gap-3 mb-3 sm:mb-4\">\r\n                  <h2 className=\"text-lg sm:text-2xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent flex items-center gap-2\">\r\n                    üìù Page 4 - Additional Info\r\n                  </h2>\r\n                  <p className=\"text-gray-600 text-sm\">Page 4 additional area</p>\r\n                </div>\r\n                <div className=\"p-8 text-center text-gray-500\">\r\n                  <div className=\"text-6xl mb-4\">üìã</div>\r\n                  <p className=\"text-lg\">Page 4 additional content will be displayed here</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div >\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}