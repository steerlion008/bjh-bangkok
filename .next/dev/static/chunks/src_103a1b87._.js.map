{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/components/UserMenu.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { User, LogOut, Shield } from \"lucide-react\";\r\ninterface UserData {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  role_name: string;\r\n  role_tag: string;\r\n  department_name?: string;\r\n  position_name?: string;\r\n  avatar?: string;\r\n}\r\nexport default function UserMenu() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState<UserData | null>(null);\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  useEffect(() => {\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      setUser(JSON.parse(userStr));\r\n    }\r\n  }, []);\r\n  const handleLogout = () => {\r\n    // Clear localStorage\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"authToken\");\r\n    // Clear cookie\r\n    document.cookie =\r\n      \"authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n    // Redirect to login\r\n    router.push(\"/login\");\r\n  };\r\n  if (!user) return null;\r\n  const getRoleBadgeColor = (roleTag: string) => {\r\n    switch (roleTag) {\r\n      case \"dev\":\r\n      case \"superadmin\":\r\n        return \"bg-purple-100 text-purple-800 border-purple-300\";\r\n      case \"admin\":\r\n        return \"bg-blue-100 text-blue-800 border-blue-300\";\r\n      case \"sale\":\r\n        return \"bg-green-100 text-green-800 border-green-300\";\r\n      default:\r\n        return \"bg-gray-100 text-gray-800 border-gray-300\";\r\n    }\r\n  };\r\n  const getRoleLabel = (roleTag: string) => {\r\n    const labels: Record<string, string> = {\r\n      dev: \"Developer\",\r\n      superadmin: \"Super Admin\",\r\n      admin: \"Admin\",\r\n      sale: \"Sale\",\r\n      user: \"User\",\r\n    };\r\n    return labels[roleTag] || roleTag;\r\n  };\r\n  return (\r\n    <div className=\"relative\">\r\n      <button\r\n        onClick={() => setShowMenu(!showMenu)}\r\n        className=\"flex items-center gap-3 px-4 py-2 bg-white border border-gray-200 rounded-xl hover:bg-gray-50 transition-all shadow-sm hover:shadow-md\"\r\n      >\r\n        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white font-semibold\">\r\n          {user.name.charAt(0).toUpperCase()}\r\n        </div>\r\n        <div className=\"text-left hidden md:block\">\r\n          <div className=\"text-sm font-semibold text-gray-900\">{user.name}</div>\r\n          <div className=\"text-xs text-gray-500\">{user.email}</div>\r\n        </div>\r\n        <svg\r\n          className={`w-4 h-4 text-gray-400 transition-transform ${\r\n            showMenu ? \"rotate-180\" : \"\"\r\n          }`}\r\n          fill=\"none\"\r\n          stroke=\"currentColor\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <path\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n            strokeWidth={2}\r\n            d=\"M19 9l-7 7-7-7\"\r\n          />\r\n        </svg>\r\n      </button>\r\n      {showMenu && (\r\n        <>\r\n          <div\r\n            className=\"fixed inset-0 z-40\"\r\n            onClick={() => setShowMenu(false)}\r\n          />\r\n          <div className=\"absolute right-0 mt-2 w-72 bg-white border border-gray-200 rounded-xl shadow-xl z-50 overflow-hidden\">\r\n            {/* User Info */}\r\n            <div className=\"p-4 bg-gradient-to-br from-red-50 to-red-100 border-b border-red-200\">\r\n              <div className=\"flex items-center gap-3 mb-3\">\r\n                <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-red-500 to-red-600 flex items-center justify-center text-white font-bold text-lg\">\r\n                  {user.name.charAt(0).toUpperCase()}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-semibold text-gray-900\">{user.name}</div>\r\n                  <div className=\"text-sm text-gray-600\">{user.email}</div>\r\n                </div>\r\n              </div>\r\n              {/* Role Badge */}\r\n              <div className=\"flex items-center gap-2\">\r\n                <Shield className=\"w-4 h-4 text-red-600\" />\r\n                <span\r\n                  className={`px-3 py-1 rounded-full text-xs font-semibold border ${getRoleBadgeColor(\r\n                    user.role_tag\r\n                  )}`}\r\n                >\r\n                  {getRoleLabel(user.role_tag)}\r\n                </span>\r\n              </div>\r\n              {/* Additional Info */}\r\n              {(user.department_name || user.position_name) && (\r\n                <div className=\"mt-3 pt-3 border-t border-red-200 text-sm\">\r\n                  {user.department_name && (\r\n                    <div className=\"text-gray-600\">\r\n                      üìç {user.department_name}\r\n                    </div>\r\n                  )}\r\n                  {user.position_name && (\r\n                    <div className=\"text-gray-600\">üíº {user.position_name}</div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n            {/* Menu Items */}\r\n            <div className=\"p-2\">\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"w-full flex items-center gap-3 px-4 py-3 text-left hover:bg-red-50 rounded-lg transition-colors text-red-600 font-medium\"\r\n              >\r\n                <LogOut className=\"w-5 h-5\" />\r\n                <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r"],"names":[],"mappings":"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"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/components/FileProgress/FileProgressAnimation.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n    Upload,\r\n    Download,\r\n    Check,\r\n    X,\r\n    File,\r\n    Image,\r\n    Film,\r\n    FileText,\r\n    Music,\r\n    Archive,\r\n    RotateCcw,\r\n    Loader2,\r\n} from \"lucide-react\";\r\n\r\n// Types\r\nexport type FileProgressStatus =\r\n    | \"idle\"\r\n    | \"pending\"\r\n    | \"uploading\"\r\n    | \"downloading\"\r\n    | \"success\"\r\n    | \"error\";\r\n\r\nexport interface FileProgressItem {\r\n    id: string;\r\n    fileName: string;\r\n    fileSize: number;\r\n    fileType: string;\r\n    progress: number;\r\n    status: FileProgressStatus;\r\n    error?: string;\r\n    type: \"upload\" | \"download\";\r\n    speed?: number; // bytes per second\r\n    remainingTime?: number; // seconds\r\n}\r\n\r\ninterface FileProgressAnimationProps {\r\n    item: FileProgressItem;\r\n    onCancel?: (id: string) => void;\r\n    onRetry?: (id: string) => void;\r\n    onDismiss?: (id: string) => void;\r\n}\r\n\r\n// Helper to format file size\r\nconst formatFileSize = (bytes: number): string => {\r\n    if (bytes === 0) return \"0 B\";\r\n    const k = 1024;\r\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\r\n};\r\n\r\n// Format time remaining\r\nconst formatTime = (seconds: number): string => {\r\n    if (seconds < 60) return `${Math.round(seconds)}s`;\r\n    if (seconds < 3600) return `${Math.round(seconds / 60)}m`;\r\n    return `${Math.round(seconds / 3600)}h`;\r\n};\r\n\r\n// Get file icon based on type\r\nconst getFileIcon = (fileType: string) => {\r\n    if (fileType.startsWith(\"image/\")) return Image;\r\n    if (fileType.startsWith(\"video/\")) return Film;\r\n    if (fileType.startsWith(\"audio/\")) return Music;\r\n    if (fileType.startsWith(\"text/\")) return FileText;\r\n    if (\r\n        fileType.includes(\"zip\") ||\r\n        fileType.includes(\"rar\") ||\r\n        fileType.includes(\"tar\")\r\n    )\r\n        return Archive;\r\n    return File;\r\n};\r\n\r\n// Circular Progress Component with enhanced animations\r\nconst CircularProgress: React.FC<{\r\n    progress: number;\r\n    size?: number;\r\n    strokeWidth?: number;\r\n    status: FileProgressStatus;\r\n    type: \"upload\" | \"download\";\r\n}> = ({ progress, size = 56, strokeWidth = 4, status, type }) => {\r\n    const radius = (size - strokeWidth) / 2;\r\n    const circumference = radius * 2 * Math.PI;\r\n    const offset = circumference - (progress / 100) * circumference;\r\n\r\n    const getGradientId = () => `progress-gradient-${type}-${status}`;\r\n\r\n    const getColors = () => {\r\n        switch (status) {\r\n            case \"success\":\r\n                return { start: \"#22c55e\", end: \"#10b981\" };\r\n            case \"error\":\r\n                return { start: \"#ef4444\", end: \"#dc2626\" };\r\n            case \"uploading\":\r\n                return { start: \"#8b5cf6\", end: \"#ec4899\" };\r\n            case \"downloading\":\r\n                return { start: \"#3b82f6\", end: \"#06b6d4\" };\r\n            default:\r\n                return { start: \"#6b7280\", end: \"#4b5563\" };\r\n        }\r\n    };\r\n\r\n    const colors = getColors();\r\n    const isActive = status === \"uploading\" || status === \"downloading\";\r\n\r\n    return (\r\n        <svg width={size} height={size} className=\"transform -rotate-90\">\r\n            <defs>\r\n                <linearGradient id={getGradientId()} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                    <stop offset=\"0%\" stopColor={colors.start} />\r\n                    <stop offset=\"100%\" stopColor={colors.end} />\r\n                </linearGradient>\r\n                {isActive && (\r\n                    <filter id=\"glow\">\r\n                        <feGaussianBlur stdDeviation=\"2\" result=\"coloredBlur\" />\r\n                        <feMerge>\r\n                            <feMergeNode in=\"coloredBlur\" />\r\n                            <feMergeNode in=\"SourceGraphic\" />\r\n                        </feMerge>\r\n                    </filter>\r\n                )}\r\n            </defs>\r\n            {/* Background circle */}\r\n            <circle\r\n                cx={size / 2}\r\n                cy={size / 2}\r\n                r={radius}\r\n                fill=\"none\"\r\n                stroke=\"rgba(255,255,255,0.1)\"\r\n                strokeWidth={strokeWidth}\r\n            />\r\n            {/* Animated background glow for active state */}\r\n            {isActive && (\r\n                <motion.circle\r\n                    cx={size / 2}\r\n                    cy={size / 2}\r\n                    r={radius}\r\n                    fill=\"none\"\r\n                    stroke={`url(#${getGradientId()})`}\r\n                    strokeWidth={strokeWidth + 4}\r\n                    strokeLinecap=\"round\"\r\n                    strokeDasharray={circumference}\r\n                    strokeDashoffset={offset}\r\n                    opacity={0.3}\r\n                    filter=\"url(#glow)\"\r\n                    animate={{ opacity: [0.2, 0.4, 0.2] }}\r\n                    transition={{ duration: 1.5, repeat: Infinity }}\r\n                />\r\n            )}\r\n            {/* Progress circle */}\r\n            <motion.circle\r\n                cx={size / 2}\r\n                cy={size / 2}\r\n                r={radius}\r\n                fill=\"none\"\r\n                stroke={`url(#${getGradientId()})`}\r\n                strokeWidth={strokeWidth}\r\n                strokeLinecap=\"round\"\r\n                strokeDasharray={circumference}\r\n                initial={{ strokeDashoffset: circumference }}\r\n                animate={{ strokeDashoffset: offset }}\r\n                transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n            />\r\n        </svg>\r\n    );\r\n};\r\n\r\n// Animated File Icon that fills based on progress\r\nconst FillingFileIcon: React.FC<{\r\n    progress: number;\r\n    type: \"upload\" | \"download\";\r\n    status: FileProgressStatus;\r\n    fileType: string;\r\n}> = ({ progress, type, status, fileType }) => {\r\n    const FileIcon = getFileIcon(fileType);\r\n    const isActive = status === \"uploading\" || status === \"downloading\";\r\n    const isComplete = status === \"success\";\r\n    const isError = status === \"error\";\r\n\r\n    return (\r\n        <div className=\"relative w-6 h-6\">\r\n            {/* Background icon */}\r\n            <FileIcon className=\"w-6 h-6 text-white/20 absolute inset-0\" />\r\n            {/* Filled portion */}\r\n            <div\r\n                className=\"absolute inset-0 overflow-hidden\"\r\n                style={{\r\n                    clipPath: `inset(${100 - progress}% 0 0 0)`,\r\n                }}\r\n            >\r\n                <FileIcon\r\n                    className={`w-6 h-6 ${isComplete\r\n                            ? \"text-green-400\"\r\n                            : isError\r\n                                ? \"text-red-400\"\r\n                                : type === \"upload\"\r\n                                    ? \"text-purple-400\"\r\n                                    : \"text-blue-400\"\r\n                        }`}\r\n                />\r\n            </div>\r\n            {/* Arrow animation */}\r\n            {isActive && (\r\n                <motion.div\r\n                    className=\"absolute inset-0 flex items-center justify-center\"\r\n                    animate={{ y: type === \"upload\" ? [-8, 0] : [0, 8] }}\r\n                    transition={{ duration: 0.6, repeat: Infinity, repeatType: \"reverse\" }}\r\n                >\r\n                    {type === \"upload\" ? (\r\n                        <div className=\"w-2 h-2 border-t-2 border-l-2 border-purple-400 transform -rotate-45 translate-y-1\" />\r\n                    ) : (\r\n                        <div className=\"w-2 h-2 border-b-2 border-r-2 border-blue-400 transform -rotate-45 -translate-y-1\" />\r\n                    )}\r\n                </motion.div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n// Success Checkmark Animation\r\nconst SuccessCheckmark: React.FC = () => (\r\n    <motion.div\r\n        initial={{ scale: 0 }}\r\n        animate={{ scale: 1 }}\r\n        transition={{ type: \"spring\", stiffness: 500, damping: 25 }}\r\n        className=\"relative\"\r\n    >\r\n        <motion.div\r\n            className=\"absolute inset-0 bg-green-500/30 rounded-full\"\r\n            initial={{ scale: 1 }}\r\n            animate={{ scale: [1, 1.5, 1] }}\r\n            transition={{ duration: 0.5 }}\r\n        />\r\n        <motion.div\r\n            initial={{ pathLength: 0 }}\r\n            animate={{ pathLength: 1 }}\r\n            transition={{ duration: 0.3, delay: 0.1 }}\r\n        >\r\n            <Check className=\"w-6 h-6 text-green-400\" />\r\n        </motion.div>\r\n    </motion.div>\r\n);\r\n\r\n// Error X Animation\r\nconst ErrorX: React.FC = () => (\r\n    <motion.div\r\n        initial={{ scale: 0, rotate: -180 }}\r\n        animate={{ scale: 1, rotate: 0 }}\r\n        transition={{ type: \"spring\", stiffness: 500, damping: 25 }}\r\n    >\r\n        <motion.div\r\n            animate={{ x: [-2, 2, -2, 2, 0] }}\r\n            transition={{ duration: 0.4, delay: 0.2 }}\r\n        >\r\n            <X className=\"w-6 h-6 text-red-400\" />\r\n        </motion.div>\r\n    </motion.div>\r\n);\r\n\r\n// Spinning Loader\r\nconst SpinningLoader: React.FC<{ className?: string }> = ({ className }) => (\r\n    <motion.div\r\n        animate={{ rotate: 360 }}\r\n        transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n    >\r\n        <Loader2 className={className || \"w-5 h-5 text-white/60\"} />\r\n    </motion.div>\r\n);\r\n\r\n// Main File Progress Animation Component\r\nexport const FileProgressAnimation: React.FC<FileProgressAnimationProps> = ({\r\n    item,\r\n    onCancel,\r\n    onRetry,\r\n    onDismiss,\r\n}) => {\r\n    const isActive = item.status === \"uploading\" || item.status === \"downloading\";\r\n    const isComplete = item.status === \"success\";\r\n    const isError = item.status === \"error\";\r\n    const isPending = item.status === \"pending\";\r\n\r\n    return (\r\n        <motion.div\r\n            layout\r\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\r\n            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n            exit={{ opacity: 0, x: 100, scale: 0.9 }}\r\n            transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n            className={`relative bg-gradient-to-r from-slate-900/95 to-slate-800/95 backdrop-blur-xl \r\n                 rounded-2xl border p-4 shadow-2xl overflow-hidden transition-all duration-300\r\n                 ${isComplete ? \"border-green-500/30\" : isError ? \"border-red-500/30\" : \"border-white/10\"}\r\n                 hover:border-white/20`}\r\n        >\r\n            {/* Animated background gradient */}\r\n            {isActive && (\r\n                <motion.div\r\n                    className=\"absolute inset-0 opacity-20\"\r\n                    style={{\r\n                        background:\r\n                            item.type === \"upload\"\r\n                                ? \"linear-gradient(90deg, #8b5cf6, #ec4899, #8b5cf6)\"\r\n                                : \"linear-gradient(90deg, #3b82f6, #06b6d4, #3b82f6)\",\r\n                        backgroundSize: \"200% 100%\",\r\n                    }}\r\n                    animate={{ backgroundPosition: [\"0% 0%\", \"100% 0%\", \"0% 0%\"] }}\r\n                    transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\r\n                />\r\n            )}\r\n\r\n            {/* Success pulse effect */}\r\n            {isComplete && (\r\n                <motion.div\r\n                    className=\"absolute inset-0 bg-green-500/10\"\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: [0, 0.3, 0] }}\r\n                    transition={{ duration: 0.5 }}\r\n                />\r\n            )}\r\n\r\n            <div className=\"relative flex items-center gap-4\">\r\n                {/* Progress Circle with Icon */}\r\n                <div className=\"relative flex-shrink-0\">\r\n                    <CircularProgress\r\n                        progress={item.progress}\r\n                        size={56}\r\n                        strokeWidth={3}\r\n                        status={item.status}\r\n                        type={item.type}\r\n                    />\r\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {isComplete ? (\r\n                                <motion.div key=\"success\">\r\n                                    <SuccessCheckmark />\r\n                                </motion.div>\r\n                            ) : isError ? (\r\n                                <motion.div key=\"error\">\r\n                                    <ErrorX />\r\n                                </motion.div>\r\n                            ) : isPending ? (\r\n                                <motion.div key=\"pending\">\r\n                                    <SpinningLoader />\r\n                                </motion.div>\r\n                            ) : isActive ? (\r\n                                <motion.div\r\n                                    key=\"active\"\r\n                                    animate={{ scale: [1, 1.1, 1] }}\r\n                                    transition={{ duration: 1, repeat: Infinity }}\r\n                                >\r\n                                    <FillingFileIcon\r\n                                        progress={item.progress}\r\n                                        type={item.type}\r\n                                        status={item.status}\r\n                                        fileType={item.fileType}\r\n                                    />\r\n                                </motion.div>\r\n                            ) : (\r\n                                <motion.div key=\"idle\">\r\n                                    <FillingFileIcon\r\n                                        progress={0}\r\n                                        type={item.type}\r\n                                        status={item.status}\r\n                                        fileType={item.fileType}\r\n                                    />\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* File Info */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <p className=\"text-white font-medium truncate text-sm\">\r\n                            {item.fileName}\r\n                        </p>\r\n                        {isActive && (\r\n                            <motion.span\r\n                                initial={{ opacity: 0, scale: 0.8 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                className=\"text-xs font-bold px-2 py-0.5 rounded-full bg-white/10\"\r\n                                style={{\r\n                                    color: item.type === \"upload\" ? \"#a78bfa\" : \"#60a5fa\",\r\n                                }}\r\n                            >\r\n                                {item.progress}%\r\n                            </motion.span>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 mt-0.5\">\r\n                        <p className=\"text-white/50 text-xs\">\r\n                            {formatFileSize(item.fileSize)}\r\n                        </p>\r\n                        {isActive && item.speed && (\r\n                            <span className=\"text-white/40 text-xs\">\r\n                                ‚Ä¢ {formatFileSize(item.speed)}/s\r\n                            </span>\r\n                        )}\r\n                        {isActive && item.remainingTime && (\r\n                            <span className=\"text-white/40 text-xs\">\r\n                                ‚Ä¢ {formatTime(item.remainingTime)} left\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Progress Bar */}\r\n                    <div className=\"mt-2 h-1.5 bg-white/10 rounded-full overflow-hidden\">\r\n                        <motion.div\r\n                            className={`h-full rounded-full relative ${isComplete\r\n                                    ? \"bg-gradient-to-r from-green-400 to-emerald-500\"\r\n                                    : isError\r\n                                        ? \"bg-gradient-to-r from-red-400 to-rose-500\"\r\n                                        : item.type === \"upload\"\r\n                                            ? \"bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500\"\r\n                                            : \"bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-500\"\r\n                                }`}\r\n                            style={{\r\n                                backgroundSize: isActive ? \"200% 100%\" : \"100% 100%\",\r\n                            }}\r\n                            initial={{ width: 0 }}\r\n                            animate={{\r\n                                width: `${item.progress}%`,\r\n                                backgroundPosition: isActive\r\n                                    ? [\"0% 0%\", \"100% 0%\", \"0% 0%\"]\r\n                                    : \"0% 0%\",\r\n                            }}\r\n                            transition={{\r\n                                width: { duration: 0.3, ease: \"easeOut\" },\r\n                                backgroundPosition: {\r\n                                    duration: 1.5,\r\n                                    repeat: Infinity,\r\n                                    ease: \"linear\",\r\n                                },\r\n                            }}\r\n                        >\r\n                            {/* Shimmer effect on progress bar */}\r\n                            {isActive && (\r\n                                <motion.div\r\n                                    className=\"absolute inset-0\"\r\n                                    style={{\r\n                                        background:\r\n                                            \"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)\",\r\n                                    }}\r\n                                    animate={{ x: [\"-100%\", \"200%\"] }}\r\n                                    transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\r\n                                />\r\n                            )}\r\n                        </motion.div>\r\n                    </div>\r\n\r\n                    {/* Status Text */}\r\n                    <AnimatePresence mode=\"wait\">\r\n                        <motion.p\r\n                            key={item.status}\r\n                            initial={{ opacity: 0, y: 5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            className={`text-xs mt-1.5 ${isComplete\r\n                                    ? \"text-green-400\"\r\n                                    : isError\r\n                                        ? \"text-red-400\"\r\n                                        : \"text-white/40\"\r\n                                }`}\r\n                        >\r\n                            {isComplete\r\n                                ? item.type === \"upload\"\r\n                                    ? \"‚úì ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\"\r\n                                    : \"‚úì ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\"\r\n                                : isError\r\n                                    ? item.error || \"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î\"\r\n                                    : isPending\r\n                                        ? \"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠...\"\r\n                                        : isActive\r\n                                            ? item.type === \"upload\"\r\n                                                ? \"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î...\"\r\n                                                : \"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î...\"\r\n                                            : \"‡∏û‡∏£‡πâ‡∏≠‡∏°\"}\r\n                        </motion.p>\r\n                    </AnimatePresence>\r\n                </div>\r\n\r\n                {/* Action Buttons */}\r\n                <div className=\"flex items-center gap-1\">\r\n                    {isActive && onCancel && (\r\n                        <motion.button\r\n                            initial={{ scale: 0 }}\r\n                            animate={{ scale: 1 }}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            onClick={() => onCancel(item.id)}\r\n                            className=\"p-2 rounded-xl bg-white/5 hover:bg-red-500/20 \r\n                       text-white/60 hover:text-red-400 transition-all duration-200\"\r\n                            title=\"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\"\r\n                        >\r\n                            <X className=\"w-4 h-4\" />\r\n                        </motion.button>\r\n                    )}\r\n                    {isError && onRetry && (\r\n                        <motion.button\r\n                            initial={{ scale: 0 }}\r\n                            animate={{ scale: 1 }}\r\n                            whileHover={{ scale: 1.1, rotate: -180 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            onClick={() => onRetry(item.id)}\r\n                            className=\"p-2 rounded-xl bg-white/5 hover:bg-purple-500/20 \r\n                       text-white/60 hover:text-purple-400 transition-all duration-200\"\r\n                            title=\"‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà\"\r\n                        >\r\n                            <RotateCcw className=\"w-4 h-4\" />\r\n                        </motion.button>\r\n                    )}\r\n                    {(isComplete || isError) && onDismiss && (\r\n                        <motion.button\r\n                            initial={{ scale: 0 }}\r\n                            animate={{ scale: 1 }}\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            onClick={() => onDismiss(item.id)}\r\n                            className=\"p-2 rounded-xl bg-white/5 hover:bg-white/10 \r\n                       text-white/60 hover:text-white transition-all duration-200\"\r\n                            title=\"‡∏õ‡∏¥‡∏î\"\r\n                        >\r\n                            <X className=\"w-4 h-4\" />\r\n                        </motion.button>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Shimmer effect for active state */}\r\n            {isActive && (\r\n                <motion.div\r\n                    className=\"absolute inset-0 pointer-events-none\"\r\n                    style={{\r\n                        background:\r\n                            \"linear-gradient(90deg, transparent, rgba(255,255,255,0.03), transparent)\",\r\n                    }}\r\n                    animate={{ x: [\"-100%\", \"200%\"] }}\r\n                    transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\r\n                />\r\n            )}\r\n\r\n            {/* Particles effect on complete */}\r\n            {isComplete && (\r\n                <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n                    {[...Array(6)].map((_, i) => (\r\n                        <motion.div\r\n                            key={i}\r\n                            className=\"absolute w-1 h-1 bg-green-400 rounded-full\"\r\n                            style={{\r\n                                left: `${20 + i * 12}%`,\r\n                                bottom: \"50%\",\r\n                            }}\r\n                            initial={{ y: 0, opacity: 1, scale: 1 }}\r\n                            animate={{\r\n                                y: -30 - Math.random() * 20,\r\n                                x: (Math.random() - 0.5) * 40,\r\n                                opacity: 0,\r\n                                scale: 0,\r\n                            }}\r\n                            transition={{\r\n                                duration: 0.6,\r\n                                delay: i * 0.05,\r\n                                ease: \"easeOut\",\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default FileProgressAnimation;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1301, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/components/FileProgress/FileProgressContainer.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n    FileProgressAnimation,\r\n    type FileProgressItem,\r\n} from \"./FileProgressAnimation\";\r\nimport { Upload, Download, X, Minimize2, Maximize2, CheckCircle2, AlertCircle, Loader2 } from \"lucide-react\";\r\n\r\ninterface FileProgressContainerProps {\r\n    items: FileProgressItem[];\r\n    onCancel?: (id: string) => void;\r\n    onRetry?: (id: string) => void;\r\n    onDismiss?: (id: string) => void;\r\n    onClearAll?: () => void;\r\n    position?: \"bottom-right\" | \"bottom-left\" | \"top-right\" | \"top-left\";\r\n    autoDismissDelay?: number; // Auto dismiss after all complete (ms), default 2000\r\n}\r\n\r\nexport const FileProgressContainer: React.FC<FileProgressContainerProps> = ({\r\n    items,\r\n    onCancel,\r\n    onRetry,\r\n    onDismiss,\r\n    onClearAll,\r\n    position = \"bottom-right\",\r\n    autoDismissDelay = 2000,\r\n}) => {\r\n    const [isMinimized, setIsMinimized] = React.useState(false);\r\n    const autoDismissTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    const uploadItems = items.filter((i) => i.type === \"upload\");\r\n    const downloadItems = items.filter((i) => i.type === \"download\");\r\n    const activeCount = items.filter(\r\n        (i) => i.status === \"uploading\" || i.status === \"downloading\"\r\n    ).length;\r\n    const completedCount = items.filter((i) => i.status === \"success\").length;\r\n    const errorCount = items.filter((i) => i.status === \"error\").length;\r\n\r\n    // Auto dismiss when all items are complete (success only, not errors)\r\n    useEffect(() => {\r\n        // Clear any existing timer\r\n        if (autoDismissTimerRef.current) {\r\n            clearTimeout(autoDismissTimerRef.current);\r\n            autoDismissTimerRef.current = null;\r\n        }\r\n\r\n        // Check if all items are complete with no errors and no active transfers\r\n        const allSuccess = items.length > 0 &&\r\n            activeCount === 0 &&\r\n            errorCount === 0 &&\r\n            completedCount === items.length;\r\n\r\n        if (allSuccess && onClearAll && autoDismissDelay > 0) {\r\n            autoDismissTimerRef.current = setTimeout(() => {\r\n                onClearAll();\r\n            }, autoDismissDelay);\r\n        }\r\n\r\n        return () => {\r\n            if (autoDismissTimerRef.current) {\r\n                clearTimeout(autoDismissTimerRef.current);\r\n            }\r\n        };\r\n    }, [items.length, activeCount, errorCount, completedCount, onClearAll, autoDismissDelay]);\r\n\r\n    // Calculate overall progress\r\n    const overallProgress = items.length > 0\r\n        ? Math.round(items.reduce((acc, i) => acc + i.progress, 0) / items.length)\r\n        : 0;\r\n\r\n    const positionClasses = {\r\n        \"bottom-right\": \"bottom-4 right-4\",\r\n        \"bottom-left\": \"bottom-4 left-4\",\r\n        \"top-right\": \"top-4 right-4\",\r\n        \"top-left\": \"top-4 left-4\",\r\n    };\r\n\r\n    if (items.length === 0) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 50, scale: 0.9 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: 50, scale: 0.9 }}\r\n                transition={{ type: \"spring\", stiffness: 300, damping: 25 }}\r\n                className={`fixed ${positionClasses[position]} z-50 w-96 max-w-[calc(100vw-2rem)]`}\r\n            >\r\n                {/* Header */}\r\n                <motion.div\r\n                    layout\r\n                    className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 rounded-t-2xl \r\n                       border border-white/10 border-b-0 px-4 py-3 flex items-center justify-between\r\n                       shadow-lg shadow-black/20\"\r\n                >\r\n                    <div className=\"flex items-center gap-3\">\r\n                        {/* Animated status icon */}\r\n                        <div className=\"relative\">\r\n                            {activeCount > 0 ? (\r\n                                <motion.div\r\n                                    animate={{ rotate: 360 }}\r\n                                    transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\r\n                                >\r\n                                    <Loader2 className=\"w-5 h-5 text-purple-400\" />\r\n                                </motion.div>\r\n                            ) : completedCount > 0 && errorCount === 0 ? (\r\n                                <motion.div\r\n                                    initial={{ scale: 0 }}\r\n                                    animate={{ scale: 1 }}\r\n                                    transition={{ type: \"spring\", stiffness: 500 }}\r\n                                >\r\n                                    <CheckCircle2 className=\"w-5 h-5 text-green-400\" />\r\n                                </motion.div>\r\n                            ) : errorCount > 0 ? (\r\n                                <motion.div\r\n                                    animate={{ x: [-1, 1, -1] }}\r\n                                    transition={{ duration: 0.2, repeat: 3 }}\r\n                                >\r\n                                    <AlertCircle className=\"w-5 h-5 text-red-400\" />\r\n                                </motion.div>\r\n                            ) : null}\r\n                        </div>\r\n\r\n                        {/* Status indicators */}\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {uploadItems.length > 0 && (\r\n                                <motion.div\r\n                                    initial={{ scale: 0 }}\r\n                                    animate={{ scale: 1 }}\r\n                                    className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-purple-500/20\"\r\n                                >\r\n                                    <Upload className=\"w-3.5 h-3.5 text-purple-400\" />\r\n                                    <span className=\"text-xs font-medium text-purple-300\">{uploadItems.length}</span>\r\n                                </motion.div>\r\n                            )}\r\n                            {downloadItems.length > 0 && (\r\n                                <motion.div\r\n                                    initial={{ scale: 0 }}\r\n                                    animate={{ scale: 1 }}\r\n                                    className=\"flex items-center gap-1.5 px-2 py-1 rounded-lg bg-blue-500/20\"\r\n                                >\r\n                                    <Download className=\"w-3.5 h-3.5 text-blue-400\" />\r\n                                    <span className=\"text-xs font-medium text-blue-300\">{downloadItems.length}</span>\r\n                                </motion.div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Progress summary */}\r\n                        {activeCount > 0 && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                className=\"text-xs text-white/50\"\r\n                            >\r\n                                {overallProgress}%\r\n                            </motion.div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Action buttons */}\r\n                    <div className=\"flex items-center gap-1\">\r\n                        <motion.button\r\n                            whileHover={{ scale: 1.1 }}\r\n                            whileTap={{ scale: 0.9 }}\r\n                            onClick={() => setIsMinimized(!isMinimized)}\r\n                            className=\"p-1.5 rounded-lg hover:bg-white/10 text-white/50 hover:text-white transition-colors\"\r\n                        >\r\n                            {isMinimized ? (\r\n                                <Maximize2 className=\"w-4 h-4\" />\r\n                            ) : (\r\n                                <Minimize2 className=\"w-4 h-4\" />\r\n                            )}\r\n                        </motion.button>\r\n                        {onClearAll && items.every((i) => i.status === \"success\" || i.status === \"error\") && (\r\n                            <motion.button\r\n                                initial={{ scale: 0 }}\r\n                                animate={{ scale: 1 }}\r\n                                whileHover={{ scale: 1.1 }}\r\n                                whileTap={{ scale: 0.9 }}\r\n                                onClick={onClearAll}\r\n                                className=\"p-1.5 rounded-lg hover:bg-red-500/20 text-white/50 hover:text-red-400 transition-colors\"\r\n                            >\r\n                                <X className=\"w-4 h-4\" />\r\n                            </motion.button>\r\n                        )}\r\n                    </div>\r\n                </motion.div>\r\n\r\n                {/* Content */}\r\n                <AnimatePresence>\r\n                    {!isMinimized && (\r\n                        <motion.div\r\n                            initial={{ height: 0, opacity: 0 }}\r\n                            animate={{ height: \"auto\", opacity: 1 }}\r\n                            exit={{ height: 0, opacity: 0 }}\r\n                            transition={{ duration: 0.3, ease: \"easeInOut\" }}\r\n                            className=\"bg-slate-900/95 backdrop-blur-xl rounded-b-2xl border border-white/10 \r\n                           border-t-0 overflow-hidden shadow-2xl shadow-black/30\"\r\n                        >\r\n                            <div className=\"max-h-80 overflow-y-auto p-3 space-y-2 custom-scrollbar\">\r\n                                <AnimatePresence mode=\"popLayout\">\r\n                                    {items.map((item, index) => (\r\n                                        <motion.div\r\n                                            key={item.id}\r\n                                            initial={{ opacity: 0, x: -20 }}\r\n                                            animate={{ opacity: 1, x: 0 }}\r\n                                            exit={{ opacity: 0, x: 50 }}\r\n                                            transition={{ delay: index * 0.05 }}\r\n                                        >\r\n                                            <FileProgressAnimation\r\n                                                item={item}\r\n                                                onCancel={onCancel}\r\n                                                onRetry={onRetry}\r\n                                                onDismiss={onDismiss}\r\n                                            />\r\n                                        </motion.div>\r\n                                    ))}\r\n                                </AnimatePresence>\r\n                            </div>\r\n\r\n                            {/* Summary footer */}\r\n                            {items.length > 1 && (\r\n                                <motion.div\r\n                                    initial={{ opacity: 0 }}\r\n                                    animate={{ opacity: 1 }}\r\n                                    className=\"px-4 py-2 border-t border-white/5 bg-slate-900/50\"\r\n                                >\r\n                                    <div className=\"flex items-center justify-between text-xs text-white/40\">\r\n                                        <span>‡∏£‡∏ß‡∏° {items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            {completedCount > 0 && (\r\n                                                <span className=\"text-green-400\">‚úì {completedCount} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>\r\n                                            )}\r\n                                            {errorCount > 0 && (\r\n                                                <span className=\"text-red-400\">‚úï {errorCount} ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß</span>\r\n                                            )}\r\n                                            {activeCount > 0 && (\r\n                                                <span className=\"text-purple-400\">‚óé {activeCount} ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n                        </motion.div>\r\n                    )}\r\n                </AnimatePresence>\r\n\r\n                {/* Minimized progress bar */}\r\n                {isMinimized && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        className=\"bg-slate-900/95 backdrop-blur-xl rounded-b-2xl border border-white/10 border-t-0 p-3\"\r\n                    >\r\n                        {activeCount > 0 ? (\r\n                            <>\r\n                                <div className=\"h-2 bg-white/10 rounded-full overflow-hidden\">\r\n                                    <motion.div\r\n                                        className=\"h-full bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 relative\"\r\n                                        style={{ backgroundSize: \"200% 100%\" }}\r\n                                        animate={{\r\n                                            width: `${overallProgress}%`,\r\n                                            backgroundPosition: [\"0% 0%\", \"100% 0%\", \"0% 0%\"],\r\n                                        }}\r\n                                        transition={{\r\n                                            width: { duration: 0.3 },\r\n                                            backgroundPosition: { duration: 2, repeat: Infinity, ease: \"linear\" },\r\n                                        }}\r\n                                    >\r\n                                        {/* Shimmer */}\r\n                                        <motion.div\r\n                                            className=\"absolute inset-0\"\r\n                                            style={{\r\n                                                background: \"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)\",\r\n                                            }}\r\n                                            animate={{ x: [\"-100%\", \"200%\"] }}\r\n                                            transition={{ duration: 1, repeat: Infinity }}\r\n                                        />\r\n                                    </motion.div>\r\n                                </div>\r\n                                <p className=\"text-xs text-white/40 mt-1.5 text-center\">\r\n                                    {activeCount} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‚Ä¢ {overallProgress}%\r\n                                </p>\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"flex items-center justify-center gap-2 text-xs\">\r\n                                {completedCount > 0 && (\r\n                                    <span className=\"text-green-400\">‚úì {completedCount} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>\r\n                                )}\r\n                                {errorCount > 0 && (\r\n                                    <span className=\"text-red-400\">‚úï {errorCount} ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß</span>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </motion.div>\r\n                )}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nexport default FileProgressContainer;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1938, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/components/FileProgress/useFileProgress.ts"],"sourcesContent":["\"use client\";\r\nimport { useState, useCallback, useRef, useEffect } from \"react\";\r\nimport type {\r\n  FileProgressItem,\r\n  FileProgressStatus,\r\n} from \"./FileProgressAnimation\";\r\n\r\n// Import loading context to suppress loading overlay during file transfers\r\nlet setSuppressLoading: ((suppress: boolean) => void) | null = null;\r\n\r\n// Hook to connect with LoadingContext\r\nexport const setLoadingContextSuppressor = (fn: (suppress: boolean) => void) => {\r\n  setSuppressLoading = fn;\r\n};\r\n\r\ninterface UseFileProgressOptions {\r\n  onUploadComplete?: (id: string, response?: unknown) => void;\r\n  onDownloadComplete?: (id: string, blob?: Blob) => void;\r\n  onError?: (id: string, error: Error) => void;\r\n  maxConcurrent?: number;\r\n}\r\n\r\ninterface UploadOptions {\r\n  url: string;\r\n  method?: \"POST\" | \"PUT\";\r\n  headers?: Record<string, string>;\r\n  fieldName?: string;\r\n  additionalData?: Record<string, string>;\r\n}\r\n\r\ninterface DownloadOptions {\r\n  saveAs?: boolean;\r\n}\r\n\r\nexport const useFileProgress = (options: UseFileProgressOptions = {}) => {\r\n  const [items, setItems] = useState<FileProgressItem[]>([]);\r\n  const abortControllers = useRef<Map<string, AbortController>>(new Map());\r\n\r\n  // Suppress loading overlay when there are active transfers\r\n  useEffect(() => {\r\n    const hasActiveTransfers = items.some(\r\n      (item) => item.status === \"uploading\" || item.status === \"downloading\"\r\n    );\r\n    if (setSuppressLoading) {\r\n      setSuppressLoading(hasActiveTransfers);\r\n    }\r\n  }, [items]);\r\n\r\n  // Generate unique ID\r\n  const generateId = () =>\r\n    `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n  // Update item status\r\n  const updateItem = useCallback(\r\n    (id: string, updates: Partial<FileProgressItem>) => {\r\n      setItems((prev) =>\r\n        prev.map((item) => (item.id === id ? { ...item, ...updates } : item))\r\n      );\r\n    },\r\n    []\r\n  );\r\n\r\n  // Add new item to queue\r\n  const addItem = useCallback(\r\n    (\r\n      file: File,\r\n      type: \"upload\" | \"download\",\r\n      initialStatus: FileProgressStatus = \"pending\"\r\n    ): string => {\r\n      const id = generateId();\r\n      const newItem: FileProgressItem = {\r\n        id,\r\n        fileName: file.name,\r\n        fileSize: file.size,\r\n        fileType: file.type || \"application/octet-stream\",\r\n        progress: 0,\r\n        status: initialStatus,\r\n        type,\r\n      };\r\n      setItems((prev) => [...prev, newItem]);\r\n      return id;\r\n    },\r\n    []\r\n  );\r\n\r\n  // Upload file with progress tracking\r\n  const uploadFile = useCallback(\r\n    async (file: File, uploadOptions: UploadOptions): Promise<string> => {\r\n      const id = addItem(file, \"upload\", \"uploading\");\r\n      const controller = new AbortController();\r\n      abortControllers.current.set(id, controller);\r\n\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append(uploadOptions.fieldName || \"file\", file);\r\n\r\n        // Add additional data if provided\r\n        if (uploadOptions.additionalData) {\r\n          Object.entries(uploadOptions.additionalData).forEach(\r\n            ([key, value]) => {\r\n              formData.append(key, value);\r\n            }\r\n          );\r\n        }\r\n\r\n        // Use XMLHttpRequest for progress tracking\r\n        const response = await new Promise<unknown>((resolve, reject) => {\r\n          const xhr = new XMLHttpRequest();\r\n\r\n          xhr.upload.addEventListener(\"progress\", (event) => {\r\n            if (event.lengthComputable) {\r\n              const progress = Math.round((event.loaded / event.total) * 100);\r\n              updateItem(id, { progress });\r\n            }\r\n          });\r\n\r\n          xhr.addEventListener(\"load\", () => {\r\n            if (xhr.status >= 200 && xhr.status < 300) {\r\n              try {\r\n                resolve(JSON.parse(xhr.responseText));\r\n              } catch {\r\n                resolve(xhr.responseText);\r\n              }\r\n            } else {\r\n              reject(new Error(`Upload failed with status ${xhr.status}`));\r\n            }\r\n          });\r\n\r\n          xhr.addEventListener(\"error\", () => {\r\n            reject(new Error(\"Upload failed\"));\r\n          });\r\n\r\n          xhr.addEventListener(\"abort\", () => {\r\n            reject(new Error(\"Upload cancelled\"));\r\n          });\r\n\r\n          xhr.open(uploadOptions.method || \"POST\", uploadOptions.url);\r\n\r\n          // Set headers\r\n          if (uploadOptions.headers) {\r\n            Object.entries(uploadOptions.headers).forEach(([key, value]) => {\r\n              xhr.setRequestHeader(key, value);\r\n            });\r\n          }\r\n\r\n          // Handle abort signal\r\n          controller.signal.addEventListener(\"abort\", () => xhr.abort());\r\n\r\n          xhr.send(formData);\r\n        });\r\n\r\n        updateItem(id, { status: \"success\", progress: 100 });\r\n        options.onUploadComplete?.(id, response);\r\n\r\n        return id;\r\n      } catch (error) {\r\n        const errorMessage =\r\n          error instanceof Error ? error.message : \"Upload failed\";\r\n        updateItem(id, { status: \"error\", error: errorMessage });\r\n        options.onError?.(\r\n          id,\r\n          error instanceof Error ? error : new Error(errorMessage)\r\n        );\r\n        return id;\r\n      } finally {\r\n        abortControllers.current.delete(id);\r\n      }\r\n    },\r\n    [addItem, updateItem, options]\r\n  );\r\n\r\n  // Download file with progress tracking\r\n  const downloadFile = useCallback(\r\n    async (\r\n      url: string,\r\n      fileName: string,\r\n      fileSize: number = 0,\r\n      downloadOptions: DownloadOptions = {}\r\n    ): Promise<string> => {\r\n      const id = generateId();\r\n      const controller = new AbortController();\r\n      abortControllers.current.set(id, controller);\r\n\r\n      // Create item manually since we don't have a File object\r\n      const newItem: FileProgressItem = {\r\n        id,\r\n        fileName,\r\n        fileSize,\r\n        fileType: \"application/octet-stream\",\r\n        progress: 0,\r\n        status: \"downloading\",\r\n        type: \"download\",\r\n      };\r\n      setItems((prev) => [...prev, newItem]);\r\n\r\n      try {\r\n        const response = await fetch(url, {\r\n          signal: controller.signal,\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`Download failed with status ${response.status}`);\r\n        }\r\n\r\n        const contentLength = response.headers.get(\"Content-Length\");\r\n        const total = contentLength ? parseInt(contentLength, 10) : fileSize;\r\n\r\n        if (total > 0) {\r\n          updateItem(id, { fileSize: total });\r\n        }\r\n\r\n        const reader = response.body?.getReader();\r\n        if (!reader) {\r\n          throw new Error(\"Failed to get response reader\");\r\n        }\r\n\r\n        const chunks: ArrayBuffer[] = [];\r\n        let received = 0;\r\n\r\n        while (true) {\r\n          const { done, value } = await reader.read();\r\n          if (done) break;\r\n\r\n          chunks.push(value.buffer as ArrayBuffer);\r\n          received += value.length;\r\n\r\n          if (total > 0) {\r\n            const progress = Math.round((received / total) * 100);\r\n            updateItem(id, { progress: Math.min(progress, 99) });\r\n          }\r\n        }\r\n\r\n        const blob = new Blob(chunks);\r\n        updateItem(id, {\r\n          status: \"success\",\r\n          progress: 100,\r\n          fileSize: blob.size,\r\n        });\r\n\r\n        // Auto-download if saveAs is true\r\n        if (downloadOptions.saveAs !== false) {\r\n          const downloadUrl = URL.createObjectURL(blob);\r\n          const a = document.createElement(\"a\");\r\n          a.href = downloadUrl;\r\n          a.download = fileName;\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          document.body.removeChild(a);\r\n          URL.revokeObjectURL(downloadUrl);\r\n        }\r\n\r\n        options.onDownloadComplete?.(id, blob);\r\n        return id;\r\n      } catch (error) {\r\n        const errorMessage =\r\n          error instanceof Error ? error.message : \"Download failed\";\r\n        updateItem(id, { status: \"error\", error: errorMessage });\r\n        options.onError?.(\r\n          id,\r\n          error instanceof Error ? error : new Error(errorMessage)\r\n        );\r\n        return id;\r\n      } finally {\r\n        abortControllers.current.delete(id);\r\n      }\r\n    },\r\n    [updateItem, options]\r\n  );\r\n\r\n  // Cancel a transfer\r\n  const cancelTransfer = useCallback(\r\n    (id: string) => {\r\n      const controller = abortControllers.current.get(id);\r\n      if (controller) {\r\n        controller.abort();\r\n        abortControllers.current.delete(id);\r\n      }\r\n      updateItem(id, { status: \"error\", error: \"Cancelled by user\" });\r\n    },\r\n    [updateItem]\r\n  );\r\n\r\n  // Retry a failed transfer\r\n  const retryTransfer = useCallback(\r\n    async (id: string, uploadOptions?: UploadOptions) => {\r\n      const item = items.find((i) => i.id === id);\r\n      if (!item || item.status !== \"error\") return;\r\n\r\n      // For uploads, we need the original file which we don't have stored\r\n      // This would need to be handled by the component using this hook\r\n      updateItem(id, { status: \"pending\", progress: 0, error: undefined });\r\n    },\r\n    [items, updateItem]\r\n  );\r\n\r\n  // Dismiss an item\r\n  const dismissItem = useCallback((id: string) => {\r\n    setItems((prev) => prev.filter((item) => item.id !== id));\r\n  }, []);\r\n\r\n  // Clear all completed/errored items\r\n  const clearCompleted = useCallback(() => {\r\n    setItems((prev) =>\r\n      prev.filter(\r\n        (item) => item.status === \"uploading\" || item.status === \"downloading\"\r\n      )\r\n    );\r\n  }, []);\r\n\r\n  // Clear all items\r\n  const clearAll = useCallback(() => {\r\n    // Abort all active transfers\r\n    abortControllers.current.forEach((controller) => controller.abort());\r\n    abortControllers.current.clear();\r\n    setItems([]);\r\n  }, []);\r\n\r\n  return {\r\n    items,\r\n    uploadFile,\r\n    downloadFile,\r\n    cancelTransfer,\r\n    retryTransfer,\r\n    dismissItem,\r\n    clearCompleted,\r\n    clearAll,\r\n    updateItem,\r\n  };\r\n};\r\n\r\nexport default useFileProgress;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2278, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/components/FileProgress/ToastProvider.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { createContext, useContext, useState, useCallback } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Check, X, AlertCircle, Info, Download, Upload, CheckCircle2, XCircle, AlertTriangle, Loader2 } from \"lucide-react\";\r\n\r\ntype ToastType = \"success\" | \"error\" | \"info\" | \"warning\" | \"upload\" | \"download\";\r\n\r\ninterface Toast {\r\n    id: string;\r\n    type: ToastType;\r\n    title: string;\r\n    message?: string;\r\n    duration?: number;\r\n    progress?: number;\r\n    showProgress?: boolean;\r\n}\r\n\r\ninterface ToastContextType {\r\n    toasts: Toast[];\r\n    addToast: (toast: Omit<Toast, \"id\">) => string;\r\n    removeToast: (id: string) => void;\r\n    updateToast: (id: string, updates: Partial<Toast>) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport const useToast = () => {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error(\"useToast must be used within a ToastProvider\");\r\n    }\r\n    return context;\r\n};\r\n\r\n// Enhanced Toast Item Component\r\nconst ToastItem: React.FC<{ toast: Toast; onClose: () => void }> = ({\r\n    toast,\r\n    onClose,\r\n}) => {\r\n    const [isHovered, setIsHovered] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        if (toast.duration && toast.duration > 0 && !isHovered) {\r\n            const timer = setTimeout(onClose, toast.duration);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [toast.duration, onClose, isHovered]);\r\n\r\n    const icons = {\r\n        success: <CheckCircle2 className=\"w-5 h-5\" />,\r\n        error: <XCircle className=\"w-5 h-5\" />,\r\n        warning: <AlertTriangle className=\"w-5 h-5\" />,\r\n        info: <Info className=\"w-5 h-5\" />,\r\n        upload: <Upload className=\"w-5 h-5\" />,\r\n        download: <Download className=\"w-5 h-5\" />,\r\n    };\r\n\r\n    const colors = {\r\n        success: \"from-green-500/20 to-emerald-500/20 border-green-500/30\",\r\n        error: \"from-red-500/20 to-rose-500/20 border-red-500/30\",\r\n        warning: \"from-amber-500/20 to-orange-500/20 border-amber-500/30\",\r\n        info: \"from-blue-500/20 to-cyan-500/20 border-blue-500/30\",\r\n        upload: \"from-purple-500/20 to-pink-500/20 border-purple-500/30\",\r\n        download: \"from-blue-500/20 to-indigo-500/20 border-blue-500/30\",\r\n    };\r\n\r\n    const iconColors = {\r\n        success: \"text-green-400 bg-green-500/20\",\r\n        error: \"text-red-400 bg-red-500/20\",\r\n        warning: \"text-amber-400 bg-amber-500/20\",\r\n        info: \"text-blue-400 bg-blue-500/20\",\r\n        upload: \"text-purple-400 bg-purple-500/20\",\r\n        download: \"text-blue-400 bg-blue-500/20\",\r\n    };\r\n\r\n    const glowColors = {\r\n        success: \"shadow-green-500/20\",\r\n        error: \"shadow-red-500/20\",\r\n        warning: \"shadow-amber-500/20\",\r\n        info: \"shadow-blue-500/20\",\r\n        upload: \"shadow-purple-500/20\",\r\n        download: \"shadow-blue-500/20\",\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            layout\r\n            initial={{ opacity: 0, x: 100, scale: 0.9 }}\r\n            animate={{ opacity: 1, x: 0, scale: 1 }}\r\n            exit={{ opacity: 0, x: 100, scale: 0.9 }}\r\n            whileHover={{ scale: 1.02 }}\r\n            transition={{ type: \"spring\", stiffness: 400, damping: 25 }}\r\n            onMouseEnter={() => setIsHovered(true)}\r\n            onMouseLeave={() => setIsHovered(false)}\r\n            className={`relative bg-gradient-to-r ${colors[toast.type]} \r\n                  backdrop-blur-xl rounded-2xl border p-4 shadow-2xl ${glowColors[toast.type]}\r\n                  min-w-72 max-w-96 overflow-hidden cursor-pointer`}\r\n            onClick={onClose}\r\n        >\r\n            {/* Background glow effect */}\r\n            <motion.div\r\n                className=\"absolute inset-0 opacity-30\"\r\n                style={{\r\n                    background: `radial-gradient(circle at 0% 50%, ${toast.type === \"success\" ? \"#22c55e\" :\r\n                            toast.type === \"error\" ? \"#ef4444\" :\r\n                                toast.type === \"warning\" ? \"#f59e0b\" :\r\n                                    toast.type === \"upload\" ? \"#8b5cf6\" :\r\n                                        toast.type === \"download\" ? \"#3b82f6\" :\r\n                                            \"#3b82f6\"\r\n                        }40, transparent 50%)`,\r\n                }}\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 0.3 }}\r\n            />\r\n\r\n            <div className=\"relative flex items-start gap-3\">\r\n                {/* Animated Icon */}\r\n                <motion.div\r\n                    initial={{ scale: 0, rotate: -180 }}\r\n                    animate={{ scale: 1, rotate: 0 }}\r\n                    transition={{ type: \"spring\", stiffness: 500, damping: 25, delay: 0.1 }}\r\n                    className={`p-2 rounded-xl ${iconColors[toast.type]} flex-shrink-0`}\r\n                >\r\n                    {toast.type === \"upload\" ? (\r\n                        toast.progress !== undefined && toast.progress < 100 ? (\r\n                            <motion.div\r\n                                animate={{ y: [-2, 2, -2] }}\r\n                                transition={{ duration: 0.6, repeat: Infinity }}\r\n                            >\r\n                                {icons[toast.type]}\r\n                            </motion.div>\r\n                        ) : (\r\n                            <motion.div\r\n                                initial={{ scale: 0 }}\r\n                                animate={{ scale: 1 }}\r\n                                transition={{ type: \"spring\", stiffness: 500 }}\r\n                            >\r\n                                <CheckCircle2 className=\"w-5 h-5 text-green-400\" />\r\n                            </motion.div>\r\n                        )\r\n                    ) : toast.type === \"download\" ? (\r\n                        toast.progress !== undefined && toast.progress < 100 ? (\r\n                            <motion.div\r\n                                animate={{ y: [2, -2, 2] }}\r\n                                transition={{ duration: 0.6, repeat: Infinity }}\r\n                            >\r\n                                {icons[toast.type]}\r\n                            </motion.div>\r\n                        ) : (\r\n                            <motion.div\r\n                                initial={{ scale: 0 }}\r\n                                animate={{ scale: 1 }}\r\n                                transition={{ type: \"spring\", stiffness: 500 }}\r\n                            >\r\n                                <CheckCircle2 className=\"w-5 h-5 text-green-400\" />\r\n                            </motion.div>\r\n                        )\r\n                    ) : toast.type === \"success\" ? (\r\n                        <motion.div\r\n                            initial={{ pathLength: 0 }}\r\n                            animate={{ pathLength: 1 }}\r\n                        >\r\n                            {icons[toast.type]}\r\n                        </motion.div>\r\n                    ) : toast.type === \"error\" ? (\r\n                        <motion.div\r\n                            animate={{ x: [-1, 1, -1, 1, 0] }}\r\n                            transition={{ duration: 0.3, delay: 0.2 }}\r\n                        >\r\n                            {icons[toast.type]}\r\n                        </motion.div>\r\n                    ) : (\r\n                        icons[toast.type]\r\n                    )}\r\n                </motion.div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <motion.p\r\n                        initial={{ opacity: 0, y: 5 }}\r\n                        animate={{ opacity: 1, y: 0 }}\r\n                        transition={{ delay: 0.15 }}\r\n                        className=\"text-white font-medium text-sm\"\r\n                    >\r\n                        {toast.title}\r\n                    </motion.p>\r\n                    {toast.message && (\r\n                        <motion.p\r\n                            initial={{ opacity: 0, y: 5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            transition={{ delay: 0.2 }}\r\n                            className=\"text-white/60 text-xs mt-0.5 line-clamp-2\"\r\n                        >\r\n                            {toast.message}\r\n                        </motion.p>\r\n                    )}\r\n\r\n                    {/* Progress bar for upload/download */}\r\n                    {(toast.type === \"upload\" || toast.type === \"download\") &&\r\n                        toast.progress !== undefined && toast.showProgress && (\r\n                            <motion.div\r\n                                initial={{ opacity: 0, scaleX: 0 }}\r\n                                animate={{ opacity: 1, scaleX: 1 }}\r\n                                className=\"mt-2 h-1.5 bg-white/10 rounded-full overflow-hidden origin-left\"\r\n                            >\r\n                                <motion.div\r\n                                    className={`h-full rounded-full ${toast.type === \"upload\"\r\n                                            ? \"bg-gradient-to-r from-purple-500 via-pink-500 to-purple-500\"\r\n                                            : \"bg-gradient-to-r from-blue-500 via-cyan-500 to-blue-500\"\r\n                                        }`}\r\n                                    style={{ backgroundSize: \"200% 100%\" }}\r\n                                    initial={{ width: 0 }}\r\n                                    animate={{\r\n                                        width: `${toast.progress}%`,\r\n                                        backgroundPosition: toast.progress < 100\r\n                                            ? [\"0% 0%\", \"100% 0%\", \"0% 0%\"]\r\n                                            : \"0% 0%\",\r\n                                    }}\r\n                                    transition={{\r\n                                        width: { duration: 0.3, ease: \"easeOut\" },\r\n                                        backgroundPosition: { duration: 1.5, repeat: Infinity, ease: \"linear\" },\r\n                                    }}\r\n                                />\r\n                            </motion.div>\r\n                        )}\r\n                </div>\r\n\r\n                {/* Close button */}\r\n                <motion.button\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    whileHover={{ scale: 1.2, rotate: 90 }}\r\n                    whileTap={{ scale: 0.9 }}\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onClose();\r\n                    }}\r\n                    className=\"p-1 rounded-lg hover:bg-white/10 text-white/40 hover:text-white transition-colors flex-shrink-0\"\r\n                >\r\n                    <X className=\"w-4 h-4\" />\r\n                </motion.button>\r\n            </div>\r\n\r\n            {/* Auto-dismiss progress bar */}\r\n            {toast.duration && toast.duration > 0 && !isHovered && (\r\n                <motion.div\r\n                    className=\"absolute bottom-0 left-0 h-0.5 bg-white/30 origin-left\"\r\n                    initial={{ scaleX: 1 }}\r\n                    animate={{ scaleX: 0 }}\r\n                    transition={{ duration: toast.duration / 1000, ease: \"linear\" }}\r\n                />\r\n            )}\r\n\r\n            {/* Particles on success */}\r\n            {toast.type === \"success\" && (\r\n                <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\r\n                    {[...Array(8)].map((_, i) => (\r\n                        <motion.div\r\n                            key={i}\r\n                            className=\"absolute w-1 h-1 bg-green-400 rounded-full\"\r\n                            style={{\r\n                                left: `${10 + i * 10}%`,\r\n                                bottom: \"30%\",\r\n                            }}\r\n                            initial={{ y: 0, opacity: 1, scale: 1 }}\r\n                            animate={{\r\n                                y: -20 - Math.random() * 15,\r\n                                x: (Math.random() - 0.5) * 30,\r\n                                opacity: 0,\r\n                                scale: 0,\r\n                            }}\r\n                            transition={{\r\n                                duration: 0.8,\r\n                                delay: 0.1 + i * 0.03,\r\n                                ease: \"easeOut\",\r\n                            }}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n// Toast Provider Component\r\nexport const ToastProvider: React.FC<{ children: React.ReactNode }> = ({\r\n    children,\r\n}) => {\r\n    const [toasts, setToasts] = useState<Toast[]>([]);\r\n\r\n    const addToast = useCallback((toast: Omit<Toast, \"id\">): string => {\r\n        const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n        const newToast: Toast = {\r\n            ...toast,\r\n            id,\r\n            duration: toast.duration ?? 4000,\r\n        };\r\n        setToasts((prev) => [...prev, newToast]);\r\n        return id;\r\n    }, []);\r\n\r\n    const removeToast = useCallback((id: string) => {\r\n        setToasts((prev) => prev.filter((t) => t.id !== id));\r\n    }, []);\r\n\r\n    const updateToast = useCallback((id: string, updates: Partial<Toast>) => {\r\n        setToasts((prev) =>\r\n            prev.map((t) => (t.id === id ? { ...t, ...updates } : t))\r\n        );\r\n    }, []);\r\n\r\n    return (\r\n        <ToastContext.Provider value={{ toasts, addToast, removeToast, updateToast }}>\r\n            {children}\r\n            {/* Toast Container */}\r\n            <div className=\"fixed top-4 right-4 z-[100] flex flex-col gap-2\">\r\n                <AnimatePresence mode=\"popLayout\">\r\n                    {toasts.map((toast) => (\r\n                        <ToastItem\r\n                            key={toast.id}\r\n                            toast={toast}\r\n                            onClose={() => removeToast(toast.id)}\r\n                        />\r\n                    ))}\r\n                </AnimatePresence>\r\n            </div>\r\n        </ToastContext.Provider>\r\n    );\r\n};\r\n\r\nexport default ToastProvider;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2866, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/components/FileProgress/index.ts"],"sourcesContent":["// File Progress Components\r\nexport {\r\n  FileProgressAnimation,\r\n  type FileProgressItem,\r\n  type FileProgressStatus,\r\n} from \"./FileProgressAnimation\";\r\n\r\nexport { FileProgressContainer } from \"./FileProgressContainer\";\r\nexport { useFileProgress, setLoadingContextSuppressor } from \"./useFileProgress\";\r\nexport { ToastProvider, useToast } from \"./ToastProvider\";\r\n\r\n// Re-export types for convenience\r\nexport type { FileProgressItem as ProgressItem } from \"./FileProgressAnimation\";\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;AAC3B;AAMA;AACA;AACA"}},
    {"offset": {"line": 2883, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nut_z/OneDrive/%E0%B9%80%E0%B8%94%E0%B8%AA%E0%B8%81%E0%B9%8C%E0%B8%97%E0%B9%87%E0%B8%AD%E0%B8%9B/new-bjh/bjh-bangkok/src/app/%28fullscreen%29/all-files-gallery/page.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useMemo, useRef, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  type LucideIcon,\r\n  Search,\r\n  RefreshCw,\r\n  Download,\r\n  ArrowLeft,\r\n  Image as ImageIcon,\r\n  Film,\r\n  FileVideo,\r\n  Grid,\r\n  List,\r\n  LayoutGrid,\r\n  Filter,\r\n  X,\r\n  Play,\r\n  Pause,\r\n  Volume2,\r\n  VolumeX,\r\n  Maximize2,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Heart,\r\n  Star,\r\n  Trash2,\r\n  Upload,\r\n  FolderOpen,\r\n  Eye,\r\n  Copy,\r\n  Share2,\r\n  MoreHorizontal,\r\n  MoreVertical,\r\n  Calendar,\r\n  Clock,\r\n  HardDrive,\r\n  Check,\r\n  Plus,\r\n  Pencil,\r\n  Megaphone,\r\n  MessageSquareQuote,\r\n  Sparkles,\r\n  Presentation,\r\n  Archive,\r\n  Camera,\r\n  Smartphone,\r\n  Send,\r\n  Wand2,\r\n  Menu,\r\n  ChevronDown,\r\n  AlertCircle,\r\n  Info,\r\n  FolderPlus,\r\n  ArrowRight,\r\n} from \"lucide-react\";\r\nimport UserMenu from \"@/components/UserMenu\";\r\nimport {\r\n  FileProgressContainer,\r\n  useFileProgress,\r\n  type FileProgressItem,\r\n  setLoadingContextSuppressor,\r\n} from \"@/components/FileProgress\";\r\nimport { useLoading } from \"@/components/LoadingContext\";\r\n\r\n// Custom scrollbar styles\r\nconst customScrollbarStyle = `\r\n  .custom-scrollbar::-webkit-scrollbar {\r\n    width: 10px;\r\n    height: 10px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-track {\r\n    background: linear-gradient(180deg, #1e1b4b 0%, #312e81 100%);\r\n    border-radius: 12px;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-thumb {\r\n    background: linear-gradient(180deg, #8b5cf6 0%, #ec4899 50%, #f97316 100%);\r\n    border-radius: 12px;\r\n    border: 2px solid transparent;\r\n    background-clip: padding-box;\r\n  }\r\n  .custom-scrollbar::-webkit-scrollbar-thumb:hover {\r\n    background: linear-gradient(180deg, #a78bfa 0%, #f472b6 50%, #fb923c 100%);\r\n    border-radius: 12px;\r\n  }\r\n\r\n  @keyframes float {\r\n    0%, 100% { transform: translateY(0px) rotate(0deg); }\r\n    50% { transform: translateY(-20px) rotate(5deg); }\r\n  }\r\n\r\n  @keyframes pulse-glow {\r\n    0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.5), 0 0 40px rgba(236, 72, 153, 0.3); }\r\n    50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.8), 0 0 80px rgba(236, 72, 153, 0.5); }\r\n  }\r\n\r\n  @keyframes gradient-shift {\r\n    0% { background-position: 0% 50%; }\r\n    50% { background-position: 100% 50%; }\r\n    100% { background-position: 0% 50%; }\r\n  }\r\n\r\n  @keyframes shimmer {\r\n    0% { transform: translateX(-100%); }\r\n    100% { transform: translateX(100%); }\r\n  }\r\n\r\n  @keyframes bounce-in {\r\n    0% { transform: scale(0); opacity: 0; }\r\n    50% { transform: scale(1.1); }\r\n    100% { transform: scale(1); opacity: 1; }\r\n  }\r\n\r\n  @keyframes slide-up {\r\n    from { transform: translateY(100%); opacity: 0; }\r\n    to { transform: translateY(0); opacity: 1; }\r\n  }\r\n\r\n  @keyframes slide-down {\r\n    from { transform: translateY(0); opacity: 1; }\r\n    to { transform: translateY(100%); opacity: 0; }\r\n  }\r\n\r\n  @keyframes rotate-3d {\r\n    from { transform: perspective(1000px) rotateY(0deg); }\r\n    to { transform: perspective(1000px) rotateY(360deg); }\r\n  }\r\n\r\n  .animate-float { animation: float 6s ease-in-out infinite; }\r\n  .animate-pulse-glow { animation: pulse-glow 3s ease-in-out infinite; }\r\n  .animate-gradient-shift { \r\n    background-size: 200% 200%;\r\n    animation: gradient-shift 5s ease infinite;\r\n  }\r\n  .animate-shimmer { animation: shimmer 2s infinite; }\r\n  .animate-bounce-in { animation: bounce-in 0.5s ease-out forwards; }\r\n  .animate-slide-up { animation: slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }\r\n  .animate-slide-down { animation: slide-down 0.3s ease-in forwards; }\r\n\r\n  .glass-effect {\r\n    background: rgba(255, 255, 255, 0.1);\r\n    backdrop-filter: blur(20px);\r\n    -webkit-backdrop-filter: blur(20px);\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n  }\r\n\r\n  .glass-card {\r\n    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);\r\n    backdrop-filter: blur(10px);\r\n    -webkit-backdrop-filter: blur(10px);\r\n    border: 1px solid rgba(255,255,255,0.18);\r\n  }\r\n\r\n  .neon-border {\r\n    box-shadow: 0 0 5px theme('colors.purple.400'),\r\n                0 0 20px theme('colors.purple.600'),\r\n                inset 0 0 5px theme('colors.purple.400');\r\n  }\r\n\r\n  .image-card {\r\n    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\r\n  }\r\n\r\n  .image-card:hover {\r\n    transform: translateY(-8px) scale(1.02);\r\n    box-shadow: 0 25px 50px -12px rgba(139, 92, 246, 0.4);\r\n  }\r\n\r\n  .file-item:hover .file-actions {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n\r\n  .file-actions {\r\n    opacity: 0;\r\n    transform: translateY(10px);\r\n    transition: all 0.3s ease;\r\n  }\r\n\r\n  /* Mobile responsive styles */\r\n  @media (max-width: 768px) {\r\n    .image-card:hover {\r\n      transform: none;\r\n    }\r\n    \r\n    .file-actions {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n\r\n    .mobile-touch-target {\r\n      min-height: 44px;\r\n      min-width: 44px;\r\n    }\r\n  }\r\n\r\n  /* Touch-friendly interactions */\r\n  @media (hover: none) {\r\n    .image-card:active {\r\n      transform: scale(0.98);\r\n    }\r\n    \r\n    .file-actions {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n\r\n  /* AI Drop Zone Animation */\r\n  @keyframes ai-pulse {\r\n    0%, 100% { \r\n      box-shadow: 0 0 20px rgba(168, 85, 247, 0.4), 0 0 40px rgba(236, 72, 153, 0.2);\r\n      border-color: rgba(168, 85, 247, 0.5);\r\n    }\r\n    50% { \r\n      box-shadow: 0 0 30px rgba(168, 85, 247, 0.6), 0 0 60px rgba(236, 72, 153, 0.4);\r\n      border-color: rgba(236, 72, 153, 0.7);\r\n    }\r\n  }\r\n\r\n  .ai-drop-zone {\r\n    animation: ai-pulse 2s ease-in-out infinite;\r\n  }\r\n\r\n  .ai-drop-zone-active {\r\n    animation: none;\r\n    box-shadow: 0 0 40px rgba(34, 197, 94, 0.6), 0 0 80px rgba(34, 197, 94, 0.3);\r\n    border-color: rgba(34, 197, 94, 0.8);\r\n    background: rgba(34, 197, 94, 0.1);\r\n  }\r\n\r\n  /* LINE Share Button */\r\n  .line-share-btn {\r\n    background: linear-gradient(135deg, #00B900 0%, #00C300 100%);\r\n  }\r\n\r\n  .line-share-btn:hover {\r\n    background: linear-gradient(135deg, #00C300 0%, #00D400 100%);\r\n  }\r\n\r\n  /* Responsive Text Sizing */\r\n  .text-responsive-xs {\r\n    font-size: clamp(0.625rem, 2vw, 0.75rem);\r\n  }\r\n\r\n  .text-responsive-sm {\r\n    font-size: clamp(0.75rem, 2.5vw, 0.875rem);\r\n  }\r\n\r\n  .text-responsive-base {\r\n    font-size: clamp(0.875rem, 3vw, 1rem);\r\n  }\r\n\r\n  .text-responsive-lg {\r\n    font-size: clamp(1rem, 3.5vw, 1.125rem);\r\n  }\r\n\r\n  .text-responsive-xl {\r\n    font-size: clamp(1.125rem, 4vw, 1.25rem);\r\n  }\r\n\r\n  .text-responsive-2xl {\r\n    font-size: clamp(1.25rem, 4.5vw, 1.5rem);\r\n  }\r\n\r\n  .text-responsive-3xl {\r\n    font-size: clamp(1.5rem, 5vw, 1.875rem);\r\n  }\r\n\r\n  .text-responsive-4xl {\r\n    font-size: clamp(1.75rem, 5.5vw, 2.25rem);\r\n  }\r\n\r\n  .text-responsive-5xl {\r\n    font-size: clamp(2rem, 6vw, 3rem);\r\n  }\r\n\r\n  /* Folder card responsive text */\r\n  .folder-title {\r\n    font-size: clamp(0.875rem, 2.5vw + 0.25rem, 1.125rem);\r\n    line-height: 1.3;\r\n  }\r\n\r\n  .folder-description {\r\n    font-size: clamp(0.625rem, 2vw + 0.1rem, 0.875rem);\r\n    line-height: 1.4;\r\n  }\r\n\r\n  .folder-meta {\r\n    font-size: clamp(0.625rem, 1.5vw + 0.1rem, 0.75rem);\r\n  }\r\n\r\n  /* File card responsive text */\r\n  .file-title {\r\n    font-size: clamp(0.75rem, 2vw + 0.2rem, 1rem);\r\n    line-height: 1.3;\r\n  }\r\n\r\n  .file-meta {\r\n    font-size: clamp(0.625rem, 1.5vw + 0.1rem, 0.75rem);\r\n  }\r\n\r\n  .file-tag {\r\n    font-size: clamp(0.5rem, 1.5vw, 0.75rem);\r\n    padding: clamp(0.125rem, 0.5vw, 0.25rem) clamp(0.375rem, 1vw, 0.5rem);\r\n  }\r\n\r\n  /* Header responsive text */\r\n  .page-title {\r\n    font-size: clamp(1.5rem, 5vw + 0.5rem, 3rem);\r\n    line-height: 1.2;\r\n  }\r\n\r\n  .page-subtitle {\r\n    font-size: clamp(0.75rem, 2.5vw + 0.1rem, 1.125rem);\r\n  }\r\n\r\n  /* Button responsive text */\r\n  .btn-text {\r\n    font-size: clamp(0.75rem, 2vw + 0.1rem, 0.875rem);\r\n  }\r\n\r\n  /* Breadcrumb responsive text */\r\n  .breadcrumb-text {\r\n    font-size: clamp(0.625rem, 2vw, 0.875rem);\r\n  }\r\n`;\r\n\r\n// File interface - files will be stored in /public/images/video/\r\ninterface FileItem {\r\n  id: number;\r\n  name: string;\r\n  type: \"image\" | \"video\" | \"clip\";\r\n  url: string;\r\n  thumbnail: string;\r\n  size: string;\r\n  date: string;\r\n  tags: string[];\r\n  favorite: boolean;\r\n  views: number;\r\n  duration?: string;\r\n  category: string;\r\n  needsThumbnailGeneration?: boolean;\r\n}\r\n\r\n// Initial empty files - users will upload files to /public/images/video/\r\nconst initialFiles: FileItem[] = [];\r\n\r\n// Recursive nested folder structure\r\ninterface NestedFolder {\r\n  id: string;\r\n  name: string;\r\n  fileIds: number[];\r\n  children: NestedFolder[];\r\n  parentId: string | null;\r\n  relativePath: string | null;\r\n}\r\n\r\ninterface MediaFolder {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  gradient: string;\r\n  icon: LucideIcon;\r\n  subFolders: NestedFolder[];\r\n  rootFileIds: number[];\r\n  relativePath?: string;\r\n}\r\n\r\ntype MediaFolderTemplate = Omit<MediaFolder, \"subFolders\" | \"rootFileIds\">;\r\n\r\nconst folderTemplates: MediaFolderTemplate[] = [\r\n  {\r\n    id: \"ad-content\",\r\n    name: \"Ad Content\",\r\n    description: \"‚ú® ‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡πà‡∏≠‡∏ô-‡∏´‡∏•‡∏±‡∏á‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°\",\r\n    gradient: \"from-rose-500 to-pink-600\",\r\n    icon: Sparkles,\r\n  },\r\n  {\r\n    id: \"before-and-after\",\r\n    name: \"Before and After\",\r\n    description: \"üí¨ ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏Ñ‡∏ô‡πÑ‡∏Ç‡πâ‡∏à‡∏£‡∏¥‡∏á\",\r\n    gradient: \"from-amber-500 to-orange-500\",\r\n    icon: MessageSquareQuote,\r\n  },\r\n  {\r\n    id: \"branding\",\r\n    name: \"Branding\",\r\n    description: \"üé¨ ‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏±‡∏ï‡∏ñ‡∏Å‡∏≤‡∏£\",\r\n    gradient: \"from-emerald-500 to-teal-500\",\r\n    icon: Film,\r\n  },\r\n  {\r\n    id: \"presentations\",\r\n    name: \"Presentations\",\r\n    description: \"üë®‚Äç‚öïÔ∏è ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡∏°‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç\",\r\n    gradient: \"from-sky-500 to-blue-600\",\r\n    icon: Presentation,\r\n  },\r\n  {\r\n    id: \"all-footages\",\r\n    name: \"All Footages\",\r\n    description: \"üè• ‡∏û‡∏≤‡∏ä‡∏°‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î\",\r\n    gradient: \"from-violet-500 to-purple-600\",\r\n    icon: Megaphone,\r\n  },\r\n  {\r\n    id: \"other-files\",\r\n    name: \"Other Files\",\r\n    description: \"üéÅ ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏û‡∏¥‡πÄ‡∏®‡∏©\",\r\n    gradient: \"from-fuchsia-500 to-pink-500\",\r\n    icon: Archive,\r\n  },\r\n];\r\n\r\nconst categoryFolderMap: Record<string, MediaFolderTemplate[\"id\"]> = {\r\n  \"Promo Clips\": \"ad-content\",\r\n  \"Social Media\": \"ad-content\",\r\n  Marketing: \"ad-content\",\r\n  \"Before/After\": \"before-and-after\",\r\n  Products: \"branding\",\r\n  Testimonials: \"before-and-after\",\r\n  Consultations: \"before-and-after\",\r\n  Events: \"presentations\",\r\n  \"Surgery Videos\": \"all-footages\",\r\n  Training: \"all-footages\",\r\n};\r\n\r\nconst slugify = (value: string) =>\r\n  value\r\n    .toLowerCase()\r\n    .replace(/[^a-z0-9]+/g, \"-\")\r\n    .replace(/(^-|-$)+/g, \"\");\r\n\r\nconst getPathSegments = (value: string) =>\r\n  value\r\n    .split(\"/\")\r\n    .map((segment) => segment.trim())\r\n    .filter(Boolean);\r\n\r\nconst getIdFromPath = (value: string) =>\r\n  getPathSegments(value).map((segment) => slugify(segment)).join(\"-\");\r\n\r\ntype ApiFolderNode = {\r\n  id: string;\r\n  name: string;\r\n  fileIds: number[];\r\n  path: string;\r\n  children: ApiFolderNode[];\r\n};\r\n\r\ntype MarketingApiResponse = {\r\n  folders: ApiFolderNode[];\r\n  files: FileItem[];\r\n};\r\n\r\n// Helper functions for nested folder operations\r\nconst findFolderById = (folders: NestedFolder[], id: string): NestedFolder | null => {\r\n  for (const folder of folders) {\r\n    if (folder.id === id) return folder;\r\n    const found = findFolderById(folder.children, id);\r\n    if (found) return found;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst isLeafFolder = (folder: NestedFolder): boolean => {\r\n  return folder.children.length === 0;\r\n};\r\n\r\nconst countAllSubFolders = (folders: NestedFolder[]): number => {\r\n  return folders.reduce((acc, folder) => {\r\n    return acc + 1 + countAllSubFolders(folder.children);\r\n  }, 0);\r\n};\r\n\r\nconst getAllFileIds = (folder: NestedFolder): number[] => {\r\n  const ids = [...folder.fileIds];\r\n  folder.children.forEach(child => {\r\n    ids.push(...getAllFileIds(child));\r\n  });\r\n  return ids;\r\n};\r\n\r\nconst createInitialFolders = (mediaFiles: FileItem[]): MediaFolder[] => {\r\n  const templateMap = new Map<string, MediaFolder>();\r\n  folderTemplates.forEach((template) => {\r\n    templateMap.set(template.id, { ...template, subFolders: [], rootFileIds: [], relativePath: template.name });\r\n  });\r\n\r\n  const fallbackId = \"other-files\";\r\n\r\n  mediaFiles.forEach((file) => {\r\n    const folderId = categoryFolderMap[file.category] || fallbackId;\r\n    const folder = templateMap.get(folderId);\r\n    if (!folder) return;\r\n\r\n    const subFolderName = file.category;\r\n    let subFolder = folder.subFolders.find((sub) => sub.name === subFolderName);\r\n\r\n    if (!subFolder) {\r\n      subFolder = {\r\n        id: `${folder.id}-${slugify(subFolderName)}`,\r\n        name: subFolderName,\r\n        fileIds: [],\r\n        children: [],\r\n        parentId: null,\r\n        relativePath: `${folder.name}/${subFolderName}`,\r\n      };\r\n      folder.subFolders.push(subFolder);\r\n    }\r\n\r\n    if (subFolder && !subFolder.fileIds.includes(file.id)) {\r\n      subFolder.fileIds.push(file.id);\r\n    }\r\n  });\r\n\r\n  return folderTemplates.map((template) => templateMap.get(template.id)!);\r\n};\r\n\r\nconst mapApiNodeToNested = (node: ApiFolderNode, parentId: string | null): NestedFolder => ({\r\n  id: node.id,\r\n  name: node.name,\r\n  fileIds: node.fileIds,\r\n  parentId,\r\n  relativePath: node.path,\r\n  children: node.children.map((child) => mapApiNodeToNested(child, node.id)),\r\n});\r\n\r\nconst buildFoldersFromApi = (nodes: ApiFolderNode[]): MediaFolder[] => {\r\n  const nodeMap = new Map(nodes.map((node) => [node.id, node]));\r\n  return folderTemplates.map((template) => {\r\n    const serverNode = nodeMap.get(template.id);\r\n    const relativePath = serverNode?.path ?? template.relativePath ?? template.name;\r\n    return {\r\n      ...template,\r\n      relativePath,\r\n      rootFileIds: serverNode?.fileIds ?? [],\r\n      subFolders: serverNode\r\n        ? serverNode.children.map((child) => mapApiNodeToNested(child, null))\r\n        : [],\r\n    };\r\n  });\r\n};\r\nconst AllFilesGalleryPage = () => {\r\n  const router = useRouter();\r\n  const { setSuppressLoading } = useLoading();\r\n  const [files, setFiles] = useState<FileItem[]>(initialFiles);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [currentUser, setCurrentUser] = useState<any>(null);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n\r\n  // Connect LoadingContext suppressor to FileProgress hook\r\n  useEffect(() => {\r\n    setLoadingContextSuppressor(setSuppressLoading);\r\n    return () => {\r\n      setLoadingContextSuppressor(() => { });\r\n    };\r\n  }, [setSuppressLoading]);\r\n  const [viewMode, setViewMode] = useState<\"grid\" | \"list\" | \"masonry\">(\"grid\");\r\n  const [filterType, setFilterType] = useState<\r\n    \"all\" | \"image\" | \"video\" | \"clip\"\r\n  >(\"all\");\r\n  const [showFilterMenu, setShowFilterMenu] = useState(false);\r\n  const [sortBy, setSortBy] = useState<\"date\" | \"name\" | \"size\" | \"views\">(\r\n    \"date\"\r\n  );\r\n  const [sortDirection, setSortDirection] = useState<\"asc\" | \"desc\">(\"desc\");\r\n  const [selectedFiles, setSelectedFiles] = useState<number[]>([]);\r\n  const [showLightbox, setShowLightbox] = useState(false);\r\n  const [lightboxIndex, setLightboxIndex] = useState(0);\r\n  const [showFavoritesOnly, setShowFavoritesOnly] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\r\n  const [folders, setFolders] = useState<MediaFolder[]>(() =>\r\n    createInitialFolders(initialFiles)\r\n  );\r\n  const [activeFolderId, setActiveFolderId] = useState<string | null>(null);\r\n  // Breadcrumb path: array of folder IDs representing the navigation path\r\n  const [folderPath, setFolderPath] = useState<string[]>([]);\r\n  const [isCreatingSubFolder, setIsCreatingSubFolder] = useState(false);\r\n  const [subFolderDraftName, setSubFolderDraftName] = useState(\"\");\r\n  const [editingSubFolderId, setEditingSubFolderId] = useState<string | null>(\r\n    null\r\n  );\r\n  const [editingSubFolderValue, setEditingSubFolderValue] = useState(\"\");\r\n  const [editingFolderId, setEditingFolderId] = useState<string | null>(null);\r\n  const [editingFolderValue, setEditingFolderValue] = useState(\"\");\r\n\r\n  // Drag and drop state\r\n  const [draggingFileId, setDraggingFileId] = useState<number | null>(null);\r\n  const [dragOverFolderId, setDragOverFolderId] = useState<string | null>(null);\r\n\r\n  // Mobile and feature state\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [showAIDropZone, setShowAIDropZone] = useState(true);\r\n  const [aiDragOver, setAIDragOver] = useState(false);\r\n  const [aiProcessingFiles, setAIProcessingFiles] = useState<number[]>([]);\r\n  const [showShareModal, setShowShareModal] = useState(false);\r\n  const [shareFileId, setShareFileId] = useState<number | null>(null);\r\n  const [showLineSendModal, setShowLineSendModal] = useState(false);\r\n  const [lineSendUserId, setLineSendUserId] = useState(\"\");\r\n  const [lineSendStatus, setLineSendStatus] = useState<\"idle\" | \"sending\" | \"success\" | \"error\">(\"idle\");\r\n  const [lineSendError, setLineSendError] = useState(\"\");\r\n  // LINE Groups management\r\n  const [lineGroups, setLineGroups] = useState<Array<{ id: string; name: string }>>([]);\r\n  const [showLineGroupModal, setShowLineGroupModal] = useState(false);\r\n  const [newGroupId, setNewGroupId] = useState(\"\");\r\n  const [newGroupName, setNewGroupName] = useState(\"\");\r\n  const [selectedLineGroup, setSelectedLineGroup] = useState<string | null>(null);\r\n  const [isGlobalDropActive, setIsGlobalDropActive] = useState(false);\r\n  const [showHeaderMenu, setShowHeaderMenu] = useState(false);\r\n  const [showHeaderSearch, setShowHeaderSearch] = useState(false);\r\n  const [folderActionSheet, setFolderActionSheet] = useState<{\r\n    isOpen: boolean;\r\n    folderId: string | null;\r\n    folderName: string;\r\n  }>({ isOpen: false, folderId: null, folderName: '' });\r\n  const [fileActionSheet, setFileActionSheet] = useState<{\r\n    isOpen: boolean;\r\n    fileId: number | null;\r\n    fileName: string;\r\n    fileIndex: number;\r\n  }>({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 });\r\n  const [isFileSelectionMode, setIsFileSelectionMode] = useState(false);\r\n  const longPressTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n  const fileLongPressRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Confirmation modal state\r\n  const [confirmModal, setConfirmModal] = useState<{\r\n    isOpen: boolean;\r\n    type: 'delete' | 'warning' | 'info';\r\n    title: string;\r\n    message: string;\r\n    itemName?: string;\r\n    onConfirm: () => void;\r\n    onCancel?: () => void;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n  }>({\r\n    isOpen: false,\r\n    type: 'delete',\r\n    title: '',\r\n    message: '',\r\n    onConfirm: () => { },\r\n  });\r\n\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const cameraInputRef = useRef<HTMLInputElement>(null);\r\n  const isMountedRef = useRef(true);\r\n  const thumbnailGenerationRef = useRef<Set<number>>(new Set());\r\n\r\n  // Load LINE groups from localStorage on mount\r\n  useEffect(() => {\r\n    const savedGroups = localStorage.getItem('lineGroups');\r\n    if (savedGroups) {\r\n      try {\r\n        const parsed = JSON.parse(savedGroups);\r\n        setLineGroups(parsed);\r\n        // Set first group as default if exists\r\n        if (parsed.length > 0) {\r\n          setSelectedLineGroup(parsed[0].id);\r\n        }\r\n      } catch (e) {\r\n        console.error('Error parsing LINE groups:', e);\r\n      }\r\n    } else {\r\n      // Add default group (‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó AI)\r\n      const defaultGroups = [{ id: \"C31a793e94485a393a7eb55cb36e6ecfd\", name: \"‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏ä‡∏ó AI\" }];\r\n      setLineGroups(defaultGroups);\r\n      setSelectedLineGroup(defaultGroups[0].id);\r\n      localStorage.setItem('lineGroups', JSON.stringify(defaultGroups));\r\n    }\r\n  }, []);\r\n\r\n  // Save LINE groups to localStorage when changed\r\n  const saveLineGroups = (groups: Array<{ id: string; name: string }>) => {\r\n    setLineGroups(groups);\r\n    localStorage.setItem('lineGroups', JSON.stringify(groups));\r\n  };\r\n\r\n  // Add new LINE group\r\n  const addLineGroup = () => {\r\n    if (!newGroupId.trim() || !newGroupName.trim()) return;\r\n    const newGroups = [...lineGroups, { id: newGroupId.trim(), name: newGroupName.trim() }];\r\n    saveLineGroups(newGroups);\r\n    setNewGroupId(\"\");\r\n    setNewGroupName(\"\");\r\n    setSelectedLineGroup(newGroupId.trim());\r\n  };\r\n\r\n  // Remove LINE group\r\n  const removeLineGroup = (groupId: string) => {\r\n    const newGroups = lineGroups.filter(g => g.id !== groupId);\r\n    saveLineGroups(newGroups);\r\n    if (selectedLineGroup === groupId && newGroups.length > 0) {\r\n      setSelectedLineGroup(newGroups[0].id);\r\n    }\r\n  };\r\n\r\n  // File progress tracking for upload/download animations\r\n  const {\r\n    items: progressItems,\r\n    uploadFile: trackUpload,\r\n    downloadFile: trackDownload,\r\n    cancelTransfer,\r\n    dismissItem,\r\n    clearCompleted,\r\n    updateItem,\r\n  } = useFileProgress({\r\n    onUploadComplete: (id) => {\r\n      console.log(\"Upload complete:\", id);\r\n      loadMarketingFolders();\r\n    },\r\n    onDownloadComplete: (id) => {\r\n      console.log(\"Download complete:\", id);\r\n    },\r\n    onError: (id, error) => {\r\n      console.error(\"Transfer error:\", id, error);\r\n    },\r\n  });\r\n\r\n  // Generate video thumbnail using canvas\r\n  const generateVideoThumbnail = useCallback(async (file: FileItem): Promise<string | null> => {\r\n    return new Promise((resolve) => {\r\n      const video = document.createElement('video');\r\n      video.crossOrigin = 'anonymous';\r\n      video.muted = true;\r\n      video.preload = 'metadata';\r\n\r\n      const cleanup = () => {\r\n        video.removeEventListener('loadeddata', handleLoadedData);\r\n        video.removeEventListener('error', handleError);\r\n        video.removeEventListener('loadedmetadata', handleMetadata);\r\n        video.src = '';\r\n        video.load();\r\n      };\r\n\r\n      const handleError = () => {\r\n        console.warn(`Failed to load video for thumbnail: ${file.name}`);\r\n        cleanup();\r\n        resolve(null);\r\n      };\r\n\r\n      const handleMetadata = () => {\r\n        // Seek to 1 second or 10% of video duration for a better frame\r\n        const seekTime = Math.min(1, video.duration * 0.1);\r\n        video.currentTime = seekTime;\r\n      };\r\n\r\n      const handleLoadedData = () => {\r\n        try {\r\n          const canvas = document.createElement('canvas');\r\n          // Use reasonable dimensions for thumbnail\r\n          canvas.width = 640;\r\n          canvas.height = 360;\r\n          const ctx = canvas.getContext('2d');\r\n\r\n          if (!ctx) {\r\n            cleanup();\r\n            resolve(null);\r\n            return;\r\n          }\r\n\r\n          // Calculate aspect ratio to maintain proportions\r\n          const videoAspect = video.videoWidth / video.videoHeight;\r\n          const canvasAspect = canvas.width / canvas.height;\r\n\r\n          let drawWidth = canvas.width;\r\n          let drawHeight = canvas.height;\r\n          let offsetX = 0;\r\n          let offsetY = 0;\r\n\r\n          if (videoAspect > canvasAspect) {\r\n            drawHeight = canvas.width / videoAspect;\r\n            offsetY = (canvas.height - drawHeight) / 2;\r\n          } else {\r\n            drawWidth = canvas.height * videoAspect;\r\n            offsetX = (canvas.width - drawWidth) / 2;\r\n          }\r\n\r\n          // Fill background with dark color\r\n          ctx.fillStyle = '#1e1b4b';\r\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n          // Draw video frame\r\n          ctx.drawImage(video, offsetX, offsetY, drawWidth, drawHeight);\r\n\r\n          // Convert to blob and upload\r\n          canvas.toBlob(async (blob) => {\r\n            if (!blob) {\r\n              cleanup();\r\n              resolve(null);\r\n              return;\r\n            }\r\n\r\n            try {\r\n              const formData = new FormData();\r\n              formData.append('videoPath', file.url);\r\n              formData.append('thumbnail', blob, 'thumbnail.jpg');\r\n\r\n              const response = await fetch('/api/video-thumbnail', {\r\n                method: 'POST',\r\n                body: formData,\r\n              });\r\n\r\n              if (response.ok) {\r\n                const data = await response.json();\r\n                cleanup();\r\n                resolve(data.thumbnailUrl);\r\n              } else {\r\n                cleanup();\r\n                resolve(null);\r\n              }\r\n            } catch (error) {\r\n              console.error('Failed to upload thumbnail:', error);\r\n              cleanup();\r\n              resolve(null);\r\n            }\r\n          }, 'image/jpeg', 0.85);\r\n        } catch (error) {\r\n          console.error('Failed to generate thumbnail:', error);\r\n          cleanup();\r\n          resolve(null);\r\n        }\r\n      };\r\n\r\n      video.addEventListener('loadedmetadata', handleMetadata);\r\n      video.addEventListener('loadeddata', handleLoadedData);\r\n      video.addEventListener('error', handleError);\r\n\r\n      // Set timeout to prevent hanging\r\n      setTimeout(() => {\r\n        if (!video.videoWidth) {\r\n          cleanup();\r\n          resolve(null);\r\n        }\r\n      }, 10000);\r\n\r\n      video.src = file.url;\r\n      video.load();\r\n    });\r\n  }, []);\r\n\r\n  // Generate thumbnails for videos that need them\r\n  useEffect(() => {\r\n    const videosNeedingThumbnails = files.filter(\r\n      (file) =>\r\n        (file.type === 'video' || file.type === 'clip') &&\r\n        file.needsThumbnailGeneration &&\r\n        !thumbnailGenerationRef.current.has(file.id)\r\n    );\r\n\r\n    if (videosNeedingThumbnails.length === 0) return;\r\n\r\n    const generateThumbnails = async () => {\r\n      for (const file of videosNeedingThumbnails) {\r\n        if (!isMountedRef.current) break;\r\n\r\n        // Mark as being processed\r\n        thumbnailGenerationRef.current.add(file.id);\r\n\r\n        const thumbnailUrl = await generateVideoThumbnail(file);\r\n\r\n        if (thumbnailUrl && isMountedRef.current) {\r\n          setFiles((prev) =>\r\n            prev.map((f) =>\r\n              f.id === file.id\r\n                ? { ...f, thumbnail: thumbnailUrl, needsThumbnailGeneration: false }\r\n                : f\r\n            )\r\n          );\r\n        }\r\n      }\r\n    };\r\n\r\n    // Start thumbnail generation with a small delay to not block initial render\r\n    const timeoutId = setTimeout(generateThumbnails, 500);\r\n    return () => clearTimeout(timeoutId);\r\n  }, [files, generateVideoThumbnail]);\r\n\r\n  const loadMarketingFolders = useCallback(async (signal?: AbortSignal) => {\r\n    if (isMountedRef.current) {\r\n      setIsLoading(true);\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"/api/marketing-folders\", { signal });\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to load marketing folders: ${response.status}`);\r\n      }\r\n      const data: MarketingApiResponse = await response.json();\r\n      if (!isMountedRef.current) return;\r\n      const folderData = Array.isArray(data.folders) ? data.folders : [];\r\n      const fileData = Array.isArray(data.files) ? data.files : initialFiles;\r\n      setFiles(fileData);\r\n      setFolders(buildFoldersFromApi(folderData));\r\n    } catch (error) {\r\n      console.error(\"Unable to load marketing folders\", error);\r\n    } finally {\r\n      if (isMountedRef.current) {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    isMountedRef.current = true;\r\n    const controller = new AbortController();\r\n    loadMarketingFolders(controller.signal);\r\n    return () => {\r\n      controller.abort();\r\n      isMountedRef.current = false;\r\n    };\r\n  }, [loadMarketingFolders]);\r\n\r\n  // Detect mobile device\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth < 768 || 'ontouchstart' in window);\r\n    };\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  // Handle hardware back button (popstate) for mobile\r\n  useEffect(() => {\r\n    // Push initial state when entering a folder\r\n    if (activeFolderId) {\r\n      window.history.pushState({ folderId: activeFolderId, path: folderPath }, '');\r\n    }\r\n\r\n    const handlePopState = (event: PopStateEvent) => {\r\n      // Close any open modals first\r\n      if (showLightbox) {\r\n        setShowLightbox(false);\r\n        window.history.pushState({ folderId: activeFolderId, path: folderPath }, '');\r\n        return;\r\n      }\r\n      if (showShareModal) {\r\n        setShowShareModal(false);\r\n        setShareFileId(null);\r\n        window.history.pushState({ folderId: activeFolderId, path: folderPath }, '');\r\n        return;\r\n      }\r\n      if (isFileSelectionMode) {\r\n        setIsFileSelectionMode(false);\r\n        setSelectedFiles([]);\r\n        window.history.pushState({ folderId: activeFolderId, path: folderPath }, '');\r\n        return;\r\n      }\r\n\r\n      // Navigate back through folders\r\n      if (activeFolderId) {\r\n        if (folderPath.length > 0) {\r\n          // Go back one level in nested folders\r\n          setFolderPath(prev => prev.slice(0, -1));\r\n          window.history.pushState({ folderId: activeFolderId, path: folderPath.slice(0, -1) }, '');\r\n        } else {\r\n          // Go back to main folder list\r\n          setActiveFolderId(null);\r\n          setFolderPath([]);\r\n        }\r\n      } else {\r\n        // At root level, go back to home\r\n        router.push('/home');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('popstate', handlePopState);\r\n    return () => window.removeEventListener('popstate', handlePopState);\r\n  }, [activeFolderId, folderPath, showLightbox, showShareModal, isFileSelectionMode, router]);\r\n\r\n  // Categories ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö filter\r\n  const categories = useMemo(() => {\r\n    const cats = new Set(files.map((f) => f.category));\r\n    return [\"all\", ...Array.from(cats)];\r\n  }, [files]);\r\n\r\n  const activeFolder = useMemo(() => {\r\n    if (!activeFolderId) return null;\r\n    return folders.find((folder) => folder.id === activeFolderId) || null;\r\n  }, [activeFolderId, folders]);\r\n\r\n  // Get the current nested folder based on breadcrumb path\r\n  const currentNestedFolder = useMemo((): NestedFolder | null => {\r\n    if (!activeFolder || folderPath.length === 0) return null;\r\n\r\n    let current: NestedFolder | null = null;\r\n    let searchIn = activeFolder.subFolders;\r\n\r\n    for (const folderId of folderPath) {\r\n      current = searchIn.find(f => f.id === folderId) || null;\r\n      if (!current) return null;\r\n      searchIn = current.children;\r\n    }\r\n\r\n    return current;\r\n  }, [activeFolder, folderPath]);\r\n\r\n  // Get folders to display (either root sub folders or children of current nested folder)\r\n  const displayFolders = useMemo((): NestedFolder[] => {\r\n    if (!activeFolder) return [];\r\n    if (folderPath.length === 0) return activeFolder.subFolders;\r\n    if (currentNestedFolder) return currentNestedFolder.children;\r\n    return [];\r\n  }, [activeFolder, folderPath, currentNestedFolder]);\r\n\r\n  // Check if we can upload files (at leaf folders OR at main folder root with no subfolders)\r\n  const canUploadFiles = useMemo((): boolean => {\r\n    // Case 1: We're inside a nested folder - check if it's a leaf\r\n    if (currentNestedFolder) {\r\n      return isLeafFolder(currentNestedFolder);\r\n    }\r\n\r\n    // Case 2: We're at the root of a main folder (no nested folder selected)\r\n    // Allow upload if the main folder has no subfolders (it's essentially a leaf)\r\n    if (activeFolder && folderPath.length === 0) {\r\n      return activeFolder.subFolders.length === 0;\r\n    }\r\n\r\n    return false;\r\n  }, [currentNestedFolder, activeFolder, folderPath]);\r\n\r\n  // Build breadcrumb items for display\r\n  const breadcrumbItems = useMemo(() => {\r\n    if (!activeFolder) return [];\r\n\r\n    const items: { id: string; name: string; isRoot?: boolean }[] = [\r\n      { id: activeFolder.id, name: activeFolder.name, isRoot: true }\r\n    ];\r\n\r\n    let searchIn = activeFolder.subFolders;\r\n    for (const folderId of folderPath) {\r\n      const folder = searchIn.find(f => f.id === folderId);\r\n      if (folder) {\r\n        items.push({ id: folder.id, name: folder.name });\r\n        searchIn = folder.children;\r\n      }\r\n    }\r\n\r\n    return items;\r\n  }, [activeFolder, folderPath]);\r\n\r\n  const visibleFileIdSet = useMemo(() => {\r\n    // No folder selected - show NO files (only show folder grid)\r\n    if (!activeFolder) {\r\n      return new Set<number>();\r\n    }\r\n\r\n    // If we're at a nested folder that is a leaf, show only its files\r\n    if (currentNestedFolder && isLeafFolder(currentNestedFolder)) {\r\n      return new Set(currentNestedFolder.fileIds);\r\n    }\r\n\r\n    // If we're inside a folder but it has subfolders, show no files (navigate deeper first)\r\n    if (currentNestedFolder && !isLeafFolder(currentNestedFolder)) {\r\n      return new Set<number>();\r\n    }\r\n\r\n    // At root of main folder - check if it has subfolders\r\n    if (activeFolder.subFolders.length > 0) {\r\n      // Has subfolders, don't show files - user needs to navigate deeper\r\n      return new Set<number>();\r\n    }\r\n\r\n    // At root of main folder with no subfolders - show root files only\r\n    return new Set(activeFolder.rootFileIds);\r\n  }, [activeFolder, currentNestedFolder]);\r\n\r\n  // Filtered ‡πÅ‡∏•‡∏∞ Sorted files\r\n  const filteredFiles = useMemo(() => {\r\n    let result = files.filter((file) => visibleFileIdSet.has(file.id));\r\n\r\n    // Filter by type\r\n    if (filterType !== \"all\") {\r\n      result = result.filter((f) => f.type === filterType);\r\n    }\r\n\r\n    // Filter by category\r\n    if (selectedCategory !== \"all\") {\r\n      result = result.filter((f) => f.category === selectedCategory);\r\n    }\r\n\r\n    // Filter favorites\r\n    if (showFavoritesOnly) {\r\n      result = result.filter((f) => f.favorite);\r\n    }\r\n\r\n    // Search\r\n    if (searchTerm) {\r\n      const search = searchTerm.toLowerCase();\r\n      result = result.filter(\r\n        (f) =>\r\n          f.name.toLowerCase().includes(search) ||\r\n          f.tags.some((t) => t.toLowerCase().includes(search)) ||\r\n          f.category.toLowerCase().includes(search)\r\n      );\r\n    }\r\n\r\n    // Sort\r\n    result.sort((a, b) => {\r\n      let comparison = 0;\r\n      switch (sortBy) {\r\n        case \"date\":\r\n          comparison = new Date(b.date).getTime() - new Date(a.date).getTime();\r\n          break;\r\n        case \"name\":\r\n          comparison = a.name.localeCompare(b.name);\r\n          break;\r\n        case \"size\":\r\n          comparison = parseFloat(a.size) - parseFloat(b.size);\r\n          break;\r\n        case \"views\":\r\n          comparison = a.views - b.views;\r\n          break;\r\n      }\r\n      return sortDirection === \"asc\" ? comparison : -comparison;\r\n    });\r\n\r\n    return result;\r\n  }, [\r\n    files,\r\n    filterType,\r\n    selectedCategory,\r\n    showFavoritesOnly,\r\n    searchTerm,\r\n    sortBy,\r\n    sortDirection,\r\n    visibleFileIdSet,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const checkAuth = () => {\r\n      const userStr = localStorage.getItem(\"user\");\r\n      if (!userStr) {\r\n        window.location.href = \"/login\";\r\n        return;\r\n      }\r\n      const user = JSON.parse(userStr);\r\n      setCurrentUser(user);\r\n    };\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const handleFolderSelect = (folderId: string) => {\r\n    setSelectedFiles([]);\r\n    setShowLightbox(false);\r\n\r\n    if (folderId === activeFolderId) {\r\n      setActiveFolderId(null);\r\n      setFolderPath([]);\r\n    } else {\r\n      setActiveFolderId(folderId);\r\n      setFolderPath([]);\r\n    }\r\n\r\n    setIsCreatingSubFolder(false);\r\n    setSubFolderDraftName(\"\");\r\n    setEditingSubFolderId(null);\r\n    setEditingSubFolderValue(\"\");\r\n    setSelectedCategory(\"all\");\r\n  };\r\n\r\n  // Navigate into a nested folder\r\n  const handleNestedFolderSelect = (folderId: string) => {\r\n    setFolderPath(prev => [...prev, folderId]);\r\n    setIsCreatingSubFolder(false);\r\n    setSubFolderDraftName(\"\");\r\n    setEditingSubFolderId(null);\r\n  };\r\n\r\n  // Navigate to a specific breadcrumb level\r\n  const handleBreadcrumbClick = (index: number) => {\r\n    if (index === 0) {\r\n      // Clicking on root folder name\r\n      setFolderPath([]);\r\n    } else {\r\n      // Clicking on a nested folder in breadcrumb\r\n      setFolderPath(prev => prev.slice(0, index));\r\n    }\r\n    setIsCreatingSubFolder(false);\r\n  };\r\n\r\n  // Helper to recursively add a folder to nested structure\r\n  const addFolderToNested = (\r\n    folders: NestedFolder[],\r\n    parentPath: string[],\r\n    newFolder: NestedFolder\r\n  ): NestedFolder[] => {\r\n    if (parentPath.length === 0) {\r\n      return [...folders, newFolder];\r\n    }\r\n\r\n    const [currentId, ...restPath] = parentPath;\r\n    return folders.map(folder => {\r\n      if (folder.id === currentId) {\r\n        return {\r\n          ...folder,\r\n          children: addFolderToNested(folder.children, restPath, newFolder)\r\n        };\r\n      }\r\n      return folder;\r\n    });\r\n  };\r\n\r\n  // Helper to recursively delete a folder from nested structure\r\n  const deleteFolderFromNested = (\r\n    folders: NestedFolder[],\r\n    targetId: string\r\n  ): NestedFolder[] => {\r\n    return folders\r\n      .filter(folder => folder.id !== targetId)\r\n      .map(folder => ({\r\n        ...folder,\r\n        children: deleteFolderFromNested(folder.children, targetId)\r\n      }));\r\n  };\r\n\r\n  // Helper to recursively update a folder name in nested structure\r\n  const updateFolderNameInNested = (\r\n    folders: NestedFolder[],\r\n    targetId: string,\r\n    newName: string\r\n  ): NestedFolder[] => {\r\n    return folders.map(folder => {\r\n      if (folder.id === targetId) {\r\n        return { ...folder, name: newName };\r\n      }\r\n      return {\r\n        ...folder,\r\n        children: updateFolderNameInNested(folder.children, targetId, newName)\r\n      };\r\n    });\r\n  };\r\n\r\n  const getCurrentParentPath = (): string | null => {\r\n    if (!activeFolder) return null;\r\n    const segments = [activeFolder.name];\r\n    let searchIn = activeFolder.subFolders;\r\n\r\n    for (const folderId of folderPath) {\r\n      const match = searchIn.find((item) => item.id === folderId);\r\n      if (!match) break;\r\n      segments.push(match.name);\r\n      searchIn = match.children;\r\n    }\r\n\r\n    return segments.join(\"/\");\r\n  };\r\n\r\n  const handleCreateSubFolder = async () => {\r\n    if (!activeFolderId) return;\r\n    const trimmedName = subFolderDraftName.trim();\r\n    if (!trimmedName) return;\r\n\r\n    const folder = folders.find((item) => item.id === activeFolderId);\r\n    if (!folder) return;\r\n\r\n    const currentLevelFolders = folderPath.length === 0\r\n      ? folder.subFolders\r\n      : (currentNestedFolder?.children || []);\r\n\r\n    const hasDuplicate = currentLevelFolders.some(\r\n      (sub) => sub.name.toLowerCase() === trimmedName.toLowerCase()\r\n    );\r\n\r\n    if (hasDuplicate) {\r\n      alert(\"This folder name is already in use at this level.\");\r\n      return;\r\n    }\r\n\r\n    const parentPath = getCurrentParentPath();\r\n    if (!parentPath) return;\r\n\r\n    try {\r\n      const response = await fetch(\"/api/marketing-folders\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ parentPath, folderName: trimmedName }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorBody = await response.json().catch(() => null);\r\n        throw new Error(errorBody?.error || `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ (‡∏£‡∏´‡∏±‡∏™ ${response.status})`);\r\n      }\r\n\r\n      await loadMarketingFolders();\r\n      setSubFolderDraftName(\"\");\r\n      setIsCreatingSubFolder(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to create subfolder\", error);\r\n      if (error instanceof Error) {\r\n        alert(error.message);\r\n      } else {\r\n        alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteSubFolder = async (subFolderId: string) => {\r\n    if (!activeFolderId) return;\r\n\r\n    const folderToDelete = displayFolders.find((f) => f.id === subFolderId);\r\n    if (!folderToDelete) return;\r\n\r\n    if (folderToDelete.fileIds.length > 0 || folderToDelete.children.length > 0) {\r\n      showConfirmation({\r\n        type: 'warning',\r\n        title: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ',\r\n        message: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ',\r\n        confirmText: '‡∏ï‡∏Å‡∏•‡∏á',\r\n        onConfirm: closeConfirmModal,\r\n      });\r\n      return;\r\n    }\r\n\r\n    showConfirmation({\r\n      type: 'delete',\r\n      title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå',\r\n      message: '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?',\r\n      itemName: folderToDelete.name,\r\n      confirmText: '‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå',\r\n      cancelText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',\r\n      onConfirm: async () => {\r\n        closeConfirmModal();\r\n        const targetPath = folderToDelete.relativePath;\r\n        if (!targetPath) {\r\n          showConfirmation({\r\n            type: 'warning',\r\n            title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n            message: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ',\r\n            confirmText: '‡∏ï‡∏Å‡∏•‡∏á',\r\n            onConfirm: closeConfirmModal,\r\n          });\r\n          return;\r\n        }\r\n\r\n        try {\r\n          const response = await fetch(\"/api/marketing-folders\", {\r\n            method: \"DELETE\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ path: targetPath }),\r\n          });\r\n\r\n          if (!response.ok) {\r\n            const errorBody = await response.json().catch(() => null);\r\n            throw new Error(errorBody?.error || `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ (‡∏£‡∏´‡∏±‡∏™ ${response.status})`);\r\n          }\r\n\r\n          await loadMarketingFolders();\r\n          setFolderPath((prev) => prev.filter((id) => id !== subFolderId));\r\n        } catch (error) {\r\n          console.error(\"Failed to delete subfolder\", error);\r\n          showConfirmation({\r\n            type: 'warning',\r\n            title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n            message: error instanceof Error ? error.message : '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå',\r\n            confirmText: '‡∏ï‡∏Å‡∏•‡∏á',\r\n            onConfirm: closeConfirmModal,\r\n          });\r\n        }\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleStartEditSubFolder = (subFolder: NestedFolder) => {\r\n    setEditingSubFolderId(subFolder.id);\r\n    setEditingSubFolderValue(subFolder.name);\r\n  };\r\n\r\n  const handleCancelEditSubFolder = () => {\r\n    setEditingSubFolderId(null);\r\n    setEditingSubFolderValue(\"\");\r\n  };\r\n\r\n  const handleSaveSubFolderName = async (subFolderId: string) => {\r\n    if (!activeFolderId) return;\r\n    const trimmedValue = editingSubFolderValue.trim();\r\n    if (!trimmedValue) return;\r\n\r\n    const folderToRename = displayFolders.find((sub) => sub.id === subFolderId);\r\n    if (!folderToRename || !folderToRename.relativePath) {\r\n      alert(\"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ\");\r\n      return;\r\n    }\r\n\r\n    // Check for duplicates at the current level\r\n    const hasDuplicate = displayFolders.some(\r\n      (sub) =>\r\n        sub.id !== subFolderId &&\r\n        sub.name.toLowerCase() === trimmedValue.toLowerCase()\r\n    );\r\n\r\n    if (hasDuplicate) {\r\n      alert(\"This folder name is already in use at this level.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"/api/marketing-folders\", {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          currentPath: folderToRename.relativePath,\r\n          newName: trimmedValue,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorBody = await response.json().catch(() => null);\r\n        throw new Error(errorBody?.error || `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ (‡∏£‡∏´‡∏±‡∏™ ${response.status})`);\r\n      }\r\n\r\n      const data = await response.json().catch(() => null);\r\n      const parentSegments = getPathSegments(folderToRename.relativePath).slice(0, -1);\r\n      const fallbackPath = parentSegments.length\r\n        ? `${parentSegments.join(\"/\")}/${trimmedValue}`\r\n        : trimmedValue;\r\n      const newPath = data?.path || fallbackPath;\r\n      const newId = getIdFromPath(newPath);\r\n\r\n      await loadMarketingFolders();\r\n      setFolderPath((prev) => prev.map((id) => (id === subFolderId ? newId : id)));\r\n      setEditingSubFolderId(null);\r\n      setEditingSubFolderValue(\"\");\r\n    } catch (error) {\r\n      console.error(\"Failed to rename folder\", error);\r\n      if (error instanceof Error) {\r\n        alert(error.message);\r\n      } else {\r\n        alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // Folder edit/delete handlers\r\n  const handleStartEditFolder = (folder: MediaFolder) => {\r\n    setEditingFolderId(folder.id);\r\n    setEditingFolderValue(folder.name);\r\n  };\r\n\r\n  const handleCancelEditFolder = () => {\r\n    setEditingFolderId(null);\r\n    setEditingFolderValue(\"\");\r\n  };\r\n\r\n  const handleSaveFolderName = (folderId: string) => {\r\n    const trimmedValue = editingFolderValue.trim();\r\n    if (!trimmedValue) return;\r\n\r\n    const hasDuplicate = folders.some(\r\n      (f) => f.id !== folderId && f.name.toLowerCase() === trimmedValue.toLowerCase()\r\n    );\r\n\r\n    if (hasDuplicate) {\r\n      alert(\"This folder name is already in use.\");\r\n      return;\r\n    }\r\n\r\n    setFolders((prev) =>\r\n      prev.map((folder) =>\r\n        folder.id === folderId ? { ...folder, name: trimmedValue } : folder\r\n      )\r\n    );\r\n\r\n    setEditingFolderId(null);\r\n    setEditingFolderValue(\"\");\r\n  };\r\n\r\n  const handleDeleteFolder = (folderId: string) => {\r\n    const folder = folders.find((f) => f.id === folderId);\r\n    if (!folder) return;\r\n\r\n    const totalFiles =\r\n      folder.rootFileIds.length +\r\n      folder.subFolders.reduce((acc, sub) => acc + getAllFileIds(sub).length, 0);\r\n    if (totalFiles > 0) {\r\n      showConfirmation({\r\n        type: 'warning',\r\n        title: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ',\r\n        message: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡πâ‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ',\r\n        confirmText: '‡∏ï‡∏Å‡∏•‡∏á',\r\n        onConfirm: closeConfirmModal,\r\n      });\r\n      return;\r\n    }\r\n\r\n    showConfirmation({\r\n      type: 'delete',\r\n      title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå',\r\n      message: '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?',\r\n      itemName: folder.name,\r\n      confirmText: '‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå',\r\n      cancelText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',\r\n      onConfirm: () => {\r\n        closeConfirmModal();\r\n        setFolders((prev) => prev.filter((f) => f.id !== folderId));\r\n\r\n        if (activeFolderId === folderId) {\r\n          setActiveFolderId(null);\r\n          setFolderPath([]);\r\n        }\r\n      },\r\n    });\r\n  };\r\n\r\n  // Drag and drop handlers\r\n  const handleDragStart = (e: React.DragEvent, fileId: number) => {\r\n    setDraggingFileId(fileId);\r\n    e.dataTransfer.setData(\"text/plain\", fileId.toString());\r\n    e.dataTransfer.effectAllowed = \"move\";\r\n  };\r\n\r\n  const handleDragEnd = () => {\r\n    setDraggingFileId(null);\r\n    setDragOverFolderId(null);\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent, folderId: string) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = \"move\";\r\n    setDragOverFolderId(folderId);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDragOverFolderId(null);\r\n  };\r\n\r\n  const handleDropOnFolder = async (e: React.DragEvent, folderId: string) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (e.dataTransfer.files?.length) {\r\n      const targetFolder = folders.find((folder) => folder.id === folderId);\r\n      const targetPath = targetFolder?.relativePath ?? targetFolder?.name ?? null;\r\n      setIsGlobalDropActive(false);\r\n      setDraggingFileId(null);\r\n      setDragOverFolderId(null);\r\n\r\n      if (!targetPath) {\r\n        alert(\"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        await processUploadedFiles(e.dataTransfer.files, targetPath);\r\n      } catch (error) {\r\n        console.error(\"Failed to upload files via folder drop\", error);\r\n        if (error instanceof Error) {\r\n          alert(error.message);\r\n        } else {\r\n          alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\");\r\n        }\r\n      }\r\n      return;\r\n    }\r\n    const fileId = parseInt(e.dataTransfer.getData(\"text/plain\"));\r\n\r\n    if (isNaN(fileId)) return;\r\n\r\n    setFolders(prev => prev.map(folder => {\r\n      const cleanedFolder = removeFileFromFolder(folder, fileId);\r\n\r\n      if (folder.id !== folderId) {\r\n        return cleanedFolder;\r\n      }\r\n\r\n      let updatedSubFolders = cleanedFolder.subFolders;\r\n\r\n      if (updatedSubFolders.length === 0) {\r\n        const newSubFolder: NestedFolder = {\r\n          id: `${folder.id}-default`,\r\n          name: \"Unsorted\",\r\n          fileIds: [fileId],\r\n          children: [],\r\n          parentId: null,\r\n          relativePath: null,\r\n        };\r\n        updatedSubFolders = [newSubFolder];\r\n      } else {\r\n        updatedSubFolders = addFileToFirstLeaf(updatedSubFolders, fileId);\r\n      }\r\n\r\n      return { ...cleanedFolder, subFolders: updatedSubFolders };\r\n    }));\r\n\r\n    setDraggingFileId(null);\r\n    setDragOverFolderId(null);\r\n  };\r\n\r\n  // Helper function to remove file from nested folders\r\n  const removeFileFromNestedFolders = (folders: NestedFolder[], fileId: number): NestedFolder[] => {\r\n    return folders.map(folder => ({\r\n      ...folder,\r\n      fileIds: folder.fileIds.filter(id => id !== fileId),\r\n      children: removeFileFromNestedFolders(folder.children, fileId)\r\n    }));\r\n  };\r\n\r\n  const removeFileFromFolder = (folder: MediaFolder, fileId: number): MediaFolder => ({\r\n    ...folder,\r\n    rootFileIds: folder.rootFileIds.filter((id) => id !== fileId),\r\n    subFolders: removeFileFromNestedFolders(folder.subFolders, fileId),\r\n  });\r\n\r\n  // Helper function to add file to first leaf folder\r\n  const addFileToFirstLeaf = (folders: NestedFolder[], fileId: number): NestedFolder[] => {\r\n    let added = false;\r\n    const result = folders.map(folder => {\r\n      if (added) return folder;\r\n\r\n      if (isLeafFolder(folder)) {\r\n        if (!folder.fileIds.includes(fileId)) {\r\n          added = true;\r\n          return { ...folder, fileIds: [...folder.fileIds, fileId] };\r\n        }\r\n        return folder;\r\n      } else {\r\n        const updatedChildren = addFileToFirstLeaf(folder.children, fileId);\r\n        if (updatedChildren !== folder.children) {\r\n          added = true;\r\n          return { ...folder, children: updatedChildren };\r\n        }\r\n        return folder;\r\n      }\r\n    });\r\n    return result;\r\n  };\r\n\r\n  // Distribute all files randomly into folders\r\n  const distributeFilesRandomly = () => {\r\n    const allFileIds = files.map(f => f.id);\r\n\r\n    setFolders(prev => {\r\n      // First, clear all files from folders\r\n      const clearedFolders = prev.map(folder => ({\r\n        ...folder,\r\n        rootFileIds: [],\r\n        subFolders: clearFilesFromNestedFolders(folder.subFolders)\r\n      }));\r\n\r\n      // Then distribute files randomly\r\n      const shuffledFiles = [...allFileIds].sort(() => Math.random() - 0.5);\r\n\r\n      return clearedFolders.map((folder, folderIndex) => {\r\n        // Calculate how many files go to this folder\r\n        const filesPerFolder = Math.ceil(shuffledFiles.length / clearedFolders.length);\r\n        const startIdx = folderIndex * filesPerFolder;\r\n        const endIdx = Math.min(startIdx + filesPerFolder, shuffledFiles.length);\r\n        const folderFileIds = shuffledFiles.slice(startIdx, endIdx);\r\n\r\n        if (folderFileIds.length === 0) return folder;\r\n\r\n        // If no subfolders, create one\r\n        if (folder.subFolders.length === 0) {\r\n          const newSubFolder: NestedFolder = {\r\n            id: `${folder.id}-default`,\r\n            name: \"Unsorted\",\r\n            fileIds: folderFileIds,\r\n            children: [],\r\n            parentId: null,\r\n            relativePath: null,\r\n          };\r\n          return { ...folder, subFolders: [newSubFolder] };\r\n        }\r\n\r\n        // Distribute to existing subfolders\r\n        const updatedSubFolders = distributeToSubFolders(folder.subFolders, folderFileIds);\r\n        return { ...folder, subFolders: updatedSubFolders };\r\n      });\r\n    });\r\n  };\r\n\r\n  // Helper to clear files from nested folders\r\n  const clearFilesFromNestedFolders = (folders: NestedFolder[]): NestedFolder[] => {\r\n    return folders.map(folder => ({\r\n      ...folder,\r\n      fileIds: [],\r\n      children: clearFilesFromNestedFolders(folder.children)\r\n    }));\r\n  };\r\n\r\n  // Helper to distribute files to subfolders\r\n  const distributeToSubFolders = (folders: NestedFolder[], fileIds: number[]): NestedFolder[] => {\r\n    if (folders.length === 0 || fileIds.length === 0) return folders;\r\n\r\n    // Find all leaf folders\r\n    const leafFolders: NestedFolder[] = [];\r\n    const findLeaves = (folderList: NestedFolder[]) => {\r\n      folderList.forEach(f => {\r\n        if (isLeafFolder(f)) leafFolders.push(f);\r\n        else findLeaves(f.children);\r\n      });\r\n    };\r\n    findLeaves(folders);\r\n\r\n    if (leafFolders.length === 0) {\r\n      // No leaf folders, add to first folder\r\n      return folders.map((f, i) => i === 0 ? { ...f, fileIds: [...f.fileIds, ...fileIds] } : f);\r\n    }\r\n\r\n    // Distribute files among leaf folders\r\n    const filesPerLeaf = Math.ceil(fileIds.length / leafFolders.length);\r\n    const fileAssignments = new Map<string, number[]>();\r\n\r\n    leafFolders.forEach((leaf, idx) => {\r\n      const startIdx = idx * filesPerLeaf;\r\n      const endIdx = Math.min(startIdx + filesPerLeaf, fileIds.length);\r\n      fileAssignments.set(leaf.id, fileIds.slice(startIdx, endIdx));\r\n    });\r\n\r\n    // Apply assignments\r\n    const applyAssignments = (folderList: NestedFolder[]): NestedFolder[] => {\r\n      return folderList.map(f => {\r\n        const assigned = fileAssignments.get(f.id);\r\n        if (assigned) {\r\n          return { ...f, fileIds: [...f.fileIds, ...assigned] };\r\n        }\r\n        return { ...f, children: applyAssignments(f.children) };\r\n      });\r\n    };\r\n\r\n    return applyAssignments(folders);\r\n  };\r\n\r\n  const getFolderFileCount = (folder: MediaFolder) =>\r\n    folder.rootFileIds.length +\r\n    folder.subFolders.reduce((acc, sub) => acc + getAllFileIds(sub).length, 0);\r\n\r\n  const toggleFavorite = (id: number) => {\r\n    setFiles((prev) =>\r\n      prev.map((f) => (f.id === id ? { ...f, favorite: !f.favorite } : f))\r\n    );\r\n  };\r\n\r\n  // Helper function to show confirmation modal\r\n  const showConfirmation = (options: {\r\n    type?: 'delete' | 'warning' | 'info';\r\n    title: string;\r\n    message: string;\r\n    itemName?: string;\r\n    onConfirm: () => void;\r\n    onCancel?: () => void;\r\n    confirmText?: string;\r\n    cancelText?: string;\r\n  }) => {\r\n    setConfirmModal({\r\n      isOpen: true,\r\n      type: options.type || 'delete',\r\n      title: options.title,\r\n      message: options.message,\r\n      itemName: options.itemName,\r\n      onConfirm: options.onConfirm,\r\n      onCancel: options.onCancel,\r\n      confirmText: options.confirmText,\r\n      cancelText: options.cancelText,\r\n    });\r\n  };\r\n\r\n  const closeConfirmModal = () => {\r\n    setConfirmModal(prev => ({ ...prev, isOpen: false }));\r\n  };\r\n\r\n  // Delete file handler with confirmation\r\n  const handleDeleteFile = async (fileId: number) => {\r\n    const file = files.find(f => f.id === fileId);\r\n    if (!file) return;\r\n\r\n    showConfirmation({\r\n      type: 'delete',\r\n      title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå',\r\n      message: '‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?',\r\n      itemName: file.name,\r\n      confirmText: '‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå',\r\n      cancelText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',\r\n      onConfirm: async () => {\r\n        closeConfirmModal();\r\n        try {\r\n          const response = await fetch(\"/api/marketing-files\", {\r\n            method: \"DELETE\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ filePath: file.url }),\r\n          });\r\n\r\n          if (!response.ok) {\r\n            const errorBody = await response.json().catch(() => null);\r\n            throw new Error(\r\n              errorBody?.error || `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ (‡∏£‡∏´‡∏±‡∏™ ${response.status})`\r\n            );\r\n          }\r\n\r\n          await loadMarketingFolders();\r\n          setSelectedFiles((prev) => prev.filter((id) => id !== fileId));\r\n        } catch (error) {\r\n          console.error(\"Failed to delete file\", error);\r\n          showConfirmation({\r\n            type: 'warning',\r\n            title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',\r\n            message: error instanceof Error ? error.message : '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå',\r\n            confirmText: '‡∏ï‡∏Å‡∏•‡∏á',\r\n            onConfirm: closeConfirmModal,\r\n          });\r\n        }\r\n      },\r\n    });\r\n  };\r\n\r\n  const toggleSelect = (id: number) => {\r\n    setSelectedFiles((prev) =>\r\n      prev.includes(id) ? prev.filter((i) => i !== id) : [...prev, id]\r\n    );\r\n  };\r\n\r\n  const selectAll = () => {\r\n    if (selectedFiles.length === filteredFiles.length) {\r\n      setSelectedFiles([]);\r\n    } else {\r\n      setSelectedFiles(filteredFiles.map((f) => f.id));\r\n    }\r\n  };\r\n\r\n  const openLightbox = (index: number) => {\r\n    setLightboxIndex(index);\r\n    setShowLightbox(true);\r\n  };\r\n\r\n  const getTypeIcon = (type: string) => {\r\n    switch (type) {\r\n      case \"image\":\r\n        return <ImageIcon className=\"w-5 h-5\" />;\r\n      case \"video\":\r\n        return <FileVideo className=\"w-5 h-5\" />;\r\n      case \"clip\":\r\n        return <Film className=\"w-5 h-5\" />;\r\n      default:\r\n        return <FolderOpen className=\"w-5 h-5\" />;\r\n    }\r\n  };\r\n\r\n  const getTypeColor = (type: string) => {\r\n    switch (type) {\r\n      case \"image\":\r\n        return \"from-emerald-400 to-teal-500\";\r\n      case \"video\":\r\n        return \"from-purple-400 to-indigo-500\";\r\n      case \"clip\":\r\n        return \"from-pink-400 to-rose-500\";\r\n      default:\r\n        return \"from-gray-400 to-gray-500\";\r\n    }\r\n  };\r\n\r\n  const formatNumber = (num: number) => {\r\n    if (num >= 1000000) return (num / 1000000).toFixed(1) + \"M\";\r\n    if (num >= 1000) return (num / 1000).toFixed(1) + \"K\";\r\n    return num.toString();\r\n  };\r\n\r\n  // Upload files with progress animation\r\n  const processUploadedFilesWithProgress = async (uploadedFiles: FileList, targetFolderPath: string) => {\r\n    if (!uploadedFiles.length) return;\r\n\r\n    const filesArray = Array.from(uploadedFiles);\r\n\r\n    // Upload each file with progress tracking\r\n    for (const file of filesArray) {\r\n      await trackUpload(file, {\r\n        url: \"/api/marketing-files\",\r\n        method: \"POST\",\r\n        fieldName: \"files\",\r\n        additionalData: {\r\n          folderPath: targetFolderPath,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  // Legacy upload without progress (kept for compatibility)\r\n  const processUploadedFiles = async (uploadedFiles: FileList, targetFolderPath: string) => {\r\n    if (!uploadedFiles.length) return;\r\n\r\n    const formData = new FormData();\r\n    Array.from(uploadedFiles).forEach((file) => {\r\n      formData.append(\"files\", file);\r\n    });\r\n    formData.append(\"folderPath\", targetFolderPath);\r\n\r\n    const response = await fetch(\"/api/marketing-files\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n    });\r\n\r\n    if (!response.ok) {\r\n      const errorBody = await response.json().catch(() => null);\r\n      throw new Error(\r\n        errorBody?.error || `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ (‡∏£‡∏´‡∏±‡∏™ ${response.status})`\r\n      );\r\n    }\r\n\r\n    await loadMarketingFolders();\r\n  };\r\n\r\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const uploadedFiles = event.target.files;\r\n    if (!uploadedFiles?.length) return;\r\n\r\n    const targetPath =\r\n      currentNestedFolder?.relativePath ?? activeFolder?.relativePath ?? null;\r\n    if (!targetPath) {\r\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\");\r\n      event.target.value = \"\";\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Use progress tracking for upload\r\n      await processUploadedFilesWithProgress(uploadedFiles, targetPath);\r\n      setShowUploadModal(false);\r\n    } catch (error) {\r\n      console.error(\"Failed to upload files\", error);\r\n      if (error instanceof Error) {\r\n        alert(error.message);\r\n      } else {\r\n        alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\");\r\n      }\r\n    } finally {\r\n      event.target.value = \"\";\r\n    }\r\n  };\r\n\r\n  const handleGlobalDragOver = (e: React.DragEvent<HTMLDivElement>) => {\r\n    const hasFiles = Array.from(e.dataTransfer.types || []).includes(\"Files\");\r\n    if (!hasFiles) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsGlobalDropActive(true);\r\n    e.dataTransfer.dropEffect = \"copy\";\r\n  };\r\n\r\n  const handleGlobalDragLeave = (e: React.DragEvent<HTMLDivElement>) => {\r\n    if (e.currentTarget !== e.target) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsGlobalDropActive(false);\r\n  };\r\n\r\n  const handleGlobalDrop = async (e: React.DragEvent<HTMLDivElement>) => {\r\n    if (!e.dataTransfer.files?.length) {\r\n      setIsGlobalDropActive(false);\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsGlobalDropActive(false);\r\n    setDragOverFolderId(null);\r\n\r\n    const targetPath =\r\n      currentNestedFolder?.relativePath ?? activeFolder?.relativePath ?? null;\r\n    if (!targetPath) {\r\n      alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await processUploadedFiles(e.dataTransfer.files, targetPath);\r\n    } catch (error) {\r\n      console.error(\"Failed to upload files via drop\", error);\r\n      if (error instanceof Error) {\r\n        alert(error.message);\r\n      } else {\r\n        alert(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏Ç‡∏ì‡∏∞‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\");\r\n      }\r\n    }\r\n  };\r\n\r\n  // Generate video share URL for LINE inline playback\r\n  const generateVideoShareUrl = async (file: FileItem): Promise<{ shareUrl: string; needsTranscoding: boolean; fileSizeMB?: number }> => {\r\n    // For videos, create a special share URL that includes proper meta tags\r\n    if (file.type === 'video' || file.type === 'clip') {\r\n      // Extract the path from the URL (remove domain if present)\r\n      let videoPath = file.url;\r\n      const baseUrl = window.location.origin;\r\n      if (videoPath.startsWith(baseUrl)) {\r\n        videoPath = videoPath.substring(baseUrl.length);\r\n      }\r\n      if (!videoPath.startsWith('/')) {\r\n        videoPath = '/' + videoPath;\r\n      }\r\n\r\n      try {\r\n        const response = await fetch('/api/share-video', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ videoPath }),\r\n        });\r\n\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          return {\r\n            shareUrl: data.shareUrl,\r\n            needsTranscoding: data.needsTranscoding || false,\r\n            fileSizeMB: data.fileSizeMB\r\n          };\r\n        }\r\n      } catch (error) {\r\n        console.error('Error generating share URL:', error);\r\n      }\r\n    }\r\n    // Fallback to current page URL\r\n    return { shareUrl: window.location.href, needsTranscoding: false };\r\n  };\r\n\r\n  // Transcode video for LINE compatibility\r\n  const transcodeForLine = async (file: FileItem): Promise<boolean> => {\r\n    try {\r\n      const response = await fetch('/api/transcode-video', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ videoPath: file.url }),\r\n      });\r\n\r\n      if (!response.ok) return false;\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.status === 'completed') {\r\n        return true;\r\n      }\r\n\r\n      // Poll for completion if processing\r\n      if (data.status === 'processing') {\r\n        const jobId = data.jobId;\r\n        let attempts = 0;\r\n        const maxAttempts = 60; // 5 minutes max\r\n\r\n        while (attempts < maxAttempts) {\r\n          await new Promise(resolve => setTimeout(resolve, 5000)); // Check every 5 seconds\r\n\r\n          const statusResponse = await fetch(`/api/transcode-video?jobId=${jobId}`);\r\n          const statusData = await statusResponse.json();\r\n\r\n          if (statusData.status === 'completed') {\r\n            return true;\r\n          }\r\n\r\n          if (statusData.status === 'error') {\r\n            console.error('Transcoding error:', statusData.error);\r\n            return false;\r\n          }\r\n\r\n          attempts++;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    } catch (error) {\r\n      console.error('Transcode error:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const downloadShareBlob = async (url: string) => {\r\n    const response = await fetch(url, { cache: \"no-store\" });\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to download file for sharing\");\r\n    }\r\n    return await response.blob();\r\n  };\r\n\r\n  const getAbsoluteMediaUrl = (file: FileItem) => {\r\n    if (file.url.startsWith(\"http\")) {\r\n      return file.url;\r\n    }\r\n    if (typeof window === \"undefined\") {\r\n      return file.url;\r\n    }\r\n    return `${window.location.origin}${file.url}`;\r\n  };\r\n\r\n  const guessShareMimeType = (url: string, type: FileItem['type']) => {\r\n    const extension = url\r\n      .split(\"?\")[0]\r\n      .split(\"/\")\r\n      .pop()\r\n      ?.split(\".\")\r\n      .pop()\r\n      ?.toLowerCase();\r\n    const map: Record<string, string> = {\r\n      mp4: \"video/mp4\",\r\n      mov: \"video/quicktime\",\r\n      webm: \"video/webm\",\r\n      mkv: \"video/x-matroska\",\r\n      jpg: \"image/jpeg\",\r\n      jpeg: \"image/jpeg\",\r\n      png: \"image/png\",\r\n      gif: \"image/gif\",\r\n      bmp: \"image/bmp\",\r\n      heic: \"image/heic\",\r\n      heif: \"image/heif\",\r\n    };\r\n\r\n    if (extension && map[extension]) {\r\n      return map[extension];\r\n    }\r\n\r\n    if (type === \"image\") return \"image/jpeg\";\r\n    if (type === \"video\" || type === \"clip\") return \"video/mp4\";\r\n    return \"application/octet-stream\";\r\n  };\r\n\r\n  const resolveShareFileName = (file: FileItem, url: string) => {\r\n    if (file.name.includes(\".\")) {\r\n      return file.name;\r\n    }\r\n    const extension = url\r\n      .split(\"?\")[0]\r\n      .split(\"/\")\r\n      .pop()\r\n      ?.split(\".\")\r\n      .pop();\r\n    return extension ? `${file.name}.${extension}` : file.name;\r\n  };\r\n\r\n  // Share to LINE handler with video support\r\n  const shareToLine = async (file: FileItem) => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    let shareUrl: string;\r\n    if (file.type === 'video' || file.type === 'clip') {\r\n      const result = await generateVideoShareUrl(file);\r\n      shareUrl = result.shareUrl;\r\n\r\n      if (result.needsTranscoding) {\r\n        console.log(`Video ${file.name} (${result.fileSizeMB}MB) may need transcoding for optimal LINE playback`);\r\n        transcodeForLine(file).then(success => {\r\n          if (success) {\r\n            console.log('Transcoding completed for:', file.name);\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      shareUrl = window.location.href;\r\n    }\r\n\r\n    const shareMessage = `üìπ ${file.name} - BJH Bangkok`;\r\n    const encodedShareText = encodeURIComponent(shareMessage);\r\n    const encodedUrl = encodeURIComponent(shareUrl);\r\n\r\n    let sharedViaWebShare = false;\r\n    if (typeof navigator !== 'undefined' && navigator.share) {\r\n      try {\r\n        const absoluteUrl = getAbsoluteMediaUrl(file);\r\n        const blob = await downloadShareBlob(absoluteUrl);\r\n        const shareFile = new File([blob], resolveShareFileName(file, absoluteUrl), {\r\n          type: guessShareMimeType(absoluteUrl, file.type),\r\n        });\r\n        const canShareFiles =\r\n          !('canShare' in navigator) || navigator.canShare({ files: [shareFile] });\r\n\r\n        if (canShareFiles) {\r\n          await navigator.share({\r\n            title: file.name,\r\n            files: [shareFile],\r\n          });\r\n          sharedViaWebShare = true;\r\n        }\r\n      } catch (error) {\r\n        console.warn('Web Share failed, falling back to LINE deep link', error);\r\n      }\r\n    }\r\n\r\n    if (!sharedViaWebShare) {\r\n      if (isMobile) {\r\n        window.location.href = `line://msg/text/${encodedShareText}%0A${encodedUrl}`;\r\n      } else {\r\n        window.open(`https://social-plugins.line.me/lineit/share?url=${encodedUrl}&text=${encodedShareText}`, '_blank', 'width=500,height=500');\r\n      }\r\n    }\r\n\r\n    setShowShareModal(false);\r\n    setShareFileId(null);\r\n  };\r\n\r\n  // Share to other platforms\r\n  const shareFile = async (fileId: number, platform: 'line' | 'copy' | 'native') => {\r\n    const file = files.find(f => f.id === fileId);\r\n    if (!file) return;\r\n\r\n    switch (platform) {\r\n      case 'line':\r\n        await shareToLine(file);\r\n        break;\r\n      case 'copy': {\r\n        const shareResult = (file.type === 'video' || file.type === 'clip')\r\n          ? await generateVideoShareUrl(file)\r\n          : { shareUrl: window.location.href };\r\n        await navigator.clipboard.writeText(shareResult.shareUrl);\r\n        alert('Link copied to clipboard!');\r\n        setShowShareModal(false);\r\n        setShareFileId(null);\r\n        break;\r\n      }\r\n      case 'native':\r\n        if (navigator.share) {\r\n          try {\r\n            const shareResult = (file.type === 'video' || file.type === 'clip')\r\n              ? await generateVideoShareUrl(file)\r\n              : { shareUrl: window.location.href };\r\n            await navigator.share({\r\n              title: file.name,\r\n              text: `Check out this ${file.type}: ${file.name}`,\r\n              url: shareResult.shareUrl,\r\n            });\r\n          } catch (err) {\r\n            console.log('Share cancelled');\r\n          }\r\n        }\r\n        setShowShareModal(false);\r\n        setShareFileId(null);\r\n        break;\r\n    }\r\n  };\r\n\r\n  // Send video directly to LINE user via Messaging API (plays inline in LINE app)\r\n  const sendVideoToLineUser = async (fileId: number) => {\r\n    const file = files.find(f => f.id === fileId);\r\n    if (!file) return;\r\n\r\n    if (!lineSendUserId.trim()) {\r\n      setLineSendError(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà LINE User ID\");\r\n      return;\r\n    }\r\n\r\n    setLineSendStatus(\"sending\");\r\n    setLineSendError(\"\");\r\n\r\n    try {\r\n      const response = await fetch('/api/line-send-video', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          videoPath: file.url,\r\n          lineUserId: lineSendUserId.trim(),\r\n          videoName: file.name,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setLineSendStatus(\"success\");\r\n        // Reset after 2 seconds\r\n        setTimeout(() => {\r\n          setShowLineSendModal(false);\r\n          setLineSendUserId(\"\");\r\n          setLineSendStatus(\"idle\");\r\n          setShareFileId(null);\r\n        }, 2000);\r\n      } else {\r\n        setLineSendStatus(\"error\");\r\n        setLineSendError(data.error || \"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏î‡πâ\");\r\n      }\r\n    } catch (error) {\r\n      setLineSendStatus(\"error\");\r\n      setLineSendError(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠\");\r\n    }\r\n  };\r\n\r\n  // Send video directly to LINE Group\r\n  const sendVideoToLineGroup = async (fileId: number, groupId?: string) => {\r\n    const file = files.find(f => f.id === fileId);\r\n    if (!file) return;\r\n\r\n    const targetGroupId = groupId || selectedLineGroup;\r\n    if (!targetGroupId) {\r\n      setLineSendError(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏° LINE\");\r\n      return;\r\n    }\r\n\r\n    setLineSendStatus(\"sending\");\r\n    setLineSendError(\"\");\r\n\r\n    try {\r\n      const response = await fetch('/api/line-send-video', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          videoPath: file.url,\r\n          lineGroupId: targetGroupId,\r\n          videoName: file.name,\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        setLineSendStatus(\"success\");\r\n        // Reset after 2 seconds\r\n        setTimeout(() => {\r\n          setShowShareModal(false);\r\n          setShowLineGroupModal(false);\r\n          setLineSendStatus(\"idle\");\r\n          setShareFileId(null);\r\n        }, 2000);\r\n      } else {\r\n        setLineSendStatus(\"error\");\r\n        setLineSendError(data.error || \"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏î‡πâ\");\r\n        // Reset after 3 seconds on error\r\n        setTimeout(() => {\r\n          setLineSendStatus(\"idle\");\r\n          setLineSendError(\"\");\r\n        }, 3000);\r\n      }\r\n    } catch (error) {\r\n      setLineSendStatus(\"error\");\r\n      setLineSendError(\"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠\");\r\n      setTimeout(() => {\r\n        setLineSendStatus(\"idle\");\r\n        setLineSendError(\"\");\r\n      }, 3000);\r\n    }\r\n  };\r\n\r\n  // Download file handler with progress animation\r\n  const handleDownloadFile = async (fileId: number) => {\r\n    const file = files.find(f => f.id === fileId);\r\n    if (!file) return;\r\n\r\n    try {\r\n      // Parse file size string to number (e.g., \"2.5 MB\" -> 2621440)\r\n      const parseSizeToBytes = (sizeStr: string): number => {\r\n        const match = sizeStr.match(/([\\d.]+)\\s*(B|KB|MB|GB)/i);\r\n        if (!match) return 0;\r\n        const value = parseFloat(match[1]);\r\n        const unit = match[2].toUpperCase();\r\n        const multipliers: Record<string, number> = { B: 1, KB: 1024, MB: 1024 * 1024, GB: 1024 * 1024 * 1024 };\r\n        return Math.round(value * (multipliers[unit] || 1));\r\n      };\r\n\r\n      // Use progress tracking for download\r\n      await trackDownload(\r\n        file.url,\r\n        file.name,\r\n        parseSizeToBytes(file.size),\r\n        { saveAs: true }\r\n      );\r\n    } catch (error) {\r\n      console.error('Download error:', error);\r\n      // Fallback: open in new tab\r\n      window.open(file.url, '_blank');\r\n    }\r\n  };\r\n\r\n  // AI Video Production handlers\r\n  const handleAIDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = \"copy\";\r\n    setAIDragOver(true);\r\n  };\r\n\r\n  const handleAIDragLeave = () => {\r\n    setAIDragOver(false);\r\n  };\r\n\r\n  const handleAIDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const fileId = parseInt(e.dataTransfer.getData(\"text/plain\"));\r\n\r\n    if (!isNaN(fileId)) {\r\n      // Add to AI processing queue\r\n      setAIProcessingFiles(prev => [...prev, fileId]);\r\n\r\n      // Simulate AI processing (in real app, this would call an API)\r\n      setTimeout(() => {\r\n        alert(`üé¨ AI Video Production started for file ID: ${fileId}\\n\\nYour video will be ready soon!`);\r\n        setAIProcessingFiles(prev => prev.filter(id => id !== fileId));\r\n      }, 2000);\r\n    }\r\n\r\n    setAIDragOver(false);\r\n  };\r\n\r\n  // Touch-based file selection for mobile\r\n  const handleTouchSelect = (fileId: number) => {\r\n    if (isMobile) {\r\n      toggleSelect(fileId);\r\n    }\r\n  };\r\n\r\n  // Video placeholder fallback\r\n  const VIDEO_PLACEHOLDER = \"/images/video-placeholder.svg\";\r\n\r\n  // Thumbnail component with video poster extraction\r\n  const ThumbnailImage = ({ file, className, alt }: { file: FileItem; className: string; alt: string }) => {\r\n    const [imgSrc, setImgSrc] = useState(file.thumbnail);\r\n    const [hasError, setHasError] = useState(false);\r\n    const videoRef = useRef<HTMLVideoElement>(null);\r\n\r\n    const isVideoType = file.type === 'video' || file.type === 'clip';\r\n\r\n    useEffect(() => {\r\n      setImgSrc(file.thumbnail);\r\n      setHasError(false);\r\n    }, [file.thumbnail]);\r\n\r\n    const handleError = () => {\r\n      setHasError(true);\r\n      setImgSrc(VIDEO_PLACEHOLDER);\r\n    };\r\n\r\n    const handleVideoLoad = () => {\r\n      // Seek to 1 second for better thumbnail\r\n      if (videoRef.current) {\r\n        videoRef.current.currentTime = 1;\r\n      }\r\n    };\r\n\r\n    // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ - ‡πÅ‡∏™‡∏î‡∏á video element ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡πÄ‡∏ü‡∏£‡∏°‡πÅ‡∏£‡∏Å\r\n    if (isVideoType) {\r\n      return (\r\n        <div className=\"relative w-full h-full bg-gradient-to-br from-slate-800 to-purple-900 overflow-hidden\">\r\n          <video\r\n            ref={videoRef}\r\n            src={file.url}\r\n            muted\r\n            playsInline\r\n            preload=\"metadata\"\r\n            onLoadedData={handleVideoLoad}\r\n            className={`${className} w-full h-full object-cover`}\r\n            style={{ pointerEvents: 'none' }}\r\n          />\r\n          {/* Play icon overlay */}\r\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\r\n            <div className=\"p-3 rounded-full bg-black/40 backdrop-blur-sm\">\r\n              <Play className=\"w-6 h-6 text-white fill-white\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û - ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠ loading\r\n    return (\r\n      <div className=\"relative w-full h-full bg-gradient-to-br from-slate-800/50 to-purple-900/50\">\r\n        <img\r\n          src={imgSrc}\r\n          alt={alt}\r\n          className={className}\r\n          onError={handleError}\r\n          loading=\"eager\"\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <style>{customScrollbarStyle}</style>\r\n      <div\r\n        className=\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden\"\r\n        onDragOver={handleGlobalDragOver}\r\n        onDragEnter={handleGlobalDragOver}\r\n        onDragLeave={handleGlobalDragLeave}\r\n        onDrop={(e) => void handleGlobalDrop(e)}\r\n      >\r\n        {isGlobalDropActive && (\r\n          <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/50 transition-opacity pointer-events-none\">\r\n            <div className=\"px-4 sm:px-6 py-3 sm:py-4 rounded-xl sm:rounded-2xl bg-gradient-to-r from-purple-600 via-purple-700 to-blue-500 text-white text-responsive-lg font-semibold pointer-events-none\">\r\n              ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà\r\n            </div>\r\n          </div>\r\n        )}\r\n        {/* Animated Background Effects */}\r\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n          {/* Gradient Orbs */}\r\n          <div className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500/30 rounded-full blur-3xl animate-pulse\" />\r\n          <div className=\"absolute bottom-1/4 right-1/4 w-96 h-96 bg-pink-500/30 rounded-full blur-3xl animate-pulse delay-1000\" />\r\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-indigo-500/20 rounded-full blur-3xl animate-pulse delay-500\" />\r\n\r\n          {/* Grid Pattern */}\r\n          <div className=\"absolute inset-0 bg-[linear-gradient(rgba(139,92,246,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(139,92,246,0.03)_1px,transparent_1px)] bg-[size:100px_100px]\" />\r\n\r\n          {/* Floating Particles - ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á hydration mismatch */}\r\n          {[\r\n            { left: 5, top: 10, color: '#8b5cf6', delay: 0, duration: 6 },\r\n            { left: 15, top: 80, color: '#ec4899', delay: 1, duration: 7 },\r\n            { left: 25, top: 30, color: '#f97316', delay: 2, duration: 8 },\r\n            { left: 35, top: 60, color: '#06b6d4', delay: 3, duration: 9 },\r\n            { left: 45, top: 20, color: '#8b5cf6', delay: 4, duration: 6 },\r\n            { left: 55, top: 90, color: '#ec4899', delay: 0.5, duration: 7 },\r\n            { left: 65, top: 40, color: '#f97316', delay: 1.5, duration: 8 },\r\n            { left: 75, top: 70, color: '#06b6d4', delay: 2.5, duration: 9 },\r\n            { left: 85, top: 15, color: '#8b5cf6', delay: 3.5, duration: 6 },\r\n            { left: 95, top: 55, color: '#ec4899', delay: 4.5, duration: 7 },\r\n            { left: 10, top: 45, color: '#f97316', delay: 0.8, duration: 8 },\r\n            { left: 20, top: 75, color: '#06b6d4', delay: 1.8, duration: 9 },\r\n            { left: 30, top: 5, color: '#8b5cf6', delay: 2.8, duration: 6 },\r\n            { left: 40, top: 85, color: '#ec4899', delay: 3.8, duration: 7 },\r\n            { left: 50, top: 35, color: '#f97316', delay: 4.2, duration: 8 },\r\n            { left: 60, top: 65, color: '#06b6d4', delay: 0.3, duration: 9 },\r\n            { left: 70, top: 25, color: '#8b5cf6', delay: 1.3, duration: 6 },\r\n            { left: 80, top: 95, color: '#ec4899', delay: 2.3, duration: 7 },\r\n            { left: 90, top: 50, color: '#f97316', delay: 3.3, duration: 8 },\r\n            { left: 98, top: 8, color: '#06b6d4', delay: 4.8, duration: 9 },\r\n          ].map((particle, i) => (\r\n            <div\r\n              key={i}\r\n              className=\"absolute w-2 h-2 rounded-full animate-float\"\r\n              style={{\r\n                left: `${particle.left}%`,\r\n                top: `${particle.top}%`,\r\n                background: `linear-gradient(135deg, ${particle.color}, transparent)`,\r\n                animationDelay: `${particle.delay}s`,\r\n                animationDuration: `${particle.duration}s`,\r\n              }}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"relative z-10 p-3 md:p-6 pb-20\">\r\n          {/* Header Section - Gallery Style */}\r\n          {isFileSelectionMode ? (\r\n            /* File Selection Mode Header */\r\n            <div className=\"flex items-center justify-between mb-4 md:mb-6\">\r\n              {/* Left: Select All Checkbox */}\r\n              <button\r\n                onClick={selectAll}\r\n                className=\"flex items-center gap-3\"\r\n              >\r\n                <div className={`w-7 h-7 rounded-full border-2 flex items-center justify-center transition-colors ${selectedFiles.length === filteredFiles.length && filteredFiles.length > 0 ? 'bg-white border-white' : 'border-white/70'}`}>\r\n                  {selectedFiles.length === filteredFiles.length && filteredFiles.length > 0 && (\r\n                    <Check className=\"w-5 h-5 text-black\" />\r\n                  )}\r\n                </div>\r\n                <span className=\"text-white/70 text-sm\">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>\r\n              </button>\r\n\r\n              {/* Center: Selection Count */}\r\n              <span className=\"text-white/70 text-sm\">\r\n                ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å {selectedFiles.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß\r\n              </span>\r\n\r\n              {/* Right: Cancel Button */}\r\n              <button\r\n                onClick={() => {\r\n                  setIsFileSelectionMode(false);\r\n                  setSelectedFiles([]);\r\n                }}\r\n                className=\"text-white/70 text-sm px-2 py-1\"\r\n              >\r\n                ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            /* Normal Mode Header */\r\n            <div className=\"flex items-center justify-between mb-4 md:mb-6\">\r\n              {/* Left: Back Button + Folder Name */}\r\n              <div className=\"flex items-center gap-3\">\r\n                <button\r\n                  onClick={() => {\r\n                    if (activeFolder) {\r\n                      // If in nested folder, go back one level\r\n                      if (folderPath.length > 0) {\r\n                        setFolderPath(prev => prev.slice(0, -1));\r\n                      } else {\r\n                        // Go back to main folder list\r\n                        setActiveFolderId(null);\r\n                        setFolderPath([]);\r\n                      }\r\n                    } else {\r\n                      router.push(\"/home\");\r\n                    }\r\n                  }}\r\n                  className=\"p-2 md:p-2.5 rounded-full bg-white/10 hover:bg-white/20 text-white transition-all flex items-center justify-center\"\r\n                >\r\n                  <ArrowLeft className=\"w-5 h-5 md:w-6 md:h-6\" />\r\n                </button>\r\n\r\n                {/* Folder Name - shown when inside a folder */}\r\n                {activeFolder && (\r\n                  <h1 className=\"folder-title font-bold text-white text-sm sm:text-base flex items-center\">\r\n                    {currentNestedFolder?.name || activeFolder.name}\r\n                  </h1>\r\n                )}\r\n\r\n                {/* Title when no folder selected */}\r\n                {!activeFolder && (\r\n                  <h1 className=\"hidden md:block text-lg font-semibold text-white/90 flex items-center\">\r\n                    ‡∏≠‡∏±‡∏•‡∏ö‡∏±‡πâ‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î\r\n                  </h1>\r\n                )}\r\n              </div>\r\n\r\n              {/* Right: Action Icons */}\r\n              <div className=\"flex items-center gap-1 sm:gap-2\">\r\n                {/* Upload/Add Button */}\r\n                <button\r\n                  onClick={() => setShowUploadModal(true)}\r\n                  className=\"p-2 md:p-2.5 rounded-full bg-gradient-to-r from-cyan-500 to-blue-600 text-white shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 transition-all hover:scale-105 flex items-center justify-center\"\r\n                  title=\"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\"\r\n                >\r\n                  <Plus className=\"w-5 h-5 md:w-6 md:h-6\" />\r\n                </button>\r\n\r\n                {/* Search Button */}\r\n                <button\r\n                  onClick={() => setShowHeaderSearch(!showHeaderSearch)}\r\n                  className={`p-2 md:p-2.5 rounded-full transition-all flex items-center justify-center ${showHeaderSearch ? 'bg-purple-500/30 text-purple-300' : 'bg-white/10 hover:bg-white/20 text-white'}`}\r\n                  title=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤\"\r\n                >\r\n                  <Search className=\"w-5 h-5 md:w-6 md:h-6\" />\r\n                </button>\r\n\r\n                {/* 3-Dot Menu */}\r\n                <div className=\"relative\">\r\n                  <button\r\n                    onClick={() => setShowHeaderMenu(!showHeaderMenu)}\r\n                    className={`p-2 md:p-2.5 rounded-full transition-all flex items-center justify-center ${showHeaderMenu ? 'bg-purple-500/30 text-purple-300' : 'bg-white/10 hover:bg-white/20 text-white'}`}\r\n                    title=\"‡πÄ‡∏°‡∏ô‡∏π\"\r\n                  >\r\n                    <MoreVertical className=\"w-5 h-5 md:w-6 md:h-6\" />\r\n                  </button>\r\n\r\n                  {/* Dropdown Menu */}\r\n                  {showHeaderMenu && (\r\n                    <>\r\n                      {/* Backdrop to close menu */}\r\n                      <div\r\n                        className=\"fixed inset-0 z-40\"\r\n                        onClick={() => setShowHeaderMenu(false)}\r\n                      />\r\n                      <div className=\"absolute right-0 top-full mt-2 w-56 bg-slate-800/95 backdrop-blur-xl border border-purple-500/30 rounded-xl shadow-2xl overflow-hidden z-50 animate-slide-up\">\r\n                        {/* Create Folder Option */}\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowHeaderMenu(false);\r\n                            if (activeFolder) {\r\n                              setIsCreatingSubFolder(true);\r\n                              setSubFolderDraftName(\"\");\r\n                            } else {\r\n                              alert(\"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏¢‡πà‡∏≠‡∏¢\");\r\n                            }\r\n                          }}\r\n                          className=\"w-full flex items-center gap-3 px-4 py-3 text-left text-white/90 hover:bg-white/10 transition-colors\"\r\n                        >\r\n                          <FolderPlus className=\"w-5 h-5 text-cyan-400\" />\r\n                          <span>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</span>\r\n                        </button>\r\n\r\n                        {/* Select All Option */}\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowHeaderMenu(false);\r\n                            selectAll();\r\n                          }}\r\n                          className=\"w-full flex items-center gap-3 px-4 py-3 text-left text-white/90 hover:bg-white/10 transition-colors\"\r\n                        >\r\n                          <Check className=\"w-5 h-5 text-purple-400\" />\r\n                          <span>{selectedFiles.length > 0 ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å' : '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'}</span>\r\n                        </button>\r\n\r\n                        {/* Divider */}\r\n                        <div className=\"border-t border-white/10 my-1\" />\r\n\r\n                        {/* View Mode Options */}\r\n                        <div className=\"px-4 py-2\">\r\n                          <span className=\"text-xs text-purple-300/60 uppercase tracking-wider\">‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1 px-4 pb-3\">\r\n                          {[\r\n                            { mode: \"masonry\" as const, icon: LayoutGrid, label: \"Masonry\" },\r\n                            { mode: \"list\" as const, icon: List, label: \"List\" },\r\n                          ].map(({ mode, icon: Icon, label }) => (\r\n                            <button\r\n                              key={mode}\r\n                              onClick={() => {\r\n                                setViewMode(mode);\r\n                                setShowHeaderMenu(false);\r\n                              }}\r\n                              className={`flex-1 p-2 rounded-lg transition-all ${viewMode === mode\r\n                                ? \"bg-gradient-to-r from-purple-500 to-pink-500 text-white\"\r\n                                : \"bg-white/10 text-purple-300 hover:bg-white/20\"\r\n                                }`}\r\n                              title={label}\r\n                            >\r\n                              <Icon className=\"w-4 h-4 mx-auto\" />\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Desktop User Menu */}\r\n                <div className=\"hidden md:block ml-2\">\r\n                  <UserMenu />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Search Bar - Shows when search is active */}\r\n          {showHeaderSearch && (\r\n            <div className=\"mb-4 animate-slide-up space-y-3\">\r\n              {/* Search Input */}\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-purple-300\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏ü‡∏•‡πå...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  autoFocus\r\n                  className=\"w-full pl-12 pr-12 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-purple-300/50 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n                />\r\n                {searchTerm && (\r\n                  <button\r\n                    onClick={() => setSearchTerm(\"\")}\r\n                    className=\"absolute right-4 top-1/2 transform -translate-y-1/2 p-1 rounded-full bg-white/10 hover:bg-white/20 text-purple-300\"\r\n                  >\r\n                    <X className=\"w-4 h-4\" />\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Folder Grid - Only show when no folder is selected */}\r\n          {!activeFolder && (\r\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2 sm:gap-3 md:gap-5 mb-6 md:mb-8\">\r\n              {folders.map((folder, index) => {\r\n                const Icon = folder.icon;\r\n                const isActive = activeFolderId === folder.id;\r\n                const fileCount = getFolderFileCount(folder);\r\n                const subFolderCount = folder.subFolders.length;\r\n                const isEditing = editingFolderId === folder.id;\r\n                const isDragOver = dragOverFolderId === folder.id;\r\n\r\n                return (\r\n                  <div\r\n                    key={folder.id}\r\n                    onDragOver={(e) => handleDragOver(e, folder.id)}\r\n                    onDragLeave={handleDragLeave}\r\n                    onDrop={(e) => void handleDropOnFolder(e, folder.id)}\r\n                    className={`group relative glass-card rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-5 text-left transition-all duration-300 hover:scale-[1.03] border overflow-hidden animate-slide-up ${isActive\r\n                      ? \"border-purple-400/80 shadow-lg shadow-purple-500/30 ring-2 ring-purple-400/50\"\r\n                      : isDragOver\r\n                        ? \"border-emerald-400/80 shadow-lg shadow-emerald-500/30 ring-2 ring-emerald-400/50 scale-105\"\r\n                        : \"border-white/10 hover:border-purple-300/50 hover:shadow-lg hover:shadow-purple-500/20\"\r\n                      }`}\r\n                    style={{ animationDelay: `${index * 0.05}s` }}\r\n                  >\r\n                    {/* Drop indicator overlay */}\r\n                    {isDragOver && (\r\n                      <div className=\"absolute inset-0 bg-emerald-500/20 flex items-center justify-center z-30 rounded-2xl\">\r\n                        <div className=\"text-emerald-300 font-semibold text-sm flex items-center gap-2\">\r\n                          <Upload className=\"w-5 h-5\" />\r\n                          ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Glow effect on hover */}\r\n                    <div className={`absolute inset-0 bg-gradient-to-br ${folder.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300 ${isActive ? 'opacity-10' : ''}`} />\r\n\r\n                    {isEditing ? (\r\n                      <div className=\"relative z-10 flex flex-col gap-3 h-full\">\r\n                        <input\r\n                          type=\"text\"\r\n                          value={editingFolderValue}\r\n                          onChange={(e) => setEditingFolderValue(e.target.value)}\r\n                          className=\"w-full px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all\"\r\n                          autoFocus\r\n                        />\r\n                        <div className=\"flex gap-2\">\r\n                          <button\r\n                            onClick={() => handleSaveFolderName(folder.id)}\r\n                            className=\"flex-1 px-3 py-2 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white text-xs font-medium shadow-lg hover:shadow-green-500/50 transition-all\"\r\n                          >\r\n                            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å\r\n                          </button>\r\n                          <button\r\n                            onClick={handleCancelEditFolder}\r\n                            className=\"flex-1 px-3 py-2 rounded-xl bg-white/10 text-purple-100 text-xs font-medium hover:bg-white/20 transition-all\"\r\n                          >\r\n                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div\r\n                        className=\"relative z-10 cursor-pointer\"\r\n                        onClick={() => handleFolderSelect(folder.id)}\r\n                      >\r\n                        <div\r\n                          className={`w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-xl sm:rounded-2xl bg-gradient-to-br ${folder.gradient} flex items-center justify-center mb-2 sm:mb-3 md:mb-4 shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300 ${isActive ? 'scale-110 shadow-xl' : ''}`}\r\n                        >\r\n                          <Icon className=\"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white drop-shadow-md\" />\r\n                        </div>\r\n                        <h3 className=\"folder-title font-bold text-white group-hover:text-purple-100 transition-colors text-sm sm:text-base\">\r\n                          {folder.name}\r\n                        </h3>\r\n                        <p className=\"folder-description text-purple-200/60 mt-0.5 sm:mt-1 line-clamp-2 text-xs sm:text-sm hidden sm:block\">\r\n                          {folder.description}\r\n                        </p>\r\n                        <div className=\"flex items-center justify-between folder-meta mt-2 sm:mt-3 md:mt-4 pt-2 sm:pt-3 border-t border-white/10 text-xs sm:text-sm\">\r\n                          <span className=\"flex items-center gap-1 sm:gap-1.5 text-purple-200/70\">\r\n                            <FolderOpen className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\r\n                            {subFolderCount}\r\n                          </span>\r\n                          <span className=\"flex items-center gap-1 sm:gap-1.5 text-purple-200/70\">\r\n                            <FileVideo className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\r\n                            {fileCount}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Active indicator */}\r\n                    {isActive && !isEditing && (\r\n                      <div className=\"absolute bottom-2 right-2 w-3 h-3 rounded-full bg-gradient-to-r from-purple-400 to-pink-400 animate-pulse shadow-lg shadow-purple-500/50\" />\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {activeFolder && (\r\n            <div className=\"mb-6 md:mb-8 space-y-5\">\r\n              {/* Nested Folders Grid - 2 columns like screenshot */}\r\n              <div className=\"grid grid-cols-2 gap-2 sm:gap-3 md:gap-5\">\r\n                {displayFolders.map((subFolder, index) => {\r\n                  const isEditing = editingSubFolderId === subFolder.id;\r\n                  const hasChildren = subFolder.children.length > 0;\r\n                  const isLeaf = isLeafFolder(subFolder);\r\n                  const subFolderCount = subFolder.children.length;\r\n                  const fileCount = subFolder.fileIds.length;\r\n\r\n                  return (\r\n                    <div\r\n                      key={subFolder.id}\r\n                      onClick={() => {\r\n                        if (!isEditing) {\r\n                          handleNestedFolderSelect(subFolder.id);\r\n                        }\r\n                      }}\r\n                      onTouchStart={() => {\r\n                        if (!isEditing) {\r\n                          longPressTimerRef.current = setTimeout(() => {\r\n                            setFolderActionSheet({\r\n                              isOpen: true,\r\n                              folderId: subFolder.id,\r\n                              folderName: subFolder.name,\r\n                            });\r\n                          }, 500);\r\n                        }\r\n                      }}\r\n                      onTouchEnd={() => {\r\n                        if (longPressTimerRef.current) {\r\n                          clearTimeout(longPressTimerRef.current);\r\n                          longPressTimerRef.current = null;\r\n                        }\r\n                      }}\r\n                      onTouchMove={() => {\r\n                        if (longPressTimerRef.current) {\r\n                          clearTimeout(longPressTimerRef.current);\r\n                          longPressTimerRef.current = null;\r\n                        }\r\n                      }}\r\n                      onContextMenu={(e) => {\r\n                        e.preventDefault();\r\n                        if (!isEditing) {\r\n                          setFolderActionSheet({\r\n                            isOpen: true,\r\n                            folderId: subFolder.id,\r\n                            folderName: subFolder.name,\r\n                          });\r\n                        }\r\n                      }}\r\n                      className={`group relative glass-card rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-5 text-left transition-all duration-300 hover:scale-[1.03] border overflow-hidden animate-slide-up cursor-pointer border-white/10 hover:border-purple-300/50 hover:shadow-lg hover:shadow-purple-500/20`}\r\n                      style={{ animationDelay: `${index * 0.05}s` }}\r\n                    >\r\n                      {/* Glow effect on hover */}\r\n                      <div className={`absolute inset-0 bg-gradient-to-br ${activeFolder.gradient} opacity-0 group-hover:opacity-10 transition-opacity duration-300`} />\r\n\r\n                      {isEditing ? (\r\n                        <div className=\"relative z-10 flex flex-col gap-3 h-full\">\r\n                          <input\r\n                            type=\"text\"\r\n                            value={editingSubFolderValue}\r\n                            onChange={(e) => setEditingSubFolderValue(e.target.value)}\r\n                            onClick={(e) => e.stopPropagation()}\r\n                            className=\"w-full px-3 py-2 rounded-xl bg-white/10 border border-white/20 text-white text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all\"\r\n                            autoFocus\r\n                          />\r\n                          <div className=\"flex gap-2\">\r\n                            <button\r\n                              onClick={(event) => {\r\n                                event.stopPropagation();\r\n                                handleSaveSubFolderName(subFolder.id);\r\n                              }}\r\n                              className=\"flex-1 px-3 py-2 rounded-xl bg-gradient-to-r from-emerald-500 to-green-600 text-white text-xs font-medium shadow-lg hover:shadow-green-500/50 transition-all\"\r\n                            >\r\n                              ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å\r\n                            </button>\r\n                            <button\r\n                              onClick={(event) => {\r\n                                event.stopPropagation();\r\n                                handleCancelEditSubFolder();\r\n                              }}\r\n                              className=\"flex-1 px-3 py-2 rounded-xl bg-white/10 text-purple-100 text-xs font-medium hover:bg-white/20 transition-all\"\r\n                            >\r\n                              ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"relative z-10 cursor-pointer\">\r\n                          <div\r\n                            className={`w-10 h-10 sm:w-12 sm:h-12 md:w-14 md:h-14 rounded-xl sm:rounded-2xl bg-gradient-to-br ${activeFolder.gradient} flex items-center justify-center mb-2 sm:mb-3 md:mb-4 shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-300`}\r\n                          >\r\n                            <FolderOpen className=\"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white drop-shadow-md\" />\r\n                          </div>\r\n                          <h3 className=\"folder-title font-bold text-white group-hover:text-purple-100 transition-colors text-sm sm:text-base\">\r\n                            {subFolder.name}\r\n                          </h3>\r\n                          <p className=\"folder-description text-purple-200/60 mt-0.5 sm:mt-1 line-clamp-2 text-xs sm:text-sm hidden sm:block\">\r\n                            {isLeaf ? `${fileCount} ‡πÑ‡∏ü‡∏•‡πå` : `${subFolderCount} ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå`}\r\n                          </p>\r\n                          <div className=\"flex items-center justify-between folder-meta mt-2 sm:mt-3 md:mt-4 pt-2 sm:pt-3 border-t border-white/10 text-xs sm:text-sm\">\r\n                            <span className=\"flex items-center gap-1 sm:gap-1.5 text-purple-200/70\">\r\n                              <FolderOpen className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\r\n                              {subFolderCount}\r\n                            </span>\r\n                            <span className=\"flex items-center gap-1 sm:gap-1.5 text-purple-200/70\">\r\n                              <FileVideo className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\r\n                              {fileCount}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Leaf indicator */}\r\n                      {isLeaf && !isEditing && (\r\n                        <div className=\"absolute bottom-2 right-2 w-2 h-2 sm:w-3 sm:h-3 rounded-full bg-gradient-to-r from-emerald-400 to-green-400 shadow-lg shadow-emerald-500/50\" />\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Mobile Upload Modal - Slide up bottom sheet style */}\r\n          {showUploadModal && (\r\n            <div\r\n              className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end justify-center\"\r\n              onClick={() => setShowUploadModal(false)}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-lg bg-slate-900 rounded-t-3xl overflow-hidden animate-slide-up\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10\">\r\n                  <div className=\"w-12 h-1 bg-white/30 rounded-full mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-white text-center\">\r\n                    ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå\r\n                  </h3>\r\n                </div>\r\n\r\n                {/* Hidden file inputs */}\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  multiple\r\n                  accept=\"image/*,video/*,.jpg,.jpeg,.png,.gif,.webp,.mp4,.mov,.avi,.webm\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"hidden\"\r\n                />\r\n                <input\r\n                  ref={cameraInputRef}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  capture=\"environment\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"hidden\"\r\n                />\r\n                <input\r\n                  id=\"videoCaptureInput\"\r\n                  type=\"file\"\r\n                  accept=\"video/*\"\r\n                  capture=\"environment\"\r\n                  onChange={handleFileUpload}\r\n                  className=\"hidden\"\r\n                />\r\n\r\n                {/* Content */}\r\n                <div className=\"p-5 space-y-4\">\r\n                  {/* Upload options */}\r\n                  <div className=\"space-y-2\">\r\n                    {/* Gallery / Files */}\r\n                    <button\r\n                      onClick={() => fileInputRef.current?.click()}\r\n                      className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-white/10 transition-colors\"\r\n                    >\r\n                      <div className=\"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center\">\r\n                        <ImageIcon className=\"w-6 h-6 text-purple-400\" />\r\n                      </div>\r\n                      <div className=\"text-left\">\r\n                        <span className=\"text-white text-lg block\">‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</span>\r\n                        <span className=\"text-purple-200/60 text-sm\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</span>\r\n                      </div>\r\n                    </button>\r\n\r\n                    {/* Browse Files */}\r\n                    <button\r\n                      onClick={() => fileInputRef.current?.click()}\r\n                      className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-white/10 transition-colors\"\r\n                    >\r\n                      <div className=\"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center\">\r\n                        <FolderOpen className=\"w-6 h-6 text-emerald-400\" />\r\n                      </div>\r\n                      <div className=\"text-left\">\r\n                        <span className=\"text-white text-lg block\">‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÜ</span>\r\n                        <span className=\"text-emerald-200/60 text-sm\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</span>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n\r\n                  {/* Supported formats info */}\r\n                  <div className=\"flex flex-wrap items-center justify-center gap-2 pt-2\">\r\n                    <span className=\"text-purple-300/50 text-xs\">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:</span>\r\n                    <span className=\"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs\">JPG</span>\r\n                    <span className=\"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs\">PNG</span>\r\n                    <span className=\"px-2 py-1 rounded-full bg-purple-500/20 text-purple-300 text-xs\">GIF</span>\r\n                    <span className=\"px-2 py-1 rounded-full bg-pink-500/20 text-pink-300 text-xs\">MP4</span>\r\n                    <span className=\"px-2 py-1 rounded-full bg-pink-500/20 text-pink-300 text-xs\">MOV</span>\r\n                  </div>\r\n\r\n                  {/* Current folder indicator */}\r\n                  {(currentNestedFolder || activeFolder) && (\r\n                    <div className=\"flex items-center justify-center gap-2 p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20\">\r\n                      <FolderOpen className=\"w-4 h-4 text-emerald-400\" />\r\n                      <span className=\"text-emerald-300 text-sm\">\r\n                        ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà: <span className=\"font-medium\">{currentNestedFolder?.name || activeFolder?.name}</span>\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Cancel Button */}\r\n                <div className=\"p-5 pt-0\">\r\n                  <button\r\n                    onClick={() => setShowUploadModal(false)}\r\n                    className=\"w-full py-4 rounded-2xl bg-white/10 text-white font-medium text-lg hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Confirmation Modal */}\r\n          {confirmModal.isOpen && (\r\n            <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\">\r\n              {/* Backdrop */}\r\n              <div\r\n                className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\r\n                onClick={() => {\r\n                  if (confirmModal.onCancel) {\r\n                    confirmModal.onCancel();\r\n                  }\r\n                  closeConfirmModal();\r\n                }}\r\n              />\r\n\r\n              {/* Modal Content */}\r\n              <div className=\"relative w-full max-w-md transform transition-all animate-bounce-in\">\r\n                <div className=\"glass-card rounded-2xl sm:rounded-3xl overflow-hidden border border-white/20 shadow-2xl\">\r\n                  {/* Header with icon */}\r\n                  <div className={`p-6 sm:p-8 text-center ${confirmModal.type === 'delete'\r\n                    ? 'bg-gradient-to-br from-red-500/20 to-pink-500/20'\r\n                    : confirmModal.type === 'warning'\r\n                      ? 'bg-gradient-to-br from-amber-500/20 to-orange-500/20'\r\n                      : 'bg-gradient-to-br from-blue-500/20 to-cyan-500/20'\r\n                    }`}>\r\n                    {/* Icon */}\r\n                    <div className={`w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 rounded-full flex items-center justify-center ${confirmModal.type === 'delete'\r\n                      ? 'bg-gradient-to-br from-red-500 to-pink-600 shadow-lg shadow-red-500/40'\r\n                      : confirmModal.type === 'warning'\r\n                        ? 'bg-gradient-to-br from-amber-500 to-orange-600 shadow-lg shadow-amber-500/40'\r\n                        : 'bg-gradient-to-br from-blue-500 to-cyan-600 shadow-lg shadow-blue-500/40'\r\n                      }`}>\r\n                      {confirmModal.type === 'delete' ? (\r\n                        <Trash2 className=\"w-8 h-8 sm:w-10 sm:h-10 text-white\" />\r\n                      ) : confirmModal.type === 'warning' ? (\r\n                        <AlertCircle className=\"w-8 h-8 sm:w-10 sm:h-10 text-white\" />\r\n                      ) : (\r\n                        <Info className=\"w-8 h-8 sm:w-10 sm:h-10 text-white\" />\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Title */}\r\n                    <h3 className=\"text-responsive-xl sm:text-2xl font-bold text-white mb-2\">\r\n                      {confirmModal.title}\r\n                    </h3>\r\n\r\n                    {/* Message */}\r\n                    <p className=\"text-responsive-sm sm:text-base text-purple-200/80\">\r\n                      {confirmModal.message}\r\n                    </p>\r\n\r\n                    {/* Item name if provided */}\r\n                    {confirmModal.itemName && (\r\n                      <div className=\"mt-4 px-4 py-3 bg-white/10 rounded-xl border border-white/10\">\r\n                        <p className=\"text-responsive-sm text-purple-300/60 mb-1\">‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå:</p>\r\n                        <p className=\"text-responsive-base text-white font-medium truncate\">\r\n                          {confirmModal.itemName}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Warning note for delete */}\r\n                    {confirmModal.type === 'delete' && (\r\n                      <div className=\"mt-4 flex items-center justify-center gap-2 text-red-300/80\">\r\n                        <AlertCircle className=\"w-4 h-4\" />\r\n                        <span className=\"text-responsive-xs sm:text-sm\">‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Action Buttons */}\r\n                  <div className=\"p-4 sm:p-6 bg-slate-900/50 flex flex-col-reverse sm:flex-row gap-3\">\r\n                    {confirmModal.cancelText && (\r\n                      <button\r\n                        onClick={() => {\r\n                          if (confirmModal.onCancel) {\r\n                            confirmModal.onCancel();\r\n                          }\r\n                          closeConfirmModal();\r\n                        }}\r\n                        className=\"flex-1 px-6 py-3 sm:py-3.5 rounded-xl bg-white/10 hover:bg-white/20 text-white font-medium transition-all duration-200 btn-text border border-white/10\"\r\n                      >\r\n                        {confirmModal.cancelText}\r\n                      </button>\r\n                    )}\r\n                    <button\r\n                      onClick={() => confirmModal.onConfirm()}\r\n                      className={`flex-1 px-6 py-3 sm:py-3.5 rounded-xl font-medium transition-all duration-200 btn-text shadow-lg ${confirmModal.type === 'delete'\r\n                        ? 'bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-400 hover:to-pink-500 text-white shadow-red-500/30 hover:shadow-red-500/50'\r\n                        : confirmModal.type === 'warning'\r\n                          ? 'bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-400 hover:to-orange-500 text-white shadow-amber-500/30 hover:shadow-amber-500/50'\r\n                          : 'bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-400 hover:to-cyan-500 text-white shadow-blue-500/30 hover:shadow-blue-500/50'\r\n                        }`}\r\n                    >\r\n                      {confirmModal.confirmText || '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Share Modal */}\r\n          {showShareModal && shareFileId && (\r\n            <div\r\n              className=\"fixed inset-0 z-[60] bg-black/60 backdrop-blur-sm flex items-end justify-center\"\r\n              onClick={() => {\r\n                setShowShareModal(false);\r\n                setShareFileId(null);\r\n              }}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-lg bg-slate-900 rounded-t-3xl overflow-hidden animate-slide-up\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10\">\r\n                  <div className=\"w-12 h-1 bg-white/30 rounded-full mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-white text-center\">‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏ü‡∏•‡πå</h3>\r\n                </div>\r\n\r\n                {/* Share Options */}\r\n                <div className=\"p-5 space-y-2\">\r\n                  {/* LINE Share - Link Preview */}\r\n                  <button\r\n                    onClick={() => shareFile(shareFileId, 'line')}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-green-500/10 hover:bg-green-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center\">\r\n                      <Send className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1 text-left\">\r\n                      <span className=\"text-white text-lg block\">LINE (‡πÅ‡∏ä‡∏£‡πå‡∏•‡∏¥‡∏á‡∏Å‡πå)</span>\r\n                      <span className=\"text-white/50 text-sm\">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå LINE</span>\r\n                    </div>\r\n                  </button>\r\n\r\n                  {/* LINE Direct Send - Video plays inline */}\r\n                  {(files.find(f => f.id === shareFileId)?.type === 'video' ||\r\n                    files.find(f => f.id === shareFileId)?.type === 'clip') && (\r\n                      <div className=\"space-y-2\">\r\n                        {/* Group selector */}\r\n                        <div className=\"flex items-center gap-2 px-2\">\r\n                          <span className=\"text-white/60 text-sm\">‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Å‡∏•‡∏∏‡πà‡∏°:</span>\r\n                          <select\r\n                            value={selectedLineGroup || \"\"}\r\n                            onChange={(e) => setSelectedLineGroup(e.target.value)}\r\n                            className=\"flex-1 bg-slate-800 text-white text-sm rounded-lg px-3 py-2 border border-white/20 focus:border-green-500 focus:outline-none\"\r\n                          >\r\n                            {lineGroups.map((group) => (\r\n                              <option key={group.id} value={group.id}>\r\n                                {group.name}\r\n                              </option>\r\n                            ))}\r\n                          </select>\r\n                          <button\r\n                            onClick={() => setShowLineGroupModal(true)}\r\n                            className=\"p-2 rounded-lg bg-slate-800 hover:bg-slate-700 text-white/60 hover:text-white transition-colors\"\r\n                            title=\"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏°\"\r\n                          >\r\n                            <Plus className=\"w-5 h-5\" />\r\n                          </button>\r\n                        </div>\r\n\r\n                        {/* Send button */}\r\n                        <button\r\n                          onClick={() => {\r\n                            if (shareFileId && selectedLineGroup) {\r\n                              sendVideoToLineGroup(shareFileId, selectedLineGroup);\r\n                            }\r\n                          }}\r\n                          disabled={lineSendStatus === \"sending\" || !selectedLineGroup}\r\n                          className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-gradient-to-r from-green-500/20 to-emerald-500/20 hover:from-green-500/30 hover:to-emerald-500/30 transition-colors border border-green-500/30 disabled:opacity-50\"\r\n                        >\r\n                          <div className=\"w-12 h-12 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center\">\r\n                            {lineSendStatus === \"sending\" ? (\r\n                              <RefreshCw className=\"w-6 h-6 text-white animate-spin\" />\r\n                            ) : lineSendStatus === \"success\" ? (\r\n                              <Check className=\"w-6 h-6 text-white\" />\r\n                            ) : (\r\n                              <Film className=\"w-6 h-6 text-white\" />\r\n                            )}\r\n                          </div>\r\n                          <div className=\"flex-1 text-left\">\r\n                            <span className=\"text-white text-lg block\">\r\n                              {lineSendStatus === \"sending\" ? \"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...\" :\r\n                                lineSendStatus === \"success\" ? \"‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‚úÖ\" :\r\n                                  \"‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ï‡∏£‡∏á‡πÑ‡∏õ LINE ‚≠ê\"}\r\n                            </span>\r\n                            <span className=\"text-green-300 text-sm\">\r\n                              {lineSendStatus === \"sending\" ? \"‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...\" :\r\n                                lineSendStatus === \"success\" ? \"‡∏î‡∏π‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡πÄ‡∏•‡∏¢\" :\r\n                                  lineGroups.find(g => g.id === selectedLineGroup)?.name || \"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°\"}\r\n                            </span>\r\n                          </div>\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n\r\n                  {/* WhatsApp Share - with direct video link */}\r\n                  <button\r\n                    onClick={() => {\r\n                      const file = files.find(f => f.id === shareFileId);\r\n                      if (file) {\r\n                        // Use direct video URL for inline playback in WhatsApp/Telegram\r\n                        const directVideoUrl = `https://app.bjhbangkok.com${file.url}`;\r\n                        const text = encodeURIComponent(`üé¨ ${file.name}\\n\\n${directVideoUrl}`);\r\n                        window.open(`https://wa.me/?text=${text}`, '_blank');\r\n                      }\r\n                      setShowShareModal(false);\r\n                      setShareFileId(null);\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-emerald-500/10 hover:bg-emerald-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-emerald-500 flex items-center justify-center\">\r\n                      <MessageSquareQuote className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1 text-left\">\r\n                      <span className=\"text-white text-lg block\">WhatsApp</span>\r\n                      <span className=\"text-emerald-300 text-sm\">‡πÄ‡∏•‡πà‡∏ô inline ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</span>\r\n                    </div>\r\n                  </button>\r\n\r\n                  {/* Telegram Share - with direct video link */}\r\n                  <button\r\n                    onClick={() => {\r\n                      const file = files.find(f => f.id === shareFileId);\r\n                      if (file) {\r\n                        const directVideoUrl = `https://app.bjhbangkok.com${file.url}`;\r\n                        const text = encodeURIComponent(`üé¨ ${file.name}`);\r\n                        const url = encodeURIComponent(directVideoUrl);\r\n                        window.open(`https://t.me/share/url?url=${url}&text=${text}`, '_blank');\r\n                      }\r\n                      setShowShareModal(false);\r\n                      setShareFileId(null);\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-blue-500/10 hover:bg-blue-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center\">\r\n                      <Send className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1 text-left\">\r\n                      <span className=\"text-white text-lg block\">Telegram</span>\r\n                      <span className=\"text-blue-300 text-sm\">‡πÄ‡∏•‡πà‡∏ô inline ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</span>\r\n                    </div>\r\n                  </button>\r\n\r\n                  {/* Copy Link */}\r\n                  <button\r\n                    onClick={() => shareFile(shareFileId, 'copy')}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-purple-500/10 hover:bg-purple-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-purple-500 flex items-center justify-center\">\r\n                      <Copy className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <span className=\"text-white text-lg\">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå</span>\r\n                  </button>\r\n\r\n                  {/* Copy Direct Video URL */}\r\n                  {(files.find(f => f.id === shareFileId)?.type === 'video' ||\r\n                    files.find(f => f.id === shareFileId)?.type === 'clip') && (\r\n                      <button\r\n                        onClick={() => {\r\n                          const file = files.find(f => f.id === shareFileId);\r\n                          if (file) {\r\n                            const directVideoUrl = `https://app.bjhbangkok.com${file.url}`;\r\n                            navigator.clipboard.writeText(directVideoUrl);\r\n                            // Show toast or feedback\r\n                            alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Video URL ‡πÅ‡∏•‡πâ‡∏ß! üìã');\r\n                          }\r\n                          setShowShareModal(false);\r\n                          setShareFileId(null);\r\n                        }}\r\n                        className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-orange-500/10 hover:bg-orange-500/20 transition-colors\"\r\n                      >\r\n                        <div className=\"w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center\">\r\n                          <Film className=\"w-6 h-6 text-white\" />\r\n                        </div>\r\n                        <div className=\"flex-1 text-left\">\r\n                          <span className=\"text-white text-lg block\">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Video URL</span>\r\n                          <span className=\"text-orange-300 text-sm\">‡∏•‡∏¥‡∏á‡∏Å‡πå .mp4 ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</span>\r\n                        </div>\r\n                      </button>\r\n                    )}\r\n\r\n                  {/* Other Apps Share */}\r\n                  <button\r\n                    onClick={() => shareFile(shareFileId, 'native')}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-blue-500/10 hover:bg-blue-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center\">\r\n                      <Share2 className=\"w-6 h-6 text-white\" />\r\n                    </div>\r\n                    <span className=\"text-white text-lg\">‡πÅ‡∏≠‡∏õ‡∏≠‡∏∑‡πà‡∏ô‡πÜ</span>\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Cancel Button */}\r\n                <div className=\"p-5 pt-0\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowShareModal(false);\r\n                      setShareFileId(null);\r\n                    }}\r\n                    className=\"w-full py-4 rounded-2xl bg-white/10 text-white font-medium text-lg hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* LINE Send Video Modal */}\r\n          {showLineSendModal && shareFileId && (\r\n            <div\r\n              className=\"fixed inset-0 z-[70] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4\"\r\n              onClick={() => {\r\n                if (lineSendStatus !== \"sending\") {\r\n                  setShowLineSendModal(false);\r\n                  setLineSendUserId(\"\");\r\n                  setLineSendStatus(\"idle\");\r\n                  setLineSendError(\"\");\r\n                }\r\n              }}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-md bg-slate-900 rounded-3xl overflow-hidden\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10 bg-gradient-to-r from-green-500/20 to-emerald-500/20\">\r\n                  <h3 className=\"text-xl font-bold text-white text-center flex items-center justify-center gap-2\">\r\n                    <Film className=\"w-6 h-6 text-green-400\" />\r\n                    ‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ï‡∏£‡∏á‡πÑ‡∏õ LINE\r\n                  </h3>\r\n                  <p className=\"text-green-300/80 text-sm text-center mt-1\">‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ LINE!</p>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-5 space-y-4\">\r\n                  {lineSendStatus === \"success\" ? (\r\n                    <div className=\"text-center py-8\">\r\n                      <div className=\"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-4\">\r\n                        <Check className=\"w-10 h-10 text-green-400\" />\r\n                      </div>\r\n                      <p className=\"text-green-400 text-xl font-semibold\">‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</p>\r\n                      <p className=\"text-white/60 text-sm mt-2\">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á LINE ‡πÅ‡∏•‡πâ‡∏ß</p>\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      {/* Video Preview */}\r\n                      <div className=\"bg-black/30 rounded-xl p-3 flex items-center gap-3\">\r\n                        <div className=\"w-16 h-16 rounded-lg bg-purple-500/20 flex items-center justify-center overflow-hidden\">\r\n                          {files.find(f => f.id === shareFileId)?.thumbnail ? (\r\n                            <img\r\n                              src={files.find(f => f.id === shareFileId)?.thumbnail}\r\n                              alt=\"Video thumbnail\"\r\n                              className=\"w-full h-full object-cover\"\r\n                            />\r\n                          ) : (\r\n                            <Film className=\"w-8 h-8 text-purple-400\" />\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"text-white font-medium truncate\">\r\n                            {files.find(f => f.id === shareFileId)?.name}\r\n                          </p>\r\n                          <p className=\"text-white/50 text-sm\">\r\n                            {files.find(f => f.id === shareFileId)?.size}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* LINE User ID Input */}\r\n                      <div>\r\n                        <label className=\"block text-white/80 text-sm font-medium mb-2\">\r\n                          LINE User ID ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={lineSendUserId}\r\n                          onChange={(e) => setLineSendUserId(e.target.value)}\r\n                          placeholder=\"U1234567890abcdef...\"\r\n                          className=\"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-green-500 focus:ring-1 focus:ring-green-500\"\r\n                          disabled={lineSendStatus === \"sending\"}\r\n                        />\r\n                        <p className=\"text-white/40 text-xs mt-2\">\r\n                          üí° ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° LINE Official Account ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô\r\n                        </p>\r\n                      </div>\r\n\r\n                      {/* Error Message */}\r\n                      {lineSendError && (\r\n                        <div className=\"bg-red-500/20 border border-red-500/30 rounded-xl p-3 flex items-center gap-2\">\r\n                          <AlertCircle className=\"w-5 h-5 text-red-400 flex-shrink-0\" />\r\n                          <p className=\"text-red-300 text-sm\">{lineSendError}</p>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Buttons */}\r\n                      <div className=\"flex gap-3 pt-2\">\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowLineSendModal(false);\r\n                            setLineSendUserId(\"\");\r\n                            setLineSendStatus(\"idle\");\r\n                            setLineSendError(\"\");\r\n                          }}\r\n                          disabled={lineSendStatus === \"sending\"}\r\n                          className=\"flex-1 py-3 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors disabled:opacity-50\"\r\n                        >\r\n                          ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                        </button>\r\n                        <button\r\n                          onClick={() => sendVideoToLineUser(shareFileId)}\r\n                          disabled={lineSendStatus === \"sending\" || !lineSendUserId.trim()}\r\n                          className=\"flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-medium hover:from-green-600 hover:to-emerald-600 transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\r\n                        >\r\n                          {lineSendStatus === \"sending\" ? (\r\n                            <>\r\n                              <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                              ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <Send className=\"w-5 h-5\" />\r\n                              ‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠\r\n                            </>\r\n                          )}\r\n                        </button>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* LINE Group Management Modal */}\r\n          {showLineGroupModal && (\r\n            <div\r\n              className=\"fixed inset-0 z-[80] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4\"\r\n              onClick={() => setShowLineGroupModal(false)}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-md bg-slate-900 rounded-3xl overflow-hidden\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10 bg-gradient-to-r from-green-500/20 to-emerald-500/20\">\r\n                  <h3 className=\"text-xl font-bold text-white text-center flex items-center justify-center gap-2\">\r\n                    <Send className=\"w-6 h-6 text-green-400\" />\r\n                    ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏° LINE\r\n                  </h3>\r\n                  <p className=\"text-green-300/80 text-sm text-center mt-1\">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</p>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-5 space-y-4 max-h-96 overflow-y-auto custom-scrollbar\">\r\n                  {/* Existing Groups */}\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"block text-white/80 text-sm font-medium\">‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ</label>\r\n                    {lineGroups.length === 0 ? (\r\n                      <p className=\"text-white/40 text-sm\">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡∏∏‡πà‡∏°</p>\r\n                    ) : (\r\n                      lineGroups.map((group) => (\r\n                        <div key={group.id} className=\"flex items-center gap-2 bg-white/5 rounded-xl p-3\">\r\n                          <div className=\"flex-1\">\r\n                            <p className=\"text-white font-medium\">{group.name}</p>\r\n                            <p className=\"text-white/40 text-xs truncate\">{group.id}</p>\r\n                          </div>\r\n                          <button\r\n                            onClick={() => removeLineGroup(group.id)}\r\n                            className=\"p-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-colors\"\r\n                            title=\"‡∏•‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* How to get Group ID */}\r\n                  <div className=\"bg-green-500/10 border border-green-500/20 rounded-xl p-4 space-y-2\">\r\n                    <p className=\"text-green-400 font-medium flex items-center gap-2\">\r\n                      <Info className=\"w-4 h-4\" />\r\n                      ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤ Group ID\r\n                    </p>\r\n                    <ol className=\"text-white/70 text-sm space-y-1 list-decimal list-inside\">\r\n                      <li>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ LINE ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</li>\r\n                      <li>‡πÄ‡∏ä‡∏¥‡∏ç Bot ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</li>\r\n                      <li>‡∏û‡∏¥‡∏°‡∏û‡πå <code className=\"bg-white/10 px-1 rounded\">!groupid</code> ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°</li>\r\n                      <li>Bot ‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö Group ID ‡∏°‡∏≤‡πÉ‡∏´‡πâ</li>\r\n                      <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å ID ‡∏°‡∏≤‡πÉ‡∏™‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</li>\r\n                    </ol>\r\n                  </div>\r\n\r\n                  {/* Add New Group */}\r\n                  <div className=\"border-t border-white/10 pt-4 space-y-3\">\r\n                    <label className=\"block text-white/80 text-sm font-medium\">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newGroupName}\r\n                      onChange={(e) => setNewGroupName(e.target.value)}\r\n                      placeholder=\"‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏∏‡πà‡∏° (‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏µ‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î)\"\r\n                      className=\"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-green-500\"\r\n                    />\r\n                    <input\r\n                      type=\"text\"\r\n                      value={newGroupId}\r\n                      onChange={(e) => setNewGroupId(e.target.value)}\r\n                      placeholder=\"Group ID (‡πÄ‡∏ä‡πà‡∏ô C31a793e94485a393...)\"\r\n                      className=\"w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/40 focus:outline-none focus:border-green-500\"\r\n                    />\r\n                    <button\r\n                      onClick={addLineGroup}\r\n                      disabled={!newGroupName.trim() || !newGroupId.trim()}\r\n                      className=\"w-full py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold hover:from-green-400 hover:to-emerald-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                    >\r\n                      <Plus className=\"w-5 h-5\" />\r\n                      ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-4 border-t border-white/10\">\r\n                  <button\r\n                    onClick={() => setShowLineGroupModal(false)}\r\n                    className=\"w-full py-3 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    ‡∏õ‡∏¥‡∏î\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Files Grid */}\r\n          {isLoading ? (\r\n            <div className=\"flex items-center justify-center h-96\">\r\n              <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent\" />\r\n            </div>\r\n          ) : filteredFiles.length === 0 ? (\r\n            null\r\n          ) : viewMode === \"list\" ? (\r\n            // List View - Mobile friendly, no header\r\n            <div className=\"glass-card rounded-2xl overflow-hidden\">\r\n              <table className=\"w-full\">\r\n                <tbody>\r\n                  {filteredFiles.map((file, index) => (\r\n                    <tr\r\n                      key={file.id}\r\n                      className={`border-b border-purple-500/10 hover:bg-white/5 transition-colors ${selectedFiles.includes(file.id) ? 'bg-purple-500/10' : ''}`}\r\n                      onTouchStart={() => {\r\n                        fileLongPressRef.current = setTimeout(() => {\r\n                          setIsFileSelectionMode(true);\r\n                          if (!selectedFiles.includes(file.id)) {\r\n                            toggleSelect(file.id);\r\n                          }\r\n                        }, 500);\r\n                      }}\r\n                      onTouchEnd={() => {\r\n                        if (fileLongPressRef.current) {\r\n                          clearTimeout(fileLongPressRef.current);\r\n                          fileLongPressRef.current = null;\r\n                        }\r\n                      }}\r\n                      onTouchMove={() => {\r\n                        if (fileLongPressRef.current) {\r\n                          clearTimeout(fileLongPressRef.current);\r\n                          fileLongPressRef.current = null;\r\n                        }\r\n                      }}\r\n                      onContextMenu={(e) => {\r\n                        e.preventDefault();\r\n                        setIsFileSelectionMode(true);\r\n                        if (!selectedFiles.includes(file.id)) {\r\n                          toggleSelect(file.id);\r\n                        }\r\n                      }}\r\n                    >\r\n                      {/* Checkbox column - only show in selection mode */}\r\n                      {isFileSelectionMode && (\r\n                        <td className=\"p-1 sm:p-2 text-center\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={selectedFiles.includes(file.id)}\r\n                            onChange={() => toggleSelect(file.id)}\r\n                            className=\"w-4 h-4 rounded cursor-pointer\"\r\n                          />\r\n                        </td>\r\n                      )}\r\n                      <td className=\"p-1 sm:p-2\">\r\n                        <div\r\n                          className=\"relative w-10 h-10 sm:w-12 sm:h-10 rounded-lg overflow-hidden cursor-pointer hover:scale-110 transition-transform mx-auto\"\r\n                          onClick={() => openLightbox(index)}\r\n                        >\r\n                          <ThumbnailImage\r\n                            file={file}\r\n                            alt={file.name}\r\n                            className=\"w-full h-full object-cover\"\r\n                          />\r\n                          {(file.type === \"video\" || file.type === \"clip\") && (\r\n                            <div className=\"absolute inset-0 flex items-center justify-center bg-black/50\">\r\n                              <Play className=\"w-3 h-3 text-white\" />\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"p-1 sm:p-2\">\r\n                        <div className=\"font-medium text-white text-xs sm:text-sm truncate max-w-[100px] sm:max-w-[180px]\">\r\n                          {file.name}\r\n                        </div>\r\n                        <div className=\"flex gap-0.5 mt-0.5 flex-wrap\">\r\n                          {file.tags.slice(0, 2).map((tag) => (\r\n                            <span\r\n                              key={tag}\r\n                              className=\"px-1 py-0 bg-purple-500/20 text-purple-300 text-[10px] rounded-full\"\r\n                            >\r\n                              {tag}\r\n                            </span>\r\n                          ))}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"p-1 sm:p-2\">\r\n                        <div className=\"flex items-center justify-center gap-0.5 sm:gap-1\">\r\n                          <button\r\n                            onClick={() => handleDownloadFile(file.id)}\r\n                            className=\"p-1 sm:p-1.5 rounded-lg bg-white/10 text-purple-300 hover:bg-white/20 transition-colors flex items-center justify-center\"\r\n                            title=\"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î\"\r\n                          >\r\n                            <Download className=\"w-3.5 h-3.5\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => {\r\n                              setShareFileId(file.id);\r\n                              setShowShareModal(true);\r\n                            }}\r\n                            className=\"p-1 sm:p-1.5 rounded-lg bg-white/10 text-purple-300 hover:bg-white/20 transition-colors flex items-center justify-center\"\r\n                            title=\"‡πÅ‡∏ä‡∏£‡πå\"\r\n                          >\r\n                            <Share2 className=\"w-3.5 h-3.5\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteFile(file.id)}\r\n                            className=\"p-1 sm:p-1.5 rounded-lg bg-white/10 text-red-400 hover:bg-red-500/20 transition-colors flex items-center justify-center\"\r\n                            title=\"‡∏•‡∏ö\"\r\n                          >\r\n                            <Trash2 className=\"w-3.5 h-3.5\" />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          ) : (\r\n            // Samsung Gallery Style - 4 columns grid\r\n            <div className=\"grid grid-cols-4 gap-0.5\">\r\n              {filteredFiles.map((file, index) => (\r\n                <div\r\n                  key={file.id}\r\n                  className={`relative aspect-square overflow-hidden cursor-pointer ${selectedFiles.includes(file.id) ? 'ring-2 ring-white ring-inset' : ''}`}\r\n                  onClick={() => {\r\n                    // In selection mode: toggle selection\r\n                    // Not in selection mode: open lightbox to view\r\n                    if (isFileSelectionMode) {\r\n                      toggleSelect(file.id);\r\n                    } else {\r\n                      openLightbox(index);\r\n                    }\r\n                  }}\r\n                  onTouchStart={() => {\r\n                    // Long press to enter selection mode\r\n                    fileLongPressRef.current = setTimeout(() => {\r\n                      setIsFileSelectionMode(true);\r\n                      if (!selectedFiles.includes(file.id)) {\r\n                        toggleSelect(file.id);\r\n                      }\r\n                    }, 500);\r\n                  }}\r\n                  onTouchEnd={() => {\r\n                    if (fileLongPressRef.current) {\r\n                      clearTimeout(fileLongPressRef.current);\r\n                      fileLongPressRef.current = null;\r\n                    }\r\n                  }}\r\n                  onTouchMove={() => {\r\n                    if (fileLongPressRef.current) {\r\n                      clearTimeout(fileLongPressRef.current);\r\n                      fileLongPressRef.current = null;\r\n                    }\r\n                  }}\r\n                  onContextMenu={(e) => {\r\n                    e.preventDefault();\r\n                    setIsFileSelectionMode(true);\r\n                    if (!selectedFiles.includes(file.id)) {\r\n                      toggleSelect(file.id);\r\n                    }\r\n                  }}\r\n                >\r\n                  {/* Image */}\r\n                  <ThumbnailImage\r\n                    file={file}\r\n                    alt={file.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n\r\n                  {/* Selection Checkbox - visible in selection mode or when selected */}\r\n                  {(isFileSelectionMode || selectedFiles.includes(file.id)) && (\r\n                    <div className=\"absolute top-2 left-2\">\r\n                      <div\r\n                        className={`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${selectedFiles.includes(file.id)\r\n                          ? 'bg-white border-white'\r\n                          : 'border-white/70 bg-black/30'\r\n                          }`}\r\n                      >\r\n                        {selectedFiles.includes(file.id) && (\r\n                          <Check className=\"w-4 h-4 text-black\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Video duration badge */}\r\n                  {file.duration && (\r\n                    <div className=\"absolute bottom-1 right-1 px-1.5 py-0.5 bg-black/70 rounded text-white text-xs font-medium\">\r\n                      {file.duration}\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Play icon for videos */}\r\n                  {(file.type === \"video\" || file.type === \"clip\") && !file.duration && (\r\n                    <div className=\"absolute bottom-1 right-1\">\r\n                      <Play className=\"w-4 h-4 text-white drop-shadow-lg\" fill=\"white\" />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* File Selection Mode Bottom Action Bar - Slide up animation */}\r\n          <div\r\n            className={`fixed bottom-0 left-0 right-0 bg-black border-t border-white/10 z-50 safe-area-bottom transform transition-transform duration-300 ease-out ${isFileSelectionMode && !showShareModal ? 'translate-y-0' : 'translate-y-full'\r\n              }`}\r\n          >\r\n            <div className=\"flex items-center justify-around py-3 px-4\">\r\n              {/* Download */}\r\n              <button\r\n                onClick={() => {\r\n                  if (selectedFiles.length > 0) {\r\n                    selectedFiles.forEach(id => handleDownloadFile(id));\r\n                  }\r\n                }}\r\n                className=\"flex flex-col items-center gap-1 px-4 py-2\"\r\n              >\r\n                <Download className=\"w-6 h-6 text-white\" />\r\n                <span className=\"text-white text-xs\">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</span>\r\n              </button>\r\n\r\n              {/* Share */}\r\n              <button\r\n                onClick={() => {\r\n                  if (selectedFiles.length > 0) {\r\n                    setShareFileId(selectedFiles[0]);\r\n                    setShowShareModal(true);\r\n                  }\r\n                }}\r\n                className=\"flex flex-col items-center gap-1 px-4 py-2\"\r\n              >\r\n                <Share2 className=\"w-6 h-6 text-white\" />\r\n                <span className=\"text-white text-xs\">‡πÅ‡∏ä‡∏£‡πå</span>\r\n              </button>\r\n\r\n              {/* Delete */}\r\n              <button\r\n                onClick={() => {\r\n                  if (selectedFiles.length > 0) {\r\n                    setConfirmModal({\r\n                      isOpen: true,\r\n                      type: 'delete',\r\n                      title: '‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å',\r\n                      message: `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö ${selectedFiles.length} ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,\r\n                      onConfirm: () => {\r\n                        selectedFiles.forEach(id => handleDeleteFile(id));\r\n                        setSelectedFiles([]);\r\n                        setIsFileSelectionMode(false);\r\n                        closeConfirmModal();\r\n                      },\r\n                      confirmText: '‡∏•‡∏ö',\r\n                      cancelText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',\r\n                    });\r\n                  }\r\n                }}\r\n                className=\"flex flex-col items-center gap-1 px-4 py-2\"\r\n              >\r\n                <Trash2 className=\"w-6 h-6 text-white\" />\r\n                <span className=\"text-white text-xs\">‡∏•‡∏ö</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Lightbox Modal */}\r\n          {showLightbox && filteredFiles[lightboxIndex] && (\r\n            <div\r\n              className=\"fixed inset-0 z-50 bg-black/95 flex items-center justify-center\"\r\n              onClick={() => setShowLightbox(false)}\r\n            >\r\n              <div\r\n                className=\"relative w-full h-full flex items-center justify-center p-4\"\r\n                onClick={(e) => e.stopPropagation()}\r\n                onTouchStart={(e) => {\r\n                  const touch = e.touches[0];\r\n                  (e.currentTarget as HTMLDivElement).dataset.touchStartX = String(touch.clientX);\r\n                }}\r\n                onTouchEnd={(e) => {\r\n                  const touchStartX = parseFloat((e.currentTarget as HTMLDivElement).dataset.touchStartX || '0');\r\n                  const touchEndX = e.changedTouches[0].clientX;\r\n                  const diff = touchStartX - touchEndX;\r\n\r\n                  if (Math.abs(diff) > 50) {\r\n                    if (diff > 0) {\r\n                      // Swipe left - next\r\n                      setLightboxIndex((prev) => prev < filteredFiles.length - 1 ? prev + 1 : 0);\r\n                    } else {\r\n                      // Swipe right - previous\r\n                      setLightboxIndex((prev) => prev > 0 ? prev - 1 : filteredFiles.length - 1);\r\n                    }\r\n                  }\r\n                }}\r\n              >\r\n                {/* Top Right Action Buttons */}\r\n                <div className=\"absolute top-4 right-4 flex items-center gap-2 z-50\">\r\n                  {/* Download Button */}\r\n                  <button\r\n                    onClick={() => handleDownloadFile(filteredFiles[lightboxIndex].id)}\r\n                    className=\"p-3 rounded-full bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:from-blue-400 hover:to-cyan-400 transition-colors\"\r\n                    title=\"‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î\"\r\n                  >\r\n                    <Download className=\"w-6 h-6\" />\r\n                  </button>\r\n\r\n                  {/* Share Button */}\r\n                  <button\r\n                    onClick={() => {\r\n                      setShareFileId(filteredFiles[lightboxIndex].id);\r\n                      setShowShareModal(true);\r\n                    }}\r\n                    className=\"p-3 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-400 hover:to-emerald-400 transition-colors\"\r\n                    title=\"‡πÅ‡∏ä‡∏£‡πå\"\r\n                  >\r\n                    <Share2 className=\"w-6 h-6\" />\r\n                  </button>\r\n\r\n                  {/* Delete Button */}\r\n                  <button\r\n                    onClick={() => {\r\n                      if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {\r\n                        handleDeleteFile(filteredFiles[lightboxIndex].id);\r\n                        // Close lightbox if no more files or move to next\r\n                        if (filteredFiles.length <= 1) {\r\n                          setShowLightbox(false);\r\n                        } else if (lightboxIndex >= filteredFiles.length - 1) {\r\n                          setLightboxIndex(lightboxIndex - 1);\r\n                        }\r\n                      }\r\n                    }}\r\n                    className=\"p-3 rounded-full bg-gradient-to-r from-red-500 to-pink-500 text-white hover:from-red-400 hover:to-pink-400 transition-colors\"\r\n                    title=\"‡∏•‡∏ö\"\r\n                  >\r\n                    <Trash2 className=\"w-6 h-6\" />\r\n                  </button>\r\n\r\n                  {/* Close Button */}\r\n                  <button\r\n                    onClick={() => setShowLightbox(false)}\r\n                    className=\"p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    <X className=\"w-6 h-6\" />\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Navigation */}\r\n                <button\r\n                  onClick={() =>\r\n                    setLightboxIndex((prev) =>\r\n                      prev > 0 ? prev - 1 : filteredFiles.length - 1\r\n                    )\r\n                  }\r\n                  className=\"absolute left-4 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-50\"\r\n                >\r\n                  <ChevronLeft className=\"w-8 h-8\" />\r\n                </button>\r\n                <button\r\n                  onClick={() =>\r\n                    setLightboxIndex((prev) =>\r\n                      prev < filteredFiles.length - 1 ? prev + 1 : 0\r\n                    )\r\n                  }\r\n                  className=\"absolute right-4 p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-colors z-50\"\r\n                >\r\n                  <ChevronRight className=\"w-8 h-8\" />\r\n                </button>\r\n\r\n                {/* Main Content */}\r\n                <div className=\"max-w-6xl max-h-[85vh] rounded-2xl overflow-hidden shadow-2xl\">\r\n                  {(filteredFiles[lightboxIndex].type === 'video' || filteredFiles[lightboxIndex].type === 'clip') ? (\r\n                    <video\r\n                      src={filteredFiles[lightboxIndex].url}\r\n                      poster={filteredFiles[lightboxIndex].thumbnail !== VIDEO_PLACEHOLDER ? filteredFiles[lightboxIndex].thumbnail : undefined}\r\n                      controls\r\n                      autoPlay\r\n                      className=\"max-w-full max-h-[85vh] object-contain\"\r\n                    />\r\n                  ) : (\r\n                    <img\r\n                      src={filteredFiles[lightboxIndex].thumbnail}\r\n                      alt={filteredFiles[lightboxIndex].name}\r\n                      className=\"max-w-full max-h-[85vh] object-contain\"\r\n                    />\r\n                  )}\r\n                </div>\r\n\r\n                {/* Info Bar */}\r\n                <div className=\"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/90 to-transparent\">\r\n                  <div className=\"max-w-4xl mx-auto\">\r\n                    <h2 className=\"text-2xl font-bold text-white mb-2\">\r\n                      {filteredFiles[lightboxIndex].name}\r\n                    </h2>\r\n                    <div className=\"flex items-center gap-4 text-white/70\">\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <Calendar className=\"w-4 h-4\" />\r\n                        {filteredFiles[lightboxIndex].date}\r\n                      </span>\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <HardDrive className=\"w-4 h-4\" />\r\n                        {filteredFiles[lightboxIndex].size}\r\n                      </span>\r\n                      <span className=\"flex items-center gap-2\">\r\n                        <Eye className=\"w-4 h-4\" />\r\n                        {formatNumber(filteredFiles[lightboxIndex].views)} views\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex gap-2 mt-3\">\r\n                      {filteredFiles[lightboxIndex].tags.map((tag) => (\r\n                        <span\r\n                          key={tag}\r\n                          className=\"px-3 py-1 bg-white/20 rounded-full text-white text-sm\"\r\n                        >\r\n                          #{tag}\r\n                        </span>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Counter */}\r\n                <div className=\"absolute top-4 left-4 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full text-white font-medium\">\r\n                  {lightboxIndex + 1} / {filteredFiles.length}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Folder Action Sheet - Samsung Gallery Style */}\r\n          {folderActionSheet.isOpen && (\r\n            <div\r\n              className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end justify-center\"\r\n              onClick={() => setFolderActionSheet({ isOpen: false, folderId: null, folderName: '' })}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-lg bg-slate-900 rounded-t-3xl overflow-hidden animate-slide-up\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10\">\r\n                  <div className=\"w-12 h-1 bg-white/30 rounded-full mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-white text-center\">\r\n                    {folderActionSheet.folderName}\r\n                  </h3>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"p-4 space-y-2\">\r\n                  {/* Edit Name */}\r\n                  <button\r\n                    onClick={() => {\r\n                      const folder = displayFolders.find(f => f.id === folderActionSheet.folderId);\r\n                      if (folder) {\r\n                        handleStartEditSubFolder(folder);\r\n                      }\r\n                      setFolderActionSheet({ isOpen: false, folderId: null, folderName: '' });\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-white/10 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center\">\r\n                      <Pencil className=\"w-6 h-6 text-blue-400\" />\r\n                    </div>\r\n                    <span className=\"text-white text-lg\">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠</span>\r\n                  </button>\r\n\r\n                  {/* Delete */}\r\n                  <button\r\n                    onClick={() => {\r\n                      if (folderActionSheet.folderId) {\r\n                        handleDeleteSubFolder(folderActionSheet.folderId);\r\n                      }\r\n                      setFolderActionSheet({ isOpen: false, folderId: null, folderName: '' });\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-red-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center\">\r\n                      <Trash2 className=\"w-6 h-6 text-red-400\" />\r\n                    </div>\r\n                    <span className=\"text-red-400 text-lg\">‡∏•‡∏ö‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</span>\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Cancel Button */}\r\n                <div className=\"p-4 pt-0\">\r\n                  <button\r\n                    onClick={() => setFolderActionSheet({ isOpen: false, folderId: null, folderName: '' })}\r\n                    className=\"w-full py-4 rounded-2xl bg-white/10 text-white font-medium text-lg hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Create Folder Bottom Sheet */}\r\n          {isCreatingSubFolder && (\r\n            <div\r\n              className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end justify-center\"\r\n              onClick={() => setIsCreatingSubFolder(false)}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-lg bg-slate-900 rounded-t-3xl overflow-hidden animate-slide-up\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10\">\r\n                  <div className=\"w-12 h-1 bg-white/30 rounded-full mx-auto mb-4\" />\r\n                  <h3 className=\"text-lg font-semibold text-white text-center\">\r\n                    ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà\r\n                  </h3>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"p-5 space-y-4\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={subFolderDraftName}\r\n                    onChange={(e) => setSubFolderDraftName(e.target.value)}\r\n                    placeholder=\"‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà\"\r\n                    className=\"w-full px-4 py-4 rounded-2xl bg-white/10 border border-white/20 text-white placeholder-purple-200/50 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all text-lg\"\r\n                    autoFocus\r\n                  />\r\n                  <button\r\n                    onClick={() => {\r\n                      handleCreateSubFolder();\r\n                    }}\r\n                    className=\"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold text-lg hover:from-green-400 hover:to-emerald-500 shadow-lg shadow-green-500/30 hover:shadow-green-500/50 transition-all duration-200\"\r\n                  >\r\n                    ‡∏™‡∏£‡πâ‡∏≤‡∏á\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Cancel Button */}\r\n                <div className=\"p-5 pt-0\">\r\n                  <button\r\n                    onClick={() => setIsCreatingSubFolder(false)}\r\n                    className=\"w-full py-4 rounded-2xl bg-white/10 text-white font-medium text-lg hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* File Action Sheet - Desktop Web Usage */}\r\n          {fileActionSheet.isOpen && (\r\n            <div\r\n              className=\"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end md:items-center justify-center\"\r\n              onClick={() => setFileActionSheet({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 })}\r\n            >\r\n              <div\r\n                className=\"w-full max-w-lg bg-slate-900 rounded-t-3xl md:rounded-3xl overflow-hidden animate-slide-up\"\r\n                onClick={(e) => e.stopPropagation()}\r\n              >\r\n                {/* Header */}\r\n                <div className=\"p-5 border-b border-white/10\">\r\n                  <div className=\"w-12 h-1 bg-white/30 rounded-full mx-auto mb-4 md:hidden\" />\r\n                  <h3 className=\"text-lg font-semibold text-white text-center truncate px-4\">\r\n                    {fileActionSheet.fileName}\r\n                  </h3>\r\n                </div>\r\n\r\n                {/* Actions */}\r\n                <div className=\"p-4 space-y-2\">\r\n                  {/* View/Open */}\r\n                  <button\r\n                    onClick={() => {\r\n                      if (fileActionSheet.fileIndex >= 0) {\r\n                        openLightbox(fileActionSheet.fileIndex);\r\n                      }\r\n                      setFileActionSheet({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 });\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-white/10 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center\">\r\n                      <Eye className=\"w-6 h-6 text-purple-400\" />\r\n                    </div>\r\n                    <span className=\"text-white text-lg\">‡∏î‡∏π‡πÑ‡∏ü‡∏•‡πå</span>\r\n                  </button>\r\n\r\n                  {/* Download */}\r\n                  <button\r\n                    onClick={() => {\r\n                      if (fileActionSheet.fileId) {\r\n                        handleDownloadFile(fileActionSheet.fileId);\r\n                      }\r\n                      setFileActionSheet({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 });\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-white/10 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center\">\r\n                      <Download className=\"w-6 h-6 text-blue-400\" />\r\n                    </div>\r\n                    <span className=\"text-white text-lg\">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</span>\r\n                  </button>\r\n\r\n                  {/* Select */}\r\n                  <button\r\n                    onClick={() => {\r\n                      if (fileActionSheet.fileId) {\r\n                        setIsFileSelectionMode(true);\r\n                        if (!selectedFiles.includes(fileActionSheet.fileId)) {\r\n                          toggleSelect(fileActionSheet.fileId);\r\n                        }\r\n                      }\r\n                      setFileActionSheet({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 });\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-white/10 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-emerald-500/20 flex items-center justify-center\">\r\n                      <Check className=\"w-6 h-6 text-emerald-400\" />\r\n                    </div>\r\n                    <span className=\"text-white text-lg\">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>\r\n                  </button>\r\n\r\n                  {/* Delete */}\r\n                  <button\r\n                    onClick={() => {\r\n                      if (fileActionSheet.fileId) {\r\n                        handleDeleteFile(fileActionSheet.fileId);\r\n                      }\r\n                      setFileActionSheet({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 });\r\n                    }}\r\n                    className=\"w-full flex items-center gap-4 px-5 py-4 rounded-2xl bg-white/5 hover:bg-red-500/20 transition-colors\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center\">\r\n                      <Trash2 className=\"w-6 h-6 text-red-400\" />\r\n                    </div>\r\n                    <span className=\"text-red-400 text-lg\">‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå</span>\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Cancel Button */}\r\n                <div className=\"p-4 pt-0\">\r\n                  <button\r\n                    onClick={() => setFileActionSheet({ isOpen: false, fileId: null, fileName: '', fileIndex: -1 })}\r\n                    className=\"w-full py-4 rounded-2xl bg-white/10 text-white font-medium text-lg hover:bg-white/20 transition-colors\"\r\n                  >\r\n                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* File Progress Container - Upload/Download animations */}\r\n        <FileProgressContainer\r\n          items={progressItems}\r\n          onCancel={cancelTransfer}\r\n          onDismiss={dismissItem}\r\n          onClearAll={clearCompleted}\r\n          position=\"bottom-right\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AllFilesGalleryPage;\r\n"],"names":[],"mappings":"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"}}]
}